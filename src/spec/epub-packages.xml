<?xml version="1.0" encoding="UTF-8"?>
<?xml-model href="../../util/docbook/schema/docbookspec.rng" type="application/xml" schematypens="http://relaxng.org/ns/structure/1.0"?>
<?xml-model href="../../util/docbook/schema/docbookspec.sch" type="application/xml" schematypens="http://purl.oclc.org/dsdl/schematron"?>
<?xml-model href="../../util/docbook/schema/docbook.sch" type="application/xml" schematypens="http://purl.oclc.org/dsdl/schematron"?>
<book xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"
    xmlns:xi="http://www.w3.org/2001/XInclude" version="5.1" xmlns:epub="http://www.idpf.org/2011/epub" xml:lang="en">
    <title>EPUB Packages 3.1</title>

    <info>
        <releaseinfo>Editor's Draft</releaseinfo>
        <pubdate>26 April 2016</pubdate>
        <printhistory>
            <formalpara>
                <title>This version</title>
                <para><link xlink:href="http://www.idpf.org/epub/31/spec/epub-packages-20160426.html"/></para>
            </formalpara>
            <formalpara>
                <title>Latest version</title>
                <para><link xlink:href="http://www.idpf.org/epub3/latest/packages"/></para>
            </formalpara>
            <formalpara>
                <title>Previous version</title>
                <para><link xlink:href="http://www.idpf.org/epub/301/spec/epub-publications-20160130.html"/></para>
            </formalpara>
            <formalpara>
                <title>Previous recommendation</title>
                <para><link xlink:href="http://www.idpf.org/epub/301/spec/epub-publications-20140626.html"/></para>
            </formalpara>
        </printhistory>
        <releaseinfo role="errata"><link xlink:href="./epub-packages-errata/">Errata</link></releaseinfo>
        <releaseinfo role="history"><link
                xlink:href="https://github.com/IDPF/epub-revision/commits/master/src/spec/epub-packages.xml">Changes to this
                document</link></releaseinfo>
        <releaseinfo role="formats">The complete EPUB 3.1 specification is also available for download as an <link
                xlink:href="http://www.idpf.org/epub/31/epub31.epub">EPUB Publication</link>.</releaseinfo>
        <xi:include href="./share/copyright.xml"/>
        <xi:include href="./share/legalnotice.xml"/>
        <authorgroup role="current">
            <editor>
                <personname>Markus Gylling</personname>
                <affiliation>
                    <org>
                        <orgname>International Digital Publishing Forum (IDPF)</orgname>
                    </org>
                </affiliation>
            </editor>
            <editor>
                <personname>William McCoy</personname>
                <affiliation>
                    <org>
                        <orgname>International Digital Publishing Forum (IDPF)</orgname>
                    </org>
                </affiliation>
            </editor>
            <editor>
                <personname>Matt Garrish</personname>
                <affiliation>
                    <org>
                        <orgname>Invited Expert</orgname>
                    </org>
                </affiliation>
            </editor>
            <editor>
                <personname>Takeshi Kanai</personname>
                <affiliation>
                    <org>
                        <orgname>Sony</orgname>
                    </org>
                </affiliation>
            </editor>
        </authorgroup>
        <abstract>
            <para>EPUB Packages 3.1 defines package semantics and conformance requirements.</para>
        </abstract>
    </info>

    <xi:include href="share/status.xml"/>

    <chapter xml:id="sec-overview">
        <title>Overview</title>

        <section xml:id="sec-overview-purpose-and-scope" conformance="informative">
            <title>Purpose and Scope</title>

            <para>This specification, EPUB Packages 3.1, defines semantics and conformance requirements for an <olink
                    targetdoc="spec" targetptr="gloss-epub-package" type="epub-spec">EPUB® Package</olink>. Each Package
                represents one <olink targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/> of an <olink
                    targetdoc="spec" targetptr="gloss-epub-publication" type="epub-spec"/>, and is defined by a <olink
                    targetdoc="spec" targetptr="gloss-package-document" type="epub-spec"/> that describes the content of the
                Rendition and sets the requirements for how <olink targetdoc="spec"
                    targetptr="gloss-publication-resource-cmt-or-foreign" type="epub-spec">Publication Resources</olink> are
                associated.</para>

            <para>This specification also defines the <olink targetdoc="spec" targetptr="gloss-content-document-epub-nav"
                    type="epub-spec"/>, a machine- and human-readable specialization of an EPUB Content Document that
                provides navigation aids such as the table of contents.</para>

            <xi:include href="share/specdesc-all.xml"/>

            <para>This specification supersedes EPUB Publications 3.0.1 <xref linkend="refPublications301"/>. Refer to <xref
                    linkend="refEPUB3Changes"/> for more information on the differences between this specification and its
                predecessor.</para>

        </section>

        <xi:include href="./share/terminology.xml"/>

        <xi:include href="./share/typography.xml"/>

        <xi:include href="./share/conformancestatements.xml"/>

        <section xml:id="sec-overview-pfx">
            <title>Prefix Mappings</title>

            <para>For convenience, the following prefix mappings are used in this specification.</para>

            <table xml:id="tbl-nspfx">
                <caption>Prefix mappings</caption>
                <tr>
                    <th class="left">prefix</th>
                    <th class="odd">URI</th>
                </tr>
                <tr>
                    <td class="left">
                        <markup>dcterms</markup>
                    </td>
                    <td class="odd">
                        <uri>http://purl.org/dc/terms/</uri>
                    </td>
                </tr>
                <tr>
                    <td class="left">
                        <markup>opf</markup>
                    </td>
                    <td class="odd">
                        <uri>http://www.idpf.org/2007/opf</uri>
                    </td>
                </tr>
                <tr>
                    <td class="left">
                        <markup>rendition</markup>
                    </td>
                    <td class="odd">
                        <uri>http://www.idpf.org/vocab/rendition/#</uri>
                    </td>
                </tr>
            </table>
        </section>

    </chapter>

    <!-- TODO
    <chapter xml:id="sec-pub-rend-pkg" conformance="informative">
        <title>Publications, Renditions and Packages</title>

        <para>Although the focus of the <xref linkend="refEPUB3"/> specification is on the creation of an <olink
                targetdoc="spec" targetptr="gloss-epub-publication" type="epub-spec"/> for consumption by a <olink
                targetdoc="spec" targetptr="gloss-user" type="epub-spec"/>, often invisible to the User is that the <olink
                targetdoc="spec" targetptr="gloss-author" type="epub-spec"/> might have included more than one rendering of
            the publication.</para>

        <para>In EPUB parlance, this distinction between the publication and how it is presented is manifested in the terms
            EPUB Publication and <olink targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/>. Renditions are the
            specific renderings of the content available. An EPUB Publication always has at least one Rendition, but is
            unlimited in how many alternatives that Author chooses to create and distribute together.</para>

        <para>Since a Rendition is one rendering of an EPUB Publication, it is often the case that this specification will
            talk about requirements for the EPUB Publication in relation to a given Rendition of it. An EPUB Publication
            always has a title, for example, and it is required to express it for each Rendition. But although every
            Rendition will carry the title for the EPUB Publication, it's not the case that that title will be expressed
            exactly the same way in each Rendition. For example, a multilingual EPUB Publication will typically include a
            language-localized version of the title in each Rendition. Similarly, each Rendition of an EPUB Publication could
            be assigned a different identifier, such as an ISBN, if the Author considers them distinct works.</para>

        <para>While bibliographic metadata between Renditions is often very similar, metadata related to the rendering of the
            Rendition can be quite different. One Rendition might be a reflowable version of the content while another
            represents fixed-layout content. Such Rendition will also include different resources (e.g., reflowabled
            documents v. fixed pages) and will also have different reading orders.</para>

        <para>For all the above reasons, Renditions need to be defined separately from each other. That's where the <olink
                targetdoc="spec" targetptr="gloss-epub-package" type="epub-spec"/> comes in. If Rendition is the overarching
            concept of a specific rendering of the content, a Package is the tangible manifestation. It takes the form of the
                <olink targetdoc="spec" targetptr="gloss-package-document" type="epub-spec"/> and includes the <olink
                targetdoc="spec" targetptr="gloss-content-document-epub-nav" type="epub-spec"/> as well as all the <olink
                targetdoc="spec" targetptr="gloss-publication-resource-cmt-or-foreign" type="epub-spec"/>.</para>
    </chapter>
-->

    <chapter xml:id="sec-package-conformance">
        <title>Package Conformance</title>

        <section xml:id="sec-package-content-conformance" xreflabel="EPUB Package—Content Conformance">
            <title>Content Conformance</title>

            <para>A conformant <olink targetdoc="spec" targetptr="gloss-epub-package" type="epub-spec"/>
                <literal role="rfc2119">must</literal> meet all of the following criteria:</para>

            <variablelist role="conformance-list">
                <varlistentry xml:id="sec-package-content-conformance-package">
                    <term>Package Document</term>
                    <listitem>
                        <para xml:id="confreq-package">It <literal role="rfc2119">must</literal> contain exactly one <olink
                                targetdoc="spec" targetptr="gloss-package-document" type="epub-spec"/>, which <literal
                                role="rfc2119">must</literal> conform to the content requirements defined in <xref
                                linkend="sec-package-content-conf"/>.</para>
                    </listitem>
                </varlistentry>
                <varlistentry xml:id="sec-epub-rendition-content-conformance-all">
                    <term>Publication Resources</term>
                    <listitem>
                        <para xml:id="confreq-rendition-manifest">All <olink targetdoc="spec"
                                targetptr="gloss-publication-resource-cmt-or-foreign" type="epub-spec">Publication
                                Resources</olink> associated with the Package <literal role="rfc2119">must</literal> be
                            listed in the Package Document (as defined in <xref linkend="sec-manifest-elem"/>).</para>
                    </listitem>
                </varlistentry>
                <varlistentry xml:id="sec-package-content-conformance-contentdocs">
                    <term>Content Documents</term>
                    <listitem>
                        <para xml:id="confreq-cd">It <literal role="rfc2119">must</literal> contain at least one <olink
                                targetdoc="spec" targetptr="gloss-content-document-epub" type="epub-spec"/> conformant to the
                            content requirements defined in <xref linkend="refContentDocs3"/>.</para>
                    </listitem>
                </varlistentry>
                <varlistentry xml:id="sec-package-content-conformance-nav">
                    <term>EPUB Navigation Document</term>
                    <listitem>
                        <para xml:id="confreq-nav-occur">It <literal role="rfc2119">must</literal> contain exactly one <olink
                                targetdoc="spec" targetptr="gloss-content-document-epub-nav" type="epub-spec"/> conformant to
                            the content requirements defined in <xref linkend="sec-package-nav-content-conf"/>.</para>
                    </listitem>
                </varlistentry>
                <varlistentry xml:id="sec-package-content-conformance-css">
                    <term>CSS Style Sheets</term>
                    <listitem>
                        <para xml:id="confreq-css">It <literal role="rfc2119">may</literal> contain zero or more CSS Style
                            Sheets conformant to the content requirements defined in <olink targetdoc="contentdocs"
                                targetptr="sec-css-content-conf" type="epub-spec"/>. </para>
                    </listitem>
                </varlistentry>
                <varlistentry xml:id="sec-package-content-conformance-pls">
                    <term>Pronunciation Lexicons</term>
                    <listitem>
                        <para xml:id="confreq-pls">It <literal role="rfc2119">may</literal> contain zero or more PLS
                            Documents conformant to the content requirements defined in <olink targetdoc="contentdocs"
                                targetptr="sec-pls-conf-content" type="epub-spec"/>.</para>
                    </listitem>
                </varlistentry>
                <varlistentry xml:id="sec-package-content-conformance-media-overlays">
                    <term>Media Overlay Documents</term>
                    <listitem>
                        <para xml:id="confreq-mo">It <literal role="rfc2119">may</literal> contain zero or more <olink
                                targetdoc="spec" targetptr="gloss-media-overlay-document" type="epub-spec">Media Overlay
                                Documents</olink> conformant to the content requirements defined in <xref
                                linkend="refOverlays3"/>. </para>
                    </listitem>
                </varlistentry>
                <varlistentry xml:id="sec-package-content-conformance-additional">
                    <term>Additional Resources</term>
                    <listitem>
                        <para xml:id="confreq-additional">It <literal role="rfc2119">may</literal> contain zero or more
                                <olink targetdoc="spec" targetptr="gloss-publication-resource-cmt-or-foreign"
                                type="epub-spec">Publication Resources</olink> in addition to those listed above, each of
                            which <literal role="rfc2119">must</literal> adhere to the requirements in <olink
                                targetdoc="spec" targetptr="sec-epub-pub-conformance-all" type="epub-spec"/>. </para>
                    </listitem>
                </varlistentry>
            </variablelist>

        </section>

        <section xml:id="sec-rendition-rs-conformance" xreflabel="EPUB Package—Reading System">
            <title>Reading System Conformance</title>

            <para>An <olink targetdoc="spec" targetptr="gloss-epub-reading-system" type="epub-spec"/>
                <literal role="rfc2119">must</literal> meet all of the following criteria:</para>

            <itemizedlist role="conformance-list" xml:id="rendition-rs-confreqs">
                <listitem>
                    <para xml:id="confreq-rendition-rs-package">It <literal role="rfc2119">must</literal> process the <olink
                            targetdoc="spec" targetptr="gloss-package-document" type="epub-spec"/> as defined in <xref
                            linkend="sec-package-rs-conf"/>, and honor all presentation logic expressed through the Package
                        Document (e.g., the reading order, fallback chains, page progression direction and fixed
                        layouts).</para>
                </listitem>
                <listitem>
                    <para xml:id="confreq-rendition-rs-nav">It <literal role="rfc2119">must</literal> process the <olink
                            targetdoc="spec" targetptr="gloss-content-document-epub-nav" type="epub-spec"/> as defined in
                            <xref linkend="sec-package-nav-rs-conf"/>.</para>
                </listitem>
                <listitem>
                    <para xml:id="confreq-rendition-rs-manifest">It <literal role="rfc2119">must not</literal> use any
                        resources not listed in the Package Document in the processing of the Package (e.g.,
                            <filename>META-INF</filename> files <xref linkend="refOCF3"/> and resources specific to other
                        Renditions of the EPUB Publication).</para>
                </listitem>
            </itemizedlist>
        </section>
    </chapter>

    <chapter xml:id="sec-package-doc">
        <title>Package Document</title>

        <section xml:id="sec-package-intro" conformance="informative">
            <title>Introduction</title>

            <para>The <olink targetdoc="spec" targetptr="gloss-package-document" type="epub-spec"/> carries the display and
                structural metadata associated with an <olink targetdoc="spec" targetptr="gloss-epub-package"
                    type="epub-spec"/> and represents the primary source of information about how to process and display the
                    <olink targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/> it represents.</para>

            <para>The Package Document is an XML document that consists of a set of container elements, each of which houses
                information about a particular aspect of the Package. These containers effectively centralize metadata,
                detail the individual resources that compose the Package and provide reading order and other information to
                render the Rendition.</para>

            <para>The following list summarizes the information found in the Package Document:</para>

            <itemizedlist>
                <listitem>
                    <para><link linkend="sec-package-metadata">Metadata</link> — mechanisms to include and/or reference
                        metadata applicable to the given Rendition of the <olink targetdoc="spec"
                            targetptr="gloss-epub-publication" type="epub-spec"/>.</para>
                </listitem>
                <listitem>
                    <para>A <link linkend="sec-manifest-elem">manifest</link> — identifies (via IRI) and describes (via MIME
                        media type) the set of resources that collectively compose the given Rendition.</para>
                </listitem>
                <listitem>
                    <para>A <link linkend="sec-spine-elem">spine</link> — an ordered sequence of ID references to top-level
                        resources in the manifest from which all other resources in the set can be reached or utilized. The
                        spine defines the default reading order of the given Rendition.</para>
                </listitem>
                <listitem>
                    <para><link linkend="sec-collection-elem">Collections</link> — a method of encapsulating and identifying
                        subcomponents within the Package.</para>
                </listitem>
                <listitem>
                    <para><link linkend="sec-foreign-restrictions-manifest">Manifest fallback chains</link> — an optional
                        mechanism that defines an ordered list of top-level resources as content equivalents. A Reading
                        System can then choose between the resources based on which it is capable of rendering.</para>
                </listitem>
            </itemizedlist>

        </section>

        <section xml:id="sec-package-content-conf" xreflabel="Package Document—Content Conformance">
            <title>Content Conformance</title>

            <para>A <olink targetdoc="spec" targetptr="gloss-package-document" type="epub-spec"/>
                <literal role="rfc2119">must</literal> meet all of the following criteria:</para>
            <variablelist role="conformance-list">
                <varlistentry xml:id="confreq-package-docprops">
                    <term>Document Properties</term>
                    <listitem>
                        <para xml:id="confreq-package-xml">
                            <xi:include href="./share/xml-defref.xml"/>
                        </para>
                        <para xml:id="confreq-package-docprops-schema">It <literal role="rfc2119">must</literal> be valid to
                            the Package Document schema, as defined in <xref linkend="app-package-schema"/>, and conform to
                            all content conformance constraints expressed in <xref linkend="sec-package-def"/>.</para>
                    </listitem>
                </varlistentry>
                <varlistentry xml:id="confreq-package-fileprops">
                    <term>File Properties</term>
                    <listitem>
                        <para xml:id="confreq-package-fileprops-name">The Package Document filename <literal role="rfc2119"
                                >should</literal> use the file extension <filename>.opf</filename>.</para>
                    </listitem>
                </varlistentry>
            </variablelist>

            <para xml:id="media-type">Package Documents have the MIME media type <code role="media-type"
                    >application/oebps-package+xml</code>
                <xref linkend="refRFC4839"/>.</para>

        </section>

        <section xml:id="sec-package-rs-conf" xreflabel="Package Document—Reading System Conformance">
            <title>Reading System Conformance</title>

            <para>An <olink targetdoc="spec" targetptr="gloss-epub-reading-system" type="epub-spec"/>
                <literal role="rfc2119">must</literal> meet all of the following criteria:</para>

            <variablelist role="conformance-list">
                <varlistentry xml:id="confreq-rs-package-base">
                    <term>Processing</term>
                    <listitem>
                        <para xml:id="confreq-rs-package-def">It <literal role="rfc2119">must</literal> process the Package
                            Document in conformance with all Reading System conformance constraints expressed in <xref
                                linkend="sec-package-def"/>.</para>
                        <para xml:id="confreq-rs-epub3-presentational-meta">It <literal role="rfc2119">should</literal>
                            process presentational metadata, as expressed in <xref linkend="sec-package-metadata-rendering"
                            /></para>
                        <para xml:id="confreq-rs-epub3-fxl-meta">It <literal role="rfc2119">must</literal> process fixed
                            layout metadata, as expressed in <xref linkend="sec-package-metadata-fxl"/></para>
                        <para xml:id="confreq-rs-epub3-fxl">For <link linkend="sec-package-metadata-fxl">fixed layouts</link>
                            expressed using the <property linkend="fxl-property-viewport">rendition:layout</property>
                            property, it <literal role="rfc2119">must</literal> determine the rendering dimensions as defined
                            in <olink targetdoc="contentdocs" targetptr="sec-fixed-layouts" type="epub-spec"/>.</para>
                        <para xml:id="confreq-rs-epub3-fxl-conflicts">It <literal role="rfc2119">must</literal> ignore
                            proprietary metadata properties that pertain to layout expressions if they conflict behaviorally
                            with the property semantics defined in <xref linkend="sec-package-metadata-fxl"/>.</para>
                    </listitem>
                </varlistentry>
            </variablelist>
        </section>

        <section xml:id="sec-package-def">
            <title>Package Document Definition</title>

            <para>All elements <xref linkend="refXML"/> defined in this section are in the
                    <uri>http://www.idpf.org/2007/opf</uri> namespace <xref linkend="refXMLNamespaces"/> unless otherwise
                specified.</para>

            <section xml:id="sec-package-elem" xreflabel="package">
                <title>The <markup>package</markup> Element</title>

                <para>The <markup>package</markup> element is the root container of the <olink targetdoc="spec"
                        targetptr="gloss-package-document" type="epub-spec"/> and encapsulates metadata and resource
                    information associated with an <olink targetdoc="spec" targetptr="gloss-epub-package" type="epub-spec"
                    />.</para>

                <variablelist xreflabel="package" role="elem-synopsis" xml:id="elemdef-opf-package">
                    <varlistentry>
                        <term>Element Name</term>
                        <listitem>
                            <para><markup>package</markup></para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>The <markup>package</markup> element is the root element of the Package Document.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>
                            <itemizedlist mark="none">
                                <listitem>
                                    <para>
                                        <markup linkend="attrdef-dir">dir</markup>
                                        <option>[optional]</option>
                                    </para>
                                </listitem>
                                <listitem>
                                    <para>
                                        <markup linkend="attrdef-id">id</markup>
                                        <option>[optional]</option>
                                    </para>
                                </listitem>
                                <listitem>
                                    <para>
                                        <markup linkend="attrdef-package-prefix">prefix</markup>
                                        <option>[optional]</option>
                                    </para>
                                </listitem>
                                <listitem>
                                    <para>
                                        <markup linkend="attrdef-xml-lang">xml:lang</markup>
                                        <option>[optional]</option>
                                    </para>
                                </listitem>
                                <listitem>
                                    <para>
                                        <markup linkend="attrdef-package-unique-identifier">unique-identifier</markup>
                                        <option>[required]</option>
                                    </para>
                                </listitem>
                                <listitem>
                                    <para>
                                        <markup linkend="attrdef-package-version">version</markup>
                                        <option>[required]</option>
                                    </para>
                                </listitem>
                            </itemizedlist>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>In this order:</para>
                            <itemizedlist mark="none">
                                <listitem>
                                    <para>
                                        <markup><xref role="codelink" linkend="elemdef-opf-metadata"/></markup>
                                        <option>[required]</option>
                                    </para>
                                </listitem>
                                <listitem>
                                    <para>
                                        <markup><xref linkend="elemdef-opf-manifest"/></markup>
                                        <option>[required]</option>
                                    </para>
                                </listitem>
                                <listitem>
                                    <para>
                                        <markup><xref linkend="elemdef-opf-spine"/></markup>
                                        <option>[required]</option>
                                    </para>
                                </listitem>
                                <listitem>
                                    <para>
                                        <markup><xref linkend="elemdef-collection"/></markup>
                                        <option>[0 or more]</option>
                                    </para>
                                </listitem>
                            </itemizedlist>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <para xml:id="attrdef-package-version" xreflabel="version">The <markup>version</markup> attribute specifies
                    the EPUB specification version to which the given EPUB Package conforms. The attribute <literal
                        role="rfc2119">must</literal> have the value "<code role="value">3.1</code>" to indicate compliance
                    with this version of the specification.</para>

                <para xml:id="attrdef-package-unique-identifier" xreflabel="unique-identifier">The
                        <markup>unique-identifier</markup> attribute takes an IDREF <xref linkend="refXML"/> that identifies
                    the <markup><xref role="codelink" linkend="sec-opf-dcidentifier"/></markup> element that provides the
                    preferred, or primary, identifier. Refer to <xref linkend="sec-package-metadata-identifiers"/> for more
                    information.</para>

                <para xml:id="attrdef-package-prefix" xreflabel="prefix">The <markup>prefix</markup> attribute provides a
                    declaration mechanism for prefixes not <link linkend="sec-metadata-reserved-vocabs">reserved by this
                        specification</link>. Refer to <xref linkend="sec-prefix-attr"/> for more information.</para>

            </section>

            <section xml:id="sec-metadata-elem" xreflabel="metadata">
                <title>The <markup>metadata</markup> Element</title>

                <para>The <markup>metadata</markup> element encapsulates display and rendering meta information for the given
                        <olink targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/>.</para>

                <variablelist xreflabel="metadata" role="elem-synopsis" xml:id="elemdef-opf-metadata">
                    <varlistentry>
                        <term>Element Name</term>
                        <listitem>
                            <para><markup>metadata</markup></para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>Required first child of <markup><xref linkend="elemdef-opf-package"/></markup>.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>
                            <para>None</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>In any order:</para>
                            <itemizedlist mark="none">
                                <listitem>
                                    <para>
                                        <markup><xref role="codelink" linkend="elemdef-opf-dcidentifier"/></markup>
                                        <option>[required]</option>
                                    </para>
                                </listitem>
                                <listitem>
                                    <para>
                                        <markup><xref linkend="elemdef-opf-dctitle"/></markup>
                                        <option>[required]</option>
                                    </para>
                                </listitem>
                                <listitem>
                                    <para>
                                        <markup><xref linkend="elemdef-opf-dclanguage"/></markup>
                                        <option>[1 or more]</option>
                                    </para>
                                </listitem>
                                <listitem>
                                    <para>
                                        <markup><xref linkend="sec-opf-dcmes-optional"/></markup>
                                        <option>[0 or more]</option>
                                    </para>
                                </listitem>
                                <listitem>
                                    <para>
                                        <markup><xref linkend="elemdef-meta"/></markup>
                                        <option>[1 or more]</option>
                                    </para>
                                </listitem>
                                <listitem>
                                    <para>
                                        <markup><xref linkend="elemdef-opf-link"/></markup>
                                        <option>[0 or more]</option>
                                    </para>
                                </listitem>
                            </itemizedlist>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <para>The Package Document <markup>metadata</markup> element has two primary functions:</para>

                <orderedlist>
                    <listitem>
                        <para>to provide a minimal set of bibliographic information for Reading Systems to use to internally
                            catalogue an <olink targetdoc="spec" targetptr="gloss-epub-publication" type="epub-spec"/> and
                            present it to a <olink targetdoc="spec" targetptr="gloss-user" type="epub-spec"/> (e.g., in a
                            bookshelf).</para>
                    </listitem>
                    <listitem>
                        <para>to provide access to all rendering metadata needed to control the layout and display of the
                            Rendition's content (e.g., <link linkend="sec-package-metadata-fxl">fixed-layout
                                properties</link>).</para>
                    </listitem>
                </orderedlist>

                <para>The Package Document is not designed to provide a comprehensive bibliographic record, and is not the
                    correct location for such discovery information about the EPUB Publication. Metadata records, both that
                    conform to international standards or that are designed for custom use, can instead be associated using
                    the <markup linkend="sec-link-elem">link</markup> element. This approach allows the information they
                    contain to be presented in their native format, avoiding the problems and loss of information caused by
                    translating to use the minimal Package Document structure.</para>

                <para>In keeping with this philosophy, the Package Document only has the following minimal metadata
                    requirements: it <literal role="rfc2119">must</literal> include the <xref linkend="refDCMES"/>
                    <markup linkend="sec-opf-dcidentifier">title</markup>, <markup linkend="elemdef-opf-dcidentifier"
                        >identifier</markup> and <markup linkend="elemdef-opf-dclanguage">language</markup> elements together
                    with the <xref linkend="refDCTERMS"/>
                    <markup linkend="last-modified-date">modified</markup> property. All other <xref linkend="refDCMES"/> are
                        <literal linkend="sec-opf-dcmes-optional" role="rfc2119">optional</literal>.</para>

                <informalexample>
                    <para>The following example shows the minimal set of metadata that Authors have to include in the Package
                        Document.</para>
                    <synopsis><xi:include href="examples/publications/metadata-min-complete.xml" parse="text"/></synopsis>
                </informalexample>

                <para>The <markup linkend="sec-meta-elem">meta</markup> element provides a generic mechanism for including
                    metadata properties from any vocabulary. It is typically used to include rendering metadata defined in
                    IDPF specifications, but <literal role="rfc2119">may</literal> be used for any metadata purposes.</para>

                <note>
                    <para>See <xref linkend="refA11Y"/> for accessibility metadata recommendations.</para>
                </note>
            </section>

            <section xml:id="sec-dcmes">
                <title>Dublin Core Metadata Elements</title>

                <section xml:id="sec-opf-dcmes-required" xreflabel="DCMES Required Elements">
                    <title>Required Elements</title>

                    <section xml:id="sec-opf-dcidentifier" xreflabel="dc:identifier">
                        <title>The <markup>identifier</markup> Element</title>

                        <para>The <xref linkend="refDCMES"/>
                            <markup>identifier</markup> element contains an identifier associated with the given <olink
                                targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/> of the <olink
                                targetdoc="spec" targetptr="gloss-epub-publication" type="epub-spec"/>, such as a UUID, DOI,
                            ISBN or ISSN.</para>
                        <variablelist xreflabel="dc:identifier" role="elem-synopsis" xml:id="elemdef-opf-dcidentifier">
                            <varlistentry>
                                <term>Element Name</term>
                                <listitem>
                                    <para>
                                        <markup>dc:identifier</markup>
                                    </para>
                                </listitem>
                            </varlistentry>

                            <varlistentry>
                                <term>Namespace</term>
                                <listitem>
                                    <para><uri>http://purl.org/dc/elements/1.1/</uri></para>
                                </listitem>
                            </varlistentry>

                            <varlistentry>
                                <term>Usage</term>
                                <listitem>
                                    <para>Required child of <markup><xref role="codelink" linkend="elemdef-opf-metadata"
                                            /></markup>.</para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>Attributes</term>
                                <listitem>
                                    <itemizedlist mark="none">
                                        <listitem>
                                            <para>
                                                <markup linkend="attrdef-id">id</markup>
                                                <option>[optional]</option>
                                            </para>
                                        </listitem>
                                        <listitem>
                                            <para>
                                                <markup linkend="attrdef-opf-scheme">opf:scheme</markup>
                                                <option>[optional]</option>
                                            </para>
                                        </listitem>
                                    </itemizedlist>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>Content Model</term>
                                <listitem>
                                    <para>Text</para>
                                </listitem>
                            </varlistentry>
                        </variablelist>

                        <para>The <markup>metadata</markup> section <literal role="rfc2119">must</literal> include an
                                <markup>identifier</markup> element that contains an unambiguous identifier for the
                            Rendition. This identifier <literal role="rfc2119">must</literal> be marked as the <olink
                                targetdoc="spec" targetptr="gloss-unique-identifier" type="epub-spec"/> via the
                                <markup>package</markup> element <markup><link linkend="attrdef-package-unique-identifier"
                                    >unique-identifier</link></markup> attribute. </para>

                        <informalexample>
                            <para>The following example shows the unique <markup>identifier</markup> element for an EPUB
                                Publication.</para>
                            <synopsis><xi:include parse="text" href="examples/publications/identifier.xml"/></synopsis>
                        </informalexample>

                        <para>The Unique Identifier <literal role="rfc2119">may</literal> differ from Rendition to Rendition,
                            and a Rendition <literal role="rfc2119">may</literal> include additional identifier
                            elements.</para>

                        <para>To differentiate different versions of the same EPUB Publication, this specification makes a
                            distinction between the <olink targetdoc="spec" targetptr="gloss-unique-identifier"
                                type="epub-spec"/> for an EPUB Publication and the <olink targetdoc="spec"
                                targetptr="gloss-release-identifier" type="epub-spec"/> that uniquely identifies a specific
                            version of it.</para>

                        <para>To identify a specific version of a packaged EPUB Publication, a Release Identifier can be
                            constructed by combining the Unique Identifier with the <link linkend="last-modified-date">last
                                modified date</link> of the Rendition. For more information on the semantics and requirements
                            of the Release Identifier, refer to <xref linkend="sec-metadata-elem-identifiers-pid"/>.</para>

                        <informalexample>
                            <para>The following example shows the two components of the Release Identifier.</para>
                            <synopsis><xi:include parse="text" href="examples/publications/release-identifier.xml"/></synopsis>
                        </informalexample>

                        <para>Whenever a Rendition is modified, it <literal role="rfc2119">must</literal> include a new last
                            modified date.</para>

                        <para>To determine whether an <markup>identifier</markup> conforms to an established system or has
                            been granted by an issuing authority, Reading Systems <literal role="rfc2119">should</literal>
                            attempt to parse the value of the element.</para>

                        <para>For additional precision (e.g., if the scheme cannot be determined from the value or could lead
                            to an ambiguous result), Authors <literal role="rfc2119">may</literal> attach an <markup
                                linkend="attrdef-opf-scheme">opf:scheme</markup> attribute to assist in Reading System
                            identification. This attribute names the system or authority that generated or assigned the text
                            contained within the identifier element. When included, the <markup>opf:scheme</markup> value
                                <literal role="rfc2119">should</literal> take precedence over value parsing the
                            identifier.</para>

                        <informalexample>
                            <para>The following example shows how an identifier can be marked as a DOI using the
                                    <markup>opf:scheme</markup> attribute.</para>
                            <synopsis><xi:include parse="text" href="examples/publications/id-type.xml"/></synopsis>
                        </informalexample>

                        <para>This specification does not require or endorse the use of any particular scheme for
                            identifiers, and imposes no restrictions or requirements on <markup>opf:scheme</markup>
                            identifiers.</para>

                        <annotation xml:id="identifier-enum">
                            <para>Whether to include a set of predefined values for the <markup>opf:scheme</markup> attribute
                                remains under discussion. For more information, see <link
                                    xlink:href="https://github.com/IDPF/epub-revision/issues/700">Issue 700</link>.</para>
                        </annotation>

                        <para>When an EPUB Publication is derived from another publication, the identifier for that source
                            publication <literal role="rfc2119">may</literal> be included in the metadata, but <literal
                                role="rfc2119">must</literal> be represented using the <link linkend="sec-opf-dcsource">DCMES
                                source element</link>.</para>

                        <para> This specification imposes no additional restrictions or the requirements of the identifier
                            except that it <literal role="rfc2119">must</literal> be at least one character in length. It is
                            strongly <literal role="rfc2119">recommended</literal> that the identifier be a fully qualified
                            URI, however.</para>

                        <xi:include href="share/whitespace.xml"/>
                    </section>

                    <section xml:id="sec-opf-dctitle" xreflabel="dc:title">
                        <title>The <markup>title</markup> Element</title>

                        <para>The <xref linkend="refDCMES"/>
                            <markup>title</markup> element represents an instance of a name given to the <olink
                                targetdoc="spec" targetptr="gloss-epub-publication" type="epub-spec"/>.</para>

                        <variablelist xreflabel="dc:title" role="elem-synopsis" xml:id="elemdef-opf-dctitle">
                            <varlistentry>
                                <term>Element Name</term>
                                <listitem>
                                    <para>
                                        <markup>dc:title</markup>
                                    </para>
                                </listitem>
                            </varlistentry>

                            <varlistentry>
                                <term>Namespace</term>
                                <listitem>
                                    <para><uri>http://purl.org/dc/elements/1.1/</uri></para>
                                </listitem>
                            </varlistentry>

                            <varlistentry>
                                <term>Usage</term>
                                <listitem>
                                    <para>Required child of <markup><xref role="codelink" linkend="elemdef-opf-metadata"
                                            /></markup>.</para>
                                </listitem>
                            </varlistentry>

                            <varlistentry>
                                <term>Attributes</term>
                                <listitem>
                                    <itemizedlist mark="none">
                                        <listitem>
                                            <para>
                                                <markup linkend="attrdef-opf-alt-script">opf:alt-script</markup>
                                                <option>[optional]</option>
                                            </para>
                                        </listitem>
                                        <listitem>
                                            <para>
                                                <markup linkend="attrdef-dir">dir</markup>
                                                <option>[optional]</option>
                                            </para>
                                        </listitem>
                                        <listitem>
                                            <para>
                                                <markup linkend="attrdef-opf-file-as">opf:file-as</markup>
                                                <option>[optional]</option>
                                            </para>
                                        </listitem>
                                        <listitem>
                                            <para>
                                                <markup linkend="attrdef-id">id</markup>
                                                <option>[optional]</option>
                                            </para>
                                        </listitem>
                                        <listitem>
                                            <para>
                                                <markup linkend="attrdef-xml-lang">xml:lang</markup>
                                                <option>[optional]</option>
                                            </para>
                                        </listitem>
                                    </itemizedlist>
                                </listitem>
                            </varlistentry>

                            <varlistentry>
                                <term>Content Model</term>
                                <listitem>
                                    <para>Text</para>
                                </listitem>
                            </varlistentry>
                        </variablelist>

                        <para>The <markup>metadata</markup> section <literal role="rfc2119">must</literal> include at least
                            one <markup>title</markup> element containing the title for the EPUB Publication.</para>

                        <informalexample>
                            <para>The following example shows a multi-part title.</para>
                            <synopsis><xi:include parse="text" href="examples/publications/meta-ex-title-3.xml"/></synopsis>
                        </informalexample>

                        <para><olink targetdoc="spec" targetptr="gloss-epub-reading-system" type="epub-spec"
                                epub:specref-exclude="true">Reading Systems</olink>
                            <literal role="rfc2119">must</literal> treat the first <markup>title</markup> element in document
                            order as the main title of the EPUB Publication (i.e., the primary one to present to <olink
                                targetdoc="spec" targetptr="gloss-user" type="epub-spec" epub:specref-exclude="true"
                                >Users</olink>). This specification does not define how to process additional
                                <markup>title</markup> elements.</para>

                        <para>The title <literal role="rfc2119">may</literal> differ from <olink targetdoc="spec"
                                targetptr="gloss-rendition" type="epub-spec"/> to Rendition.</para>

                        <para>This specification imposes no additional restrictions or requirements on the title except that
                            it <literal role="rfc2119">must</literal> be at least one character in length. </para>

                        <xi:include href="share/whitespace.xml"/>

                    </section>

                    <section xml:id="sec-opf-dclanguage" xreflabel="dc:language">
                        <title>The <markup>language</markup> Element</title>

                        <para>The <xref linkend="refDCMES"/>
                            <markup>language</markup> element specifies the language of the content of the given <olink
                                targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/>.</para>

                        <variablelist xreflabel="dc:language" role="elem-synopsis" xml:id="elemdef-opf-dclanguage">
                            <varlistentry>
                                <term>Element Name</term>
                                <listitem>
                                    <para>
                                        <markup>dc:language</markup>
                                    </para>
                                </listitem>
                            </varlistentry>

                            <varlistentry>
                                <term>Namespace</term>
                                <listitem>
                                    <para><uri>http://purl.org/dc/elements/1.1/</uri></para>
                                </listitem>
                            </varlistentry>

                            <varlistentry>
                                <term>Usage</term>
                                <listitem>
                                    <para>Required child of <markup><xref role="codelink" linkend="elemdef-opf-metadata"
                                            /></markup>. Repeatable.</para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>Attributes</term>
                                <listitem>
                                    <para>
                                        <markup linkend="attrdef-id">id</markup>
                                        <option>[optional]</option>
                                    </para>
                                </listitem>
                            </varlistentry>

                            <varlistentry>
                                <term>Content Model</term>
                                <listitem>
                                    <para>Text</para>
                                </listitem>
                            </varlistentry>
                        </variablelist>

                        <para>The <markup>metadata</markup> section <literal role="rfc2119">must</literal> include at least
                            one <markup>language</markup> element with a value conforming to <xref linkend="refRFC5646"
                            />.</para>

                        <informalexample>
                            <para>The following example shows an <olink targetdoc="spec" targetptr="gloss-epub-publication"
                                    type="epub-spec"/> is in U.S. English.</para>
                            <synopsis><xi:include parse="text" href="examples/publications/language.xml"/></synopsis>
                        </informalexample>

                        <para>Additional <markup>language</markup> elements <literal role="rfc2119">may</literal> be included
                            for multilingual Publications, but each element's value <literal role="rfc2119">must</literal>
                            conform to <xref linkend="refRFC5646"/>.</para>

                        <para>Languages <literal role="rfc2119">may</literal> differ from <olink targetdoc="spec"
                                targetptr="gloss-rendition" type="epub-spec"/> to Rendition.</para>

                        <xi:include href="share/whitespace.xml"/>

                    </section>
                </section>

                <section xml:id="sec-opf-dcmes-optional" xreflabel="DCMES Optional Elements">
                    <title>Optional Elements</title>

                    <section xml:id="sec-opf-dcmes-optional-def">
                        <title>General Definition</title>
                        <para>With the exception of <markup><link linkend="sec-opf-dcidentifier">identifier</link></markup>,
                                    <markup><link linkend="sec-opf-dclanguage">language</link></markup> and <markup><link
                                    linkend="sec-opf-dctitle">title</link></markup>, as defined in <link
                                linkend="sec-opf-dcmes-required">the previous section</link>, all other <xref
                                linkend="refDCMES"/> elements are designated as <literal role="rfc2119">optional</literal>.
                            These elements conform to the following generalized definition:</para>

                        <variablelist xreflabel="optional DCMES definition" role="elem-synopsis" xml:id="elemdef-opf-dc-opt">
                            <varlistentry>
                                <term>Element Name</term>
                                <listitem>
                                    <para>
                                        <markup>contributor</markup> | <markup>coverage</markup> | <markup>creator</markup> |
                                            <markup>date</markup> | <markup>description</markup> | <markup>format</markup> |
                                            <markup>publisher</markup> | <markup>relation</markup> | <markup>rights</markup>
                                        | <markup>source</markup> | <markup>subject</markup> | <markup>type</markup>
                                    </para>
                                </listitem>
                            </varlistentry>

                            <varlistentry>
                                <term>Namespace</term>
                                <listitem>
                                    <para><uri>http://purl.org/dc/elements/1.1/</uri></para>
                                </listitem>
                            </varlistentry>

                            <varlistentry>
                                <term>Usage</term>
                                <listitem>
                                    <para>Optional child of <markup><xref role="codelink" linkend="elemdef-opf-metadata"
                                            /></markup>. Repeatable.</para>
                                </listitem>
                            </varlistentry>

                            <varlistentry>
                                <term>Attributes</term>
                                <listitem>
                                    <itemizedlist mark="none">
                                        <listitem>
                                            <para>
                                                <markup linkend="attrdef-opf-alt-script">opf:alt-script</markup>
                                                <option>[optional]</option> &#8211; only allowed on
                                                    <markup>contributor</markup>, <markup>creator</markup>, and
                                                    <markup>publisher</markup>. </para>
                                        </listitem>
                                        <listitem>
                                            <para><markup linkend="attrdef-dir">dir</markup>
                                                <option>[optional]</option> &#8211; only allowed on
                                                    <markup>contributor</markup>, <markup>coverage</markup>,
                                                    <markup>creator</markup>, <markup>description</markup>,
                                                    <markup>publisher</markup>, <markup>relation</markup>,
                                                    <markup>rights</markup> and <markup>subject</markup>.</para>
                                        </listitem>
                                        <listitem>
                                            <para>
                                                <markup linkend="attrdef-opf-file-as">opf:file-as</markup>
                                                <option>[optional]</option> &#8211; only allowed on
                                                    <markup>contributor</markup>, <markup>creator</markup>, and
                                                    <markup>publisher</markup>. </para>
                                        </listitem>
                                        <listitem>
                                            <para><markup linkend="attrdef-id">id</markup>
                                                <option>[optional]</option> &#8211; allowed on any element.</para>
                                        </listitem>
                                        <listitem>
                                            <para>
                                                <markup linkend="attrdef-opf-role">opf:role</markup>
                                                <option>[optional]</option> &#8211; only allowed on
                                                    <markup>contributor</markup> and <markup>creator</markup>. </para>
                                        </listitem>
                                        <listitem>
                                            <para><markup linkend="attrdef-xml-lang">xml:lang</markup>
                                                <option>[optional]</option> &#8211; only allowed on
                                                    <markup>contributor</markup>, <markup>coverage</markup>,
                                                    <markup>creator</markup>, <markup>description</markup>,
                                                    <markup>publisher</markup>, <markup>relation</markup>,
                                                    <markup>rights</markup> and <markup>subject</markup>.</para>
                                        </listitem>
                                    </itemizedlist>
                                </listitem>
                            </varlistentry>

                            <varlistentry>
                                <term>Content Model</term>
                                <listitem>
                                    <para>Text</para>
                                </listitem>
                            </varlistentry>
                        </variablelist>

                        <para>Optional metadata <literal role="rfc2119">may</literal> differ from <olink targetdoc="spec"
                                targetptr="gloss-rendition" type="epub-spec" epub:specref-exclude="true"/> to
                            Rendition.</para>

                        <para> The value of all optional <xref linkend="refDCMES"/> elements <literal role="rfc2119"
                                >must</literal> be at least one character in length. </para>

                        <xi:include href="share/whitespace.xml"/>

                        <para>This specification does not modify the <xref linkend="refDCMES"/> element definitions except as
                            noted in the following sections.</para>
                    </section>

                    <section xml:id="sec-opf-dccontributor" xreflabel="dc:contributor">
                        <title>The <markup>contributor</markup> Element</title>

                        <para>The <markup>contributor</markup> element is used to represent the name of a person,
                            organization, etc. that played a secondary role in the creation of the content of an EPUB
                            Publication.</para>

                        <para>The use of the <markup>contributor</markup> element is identical to the use of the
                                <markup>creator</markup> element in all other respects, as detailed in the next
                            section.</para>
                    </section>

                    <section xml:id="sec-opf-dccreator" xreflabel="dc:creator">
                        <title>The <markup>creator</markup> Element</title>

                        <para>The <markup>creator</markup> element represents the name of a person, organization, etc.
                            responsible for the creation of the content of the <olink targetdoc="spec"
                                targetptr="gloss-rendition" type="epub-spec"/>.</para>

                        <para>The <markup>creator</markup> element <literal role="rfc2119">should</literal> contain the name
                            of the creator as a Reading System will present it to a <olink targetdoc="spec"
                                targetptr="gloss-user" type="epub-spec" epub:specref-exclude="true"/>.</para>

                        <informalexample>
                            <para>The following example shows how a creator name can be included to facilitate sorting and
                                rendering.</para>
                            <synopsis><xi:include parse="text" href="examples/publications/creator-1.xml"/></synopsis>
                        </informalexample>

                        <para>If an EPUB Publication has more than one creator, each <literal role="rfc2119">should</literal>
                            be included in a separate <markup>creator</markup> element.</para>

                        <para>When determining display priority, Reading Systems <literal role="rfc2119">must</literal> use
                            the document order of <markup>creator</markup> elements in the <markup>metadata</markup> section,
                            where the first <markup>creator</markup> element encountered is the primary creator. If a Reading
                            System exposes creator metadata to the User, it <literal role="rfc2119">should</literal> include
                            all the creators listed in the <markup>metadata</markup> section whenever possible (e.g., when
                            not constrained by display considerations).</para>

                        <informalexample>
                            <para>In the following example, Lewis Carroll is the primary author as he is listed first.</para>
                            <synopsis><xi:include parse="text" href="examples/publications/creator-2.xml"/></synopsis>
                        </informalexample>

                        <para>Secondary contributors <literal role="rfc2119">should</literal> be represented using DCMES
                                <markup>contributor</markup> elements.</para>
                    </section>

                    <section xml:id="sec-opf-dcdate" xreflabel="dc:date">
                        <title>The <markup>date</markup> Element</title>

                        <para>The <markup>date</markup> element <literal role="rfc2119">must</literal> only be used to define
                            the publication date of the <olink targetdoc="spec" targetptr="gloss-epub-publication"
                                type="epub-spec" epub:specref-exclude="true"/>. The publication date is not the same as the
                                <link linkend="last-modified-date">last modified date</link> (the last time the <olink
                                targetdoc="spec" targetptr="gloss-rendition" type="epub-spec" epub:specref-exclude="true"/>
                            was changed), which <literal role="rfc2119">must</literal> be included using the <xref
                                linkend="refDCTERMS"/>
                            <property>modified</property> property.</para>

                        <para>It is <literal role="rfc2119">recommended</literal> that the date string conform to <xref
                                linkend="refISO8601"/>, particularly the subset expressed in W3C Date and Time Formats <xref
                                linkend="refDateTime"/>, as such strings are both human and machine readable.</para>

                        <informalexample>
                            <para>The following example shows a publication date.</para>
                            <synopsis><xi:include parse="text" href="examples/publications/date.xml"/></synopsis>
                        </informalexample>

                        <para>Additional dates <literal role="rfc2119">should</literal> be expressed using the specialized
                            date properties available in the <xref linkend="refDCTERMS"/> vocabulary, or similar.</para>

                        <para>The publication date <literal role="rfc2119">may</literal> be common to all instances of an
                            EPUB Publication or <literal role="rfc2119">may</literal> change from instance to instance (e.g.,
                            if the EPUB Publication gets generated on demand).</para>

                        <para>Only one <markup>date</markup> element is allowed.</para>
                    </section>

                    <section xml:id="sec-opf-dcsource" xreflabel="dc:source">
                        <title>The <markup>source</markup> Element</title>

                        <para>The <markup>source</markup> element identifies the related resource(s) from which this <olink
                                targetdoc="spec" targetptr="gloss-epub-publication" type="epub-spec"
                                epub:specref-exclude="true"/> is derived.</para>

                        <para>When a <olink targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"
                                epub:specref-exclude="true"/> includes page identifiers (using the <property
                                xlink:href="../../vocab/structure/epub-vocab-structure.html#pagebreak">pagebreak</property>
                            property from the EPUB Structural Semantics Vocabulary <xref linkend="refEPUBStructureVocab"/>),
                            it <literal role="rfc2119">should</literal> include a <markup>source</markup> element that
                            identifies the source of the pagination.</para>

                        <informalexample>
                            <para>The following example shows the ISBN identifier for an EPUB Publication together with the
                                source ISBN identifier for the print work it was derived from.</para>
                            <synopsis><xi:include parse="text" href="examples/publications/source.xml"/></synopsis>
                        </informalexample>
                    </section>

                    <section xml:id="sec-opf-dcsubject" xreflabel="dc:subject">
                        <title>The <markup>subject</markup> Element</title>

                        <para>The <markup>subject</markup> element identifies the subject of the EPUB Publication.</para>

                        <para>In addition to the attributes listed in the <link linkend="sec-opf-dcmes-optional-def">general
                                definition</link>, the element also takes an optional <markup>opf:authority</markup>
                            attribute that identifies the system or scheme the element's value is drawn from. The value of
                            the attribute <literal role="rfc2119">must</literal> be an absolute IRI <xref
                                linkend="refRFC3987"/> that identifies the scheme.</para>

                        <para>If both machine- and human-readable values are required, the optional <markup>opf:term</markup>
                            attribute can be attached. This attribute takes a string value that represents the
                            machine-readable code.</para>
                    </section>

                    <section xml:id="sec-opf-dctype" xreflabel="dc:type">
                        <title>The <markup>type</markup> Element</title>

                        <para>The <markup>type</markup> element is used to indicate that the given EPUB Publication is of a
                            specialized type (e.g., annotations packaged in EPUB format or a dictionary).</para>

                        <para>The IDPF maintains an informative registry of specialized EPUB Publication types for use with
                            this element at <uri xlink:href="http://www.idpf.org/epub/vocab/package/types"
                                >http://www.idpf.org/epub/vocab/package/types</uri>.</para>
                    </section>
                </section>
            </section>

            <section xml:id="sec-meta-elem" xreflabel="meta">
                <title>The <markup>meta</markup> Element</title>

                <para>The <markup>meta</markup> element provides a generic means of including package metadata.</para>

                <variablelist xreflabel="meta" role="elem-synopsis" xml:id="elemdef-meta">
                    <varlistentry>
                        <term>Element Name</term>
                        <listitem>
                            <para>
                                <markup>meta</markup>
                            </para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>As child of the <markup><xref role="codelink" linkend="elemdef-opf-metadata"/></markup>
                                element. Repeatable.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>
                            <itemizedlist mark="none">
                                <listitem>
                                    <para>
                                        <markup linkend="attrdef-opf-alt-script">opf:alt-script</markup>
                                        <option>[optional]</option>
                                    </para>
                                </listitem>
                                <listitem>
                                    <para>
                                        <markup linkend="attrdef-dir">dir</markup>
                                        <option>[optional]</option>
                                    </para>
                                </listitem>
                                <listitem>
                                    <para>
                                        <markup linkend="attrdef-opf-file-as">opf:file-as</markup>
                                        <option>[optional]</option>
                                    </para>
                                </listitem>
                                <listitem>
                                    <para>
                                        <markup linkend="attrdef-id">id</markup>
                                        <option>[optional]</option>
                                    </para>
                                </listitem>
                                <listitem>
                                    <para>
                                        <markup linkend="attrdef-meta-property">property</markup>
                                        <option>[required]</option>
                                    </para>
                                </listitem>
                                <listitem>
                                    <para>
                                        <markup linkend="attrdef-meta-refines">refines</markup>
                                        <option>[optional]</option>
                                        <option>[SUPERSEDED]</option>
                                    </para>
                                </listitem>
                                <listitem>
                                    <para>
                                        <markup linkend="attrdef-scheme">scheme</markup>
                                        <option>[optional]</option>
                                    </para>
                                </listitem>
                                <listitem>
                                    <para>
                                        <markup linkend="attrdef-xml-lang">xml:lang</markup>
                                        <option>[optional]</option>
                                    </para>
                                </listitem>
                            </itemizedlist>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>Text</para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <para xml:id="attrdef-meta-property">Each <markup>meta</markup> element defines a metadata expression that
                    establishes some aspect of the <olink targetdoc="spec" targetptr="gloss-epub-publication"
                        type="epub-spec"/>. The <markup>property</markup> attribute takes a <link
                        linkend="sec-property-datatype">property</link> data type value that defines the statement being made
                    in the expression; the text content of the element represents the assertion. (Refer to <xref
                        linkend="sec-metadata-assoc"/> for more information.)</para>

                <para>This specification <link linkend="sec-metadata-reserved-vocabs">reserves a set of vocabularies</link>
                    for use in the <markup>property</markup> attribute, but terms from any vocabulary <literal role="rfc2119"
                        >may</literal> be used so long as a <link linkend="sec-prefix-attr">prefix is declared</link> for the
                    vocabulary.</para>

                <informalexample>
                    <para>The following example shows various property declarations using the reserved prefixes.</para>
                    <synopsis><xi:include parse="text" href="examples/publications/meta-1.xml"/></synopsis>
                </informalexample>

                <para xml:id="attrdef-scheme">The <markup>scheme</markup> attribute identifies the system or scheme that the
                    element's value is drawn from. The value of the attribute <literal role="rfc2119">must</literal> be a
                        <link linkend="sec-property-datatype">property</link> data type that resolves to the resource that
                    defines the scheme. If a Reading System does not recognize the <markup>scheme</markup> attribute value,
                    it <literal role="rfc2119">should</literal> treat the value of the element as a string.</para>

                <para>Reading Systems <literal role="rfc2119">should</literal> ignore all <markup>meta</markup> elements
                    whose <markup>property</markup> attributes define expressions they do not recognize. A Reading System
                        <literal role="rfc2119">must not</literal> fail when encountering unknown expressions.</para>

                <para>Every <markup>meta</markup> element <literal role="rfc2119">must</literal> express a value that is at
                    least one character in length after whitespace normalization.</para>

                <para>Unless an individual property explicitly defines a different whitespace normalization algorithm,
                    Reading Systems <literal role="rfc2119">must</literal> trim all leading and trailing whitespace from the
                        <markup>meta</markup> element values, as defined by the XML specification <xref linkend="refXML"/>,
                    before further processing them.</para>

            </section>

            <section xml:id="sec-link-elem" xreflabel="link">
                <title>The <markup>link</markup> Element</title>

                <para>The <markup>link</markup> element is used to associate resources with the given <olink targetdoc="spec"
                        targetptr="gloss-rendition" type="epub-spec"/> of the <olink targetdoc="spec"
                        targetptr="gloss-epub-publication" type="epub-spec"/>, such as metadata records.</para>

                <variablelist xreflabel="link" role="elem-synopsis" xml:id="elemdef-opf-link">
                    <varlistentry>
                        <term>Element Name</term>
                        <listitem>
                            <para>
                                <markup>link</markup>
                            </para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>As a child of <markup><xref role="codelink" linkend="elemdef-opf-metadata"/></markup>.
                                Repeatable.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>
                            <itemizedlist mark="none">
                                <listitem>
                                    <para>
                                        <markup linkend="attrdef-href">href</markup>
                                        <option>[required]</option>
                                    </para>
                                </listitem>
                                <listitem>
                                    <para>
                                        <markup linkend="attrdef-id">id</markup>
                                        <option>[optional]</option>
                                    </para>
                                </listitem>
                                <listitem>
                                    <para>
                                        <markup linkend="attrdef-media-type">media-type</markup>
                                        <option>[required]</option>
                                    </para>
                                </listitem>
                                <listitem>
                                    <para>
                                        <markup linkend="attrdef-properties">properties</markup>
                                        <option>[optional]</option>
                                    </para>
                                </listitem>
                                <listitem>
                                    <para>
                                        <markup linkend="attrdef-link-rel">rel</markup>
                                        <option>[required]</option>
                                    </para>
                                </listitem>
                            </itemizedlist>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>Empty</para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <para>The <link linkend="sec-metadata-elem"><markup>metadata</markup> element</link>
                    <literal role="rfc2119">may</literal> contain zero or more <markup>link</markup> elements, each of which
                    identifies the location of a linked resource in its <literal role="rfc2119">required</literal>
                    <markup>href</markup> attribute</para>

                <para>Linked resources <literal role="rfc2119">must not</literal> be listed in the <link
                        linkend="sec-manifest-elem">manifest</link> unless they are also <olink targetdoc="spec"
                        targetptr="gloss-publication-resource-cmt-or-foreign" type="epub-spec">Publication Resources</olink>
                    (i.e., used in the rendering of the Rendition, such as a metadata record that is serialized in an <olink
                        targetdoc="spec" targetptr="gloss-content-document-epub" type="epub-spec"/>).</para>

                <para>Linked resources that are not Publication Resources are not subject to <olink targetdoc="spec"
                        targetptr="sec-core-media-types" type="epub-spec">Core Media Type requirements</olink> and <literal
                        role="rfc2119">may</literal> be located <olink targetdoc="spec" targetptr="sec-resource-locations"
                        type="epub-spec">inside or outside</olink> the <olink targetdoc="spec" targetptr="gloss-container"
                        type="epub-spec"/>. Retrieval of <olink targetdoc="spec" targetptr="gloss-remote-resource"
                        type="epub-spec">Remote Resources</olink> is <literal role="rfc2119">optional</literal>.</para>

                <para xml:id="attrdef-link-rel" xreflabel="rel">The <literal role="rfc2119">required</literal>
                    <markup>rel</markup> attribute takes a space-separated list of <link linkend="sec-property-datatype"
                        >property</link> values that establish the relationship the resource has with the Rendition.</para>

                <informalexample>
                    <para>The following example shows the <markup>link</markup> element used to associate a local MARC XML
                        record.</para>
                    <synopsis><xi:include parse="text" href="examples/publications/link-4.xml"/></synopsis>
                </informalexample>

                <para>If a Reading System does not recognize the relationship defined in the <markup>rel</markup> attribute,
                    it <literal role="rfc2119">should</literal> ignore the referenced resource.</para>

                <para>The value of the <markup>media-type</markup> attribute is not always sufficient to identify the type of
                    linked resource (e.g., many XML-based record formats use the media type "<code>application/xml</code>").
                    To aid Reading Systems in the identification of such generic resources, the <markup>properties</markup>
                    attribute can be attached with a semantic identifier.</para>

                <informalexample>
                    <para>The following example shows the <markup>properties</markup> attribute used to identify a remote XMP
                        record.</para>
                    <synopsis><xi:include parse="text" href="examples/publications/link-3.xml"/></synopsis>
                </informalexample>

                <para>The list of relationships and properties recognized by this specification is defined in the <link
                        xlink:href="../../vocab/package/link/link-vocab.html">EPUB Metadata Link Vocabulary</link>.</para>

                <para><olink targetdoc="spec" targetptr="gloss-author" type="epub-spec">Authors</olink>
                    <literal role="rfc2119">may</literal> add relationships and properties from other vocabularies via the
                        <link linkend="attrdef-package-prefix">metadata extensibility mechanism</link> defined in this
                    specification. Authors <literal role="rfc2119">may</literal> also create new values by defining their own
                    prefixes. Refer to <xref linkend="sec-metadata-assoc"/> for more information.</para>

                <informalexample>
                    <para>The following example shows the <markup>link</markup> element used to associate an informational
                        web page. Note that as <property>foaf</property> is not a <link
                            linkend="sec-metadata-reserved-vocabs">predefined prefix</link>, it has to be declared in the
                            <link linkend="attrdef-package-prefix">prefix attribute</link>. </para>
                    <synopsis><xi:include parse="text" href="examples/publications/link-2.xml"/></synopsis>
                </informalexample>

                <para>In the case of linked <link xlink:href="../../vocab/package/link/link-vocab.html#record">metadata
                        records</link>, the document order of <markup>link</markup> elements in the Package Document defines
                    the Author's preferred precedence for their use (i.e., metadata in the first record encountered has the
                    highest precedence).</para>

                <informalexample>
                    <para>The following example shows that a remotely-hosted record that has higher precedence than a local
                        one. </para>
                    <synopsis><xi:include parse="text" href="examples/publications/link-5.xml"/></synopsis>
                </informalexample>

                <para>If metadata records are hosted outside the container, the Author <literal role="rfc2119">must</literal>
                    ensure that they can be retrieved as defined in <xref linkend="app-meta-protocol"/>. Reading Systems
                        <literal role="rfc2119">must</literal> follow the protocol defined in the appendix when retrieving
                    records.</para>

                <para>When the <markup>link</markup> element references a metadata record format that is recognized and
                    retrievable by a Reading System, precedence <literal role="rfc2119">must</literal> be given to the
                    metadata defined in that record (i.e., metadata in the Package Document has the lowest priority). If a
                    Reading System recognizes more than one format, it <literal role="rfc2119">must</literal> give precedence
                    to them based on the document order of <markup>link</markup> elements, as defined above.</para>

                <note>
                    <para>Due to the variety of metadata record formats and serializations that can be linked to an EPUB
                        Publication, and the complexity of comparing metadata properties between them, this specification
                        does not require Reading Systems to process more than one record.</para>
                </note>

                <para>Reading Systems <literal role="rfc2119">must</literal> ignore any instructions contained in linked
                    resources related to the layout and rendering of the EPUB Publication.</para>
            </section>

            <section xml:id="sec-manifest-elem" xreflabel="manifest">
                <title>The <markup>manifest</markup> Element</title>

                <para>The <markup>manifest</markup> element provides an exhaustive list of the <olink targetdoc="spec"
                        targetptr="gloss-publication-resource-cmt-or-foreign" type="epub-spec">Publication Resources</olink>
                    that constitute the given <olink targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/>, each
                    represented by an <markup><xref role="codelink" linkend="sec-item-elem"/></markup> element.</para>

                <variablelist xreflabel="manifest" role="elem-synopsis" xml:id="elemdef-opf-manifest">
                    <varlistentry>
                        <term>Element name</term>
                        <listitem>
                            <para><markup>manifest</markup></para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>Required second child of <markup><xref role="codelink" linkend="elemdef-opf-package"
                                    /></markup>, following <markup><xref role="codelink" linkend="elemdef-opf-metadata"
                                    /></markup>.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>
                            <para>
                                <markup linkend="attrdef-id">id</markup>
                                <option>[optional]</option>
                            </para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>One or more <markup><xref role="codelink" linkend="elemdef-package-item"/></markup>
                                elements <option>[required]</option></para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <note>
                    <para>This specification supports internationalized resource naming, so elements and attributes that
                        reference Publication Resources accept IRIs as their value. For compatibility with older Reading
                        Systems that only accept URIs, resource names should be restricted to the ASCII character set.</para>
                </note>

            </section>

            <section xml:id="sec-item-elem" xreflabel="item">
                <title>The <markup>item</markup> Element</title>

                <para>The <markup>item</markup> element represents a <olink targetdoc="spec"
                        targetptr="gloss-publication-resource-cmt-or-foreign" type="epub-spec"/>.</para>

                <variablelist xreflabel="item" role="elem-synopsis" xml:id="elemdef-package-item">
                    <varlistentry>
                        <term>Element Name</term>
                        <listitem>
                            <para><markup>item</markup></para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>As a child of <markup><xref role="codelink" linkend="elemdef-opf-manifest"/></markup>.
                                Repeatable.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>
                            <itemizedlist mark="none">
                                <listitem>
                                    <para>
                                        <markup linkend="attrdef-item-duration">duration</markup>
                                        <option>[conditionally required]</option>
                                    </para>
                                </listitem>
                                <listitem>
                                    <para>
                                        <markup linkend="attrdef-item-fallback">fallback</markup>
                                        <option>[conditionally required]</option>
                                    </para>
                                </listitem>
                                <listitem>
                                    <para>
                                        <markup linkend="attrdef-href">href</markup>
                                        <option>[required]</option>
                                    </para>
                                </listitem>
                                <listitem>
                                    <para>
                                        <markup linkend="attrdef-id">id</markup>
                                        <option>[required]</option>
                                    </para>
                                </listitem>
                                <listitem>
                                    <para>
                                        <markup linkend="attrdef-item-media-overlay">media-overlay</markup>
                                        <option>[optional]</option>
                                    </para>
                                </listitem>
                                <listitem>
                                    <para>
                                        <markup linkend="attrdef-media-type">media-type</markup>
                                        <option>[required]</option>
                                    </para>
                                </listitem>
                                <listitem>
                                    <para>
                                        <markup linkend="attrdef-properties">properties</markup>
                                        <option>[optional]</option>
                                    </para>
                                </listitem>
                            </itemizedlist>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>Empty</para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <para>Each <markup>item</markup> element in the <markup>manifest</markup> identifies a <olink
                        targetdoc="spec" targetptr="gloss-publication-resource-cmt-or-foreign" type="epub-spec"/> by the IRI
                        <xref linkend="refRFC3987"/> provided in its <markup>href</markup> attribute. The IRI <literal
                        role="rfc2119">may</literal> be absolute or relative. In the case of relative IRIs, Reading Systems
                        <literal role="rfc2119">must</literal> use the IRI of the Package Document as the base when resolving
                    these to absolute IRIs. The resulting absolute IRI <literal role="rfc2119">must</literal> be unique
                    within the <markup>manifest</markup> scope.</para>

                <para>All Publication Resources <literal role="rfc2119">must</literal> be referenced from the
                        <markup>manifest</markup>, regardless of whether they are included in the <olink targetdoc="spec"
                        targetptr="gloss-container" type="epub-spec"/> or made available remotely. Refer to <olink
                        targetdoc="spec" targetptr="sec-resource-locations" type="epub-spec"/> for media type-specific
                    requirements regarding resource locations.</para>

                <para>Note that the <markup>manifest</markup> is not self-referencing: it <literal role="rfc2119">must
                        not</literal> include an <markup>item</markup> element that refers to the Package Document
                    itself.</para>

                <para>The Publication Resource identified by an <markup>item</markup> element <literal role="rfc2119"
                        >must</literal> conform to the applicable specification(s) as inferred from the MIME media type
                    provided in the <markup>media-type</markup> attribute. <olink targetdoc="spec"
                        targetptr="gloss-publication-resource-cmt" type="epub-spec">Core Media Type Resources</olink>
                    <literal role="rfc2119">must</literal> use the media type designated in <olink targetdoc="spec"
                        targetptr="tbl-core-media-types" type="epub-spec"/>.</para>

                <para xml:id="attrdef-item-fallback">The <markup>fallback</markup> attribute takes an IDREF <xref
                        linkend="refXML"/> that identifies the fallback for a non-Core Media Type. All <olink
                        targetdoc="spec" targetptr="gloss-publication-resource-foreign" type="epub-spec">Foreign
                        Resources</olink>
                    <literal role="rfc2119">must</literal> provide a fallback, as defined in <xref
                        linkend="sec-foreign-restrictions-manifest"/>.</para>

                <para xml:id="attrdef-item-properties">All Publication Resources <literal role="rfc2119">must</literal>
                    declare all applicable descriptive metadata properties defined in <link
                        xlink:href="http://www.idpf.org/epub/vocab/package/#sec-item-property-values">Manifest
                            <markup>item</markup> Properties</link>
                    <xref linkend="refEPUBPackageVocab"/> via the <markup>properties</markup> attribute. Exactly one
                        <markup>item</markup>
                    <literal role="rfc2119">must</literal> be declared as the <olink targetdoc="spec"
                        targetptr="gloss-content-document-epub-nav" type="epub-spec"/> using the <property>nav</property>
                    property.</para>

                <para>Reading Systems <literal role="rfc2119">must</literal> ignore all descriptive metadata properties that
                    they do not recognize.</para>

                <para xml:id="attrdef-item-media-overlay">The <markup>media-overlay</markup> attribute takes an IDREF <xref
                        linkend="refXML"/> that identifies the <olink targetdoc="spec"
                        targetptr="gloss-media-overlay-document" type="epub-spec"/> for the resource described by this
                        <markup>item</markup>. Refer to <olink type="epub-spec" targetdoc="mediaoverlays"
                        targetptr="sec-docs-package"/> for more information.</para>

                <para xml:id="attrdef-item-duration">The <markup>duration</markup> attribute takes a <xref linkend="refSMIL"/>
                    <link xlink:href="http://www.w3.org/TR/SMIL/smil-timing.html#q22">clock value</link> that provides the
                    total duration of the audio media referenced from a Media Overlay Document or, in the case of timed
                    media, the total duration of the referenced media file. Refer to <olink type="epub-spec"
                        targetdoc="mediaoverlays" targetptr="sec-package-metadata"/> for more information.</para>

                <note>
                    <para>The order of <markup>item</markup> elements in the <markup>manifest</markup> is not significant.
                        The presentation sequence of content documents is provided in the <markup><link role="codelink"
                                linkend="sec-spine-elem">spine</link></markup>.</para>
                </note>

                <bridgehead xml:id="examples-manifest" xreflabel="Manifest examples">Examples</bridgehead>

                <informalexample xml:id="example-manifest-cmt">
                    <para>The following example shows a <markup>manifest</markup> that only contains <olink targetdoc="spec"
                            targetptr="gloss-publication-resource-cmt" type="epub-spec">Core Media Type
                        Resources</olink>.</para>
                    <synopsis><xi:include href="./examples/publications/manifest-1.xml" parse="text"/></synopsis>
                </informalexample>

                <informalexample xml:id="example-manifest-flbk">
                    <para>The following example shows a <markup>manifest</markup> that references two <olink targetdoc="spec"
                            targetptr="gloss-publication-resource-foreign" type="epub-spec">Foreign Resources</olink>, and
                        therefore uses the <link linkend="sec-foreign-restrictions-manifest">fallback chain mechanism</link>
                        to supply content alternatives. The fallback chain terminates with a Core Media Type. </para>
                    <synopsis><xi:include href="./examples/publications/manifest-2.xml" parse="text"/></synopsis>
                </informalexample>

                <note>
                    <para>Refer also to the <link
                            xlink:href="http://www.idpf.org/epub/vocab/package/#examples-item-properties">Manifest item
                            properties examples</link> for use of the <markup>properties</markup> attribute.</para>
                </note>
            </section>

            <section xml:id="sec-spine-elem" xreflabel="spine">
                <title>The <markup>spine</markup> Element</title>

                <para>The <markup>spine</markup> element defines the default reading order of the given <olink
                        targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/> of the <olink targetdoc="spec"
                        targetptr="gloss-epub-publication" type="epub-spec"/> content by defining an ordered list of <link
                        linkend="sec-itemref-elem">manifest <markup>item</markup> references</link>.</para>

                <variablelist xreflabel="spine" role="elem-synopsis" xml:id="elemdef-opf-spine">
                    <varlistentry>
                        <term>Element name</term>
                        <listitem>
                            <para><markup>spine</markup></para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>Required third child of <markup><xref role="codelink" linkend="elemdef-opf-package"
                                    /></markup>, following <markup><xref role="codelink" linkend="elemdef-opf-manifest"
                                    /></markup>.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>
                            <itemizedlist mark="none">
                                <listitem>
                                    <para>
                                        <markup linkend="attrdef-id">id</markup>
                                        <option>[optional]</option>
                                    </para>
                                </listitem>
                                <listitem>
                                    <para>
                                        <markup linkend="attrdef-spine-page-progression-direction"
                                            >page-progression-direction</markup>
                                        <option>[optional]</option>
                                    </para>
                                </listitem>
                                <listitem>
                                    <para>
                                        <markup linkend="attrdef-spine-toc">toc</markup>
                                        <option>[optional]</option>
                                        <option>[OBSOLETE]</option>
                                    </para>
                                </listitem>
                            </itemizedlist>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>One or more <markup><xref role="codelink" linkend="elemdef-spine-itemref"/></markup>
                                elements <option>[required]</option></para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <para>Reading Systems <literal role="rfc2119">must</literal> provide a means of rendering the Rendition in
                    the order defined in the <markup>spine</markup>, which includes: 1) recognizing the first primary
                        <markup>itemref</markup> as the beginning of the default reading order; and, 2) rendering successive
                    primary items in the order given in the <markup>spine</markup>.</para>

                <para>All <olink targetdoc="spec" targetptr="gloss-publication-resource-cmt-or-foreign" type="epub-spec"
                        >Publication Resources</olink> that are hyperlinked to from Publication Resources in the
                        <markup>spine</markup>
                    <literal role="rfc2119">must</literal> themselves be listed in the <markup>spine</markup>, where
                    hyperlinking is defined to be any linking mechanism that requires the <olink targetdoc="spec"
                        targetptr="gloss-user" type="epub-spec"/> to navigate away from the current resource. Common
                    hyperlinking mechanisms include the <markup>href</markup> attribute of the <xref linkend="refHTML5"/>
                    <link xlink:href="https://www.w3.org/TR/html5/text-level-semantics.html#the-a-element"
                        ><markup>a</markup></link> and <link
                        xlink:href="https://www.w3.org/TR/html5/embedded-content-0.html#the-area-element"
                            ><markup>area</markup></link> elements and scripted links (e.g., using DOM Events and/or form
                    elements). The requirement to list hyperlinked resources applies recursively (i.e., all Publication
                    Resources hyperlinked from hyperlinked Publication Resources also have to be listed, and so on.).</para>

                <para>All Publication Resources hyperlinked to from the <olink targetdoc="spec"
                        targetptr="gloss-content-document-epub-nav" type="epub-spec"/> also <literal role="rfc2119"
                        >must</literal> be listed in the <markup>spine</markup>, regardless of whether the Navigation
                    Document is itself listed the <markup>spine</markup>.</para>

                <para>Embedded Publication Resources (e.g., via the <xref linkend="refHTML5"/>
                    <link xlink:href="https://www.w3.org/TR/html5/embedded-content-0.html#the-iframe-element">iframe</link>
                    element) do not have to be listed in the <markup>spine</markup>.</para>

                <para xml:id="attrdef-spine-page-progression-direction" xreflabel="page-progression-direction">The
                        <markup>page-progression-direction</markup> attribute sets the global direction in which the content
                    flows. Allowed values are <code role="value">ltr</code> (left-to-right), <code role="value">rtl</code>
                    (right-to-left) and <code role="value">default</code>. When the <code role="value">default</code> value
                    is specified, the Author is expressing no preference and the Reading System can chose the rendering
                    direction. The <code>default</code> value <literal role="rfc2119">must</literal> be assumed when the
                    attribute is not specified.</para>

                <para>Although the <markup>page-progression-direction</markup> attribute sets the global flow direction,
                    individual Content Documents and parts of Content Documents <literal role="rfc2119">may</literal>
                    override this setting (e.g., via the <property>writing-mode</property> CSS property). Reading Systems
                        <literal role="rfc2119">may</literal> also provide mechanisms to override the default direction
                    (e.g., buttons or settings that allow the application of alternate style sheets).</para>

                <para>Reading Systems <literal role="rfc2119">must</literal> ignore the page progression direction defined in
                        <link linkend="fxl-property-layout"><code role="value">pre-paginated</code></link> XHTML Content
                    Documents. The <markup>page-progression-direction</markup> attribute defines the flow direction from one
                    fixed-layout page to the next.</para>
            </section>

            <section xml:id="sec-itemref-elem" xreflabel="itemref">
                <title>The <markup>itemref</markup> Element</title>

                <para>The child <markup>itemref</markup> elements of the <markup>spine</markup> represent a sequential list
                    of <olink targetdoc="spec" targetptr="gloss-publication-resource-cmt-or-foreign" type="epub-spec"
                        >Publication Resources</olink> (<link linkend="confreq-spine-itemtypes">typically</link>
                    <olink targetdoc="spec" targetptr="gloss-content-document-epub" type="epub-spec">EPUB Content
                        Documents</olink>). The order of the <markup>itemref</markup> elements defines the default reading
                    order of the given <olink targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/> of the <olink
                        targetdoc="spec" targetptr="gloss-epub-publication" type="epub-spec"/>.</para>

                <variablelist xreflabel="itemref" role="elem-synopsis" xml:id="elemdef-spine-itemref">
                    <varlistentry>
                        <term>Element Name</term>
                        <listitem>
                            <para><markup>itemref</markup></para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>As a child of <markup><xref role="codelink" linkend="elemdef-opf-spine"/></markup>.
                                Repeatable.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>
                            <itemizedlist mark="none">
                                <listitem>
                                    <para>
                                        <markup linkend="attrdef-id">id</markup>
                                        <option>[optional]</option>
                                    </para>
                                </listitem>
                                <listitem>
                                    <para>
                                        <markup linkend="attrdef-itemref-idref">idref</markup>
                                        <option>[required]</option>
                                    </para>
                                </listitem>
                                <listitem>
                                    <para>
                                        <markup linkend="attrdef-itemref-linear">linear</markup>
                                        <option>[optional]</option>
                                    </para>
                                </listitem>
                                <listitem>
                                    <para>
                                        <markup linkend="attrdef-properties">properties</markup>
                                        <option>[optional]</option>
                                    </para>
                                </listitem>
                            </itemizedlist>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>Empty</para>
                        </listitem>
                    </varlistentry>

                </variablelist>

                <para xml:id="attrdef-itemref-idref">Each <markup>itemref</markup> element <literal role="rfc2119"
                        >must</literal> reference via an IDREF <xref linkend="refXML"/> a unique <markup><xref
                            linkend="elemdef-package-item"/></markup> in the <olink targetdoc="spec"
                        targetptr="gloss-manifest" type="epub-spec"/> via its <markup>itemref</markup> attribute. </para>

                <para xml:id="confreq-spine-itemtypes">Each referenced manifest <markup>item</markup>
                    <literal role="rfc2119">must</literal> be either a) an <olink targetdoc="spec"
                        targetptr="gloss-content-document-epub" type="epub-spec"/> or b) another type of <olink
                        targetdoc="spec" targetptr="gloss-publication-resource-cmt-or-foreign" type="epub-spec"/> which,
                        <emphasis>regardless of whether it is a <olink targetdoc="spec"
                            targetptr="gloss-publication-resource-cmt" type="epub-spec"/> or a <olink targetdoc="spec"
                            targetptr="gloss-publication-resource-foreign" type="epub-spec"/></emphasis>, <literal
                        role="rfc2119">must</literal> include an EPUB Content Document in its <link
                        linkend="sec-foreign-restrictions-manifest">fallback chain</link>.</para>

                <note>
                    <para>Although the <olink targetdoc="spec" targetptr="gloss-content-document-epub-nav" type="epub-spec"/>
                        is <link linkend="confreq-nav-occur">required in EPUB Publications</link>, it is optional to include
                        it in the <markup>spine</markup>.</para>
                </note>

                <annotation xml:id="issue-linear">
                    <para>The future of the <markup>linear</markup> attribute in EPUB 3.1 is still uncertain. The use of the
                        attribute could be clarified in a future draft to better differentiate the presentation requirements
                        of linear and non-linear content (e.g., whether to hide non-linear content by default, or require an
                        option for the user to toggle), or the attribute could be removed entirely. See <link
                            xlink:href="https://github.com/IDPF/epub-revision/issues/632">issue 632</link>.</para>
                </annotation>

                <para xml:id="attrdef-itemref-linear">The <markup>linear</markup> attribute indicates whether the referenced
                        <markup>item</markup> contains content that contributes to the primary reading order and has to be
                    read sequentially ("<code role="value">yes</code>") or auxiliary content that enhances or augments the
                    primary content and can be accessed out of sequence ("<code role="value">no</code>"). Examples of
                    auxiliary content include: notes, descriptions and answer keys.</para>

                <para>The <markup>linear</markup> attribute allows Reading Systems to distinguish content that a <olink
                        targetdoc="spec" targetptr="gloss-user" type="epub-spec"/> needs to access as part of the default
                    read-through from supplementary content which might, for example, be presented in a popup window or
                    omitted from an aural rendering. Note that this specification does not require a presentation for
                    non-linear content; Reading Systems <literal role="rfc2119">may</literal> handle non-linear content the
                    same way as linear.</para>

                <para>Each Rendition <literal role="rfc2119">must</literal> include at least one <markup>itemref</markup>
                    whose <markup>linear</markup> attribute value is either explicitly or implicitly set to "<code
                        role="value">yes</code>". An <markup>itemref</markup> that omits the <markup>linear</markup>
                    attribute is assumed to have the value "<code role="value">yes</code>".</para>

                <para>Authors <literal role="rfc2119">must</literal> provide a means of accessing all non-linear content
                    (e.g., hyperlinks in the content or from the <link linkend="sec-package-nav">EPUB Navigation
                        Document</link>).</para>

                <para xml:id="attrdef-itemref-properties">All applicable descriptive metadata properties, such as those
                    defined in the <link xlink:href="http://www.idpf.org/epub/vocab/package/#sec-itemref-property-values"
                        >Spine <markup>itemref</markup> Properties</link>
                    <xref linkend="refEPUBPackageVocab"/>, <literal role="rfc2119">should</literal> be declared via the
                        <markup>properties</markup> attribute.</para>

                <para>Reading Systems <literal role="rfc2119">must</literal> ignore all metadata properties expressed in the
                        <markup>properties</markup> attribute that they do not recognize.</para>

                <bridgehead xml:id="sec-itemref-ex">Examples</bridgehead>
                <informalexample>
                    <para>The following example shows a <markup>spine</markup> element corresponding to <link
                            linkend="example-manifest-cmt">the manifest example above</link>.</para>
                    <synopsis><xi:include href="./examples/publications/spine-1.xml" parse="text"/></synopsis>
                </informalexample>

            </section>

            <section xml:id="sec-collection-elem" xreflabel="collection">
                <title>The <markup>collection</markup> Element</title>

                <para>The <markup>collection</markup> element defines a related group of resources.</para>

                <variablelist xreflabel="collection" role="elem-synopsis" xml:id="elemdef-collection">
                    <varlistentry>
                        <term>Element Name</term>
                        <listitem>
                            <para><markup>collection</markup></para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>Optional sixth element of <markup>package</markup>. Repeatable.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>
                            <itemizedlist mark="none">
                                <listitem>
                                    <para>
                                        <markup linkend="attrdef-dir">dir</markup>
                                        <option>[optional]</option>
                                    </para>
                                </listitem>
                                <listitem>
                                    <para>
                                        <markup linkend="attrdef-id">id</markup>
                                        <option>[optional]</option>
                                    </para>
                                </listitem>
                                <listitem>
                                    <para>
                                        <markup linkend="attrdef-collection-role">role</markup>
                                        <option>[required]</option>
                                    </para>
                                </listitem>
                                <listitem>
                                    <para>
                                        <markup linkend="attrdef-xml-lang">xml:lang</markup>
                                        <option>[optional]</option>
                                    </para>
                                </listitem>
                            </itemizedlist>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>In this order: <markup><link linkend="elemdef-collection-metadata">metadata</link></markup>
                                <option>[optional]</option>, ( <markup><xref linkend="elemdef-collection"/></markup>
                                <option>[1 or more]</option> or ( <markup><xref linkend="elemdef-collection"/></markup>
                                <option>[0 or more]</option>, <markup><link linkend="elemdef-collection-link"
                                    >link</link></markup>
                                <option>[1 or more]</option> ))</para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <para>The <markup>collection</markup> element allows resources to be assembled into logical groups for a
                    variety of potential uses: enabling content that has been split across multiple <olink targetdoc="spec"
                        targetptr="gloss-content-document-epub" type="epub-spec">EPUB Content Documents</olink> to be
                    reassembled back into a meaningful unit (e.g., an index split across multiple documents), identifying
                    resources for specialized purposes (e.g., preview content), or collecting together resources that present
                    additional information about the given <olink targetdoc="spec" targetptr="gloss-rendition"
                        type="epub-spec"/>.</para>

                <para>The <markup>collection</markup> element, as defined in this section, represents a generic framework
                    from which specific implementations are intended to be derived (e.g., through IDPF sub-specifications).
                    Such implementations <literal role="rfc2119">must</literal> define the purpose of the
                        <markup>collection</markup> element within a Rendition, as well as all requirements for its valid
                    production and use (specifically any requirements that differ from the general framework presented
                    below).</para>

                <para xml:id="attrdef-collection-role">Each implementation <literal role="rfc2119">must</literal> define a
                    role value that uniquely identifies all conformant <markup>collection</markup> elements. The role of each
                        <markup>collection</markup> element in the Package Document <literal role="rfc2119">must</literal> be
                    identified in its <markup>role</markup> attribute, whose value <literal role="rfc2119">must</literal> be
                    one or more NMTOKENs <xref linkend="refXSDDatatypes"/> and/or absolute IRIs <xref linkend="refRFC3987"/>.
                    The use of NMTOKEN values is reserved for IDPF-defined roles, a registry of which is maintained at <uri
                        xlink:href="http://www.idpf.org/epub/vocab/package/roles"
                        >http://www.idpf.org/epub/vocab/package/roles</uri>. NMTOKEN values not defined in the registry are
                    not valid. No roles are defined in this section.</para>

                <para>Third parties <literal role="rfc2119">may</literal> define custom roles for the
                        <markup>collection</markup> element, but such roles <literal role="rfc2119">must</literal> be
                    identified using absolute IRIs. Custom roles <literal role="rfc2119">must not</literal> incorporate the
                    string <uri>idpf.org</uri> in the host component of their identifying IRI.</para>

                <note>
                    <para>To facilitate interoperability of custom roles across Reading Systems, implementers are strongly
                        encouraged to document their use of the <markup>collection</markup> element at <uri
                            xlink:href="http://www.idpf.org/epub/extensions/roles"
                            >http://www.idpf.org/epub/extensions/roles</uri>.</para>
                </note>

                <para xml:id="elemdef-collection-metadata">The optional <markup>metadata</markup> element child of
                        <markup>collection</markup> is an adaptation of the package <markup linkend="elemdef-opf-metadata"
                        >metadata</markup> element, with the following differences in syntax and semantics:</para>

                <itemizedlist>
                    <listitem>
                        <para>No metadata is required by default.</para>
                    </listitem>
                    <listitem>
                        <para>Package-level restrictions on the use of metadata elements <literal role="rfc2119"
                                >may</literal> be overridden.</para>
                    </listitem>
                </itemizedlist>

                <para>A <markup>collection</markup>
                    <literal role="rfc2119">may</literal> define sub-collections through the inclusion of one or more child
                        <markup>collection</markup> elements.</para>

                <para xml:id="elemdef-collection-link">The <markup>link</markup> element child of <markup>collection</markup>
                    is an adaptation of the metadata <markup linkend="elemdef-opf-link">link</markup> element, with the
                    following differences in syntax and semantics:</para>

                <itemizedlist>
                    <listitem>
                        <para>The IRI value of the <markup>href</markup> attribute <literal role="rfc2119">may</literal> have
                            a fragment component to indicate that only a portion or subset of a resource is included in the
                            collection.</para>
                    </listitem>
                    <listitem>
                        <para>The <markup>rel</markup> attribute is <literal role="rfc2119">optional</literal>.</para>
                    </listitem>
                    <listitem>
                        <para>The <markup>properties</markup> attribute also accepts <link
                                xlink:href="../../vocab/package/epub-vocab-package.html#sec-item-property-values">manifest
                                item properties</link>
                            <xref linkend="refEPUBPackageVocab"/> without a prefix (e.g., so that a collection can declare
                            its own Navigation Document or cover image).</para>
                    </listitem>
                </itemizedlist>

                <para>Each <markup>link</markup>
                    <literal role="rfc2119">must</literal> reference a resource that is a member of the group. The order of
                        <markup>link</markup> elements is not significant.</para>

                <para>Specific implementations of the <markup>collection</markup> element <literal role="rfc2119"
                        >may</literal> tailor the requirements defined above to better reflect their needs (e.g., requiring
                    metadata, imposing further restrictions on the use of elements and attributes, or making the order of
                        <markup>link</markup> elements significant). However, the resulting content model <literal
                        role="rfc2119">must</literal> represent a valid subset of the one defined in this section (e.g.,
                    specific implementations cannot introduce new elements or attributes, or re-introduce those expressly
                    forbidden above). Specific implementations <literal role="rfc2119">must not</literal> define collections
                    in a way that overrides the requirements of the <markup linkend="elemdef-opf-manifest">manifest</markup>
                    and <markup linkend="elemdef-opf-spine">spine</markup>.</para>

                <para>In the context of this specification, support for collections in Reading Systems is <literal
                        role="rfc2119">optional</literal>. Reading Systems <literal role="rfc2119">must</literal> ignore
                        <markup>collection</markup> elements that define unrecognized roles.</para>

                <para>The rendering of a Rendition <literal role="rfc2119">must not</literal> be dependent on the recognition
                    of <markup>collection</markup> elements. The content <literal role="rfc2119">must</literal> remain
                    consumable by a User without any information loss or other significant deterioration.</para>

                <bridgehead xml:id="sec-collection-ex">Examples</bridgehead>

                <informalexample xml:id="example-collection">
                    <para>The following example shows the assembly of two <olink targetdoc="spec"
                            targetptr="gloss-content-document-epub-xhtml" type="epub-spec">XHTML Content Documents</olink>
                        that represent a single unit.</para>
                    <synopsis><xi:include href="./examples/publications/collection.xml" parse="text"/></synopsis>
                </informalexample>
            </section>

            <section xml:id="sec-shared-attrs">
                <title>Shared Attributes</title>

                <para>This section provides definitions for shared attributes (i.e., attributes that are allowed on two or
                    more elements).</para>

                <para>Attributes with the prefix "<markup>opf:</markup>" are in the namespace
                        <uri>http://www.idpf.org/2007/opf</uri>.</para>

                <variablelist>
                    <varlistentry xml:id="attrdef-opf-alt-script">
                        <term><markup>opf:alt-script</markup></term>
                        <listitem>
                            <para>Provides an alternative expression of the associated value in a language and script
                                identified by the <markup linkend="attrdef-xml-lang">xml:lang attribute</markup>.</para>
                            <synopsis><xi:include href="examples/publications/alt-script.xml" parse="text"/></synopsis>
                            <para>Allowed on: <markup linkend="sec-opf-dccontributor">dc:contributor</markup>, <markup
                                    linkend="sec-opf-dccreator">dc:creator</markup>, <markup
                                    linkend="sec-opf-dcmes-optional-def">dc:publisher</markup>, <markup
                                    linkend="sec-opf-dctitle">dc:title</markup> and <markup linkend="sec-meta-elem"
                                    >meta</markup>.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry xml:id="attrdef-dir">
                        <term><markup>dir</markup></term>
                        <listitem xmlns="http://docbook.org/ns/docbook" xml:lang="en">
                            <para>Specifies the base text direction of the content and attribute values of the carrying
                                element and its descendants.</para>
                            <para>Inherent directionality specified using <xref linkend="refUnicode5"/> takes precedence over
                                this attribute.</para>
                            <para>Allowed values are <code role="value">ltr</code> (left-to-right) and <code role="value"
                                    >rtl</code> (right-to-left).</para>
                            <synopsis><xi:include href="examples/publications/dir.xml" parse="text"/></synopsis>
                            <para>Allowed on: <markup linkend="sec-collection-elem">collection</markup>, <markup
                                    linkend="sec-opf-dccontributor">dc:contributor</markup>, <markup
                                    linkend="sec-opf-dcmes-optional-def">dc:coverage</markup>, <markup
                                    linkend="sec-opf-dccreator">dc:creator</markup>, <markup
                                    linkend="sec-opf-dcmes-optional-def">dc:description</markup>, <markup
                                    linkend="sec-opf-dcmes-optional-def">dc:publisher</markup>, <markup
                                    linkend="sec-opf-dcmes-optional-def">dc:relation</markup>, <markup
                                    linkend="sec-opf-dcmes-optional-def">dc:rights</markup>, <markup
                                    linkend="sec-opf-dcsubject">dc:subject</markup>, <markup linkend="sec-opf-dctitle"
                                    >dc:title</markup>, <markup linkend="sec-meta-elem">meta</markup> and <markup
                                    linkend="sec-package-elem">package</markup>.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry xml:id="attrdef-opf-file-as">
                        <term><markup>opf:file-as</markup></term>
                        <listitem>
                            <para>Provides the normalized form of the element's value for sorting.</para>
                            <synopsis><xi:include href="examples/publications/file-as.xml" parse="text"/></synopsis>
                            <para>Allowed on: <markup linkend="sec-opf-dccontributor">dc:contributor</markup>, <markup
                                    linkend="sec-opf-dccreator">dc:creator</markup>, <markup
                                    linkend="sec-opf-dcmes-optional-def">dc:publisher</markup>, <markup
                                    linkend="sec-opf-dctitle">dc:title</markup> and <markup linkend="sec-meta-elem"
                                    >meta</markup>.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry xml:id="attrdef-href" xreflabel="href">
                        <term>
                            <markup>href</markup>
                        </term>
                        <listitem>
                            <para>An absolute or relative IRI reference <xref linkend="refRFC3987"/> to a resource.</para>
                            <synopsis><xi:include href="examples/publications/link-4.xml" parse="text"/></synopsis>
                            <para>Allowed on: <markup linkend="sec-item-elem">item</markup> and <markup
                                    linkend="sec-link-elem">link</markup>.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry xml:id="attrdef-id">
                        <term><markup>id</markup></term>
                        <listitem>
                            <xi:include href="./share/id-prose-para.xml"/>
                            <synopsis><xi:include href="examples/publications/id.xml" parse="text"/></synopsis>
                            <para>Allowed on: <markup linkend="sec-collection-elem">collection</markup>, <markup
                                    linkend="sec-opf-dccontributor">dc:contributor</markup>, <markup
                                    linkend="sec-opf-dcmes-optional-def">dc:coverage</markup>, <markup
                                    linkend="sec-opf-dccreator">dc:creator</markup>, <markup
                                    linkend="sec-opf-dcmes-optional-def">dc:date</markup>, <markup
                                    linkend="sec-opf-dcmes-optional-def">dc:description</markup>, <markup
                                    linkend="sec-opf-dcmes-optional-def">dc:format</markup>, <markup
                                    linkend="sec-opf-dcidentifier">dc:identifier</markup>, <markup
                                    linkend="sec-opf-dclanguage">dc:language</markup>, <markup
                                    linkend="sec-opf-dcmes-optional-def">dc:publisher</markup>, <markup
                                    linkend="sec-opf-dcmes-optional-def">dc:relation</markup>, <markup
                                    linkend="sec-opf-dcmes-optional-def">dc:rights</markup>, <markup
                                    linkend="sec-opf-dcmes-optional-def">dc:source</markup>, <markup
                                    linkend="sec-opf-dcsubject">dc:subject</markup>, <markup linkend="sec-opf-dctitle"
                                    >dc:title</markup>, <markup linkend="sec-opf-dctype">dc:type</markup>, <markup
                                    linkend="sec-item-elem">item</markup>, <markup linkend="sec-itemref-elem"
                                    >itemref</markup>, <markup linkend="sec-link-elem">link</markup>, <markup
                                    linkend="sec-manifest-elem">manifest</markup>, <markup linkend="sec-meta-elem"
                                    >meta</markup>, <markup linkend="sec-package-elem">package</markup> and <markup
                                    linkend="sec-spine-elem">spine</markup>.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry xml:id="attrdef-media-type" xreflabel="media-type">
                        <term>
                            <markup>media-type</markup>
                        </term>
                        <listitem>
                            <para>A media type <xref linkend="refRFC2046"/> that specifies the type and format of the
                                referenced resource.</para>
                            <synopsis><xi:include href="examples/publications/link-3.xml" parse="text"/></synopsis>
                            <para>Allowed on: <markup linkend="sec-item-elem">item</markup> and <markup
                                    linkend="sec-link-elem">link</markup>.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry xml:id="attrdef-properties" xreflabel="properties">
                        <term><markup>properties</markup></term>
                        <listitem>
                            <para>A space-separated list of <link linkend="sec-property-datatype">property</link>
                                values.</para>
                            <synopsis><xi:include href="examples/publications/properties.xml" parse="text"/></synopsis>
                            <para>Allowed on: <markup linkend="sec-item-elem">item</markup> and <markup
                                    linkend="sec-link-elem">link</markup>.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry xml:id="attrdef-opf-role" xreflabel="role">
                        <term><markup>opf:role</markup></term>
                        <listitem>
                            <para>Identifies the role of a creator or contributor. The value <literal role="rfc2119"
                                    >must</literal> be a three-letter lowercase code from <xref linkend="refMARCRelators"
                                />.</para>
                            <synopsis><xi:include href="examples/publications/role.xml" parse="text"/></synopsis>
                            <para>Allowed on: <markup linkend="sec-opf-dccontributor">dc:contributor</markup> and <markup
                                    linkend="sec-opf-dccreator">dc:creator</markup>.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry xml:id="attrdef-opf-scheme">
                        <term><markup>opf:scheme</markup></term>
                        <listitem>
                            <para>Identifies the type of identifier.</para>
                            <synopsis><xi:include href="examples/publications/id-type.xml" parse="text"/></synopsis>
                            <para>Allowed on: <markup linkend="sec-opf-dcidentifier">dc:identifier</markup> and <markup
                                    linkend="sec-opf-dcsource">dc:source</markup>.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry xml:id="attrdef-xml-lang">
                        <term><markup>xml:lang</markup></term>
                        <listitem>
                            <para>Specifies the language used in the contents and attribute values of the carrying element
                                and its descendants, as defined in section <link
                                    xlink:href="http://www.w3.org/TR/REC-xml/#sec-lang-tag">2.12 Language
                                    Identification</link> of <xref linkend="refXML"/>.</para>
                            <synopsis><xi:include href="examples/publications/alt-script.xml" parse="text"/></synopsis>
                            <para>Allowed on: <markup linkend="sec-collection-elem">collection</markup>, <markup
                                    linkend="sec-opf-dccontributor">dc:contributor</markup>, <markup
                                    linkend="sec-opf-dcmes-optional-def">dc:coverage</markup>, <markup
                                    linkend="sec-opf-dccreator">dc:creator</markup>, <markup
                                    linkend="sec-opf-dcmes-optional-def">dc:description</markup>, <markup
                                    linkend="sec-opf-dcmes-optional-def">dc:publisher</markup>, <markup
                                    linkend="sec-opf-dcmes-optional-def">dc:relation</markup>, <markup
                                    linkend="sec-opf-dcmes-optional-def">dc:rights</markup>, <markup
                                    linkend="sec-opf-dcsubject">dc:subject</markup>, <markup linkend="sec-opf-dctitle"
                                    >dc:title</markup>, <markup linkend="sec-meta-elem">meta</markup> and <markup
                                    linkend="sec-package-elem">package</markup>.</para>
                        </listitem>
                    </varlistentry>
                </variablelist>
            </section>
        </section>

        <section xml:id="sec-foreign-restrictions-manifest">
            <title>Manifest Fallbacks</title>

            <para>Foreign Resources <literal role="rfc2119">may</literal> be referenced in contexts in which an intrinsic
                fallback cannot be provided (e.g., directly from <olink targetdoc="spec" targetptr="gloss-spine"
                    type="epub-spec"/>
                <markup><xref linkend="elemdef-spine-itemref"/></markup> elements; from <xref linkend="refHTML5"/>
                <markup>img</markup>, <markup>iframe</markup> and <markup>link</markup> elements in <olink targetdoc="spec"
                    targetptr="gloss-content-document-epub-xhtml" type="epub-spec">XHTML Content Documents</olink>; and from
                    <property>@import</property> rules in CSS Style Sheets). Manifest fallbacks <literal role="rfc2119"
                    >must</literal> be provided in such cases.</para>

            <para>Manifest fallbacks are provided using the <markup><xref linkend="attrdef-item-fallback"/></markup>
                attribute on the <olink targetdoc="spec" targetptr="gloss-manifest" type="epub-spec">manifest</olink>
                <markup><xref linkend="elemdef-package-item"/></markup> element that represents the Publication Resource. The
                    <markup>fallback</markup> attribute's IDREF <xref linkend="refXML"/> value <literal role="rfc2119"
                    >must</literal> resolve to another <markup>item</markup> in the <markup>manifest</markup>. This fallback
                    <markup>item</markup>
                <literal role="rfc2119">may</literal> itself specify another fallback <markup>item</markup>, and so on. </para>

            <para>The ordered list of all the ID references that can be reached starting from a given item's
                    <markup>fallback</markup> attribute represents the <emphasis>fallback chain</emphasis> for that item. The
                order of the resources in the fallback chain represents the Author's preferred fallback order.</para>

            <para>A Reading System that does not support the Media Type of a given Publication Resource <literal
                    role="rfc2119">must</literal> traverse the fallback chain until it has identified at least one supported
                Publication Resource to be used in place of the unsupported resource. If the Reading System supports multiple
                Publication Resources in the fallback chain, it <literal role="rfc2119">may</literal> select the resource to
                use based on specific <link linkend="attrdef-item-properties">properties</link> of that resource, otherwise
                it <literal role="rfc2119">should</literal> honor the Author's preferred fallback order.</para>

            <para>Fallback chains <literal role="rfc2119">must</literal> conform to one of the following requirements, as
                appropriate:</para>

            <itemizedlist>
                <listitem>
                    <para>For Foreign Resources referenced directly from spine <markup><link linkend="elemdef-spine-itemref"
                                >itemref</link></markup> elements, the chain <literal role="rfc2119">must</literal> contain
                        at least one <olink targetdoc="spec" targetptr="gloss-content-document-epub" type="epub-spec"
                        />.</para>
                </listitem>
                <listitem>
                    <para>For Foreign Resources for which an intrinsic fallback cannot be provided, the chain <literal
                            role="rfc2119">must</literal> contain at least one <olink targetdoc="spec"
                            targetptr="gloss-publication-resource-cmt" type="epub-spec"/>.</para>
                </listitem>
            </itemizedlist>

            <para>Fallback chains <literal role="rfc2119">must not</literal> contain any circular- or self-references to
                    <markup>item</markup> elements in the chain.</para>

            <para>Fallbacks <literal role="rfc2119">may</literal> also be provided for <olink targetdoc="spec"
                    targetptr="gloss-content-document-top-level" type="epub-spec">Top-Level Content Documents</olink> that
                are EPUB Content Documents; a Reading System <literal role="rfc2119">may</literal> choose to utilize such
                fallbacks in order to find the optimal version of a Content Document to render in a given context. An example
                of when this feature can be utilized is when providing <olink targetdoc="contentdocs"
                    targetptr="confreq-cd-scripted-flbk" type="epub-spec">fallbacks for scripted content</olink>.</para>

        </section>

    </chapter>

    <chapter xml:id="sec-package-metadata">
        <title>Package Metadata</title>

        <section xml:id="sec-package-metadata-identifiers">
            <title>Publication Identifiers</title>

            <section xml:id="sec-metadata-elem-identifiers-uid">
                <title>Unique Identifier</title>

                <para>The <olink targetdoc="spec" targetptr="gloss-author" type="epub-spec"/> is responsible for including a
                    primary identifier in the <olink targetdoc="spec" targetptr="gloss-package-document" type="epub-spec"/>
                    metadata that is unique to one and only one <olink targetdoc="spec" targetptr="gloss-epub-publication"
                        type="epub-spec"/>. This <olink targetdoc="spec" targetptr="gloss-unique-identifier" type="epub-spec"
                    />, whether chosen or assigned, <literal role="rfc2119">must</literal> be stored in the <markup
                        linkend="sec-opf-dcidentifier">dc:identifier</markup> element and be referenced as the Unique
                    Identifier in the <markup linkend="elemdef-opf-package">package</markup> element <markup
                        linkend="attrdef-package-unique-identifier">unique-identifier</markup> attribute. </para>

                <para>Although not static, changes to the Unique Identifier for an EPUB Publication <literal role="rfc2119"
                        >should</literal> be made as infrequently as possible. New identifiers <literal role="rfc2119">should
                        not</literal> be issued when updating metadata, fixing errata or making other minor changes to the
                    EPUB Publication.</para>

            </section>

            <section xml:id="sec-metadata-elem-identifiers-pid">
                <title>Release Identifier</title>

                <para>The <olink targetdoc="spec" targetptr="gloss-unique-identifier" type="epub-spec"/> of an <olink
                        targetdoc="spec" targetptr="gloss-epub-publication" type="epub-spec"/> typically <literal
                        role="rfc2119">should not</literal> change with each minor revision to the package or its contents,
                    as Unique Identifiers are intended to have maximal persistence both for referencing and distribution
                    purposes. Each release of an EPUB Publication normally requires that the new version be uniquely
                    identifiable, however, which results in the contradictory need for reliable Unique Identifiers that are
                    changeable.</para>

                <para>To redress this problem of identifying minor modifications and releases without changing the Unique
                    Identifier, this specification defines the semantics for a <emphasis>Release Identifier</emphasis>, or
                    means of distinguishing and sequentially ordering EPUB Publications with the same Unique
                    Identifier.</para>

                <para>The Release Identifier is not an actual property in the package <markup>metadata</markup> section, but
                    is a value that can be obtained from two required pieces of metadata: the Unique Identifier and the last
                    modification date of the Rendition. When the taken together, the combined value represents a unique
                    identity that can be used to distinguish any particular version of an EPUB Publication from
                    another.</para>

                <para xml:id="last-modified-date">To ensure that a Release Identifier can be constructed, each <olink
                        targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/>
                    <literal role="rfc2119">must</literal> include exactly one <xref linkend="refDCTERMS"/>
                    <property>modified</property> property containing its last modification date. The value of this property
                        <literal role="rfc2119">must</literal> be an <xref linkend="refXSDDatatypes"/> dateTime conformant
                    date of the form:</para>

                <informalexample>
                    <synopsis>CCYY-MM-DDThh:mm:ssZ</synopsis>
                </informalexample>

                <para>The last modification date <literal role="rfc2119">must</literal> be expressed in Coordinated Universal
                    Time (UTC) and <literal role="rfc2119">must</literal> be terminated by the <literal>Z</literal> time zone
                    indicator.</para>

                <para>Although not a part of the package metadata, for referencing and other purposes all string
                    representations of the identifier <literal role="rfc2119">must</literal> be constructed using the at sign
                        (<literal>@</literal>) as the separator (i.e., of the form "id<literal>@</literal>date"). Whitespace
                        <literal role="rfc2119">must not</literal> be included when concatenating the strings.</para>

                <informalexample>
                    <para>The following example shows how a Unique Identifier and modification date are combined to form the
                        Release Identifier.</para>
                    <synopsis><xi:include href="examples/publications/package-identifier.xml" parse="text"/></synopsis>
                </informalexample>

                <para>Note that it is possible that the separator character <literal role="rfc2119">may</literal> occur in
                    the Unique Identifier, as these identifiers <literal role="rfc2119">may</literal> be any string value.
                    The Release Identifier consequently <literal role="rfc2119">must</literal> be split on the last instance
                    of the at sign when decomposing it into its component parts.</para>

                <para>The Release Identifier does not supersede the Unique Identifier, but represents the means by which
                    different versions of the same EPUB Publication can be distinguished and identified in distribution
                    channels and by Reading Systems. The sequential, chronological order inherent in the required format of
                    the timestamp also places EPUB Publications in order without requiring knowledge of the exact identifier
                    that came before.</para>

                <para>The Release Identifier consequently allows a set of EPUB Publications to be inspected to determine if
                    they represent the same version of the same Publication, different versions of a single EPUB Publication,
                    or any combination of differing and similar EPUB Publications.</para>

                <note>
                    <para>When an <olink targetdoc="spec" targetptr="gloss-container" type="epub-spec"/> includes more than
                        one <olink targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/> of an EPUB Publication,
                        updating the last modified date of the <olink targetdoc="spec" targetptr="gloss-rendition-default"
                            type="epub-spec"/> for each release — even if it has not been updated — will help ensure that the
                        EPUB Publication does not appear to be the same version as an earlier release, as Reading Systems are
                        only required to process the Default Rendition.</para>
                </note>
            </section>
        </section>

        <section xml:id="sec-metadata-assoc">
            <title>Vocabulary Association Mechanisms</title>

            <section xml:id="sec-metadata-assoc-intro" conformance="informative">
                <title>Introduction</title>

                <para>The <markup>property</markup>, <markup>properties</markup>, <markup>rel</markup> and
                        <markup>scheme</markup> attributes use the <link linkend="sec-property-datatype">property data
                        type</link> to represent terms from metadata vocabularies. Similar to a CURIE <xref linkend="refRDFa"
                    />, the property data type represents an IRI <xref linkend="refRFC3987"/> in compact form and simplifies
                    the authoring of metadata from standardized vocabularies. </para>

                <para>A property value is an expression that consists of a prefix and a reference, where the prefix — whether
                    literal or implied — is a shorthand mapping of an IRI that typically resolves to a term vocabulary. When
                    the prefix is converted to its IRI representation and combined with the reference, the resulting IRI
                    normally resolves to a fragment within that vocabulary that contains human- and/or machine-readable
                    information about the term. </para>

                <para>To assist Reading Systems in processing property values, the means of establishing the IRI a prefix
                    maps to is required, and this specification defines three such mechanisms:</para>

                <itemizedlist>
                    <listitem>
                        <para>a <link linkend="sec-metadata-default-vocab">default vocabulary</link> — defines the mapping
                            when a property value does not include a prefix;</para>
                    </listitem>
                    <listitem>
                        <para>a set of <link linkend="sec-metadata-reserved-vocabs">reserved prefixes</link> — these mappings
                            are predefined (i.e., all Reading Systems recognize them) and can be used without having to be
                            declared; and</para>
                    </listitem>
                    <listitem>
                        <para>the <markup linkend="sec-prefix-attr">prefix</markup> attribute — a declarative means of
                            creating new prefix mappings on the root <markup linkend="sec-package-elem">package</markup>
                            element.</para>
                    </listitem>
                </itemizedlist>

            </section>

            <section xml:id="sec-metadata-default-vocab">
                <title>Default Vocabulary</title>

                <para>The default vocabulary is a vocabulary that does not require a prefix to be declared in order to use
                    its terms, and whose terms <literal role="rfc2119">must</literal> always be unprefixed.</para>

                <para>As the Package Document has multiple unrelated uses for metadata terms, a single default vocabulary is
                    not defined. Instead, different default vocabularies are defined for use in attributes that accept a
                        <link linkend="sec-property-datatype">property data type</link> as follows:</para>

                <itemizedlist>
                    <listitem>
                        <para>The <link xlink:href="../../vocab/package/epub-vocab-package.html">Package Metadata
                                Vocabulary</link> is defined to be the default vocabulary for the <markup>meta</markup>
                            <markup>property</markup>, <markup>meta</markup>
                            <markup>scheme</markup>, <markup>item</markup>
                            <markup>properties</markup> and <markup>itemref</markup>
                            <markup>properties</markup> attributes.</para>
                        <para>If a property value in any of these attributes does not include a prefix, the IRI <xref
                                linkend="refRFC3987"/> stem <uri>http://idpf.org/epub/vocab/package/#</uri>
                            <literal role="rfc2119">must</literal> be used to generate the resulting IRI.</para>
                    </listitem>
                    <listitem>
                        <para>The <link xlink:href="../../vocab/package/link/link-vocab.html">EPUB Metadata Link
                                Vocabulary</link> is defined to be the default vocabulary for the <markup>link</markup>
                            <markup>rel</markup> and <markup>properties</markup> attributes.</para>
                        <para>If a property value in these attributes does not include a prefix, the IRI <xref
                                linkend="refRFC3987"/> stem <uri>http://idpf.org/epub/vocab/package/link/#</uri>
                            <literal role="rfc2119">must</literal> be used to generate the resulting IRI.</para>
                    </listitem>
                </itemizedlist>

                <para>The IRIs associated with the Package Metadata Vocabulary and Metadata Link Vocabulary <literal
                        role="rfc2119">must not</literal> be assigned a prefix using the <markup linkend="sec-prefix-attr"
                        >prefix</markup> attribute.</para>
            </section>

            <section xml:id="sec-metadata-reserved-vocabs">
                <title>Reserved Prefixes</title>

                <para>This specification reserves a set of prefixes that Authors <literal role="rfc2119">may</literal> use in
                    package metadata. These prefixes are defined in the normative document <link
                        xlink:href="http://www.idpf.org/epub/vocab/package/pfx">EPUB Package Document Reserved
                        Prefixes</link>.</para>

                <para>The prefixes defined in this document are maintained and updated separately of this specification and
                    are subject to change at any time.</para>

                <para>Reading Systems <literal role="rfc2119">must</literal> resolve all reserved prefixes used in Package
                    Documents using their pre-defined URIs. Reserved prefixes <literal role="rfc2119">should not</literal> be
                    overridden in the <link linkend="sec-prefix-attr">prefix attribute</link>, but Reading Systems <literal
                        role="rfc2119">must</literal> use such local overrides when encountered.</para>

                <para>As changes to the reserved prefixes and updates to Reading Systems are not always going happen in
                    synchrony, Reading Systems <literal role="rfc2119">must not</literal> fail when encountering unrecognized
                    prefixes (i.e., not reserved and not declared using the <markup>prefix</markup> attribute).</para>
            </section>

            <section xml:id="sec-prefix-attr">
                <title>The <markup>prefix</markup> Attribute</title>

                <para>The <markup>prefix</markup> attribute defines additional prefix mappings not <link
                        linkend="sec-metadata-reserved-vocabs">reserved</link> by the specification.</para>

                <para>The value of the <markup>prefix</markup> attribute is a whitespace-separated list of one or more
                    prefix-to-IRI mappings of the form:</para>

                <productionset>
                    <title>The prefix Syntax</title>
                    <production xml:id="prefix.ebnf.def">
                        <lhs>prefixes</lhs>
                        <rhs><nonterminal def="#prefix.ebnf.mapping">mapping</nonterminal> , { <nonterminal
                                def="#prefix.ebnf.whitespace">whitespace</nonterminal>, { <nonterminal
                                def="#prefix.ebnf.space">whitespace</nonterminal> } , <nonterminal def="#prefix.ebnf.mapping"
                                >mapping</nonterminal> } </rhs>
                    </production>
                    <production xml:id="prefix.ebnf.mapping">
                        <lhs>mapping</lhs>
                        <rhs><nonterminal def="#prefix.ebnf.prefix">prefix</nonterminal> , ":" , <nonterminal
                                def="#prefix.ebnf.space">space</nonterminal> , { <nonterminal def="#prefix.ebnf.space"
                                >space</nonterminal> } , ? xsd:anyURI ? </rhs>
                    </production>
                    <production xml:id="prefix.ebnf.prefix">
                        <lhs>prefix</lhs>
                        <rhs>? xsd:NCName ? </rhs>
                    </production>
                    <production xml:id="prefix.ebnf.space">
                        <lhs>space</lhs>
                        <rhs>#x20 </rhs>
                    </production>
                    <production xml:id="prefix.ebnf.whitespace">
                        <lhs>whitespace</lhs>
                        <rhs>(#x20 | #x9 | #xD | #xA) </rhs>
                    </production>
                </productionset>

                <informalexample>
                    <para>The following example shows prefixes for the Friend of a Friend (<property>foaf</property>) and
                        DBPedia (<property>dbp</property>) vocabularies being declared using the <markup>prefix</markup>
                        attribute.</para>
                    <synopsis><xi:include href="examples/publications/prefix.xml" parse="text"/></synopsis>
                </informalexample>

                <para>To avoid conflicts, the <markup>prefix</markup> attribute <literal role="rfc2119">must not</literal> be
                    used to declare a prefix that maps to the <link linkend="sec-metadata-default-vocab">default
                        vocabulary</link>. If the <markup>prefix</markup> attribute includes a declaration for a <link
                        linkend="sec-metadata-reserved-vocabs">pre-defined prefix</link>, Reading Systems <literal
                        role="rfc2119">must</literal> use the URI mapping defined in the <markup>prefix</markup> attribute,
                    regardless of whether of it maps to the same URI as the pre-defined prefix.</para>

                <para>The prefix '_' is reserved for future compatibility with RDFa <xref linkend="refRDFa"/> processing, so
                        <literal role="rfc2119">must not</literal> be declared.</para>

                <para>For future compatibility with alternative serializations of the Package Document, a prefix for the
                    Dublin Core <emphasis>/elements/1.1/</emphasis> namespace <xref linkend="refDCTERMS"/>
                    <literal role="rfc2119">must not</literal> be declared in the <markup>prefix</markup> attribute. <olink
                        targetdoc="spec" targetptr="gloss-author" type="epub-spec">Authors</olink>
                    <literal role="rfc2119">must</literal> use only the <xref linkend="refDCMES"/> elements <link
                        linkend="sec-dcmes">allowed in the Package Document</link>.</para>

            </section>

            <section xml:id="sec-property-datatype">
                <title>The property Data Type</title>

                <section xml:id="sec-property-syntax">
                    <title>Syntax</title>

                    <para>The property data type is a compact means of expressing an IRI <xref linkend="refRFC3987"/> and
                        consists of an optional prefix separated from a reference by a colon.</para>

                    <productionset>
                        <title>The property Syntax</title>
                        <production xml:id="property.ebnf.property">
                            <lhs>property</lhs>
                            <rhs>[ <nonterminal def="#property.ebnf.prefix">prefix</nonterminal> , ":" ] , <nonterminal
                                    def="#property.ebnf.reference">reference</nonterminal></rhs>
                        </production>
                        <production xml:id="property.ebnf.prefix">
                            <lhs>prefix</lhs>
                            <rhs>? xsd:NCName ? </rhs>
                        </production>
                        <production xml:id="property.ebnf.reference">
                            <lhs>reference</lhs>
                            <rhs>? irelative-ref ? <lineannotation>as defined in <xref linkend="refRFC3987"
                                    /></lineannotation></rhs>
                        </production>
                    </productionset>

                    <para>The property data type is derived from the CURIE data type defined in <xref linkend="refRDFa"/>,
                        and represents a subset of CURIEs.</para>

                    <informalexample>
                        <para>The following example shows a property value composed of the prefix
                                <property>dcterms</property> and the reference <property>modified</property>.</para>
                        <synopsis><![CDATA[<meta property="dcterms:modified">2011-01-01T12:00:00Z</meta>]]></synopsis>
                    </informalexample>

                    <para>After <link linkend="sec-property-processing">processing</link>, this property would expand to the
                        following IRI:</para>

                    <informalexample>
                        <synopsis><![CDATA[http://purl.org/dc/terms/modified]]></synopsis>
                    </informalexample>

                    <para>as the <property>dcterms:</property> prefix is a <link linkend="sec-metadata-reserved-vocabs"
                            >reserved prefix</link> that maps to the IRI <uri>http://purl.org/dc/terms/</uri>.</para>

                    <para>When a prefix is omitted from the property value, the expressed reference represents a term from
                        the <link linkend="sec-metadata-default-vocab">default vocabulary</link>.</para>

                    <informalexample>
                        <para>The following example shows a property value taken from the default vocabulary.</para>
                        <synopsis><![CDATA[<meta … property="role">aut</meta>]]></synopsis>
                    </informalexample>

                    <para>This property would expand to:</para>

                    <informalexample>
                        <synopsis><![CDATA[http://idpf.org/epub/vocab/package/epub-vocab-package.html#role]]></synopsis>
                    </informalexample>

                    <para>when the IRI for the default vocabulary is concatenated with the reference.</para>

                    <para>An empty string does not represent a valid property value, even though it is valid to the
                        definition above.</para>

                </section>

                <section xml:id="sec-property-processing">
                    <title>Processing</title>

                    <para>A Reading System <literal role="rfc2119">must</literal> use the following rules to create an IRI
                            <xref linkend="refRFC3987"/> from a property:</para>

                    <itemizedlist>
                        <listitem>
                            <para>If the property consists only of a reference, the IRI is obtained by concatenating the IRI
                                stem associated with the <link linkend="sec-metadata-default-vocab">default vocabulary</link>
                                to the reference.</para>
                        </listitem>
                        <listitem>
                            <para>If the property consists of a prefix and reference, the IRI is obtained by concatenating
                                the IRI stem associated with the prefix to the reference. If no matching prefix has been
                                defined, the property is invalid and <literal role="rfc2119">must</literal> be
                                ignored.</para>
                        </listitem>
                    </itemizedlist>

                    <para>The resulting IRI <literal role="rfc2119">must</literal> be valid to <xref linkend="refRFC3987"/>.
                        Reading Systems are <literal role="rfc2119">not required</literal> to resolve this IRI,
                        however.</para>
                </section>

            </section>
        </section>

        <section xml:id="sec-package-metadata-rendering">
            <title>Publication Rendering Metadata</title>

            <section xml:id="sec-package-metadata-layout-general-intro" conformance="informative">
                <title>Introduction</title>

                <para>Not all rendering information can be expressed through the underlying technologies that EPUB is built
                    upon. Although HTML with CSS provides powerful layout capabilities, for example, those capabilities are
                    limited to the scope of the document being rendered.</para>

                <para>This section defines general-purpose properties that allow Authors to express package-level rendering
                    intentions (i.e., functionality that can only be implemented by the <olink targetdoc="spec"
                        targetptr="gloss-epub-reading-system" type="epub-spec"/>). If a Reading System supports the desired
                    rendering, these properties enable the User to be presented the content as the Author optimally designed
                    it.</para>
            </section>

            <section xml:id="sec-package-metadata-general">
                <title>General Properties</title>

                <section xml:id="layout-property-flow" xreflabel="the rendition:flow property">
                    <title>The <property>rendition:flow</property> Property</title>

                    <section xml:id="layout-property-flow-usage">
                        <title>Usage</title>

                        <para xml:id="property-flow-global">When the <link
                                xlink:href="../../vocab/package/epub-vocab-package.html#flow"
                                    ><property>rendition:flow</property> property</link>
                            <xref linkend="refEPUBPackageVocab"/> is specified on a <markup>meta</markup> element, it
                            indicates the Author's global preference for overflow content handling (i.e., for all spine
                            items). Authors <literal role="rfc2119">may</literal> indicate a preference for dynamic
                            pagination or scrolling. For scrolled content, it is also possible to specify whether consecutive
                                <olink targetdoc="spec" targetptr="gloss-content-document-epub" type="epub-spec">EPUB Content
                                Documents</olink> are to be rendered as a continuous scrolling view or whether each is to be
                            rendered separately (i.e., with a dynamic page break between each).</para>

                        <para>If a Reading System supports the specified rendering, it <literal role="rfc2119"
                                >should</literal> use that method to handle overflow content, but <literal role="rfc2119"
                                >may</literal> provide the option for <olink targetdoc="spec" targetptr="gloss-user"
                                type="epub-spec">Users</olink> to override the requested rendering.</para>

                        <para>The default value <code role="value">auto</code>
                            <literal role="rfc2119">must</literal> be assumed by Reading Systems as the global value if no
                                <markup>meta</markup> element carrying this property occurs in the <markup
                                linkend="elemdef-opf-metadata">metadata</markup> section. Reading Systems <literal
                                role="rfc2119">may</literal> support only this default value.</para>

                        <para>If a Reading Systems supports the <property linkend="fxl-property-layout"
                                >rendition:layout</property> property, it <literal role="rfc2119">must</literal> ignore the
                                <property>rendition:flow</property> property when it has been set on a spine item that also
                            specifies the <property linkend="fxl-property-layout">rendition:layout</property> value <code
                                role="value">pre-paginated</code>.</para>
                    </section>

                    <section xml:id="layout-property-flow-values">
                        <title>Allowed values</title>

                        <para>The following values are defined for use with the <property>rendition:flow</property>
                            property:</para>

                        <variablelist>
                            <varlistentry>
                                <term xml:id="flow-paginated">paginated</term>
                                <listitem>
                                    <para>The Reading System <literal role="rfc2119">should</literal> dynamically paginate
                                        all overflow content.</para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term xml:id="flow-scrolled-continuous">scrolled-continuous</term>
                                <listitem>
                                    <para>The Reading System <literal role="rfc2119">should</literal> render all Content
                                        Documents such that overflow content is scrollable, and the EPUB Publication
                                        represented by the given <olink targetdoc="spec" targetptr="gloss-rendition"
                                            type="epub-spec"/>
                                        <literal role="rfc2119">should</literal> be presented as one continuous scroll from
                                        spine item to spine item (except where <link linkend="layout-property-flow-overrides"
                                            >locally overridden</link>).</para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term xml:id="flow-scrolled-doc">scrolled-doc</term>
                                <listitem>
                                    <para>The Reading System <literal role="rfc2119">should</literal> render all Content
                                        Documents such that overflow content is scrollable, and each spine item <literal
                                            role="rfc2119">should</literal> be presented as a separate scrollable
                                        document.</para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term xml:id="flow-auto">auto</term>
                                <listitem>
                                    <para>The Author does not have a preference for overflow handling. The Reading System
                                            <literal role="rfc2119">may</literal> render overflow content using its default
                                        method or a User preference, whichever is applicable.</para>
                                </listitem>
                            </varlistentry>
                        </variablelist>

                        <bridgehead xml:id="sec-flow-ex">Examples</bridgehead>

                        <informalexample xml:id="property-flow-ex1">
                            <para>The following example demonstrates an Author's intent to have a paginated Rendition with a
                                scrollable table of contents.</para>
                            <synopsis><xi:include href="./examples/publications/flow-01.xml" parse="text"/></synopsis>
                        </informalexample>
                    </section>

                    <section xml:id="layout-property-flow-overrides">
                        <title>Spine Overrides</title>

                        <para xml:id="layout-property-flow-local">The <property
                                xlink:href="../../vocab/package/epub-vocab-package.html#flow-auto"
                                >rendition:flow-auto</property>, <property
                                xlink:href="../../vocab/package/epub-vocab-package.html#flow-paginated"
                                >rendition:flow-paginated</property>, <property
                                xlink:href="../../vocab/package/epub-vocab-package.html#flow-scrolled-continuous"
                                >rendition:flow-scrolled-continuous</property>, <property
                                xlink:href="../../vocab/package/epub-vocab-package.html#flow-scrolled-doc"
                                >rendition:flow-scrolled-doc</property> and properties <xref linkend="refEPUBPackageVocab"/>
                            <literal role="rfc2119">may</literal> be specified locally on spine <markup
                                linkend="elemdef-spine-itemref">itemref</markup> elements, and will, in such cases, override
                            the <link linkend="property-flow-global">global value</link> for the given spine item.</para>
                    </section>
                </section>

                <section xml:id="layout-property-align-x-center">
                    <title>The <property>rendition:align-x-center</property> Property</title>

                    <para>When the <link xlink:href="../../vocab/package/epub-vocab-package.html#align-x-center"
                                ><property>rendition:align-x-center</property> property</link>
                        <xref linkend="refEPUBPackageVocab"/> is set on a spine item, it indicates that the rendered content
                            <literal role="rfc2119">should</literal> be centered horizontally within the viewport or spread,
                        as applicable. This property does not affect the rendering of the spine item, only the placement of
                        the resulting content box.</para>

                    <para>For reflowable content, Reading Systems that support this property <literal role="rfc2119"
                            >must</literal> center each virtual page.</para>

                    <para>This version of this specification does not define a default rendering behavior when this property
                        is not supported or specified. Reading Systems <literal role="rfc2119">may</literal> render spine
                        items by their own design.</para>

                    <note>
                        <para>This property was developed primarily to handle "Naka-Tobira (中扉)" (sectional title pages), in
                            the absence of reliable centering control within the content rendering. As support for paged
                            media evolves in CSS, however, this property is expected to be deprecated. Authors are encouraged
                            to use CSS solutions when effective.</para>
                    </note>
                </section>
            </section>

            <section xml:id="sec-package-metadata-fxl">
                <title>Fixed-Layout Properties</title>

                <section xml:id="fxl-intro" conformance="informative">
                    <title>Introduction</title>
                    <para>EPUB documents, unlike print books or PDF files, are designed to change. The content flows, or
                        reflows, to fit the screen and to fit the needs of the <olink targetdoc="spec" targetptr="gloss-user"
                            type="epub-spec"/>. As noted in <olink type="epub-spec" targetdoc="overview"
                            targetptr="sec-rendering"/>
                        <quote>content presentation should adapt to the <olink targetdoc="spec" targetptr="gloss-user"
                                type="epub-spec"/> rather than the User having to adapt to a particular representation of
                            content.</quote></para>
                    <para>But this principle doesn’t work for all types of documents. Sometimes content and design are so
                        intertwined they cannot be separated. Any change in appearance risks changing the meaning, or losing
                        all meaning. <olink targetdoc="spec" targetptr="gloss-fixed-layout-document" type="epub-spec"
                            >Fixed-Layout Documents</olink> give <olink targetdoc="spec" targetptr="gloss-author"
                            type="epub-spec">Authors</olink> greater control over presentation when a reflowable EPUB is not
                        suitable for the content.</para>
                    <para>This section defines a set of metadata properties to allow declarative expression of intended
                        rendering behaviors of Fixed-Layout Documents in the context of EPUB 3.1.</para>
                    <note xml:id="note-mechanisms">
                        <para>EPUB 3.1 affords multiple mechanisms for representing fixed-layout content. When fixed-layout
                            content is necessary, the Author's choice of mechanism will depend on many factors including
                            desired degree of precision, file size, accessibility, etc. This section does not attempt to
                            dictate the Author's choice of mechanism.</para>
                    </note>
                </section>

                <section xml:id="fxl-property-layout">
                    <title>The <property>rendition:layout</property> Property</title>

                    <section xml:id="fxl-property-layout-usage">
                        <title>Usage</title>

                        <para xml:id="property-layout-global">When the <link
                                xlink:href="../../vocab/package/epub-vocab-package.html#layout"
                                    ><property>rendition:layout</property> property</link>
                            <xref linkend="refEPUBPackageVocab"/> is specified on a <markup>meta</markup> element, it
                            indicates that the paginated or reflowable layout style applies globally for the <olink
                                targetdoc="spec" targetptr="gloss-epub-publication" type="epub-spec"/> (i.e., for all spine
                            items). </para>

                        <para>The default value <code role="value">reflowable</code>
                            <literal role="rfc2119">must</literal> be assumed by <olink targetdoc="spec"
                                targetptr="gloss-epub-reading-system" type="epub-spec">EPUB Reading Systems</olink> as the
                            global value if no <markup>meta</markup> element carrying this property occurs in the <markup
                                linkend="elemdef-opf-metadata">metadata</markup> section.</para>

                        <para>When the <property>rendition:layout</property> property is set to <code role="value"
                                >pre-paginated</code>, Reading Systems <literal role="rfc2119">must not</literal> include
                            space between the adjacent content slots when rendering <olink targetdoc="spec"
                                targetptr="gloss-synthetic-spread" type="epub-spec">Synthetic Spreads</olink>.</para>

                        <para>When the property is set to <code role="value">pre-paginated</code> for a spine item, its
                            content dimensions <literal role="rfc2119">must</literal> be set as defined in <olink
                                targetdoc="contentdocs" targetptr="sec-fixed-layouts" type="epub-spec"/>.</para>

                        <note>
                            <para>Refer to <xref linkend="fxl-property-viewport"/> for how to additionally declare the
                                dimensions within the package metadata to facilitate Reading System optimization of the
                                rendering.</para>
                        </note>
                    </section>

                    <section xml:id="fxl-property-layout-values">
                        <title>Allowed values</title>

                        <para>The following values are defined for use with the <property>rendition:layout</property>
                            property:</para>

                        <variablelist>
                            <varlistentry>
                                <term xml:id="def-layout-reflowable">reflowable</term>
                                <listitem>
                                    <para>The given Rendition is not pre-paginated. Reading Systems <literal role="rfc2119"
                                            >may</literal> apply dynamic pagination when rendering.</para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term xml:id="def-layout-pre-paginated">pre-paginated</term>
                                <listitem>
                                    <para>The given Rendition is pre-paginated. Reading Systems <literal role="rfc2119"
                                            >must</literal> produce exactly one page per spine <markup
                                            linkend="elemdef-spine-itemref">itemref</markup> when rendering.</para>
                                </listitem>
                            </varlistentry>
                        </variablelist>

                        <note xml:id="uaag">
                            <para>Reading Systems typically restrict or deny the application of User or <olink
                                    targetdoc="spec" targetptr="gloss-user-agent" type="epub-spec"/> style sheets to
                                pre-paginated documents, since, as a result of intrinsic properties of such documents,
                                dynamic style changes are highly likely to have unintended consequences. Authors should take
                                into account the negative impact on usability and accessibility that these restrictions have
                                when choosing to use pre-paginated instead of reflowable content. Refer to <link
                                    xlink:href="http://www.w3.org/TR/UAAG20/#gl-text-config">Guideline 1.4 - Provide text
                                    configuration</link>
                                <xref linkend="refUAAG10"/> for related information.</para>
                        </note>

                        <bridgehead xml:id="sec-layout-ex">Examples</bridgehead>

                        <informalexample xml:id="fxl-ex1">
                            <para>The following example demonstrates fully fixed-layout content, using <xref
                                    linkend="refMediaQueries"/> to apply different style sheets for three different device
                                categories.</para>
                            <bridgehead xml:id="fxl-ex1-pkg">Package Document</bridgehead>
                            <synopsis><xi:include href="./examples/publications/fxl-01a.xml" parse="text"/></synopsis>
                            <bridgehead xml:id="fxl-ex1-xhtml">XHTML</bridgehead>
                            <synopsis><xi:include href="./examples/publications/fxl-01b.xml" parse="text"/></synopsis>
                            <para>Note that the Media Queries only affect the style sheet applied to the document. The size
                                of the content area set in the <property>viewport</property>
                                <markup>meta</markup> tag is static.</para>
                        </informalexample>
                    </section>

                    <section xml:id="fxl-property-layout-overrides">
                        <title>Spine Overrides</title>

                        <para xml:id="property-layout-local">The <property
                                xlink:href="../../vocab/package/epub-vocab-package.html#layout-pre-paginated"
                                >rendition:layout-pre-paginated</property> and <property
                                xlink:href="../../vocab/package/epub-vocab-package.html#layout-reflowable"
                                >rendition:layout-reflowable</property> properties <xref linkend="refEPUBPackageVocab"/>
                            <literal role="rfc2119">may</literal> be specified locally on spine <markup
                                linkend="elemdef-spine-itemref">itemref</markup> elements, and will, in such cases, override
                            the <link linkend="property-layout-global">global value</link> for the given spine item.</para>
                    </section>
                </section>

                <section xml:id="fxl-property-orientation">
                    <title>The <property>rendition:orientation</property> property</title>

                    <section xml:id="fxl-property-orientation-usage">
                        <title>Usage</title>

                        <para xml:id="property-orientation-global">When the <link
                                xlink:href="../../vocab/package/epub-vocab-package.html#orientation"
                                    ><property>rendition:orientation</property> property</link>
                            <xref linkend="refEPUBPackageVocab"/> is specified on a <markup>meta</markup> element, it
                            indicates that the intended orientation applies globally for the given Rendition (i.e., for all
                            spine items). </para>

                        <para>The default value <code role="value">auto</code>
                            <literal role="rfc2119">must</literal> be assumed by Reading Systems as the global value if no
                                <markup>meta</markup> element carrying this property occurs in the <markup>metadata</markup>
                            section.</para>
                    </section>

                    <section xml:id="fxl-property-orientation-values">
                        <title>Allowed values</title>

                        <para>The following values are defined for use with the <property>rendition:orientation</property>
                            property:</para>

                        <variablelist>
                            <varlistentry>
                                <term>landscape</term>
                                <listitem>
                                    <para>The given Rendition is intended for landscape rendering. </para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>portrait</term>
                                <listitem>
                                    <para> The given Rendition is intended for portrait rendering. </para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>auto</term>
                                <listitem>
                                    <para> The given Rendition is not orientation constrained. </para>
                                </listitem>
                            </varlistentry>
                        </variablelist>

                        <para>Reading Systems that support multiple orientations <literal role="rfc2119">should</literal>
                            convey the intended orientation to the user, unless the given value is <code role="value"
                                >auto</code>. The means by which the intent is conveyed is implementation-specific.</para>

                        <bridgehead xml:id="sec-orientation-ex">Examples</bridgehead>

                        <informalexample xml:id="fxl-ex2">
                            <para>The following example demonstrates fully fixed-layout content intended to be rendered
                                without synthetic spreads, and locked to landscape orientation.</para>
                            <synopsis><xi:include href="./examples/publications/fxl-02a.xml" parse="text"/></synopsis>
                        </informalexample>
                    </section>

                    <section xml:id="fxl-property-orientation-overrides">
                        <title>Spine Overrides</title>

                        <para xml:id="property-orientation-local">The <property
                                xlink:href="../../vocab/package/epub-vocab-package.html#orientation-landscape"
                                >rendition:orientation-landscape</property>, <property
                                xlink:href="../../vocab/package/epub-vocab-package.html#orientation-portrait"
                                >rendition:orientation-portrait</property> and <property
                                xlink:href="../../vocab/package/epub-vocab-package.html#orientation-auto"
                                >rendition:orientation-auto</property> properties <xref linkend="refEPUBPackageVocab"/>
                            <literal role="rfc2119">may</literal> be specified locally on spine <markup
                                linkend="elemdef-spine-itemref">itemref</markup> elements, and will, in such cases, override
                            the <link linkend="property-orientation-global">global value</link> for the given spine
                            item.</para>
                    </section>
                </section>

                <section xml:id="fxl-property-spread">
                    <title>The <property>rendition:spread</property> Property</title>

                    <section xml:id="fxl-property-spread-usage">
                        <title>Usage</title>

                        <para xml:id="property-spread-global">When the <property>rendition:spread</property> property is
                            specified on a <markup>meta</markup> element, it indicates that the intended <olink
                                targetdoc="spec" targetptr="gloss-synthetic-spread" type="epub-spec"/> behavior applies
                            globally for the given Rendition (i.e., for all spine items).</para>

                        <para>The default value <code role="value">auto</code>
                            <literal role="rfc2119">must</literal> be assumed by Reading Systems as the global value if no
                                <markup>meta</markup> element carrying this property occurs in the <markup>metadata</markup>
                            section.</para>
                    </section>

                    <section xml:id="fxl-property-spread-values">
                        <title>Allowed values</title>

                        <para>The following values are defined for use with the <property>rendition:spread</property>
                            property:</para>

                        <variablelist>
                            <varlistentry>
                                <term>none</term>
                                <listitem>
                                    <para>Reading Systems <literal role="rfc2119">must not</literal> incorporate spine items
                                        in a Synthetic Spread. </para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>landscape</term>
                                <listitem>
                                    <para> Reading Systems <literal role="rfc2119">should</literal> render a Synthetic Spread
                                        for spine items only when the device is in landscape orientation. </para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>portrait</term>
                                <listitem>
                                    <para>Reading Systems <literal role="rfc2119">should</literal> render a Synthetic Spread
                                        for spine items only when the device is in portrait orientation.</para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>both</term>
                                <listitem>
                                    <para>Reading Systems <literal role="rfc2119">should</literal> render a Synthetic Spread
                                        regardless of device orientation.</para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>auto</term>
                                <listitem>
                                    <para>No explicit Synthetic Spread behavior is defined. Reading Systems <literal
                                            role="rfc2119">may</literal> use Synthetic Spreads in specific or all device
                                        orientations as part of a display area utilization optimization process.</para>
                                </listitem>
                            </varlistentry>
                        </variablelist>

                        <note>
                            <para>When Synthetic Spreads are used in the context of HTML and SVG Content Documents, the
                                dimensions given via the <olink targetdoc="contentdocs" targetptr="sec-fxl-icb-html"
                                    type="epub-spec">viewport meta element</olink> and <olink targetdoc="contentdocs"
                                    targetptr="sec-fxl-icb-svg" type="epub-spec">viewBox attribute</olink> represents the
                                size of one page in the spread, respectively.</para>
                        </note>

                        <note>
                            <para>Refer to <xref linkend="sec-spine-elem"/> for information about declaration of global flow
                                directionality using the <markup>page-progression-direction</markup> attribute and that of
                                local page-progression-direction within content documents. </para>
                        </note>

                        <bridgehead xml:id="sex-spread-ex">Examples</bridgehead>

                        <informalexample xml:id="fxl-ex3">
                            <para>The following example demonstrates fully fixed-layout content intended to be rendered using
                                synthetic spreads in landscape orientation, and with no spreads in portrait
                                orientation.</para>
                            <synopsis><xi:include href="./examples/publications/fxl-03a.xml" parse="text"/></synopsis>
                        </informalexample>

                        <informalexample xml:id="fxl-ex4">
                            <para>The following example demonstrates reflowable content with a single fixed-layout title
                                page, where the fixed-layout page is intended for right-hand spread slot if the device
                                renders Synthetic Spreads.</para>
                            <synopsis><xi:include href="./examples/publications/fxl-04a.xml" parse="text"/></synopsis>
                        </informalexample>
                    </section>

                    <section xml:id="fxl-property-spread-overrides">
                        <title>Spine Overrides</title>

                        <para xml:id="property-spread-local">The <property
                                xlink:href="../../vocab/package/epub-vocab-package.html#spread-landscape"
                                >rendition:spread-landscape</property>, <property
                                xlink:href="../../vocab/package/epub-vocab-package.html#spread-portrait"
                                >rendition:spread-portrait</property>, <property
                                xlink:href="../../vocab/package/epub-vocab-package.html#spread-both"
                                >rendition:spread-both</property>, <property
                                xlink:href="../../vocab/package/epub-vocab-package.html#spread-auto"
                                >rendition:spread-auto</property> and <property
                                xlink:href="../../vocab/package/epub-vocab-package.html#spread-none"
                                >rendition:spread-none</property> properties <xref linkend="refEPUBPackageVocab"/>
                            <literal role="rfc2119">may</literal> be specified locally on spine <markup
                                linkend="elemdef-spine-itemref">itemref</markup> elements, and will, in such cases, override
                            the <link linkend="property-spread-global">global value</link> for the given spine item.</para>
                    </section>
                </section>

                <section xml:id="fxl-properties-page-spread">
                    <title>The <property>page-spread-*</property> Properties</title>

                    <para>When a Reading System renders a <olink targetdoc="spec" targetptr="gloss-synthetic-spread"
                            type="epub-spec"/>, the default behavior is to populate the spread by rendering the next <olink
                            targetdoc="spec" targetptr="gloss-content-document-epub" type="epub-spec"/> in the next available
                        unpopulated viewport, where the next available viewport is determined by the given <link
                            linkend="sec-spine-elem">page progression direction</link> or by local declarations within
                        Content Documents. By providing one of the <property
                            xlink:href="../../vocab/package/epub-vocab-package.html#page-spread-left"
                            >page-spread-left</property>, <property
                            xlink:href="../../vocab/package/epub-vocab-package.html#page-spread-right"
                            >page-spread-right</property> or <property
                            xlink:href="../../vocab/package/epub-vocab-package.html#page-spread-left"
                            >rendition:page-spread-center</property> properties <xref linkend="refEPUBPackageVocab"/> on a
                        spine <markup>itemref</markup> element, an Author <literal role="rfc2119">may</literal> override this
                        automatic population behavior by forcing that document to be placed in a particular viewport. </para>

                    <para>The <property>page-spread-left</property> property indicates that the given spine item <literal
                            role="rfc2119">should</literal> be rendered in the left-hand slot in the spread, and
                            <property>page-spread-right</property> that it <literal role="rfc2119">should</literal> be
                        rendered in the right-hand slot. The <property>rendition:page-spread-center</property> property
                        indicates that the synthetic spread mode <literal role="rfc2119">should</literal> be overridden and a
                        single viewport rendered and positioned at the center of the screen.</para>

                    <para>The <property>page-spread-left</property>, <property>page-spread-right</property> and
                            <property>rendition:page-spread-center</property> properties apply to both pre-paginated and
                        reflowable content, and they only apply when the Reading System is creating Synthetic Spreads.</para>

                    <para>The <property>page-spread-*</property> properties take precedence over whatever value of the <xref
                            linkend="refCSS21"/>
                        <property>page-break-before</property> property has been set for an <olink targetdoc="spec"
                            targetptr="gloss-content-document-epub-xhtml" type="epub-spec"/>.</para>

                    <note>
                        <para>The presence of <property>rendition:page-spread-center</property> does not change the viewport
                            dimensions. In particular, it does not indicate that a viewport with the size of the whole spread
                            should be created. This is important so that the scale factor stays consistent between regular
                            and center-spread pages.</para>
                    </note>

                    <para>When a <link linkend="def-layout-reflowable">reflowable</link> spine item follows a <link
                            linkend="def-layout-pre-paginated">pre-paginated</link> one, the reflowable one <literal
                            role="rfc2119">should</literal> start on the next page (as defined by the <link
                            linkend="attrdef-spine-page-progression-direction"
                            ><markup>page-progression-direction</markup></link>) when it lacks a
                            <property>page-spread-*</property> property value. If the reflowable spine item has a
                            <property>page-spread-*</property> specification, it <literal role="rfc2119">must</literal> be
                        honored (e.g., by inserting a blank page).</para>

                    <para>Similarly, when a pre-paginated spine item follows a reflowable one, the pre-paginated one <literal
                            role="rfc2119">should</literal> start on the next page (as defined by the
                            <markup>page-progression-direction</markup>) when it lacks a <property>page-spread-*</property>
                        property value. If the pre-paginated spine item has a <property>page-spread-*</property>
                        specification, it <literal role="rfc2119">must</literal> be honored (e.g., by inserting a blank
                        page).</para>

                    <bridgehead xml:id="sec-page-spread-ex">Examples</bridgehead>

                    <informalexample xml:id="fxl-ex5">
                        <para>The following example demonstrates reflowable content with a two-page fixed-layout center plate
                            that is intended to be rendered using synthetic spreads in any device orientation.</para>
                        <synopsis><xi:include href="./examples/publications/fxl-05a.xml" parse="text"/></synopsis>
                        <para>Note that the author has left spread behavior for the other (reflowable) parts of the <olink
                                targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/> undefined, since the global
                            value of <property>rendition:spread</property> is initialized to <code role="value">auto</code>
                            by default.</para>
                    </informalexample>

                    <informalexample xml:id="fxl-ex6">
                        <para>The following example demonstrates fixed-layout content, where synthetic spreads, when used,
                            must be disabled for a center plate.</para>
                        <synopsis><xi:include href="./examples/publications/fxl-06a.xml" parse="text"/></synopsis>
                        <para>Note that the <property>rendition:spread</property> declaration <code role="value">none</code>
                            expression is not needed on the center plate item, as the
                                <property>rendition:page-spread-center</property> property already specifies semantics that
                            dictates that synthetic spreads be disabled.</para>
                    </informalexample>
                </section>

                <section xml:id="fxl-property-viewport" xreflabel="rendition:viewport property">
                    <title>The <property>rendition:viewport</property> Property</title>

                    <para>The <link xlink:href="../../vocab/package/epub-vocab-package.html#viewport"
                                ><property>rendition:viewport</property> property</link>
                        <xref linkend="refEPUBPackageVocab"/> allows Authors to express the CSS initial containing block
                        (ICB) <xref linkend="refCSS21"/> for HTML and SVG Content Documents whose <link
                            xlink:href="../../vocab/package/epub-vocab-package.html#layout"
                                ><property>rendition:layout</property> property</link>
                        <xref linkend="refEPUBPackageVocab"/> has been set to <code role="value">pre-paginated</code>.</para>

                    <para>The value of the property <literal role="rfc2119">must</literal> be of the form:</para>

                    <informalexample>
                        <programlisting>width=x, height=y</programlisting>
                    </informalexample>

                    <para>where <code role="var">x</code> and <code role="var">y</code>
                        <literal role="rfc2119">must</literal> be the height and width of the ICB in CSS pixels <xref
                            linkend="refCSS21"/>, respectively. The order in which the values are expressed is not
                        significant.</para>

                    <para>The <property>rendition:viewport</property> property does not replace the required ICB expression
                        mechanisms defined in <olink targetdoc="contentdocs" targetptr="sec-fixed-layouts" type="epub-spec"
                        />; the property serves as a complement to facilitate Reading System optimization of the rendering.
                        The dimensions expressed in the content and the dimensions expressed in the package metadata <literal
                            role="rfc2119">must</literal> match.</para>

                    <annotation xml:id="issue-refines-viewport">
                        <para>With the removal of the <markup>refines</markup> attribute, it is no longer possible to create
                            spine-level overrides for the global viewport declaration. The working group needs to determine
                            if spine overrides are used in practice, or whether the internal declaration is sufficient for
                            correction when needed. A new mechanism for local overrides might be introduced if determined to
                            be necessary. See <link xlink:href="https://github.com/IDPF/epub-revision/issues/643">issue
                                643</link>.</para>
                    </annotation>

                    <para>Reading Systems <literal role="rfc2119">must</literal> ignore this property when it is applied to
                        spine items whose <property>rendition:layout</property> property has not been set to <code
                            role="value">pre-paginated</code>. Reading Systems <literal role="rfc2119">must</literal> also
                        ignore this property on spine items that are not HTML or SVG Content Documents.</para>

                    <bridgehead xml:id="sec-viewport-ex">Examples</bridgehead>

                    <informalexample xml:id="property-viewport-ex1">
                        <para>The following example demonstrates how to set the dimensions for all spine items, overriding
                            only a cover.</para>
                        <synopsis><xi:include href="./examples/publications/viewport-01.xml" parse="text"/></synopsis>
                    </informalexample>
                </section>
            </section>
        </section>
    </chapter>

    <chapter xml:id="sec-package-nav">
        <title>EPUB Navigation Document</title>

        <section xml:id="sec-package-nav-intro" conformance="informative">
            <title>Introduction</title>

            <para>The EPUB Navigation Document is a <link linkend="sec-package-content-conformance-nav">mandatory
                    component</link> of an <olink targetdoc="spec" targetptr="gloss-epub-package" type="epub-spec"/>. It
                provides the <olink targetdoc="spec" targetptr="gloss-author" type="epub-spec"/> with a mechanism to include
                a human- and machine-readable global navigation layer, thereby ensuring increased usability and accessibility
                for the <olink targetdoc="spec" targetptr="gloss-user" type="epub-spec"/>.</para>

            <para>The EPUB Navigation Document is an adaptation of an <olink targetdoc="spec"
                    targetptr="gloss-content-document-epub-xhtml" type="epub-spec"/> and is, <link
                    linkend="confreq-cd-nav-docprops-parent">by definition</link>, a valid XHTML Content Document instance.
                All Content and Reading System conformance requirements that apply to XHTML Content Documents also apply to
                the EPUB Navigation Document.</para>

            <para>The navigation features of this adaptation are expressed through specializations of the <xref
                    linkend="refHTML5"/>
                <markup xlink:href="http://www.w3.org/TR/html5/sections.html#the-nav-element">nav</markup> element. Each
                    <markup>nav</markup> element in an EPUB Navigation Document represents a data island—an embedded source
                of specialized information within the general markup—from which Reading Systems can retrieve navigational
                information. Unlike typical XML data islands, however, the information within the <markup>nav</markup>
                element remains human readable as an <xref linkend="refHTML5"/> document.</para>

            <para>To facilitate machine readability, the content model of <markup>nav</markup> elements in EPUB Navigation
                Documents is restricted relative to what is allowed in general XHTML Content Documents.</para>

            <para>Note that the navigation document is not exclusively for machine processing. Formulating the document as an
                XHTML Content Document enables its reuse in the linear reading order, avoiding the creation of additional
                tables of contents (i.e., it can also be added to the <olink targetdoc="packages"
                    targetptr="elemdef-opf-spine" type="epub-spec"/>). The visual display of components defined in the
                navigation document can be controlled using the <link linkend="sec-package-nav-def-hidden">hidden</link>
                attribute, which has no effect outside of spine rendering (i.e., hiding a component from rendering in the
                spine does not hide it from Reading System presentation in a custom control).</para>

            <para>When designing a navigation document for such dual use, however, be aware that machine extraction of the
                content can result in loss of formatting control. Scripting, styling and other HTML formatting can be
                stripped by a Reading System as it generates a custom control, such as the table of contents, from the
                markup. If such formatting and functionality is used, then the Navigation Document also needs to be included
                in the linear reading order. Another design consideration is to use <olink targetdoc="contentdocs"
                    targetptr="confreq-cd-scripted-spine" type="epub-spec">progressive enhancement</olink> techniques for
                scripting and styling of the navigation document, such that that the content will retain its integrity when
                rendered in a non-browser context.</para>
        </section>

        <section xml:id="sec-package-nav-content-conf" xreflabel="EPUB Navigation Documents — Content Conformance">
            <title>Content Conformance</title>

            <para>A conformant <olink targetdoc="spec" targetptr="gloss-content-document-epub-nav" type="epub-spec"/>
                <literal role="rfc2119">must</literal> meet all of the following criteria:</para>

            <variablelist role="conformance-list" xml:id="confreq-cd-nav">
                <varlistentry xml:id="confreq-cd-nav-docprops">
                    <term>Document Properties</term>
                    <listitem>
                        <para xml:id="confreq-cd-nav-docprops-parent">It <literal role="rfc2119">must</literal> conform to
                            all content conformance constraints for <olink targetdoc="spec"
                                targetptr="gloss-content-document-epub-xhtml" type="epub-spec">XHTML Content
                                Documents</olink> as defined in <olink targetdoc="contentdocs"
                                targetptr="sec-html-conf-content" type="epub-spec"/>.</para>
                        <para xml:id="confreq-cd-nav-docprops-schema">It <literal role="rfc2119">must</literal> conform to
                            all content conformance constraints specific for EPUB Navigation Documents expressed in <xref
                                linkend="sec-package-nav-def"/>.</para>
                        <para xml:id="confreq-cd-nav-docprops-spine">As a conforming XHTML Content Document, it <literal
                                role="rfc2119">may</literal> be included in the <xref linkend="sec-spine-elem"/>. </para>
                    </listitem>
                </varlistentry>
            </variablelist>
        </section>

        <section xml:id="sec-package-nav-rs-conf" xreflabel="EPUB Navigation Documents — Reading System Conformance">
            <title>Reading System Conformance</title>

            <para>A conformant <olink targetdoc="spec" targetptr="gloss-epub-reading-system" type="epub-spec"/>
                <literal role="rfc2119">must</literal> meet all of the following criteria for processing <olink
                    targetdoc="spec" targetptr="gloss-content-document-epub-nav" type="epub-spec">EPUB Navigation
                    Documents</olink>:</para>

            <itemizedlist role="conformance-list" xml:id="xhtml-nav-rs-confreqs">
                <listitem>
                    <para xml:id="confreq-nav-access">When requested by a User, Reading Systems <literal role="rfc2119"
                            >must</literal> provide access to the links and link labels in <link
                            linkend="sec-package-nav-def-types">the <markup>nav</markup> elements</link> of the EPUB
                        Navigation Document in a fashion that allows the User to activate the links provided. When a link is
                        activated, the Reading System <literal role="rfc2119">must</literal> relocate the application's
                        current reading position to the destination identified by that link.</para>
                </listitem>
                <listitem>
                    <para xml:id="confreq-nav-spine">Reading Systems <literal role="rfc2119">must</literal> honor the above
                        requirement irrespective of whether the EPUB Navigation Document is part of the <xref
                            linkend="sec-spine-elem"/>.</para>
                </listitem>

            </itemizedlist>
        </section>

        <section xml:id="sec-package-nav-def">
            <title>EPUB Navigation Document Definition</title>

            <section xml:id="sec-package-nav-def-model">
                <title>The <markup>nav</markup> Element: Restrictions</title>

                <para>When a <markup>nav</markup> element carries the <xref linkend="refARIA11"/>
                    <markup><link xlink:href="http://www.w3.org/TR/wai-aria-1.1/#host_general_role">role</link>
                        attribute</markup> in an <olink targetdoc="spec" targetptr="gloss-content-document-epub-nav"
                        type="epub-spec"/>, this specification restricts the content model of the element and its descendants
                    as follows:</para>

                <itemizedlist role="conformance-list">
                    <listitem>
                        <para xml:id="confreq-nav-hd">Each <markup>nav</markup> element <literal role="rfc2119">may</literal>
                            contain an optional heading indicating the title of the navigation list. The heading <literal
                                role="rfc2119">must</literal> be an <link
                                xlink:href="http://www.w3.org/TR/html5/dom.html#heading-content">HTML5 heading content</link>
                            element.</para>
                    </listitem>
                    <listitem>
                        <para xml:id="confreq-nav-ol">The optional heading <literal role="rfc2119">must</literal> be followed
                            by a single <markup xlink:href="http://www.w3.org/TR/html5/grouping-content.html#the-ol-element"
                                >ol</markup> ordered list; no other elements are permitted as direct children of the
                                <markup>nav</markup> element. This ordered list represents the primary level of content
                            navigation, and <literal role="rfc2119">must</literal> have at least one child list item (<markup
                                xlink:href="http://www.w3.org/TR/html5/grouping-content.html#the-li-element"
                            >li</markup>).</para>
                    </listitem>
                    <listitem>
                        <para xml:id="confreq-nav-a">Each list item of the ordered list represents a primary heading,
                            structure or other point of interest within the given <olink targetdoc="spec"
                                targetptr="gloss-rendition" type="epub-spec"/> and <literal role="rfc2119">must</literal>
                            contain either a child <markup
                                xlink:href="http://www.w3.org/TR/html5/text-level-semantics.html#the-a-element">a</markup>
                            element or a child <markup
                                xlink:href="http://www.w3.org/TR/html5/text-level-semantics.html#the-span-element"
                                >span</markup> element. The <markup>a</markup> element describes the target that the link
                            points to. The <markup>span</markup> element serves as a heading for breaking down lists into
                            distinct groups (for example, a large list of illustrations can be segmented into several lists,
                            one for each chapter).</para>
                    </listitem>
                    <listitem>
                        <para xml:id="confreq-nav-a-cnt">The child <markup>a</markup> or <markup>span</markup> element of the
                            list item <literal role="rfc2119">may</literal> contain any valid <link
                                xlink:href="http://www.w3.org/TR/html5/rendering.html#phrasing-content-0">HTML5 phrasing
                                content</link>, but <literal role="rfc2119">must</literal> provide a non zero-length text
                            label after concatenation of all child content and application of whitespace normalization rules.
                            Although non-textual descendant elements <literal role="rfc2119">may</literal> be rendered
                            directly to Users, text content included in <markup>title</markup> or <markup>alt</markup>
                            attributes <literal role="rfc2119">must</literal> be used when determining compliance with this
                            requirement.</para>
                    </listitem>
                    <listitem xml:id="confreq-nav-a-title">
                        <para>If an <markup>a</markup> or <markup>span</markup> element contains instances of <link
                                xlink:href="http://www.w3.org/TR/html5/embedded-content-0.html#embedded-content-0">HTML5
                                embedded content</link> that do not provide intrinsic text alternatives, the element <literal
                                role="rfc2119">must</literal> also include a <markup>title</markup> attribute with an
                            alternate text rendering of the link label.</para>
                    </listitem>
                    <listitem>
                        <para xml:id="confreq-nav-a-href">The relative IRI reference provided in the <markup>href</markup>
                            attribute of the <markup>a</markup> element <literal role="rfc2119">must</literal> resolve to an
                                <olink targetdoc="spec" targetptr="gloss-content-document-epub" type="epub-spec"/> or
                            fragment therein.</para>
                    </listitem>
                    <listitem>
                        <para xml:id="confreq-nav-a-nest">The <markup>a</markup> element <literal role="rfc2119"
                                >may</literal> optionally be followed by an <markup>ol</markup> ordered list representing a
                            subsidiary content level below that heading (e.g., all the subsection headings of a section). The
                                <markup>span</markup> element <literal role="rfc2119">must</literal> be followed by an
                                <markup>ol</markup> ordered list; it cannot be used in "leaf" <markup>li</markup> elements.
                            Regardless of whether an <markup>a</markup> or <markup>span</markup> element precedes it, every
                            sublist <literal role="rfc2119">must</literal> adhere to all the content requirements defined in
                            this section for constructing the primary navigation list.</para>
                    </listitem>
                </itemizedlist>

                <para>IDPF specifications <literal role="rfc2119">may</literal> introduce further restrictions on the content
                    model defined above for <markup>nav</markup> elements in the EPUB Navigation Document.</para>

                <para xml:id="confreq-nav-ol-style">In the context of this specification, the default display style of list
                    items within <markup>nav</markup> elements <literal role="rfc2119">must</literal> be equivalent to the
                        <xref linkend="refCSS21"/>
                    <property>list-style: none</property> property. Reading Systems <literal role="rfc2119">must
                        not</literal> show list item numbering on these lists when presenting the Navigation Document outside
                    of the spine, regardless of their support for CSS. <olink targetdoc="spec" targetptr="gloss-author"
                        type="epub-spec">Authors</olink>
                    <literal role="rfc2119">may</literal> specify alternative list styling using CSS for rendering of the
                    document in the <markup linkend="sec-spine-elem">spine</markup>.</para>

                <informalexample>
                    <para>The following example shows the basic patterns of a navigation element.</para>
                    <synopsis><xi:include href="./examples/contentdocs-nav/basic.xml" parse="text"/></synopsis>
                </informalexample>
            </section>

            <section xml:id="sec-package-nav-def-types">
                <title>The <markup>nav</markup> Element: Types</title>

                <section xml:id="sec-package-nav-def-types-intro" conformance="informative">
                    <title>Introduction</title>

                    <para>The <markup>nav</markup> elements defined in an EPUB Navigation Document are distinguished
                        semantically by the value of their <olink targetdoc="contentdocs" targetptr="sec-epub-type-attribute"
                            type="epub-spec">epub:type attribute</olink>.</para>

                    <para>This specification defines three types of navigation aid:</para>

                    <variablelist>
                        <varlistentry>
                            <term><markup linkend="sec-nav-toc">toc</markup></term>
                            <listitem>
                                <para>Identifies the <markup>nav</markup> element that contains the table of contents.</para>
                            </listitem>
                        </varlistentry>
                        <varlistentry>
                            <term><markup linkend="sec-nav-pagelist">pagelist</markup></term>
                            <listitem>
                                <para>Identifies the <markup>nav</markup> element that contains a list of pages for a print
                                    or other statically-paginated source for the <olink targetdoc="spec"
                                        targetptr="gloss-epub-publication" type="epub-spec"/>.</para>
                            </listitem>
                        </varlistentry>
                        <varlistentry>
                            <term><markup linkend="sec-nav-landmarks">landmarks</markup></term>
                            <listitem>
                                <para>Identifies the <markup>nav</markup> element that contains a list of points of
                                    interest.</para>
                            </listitem>
                        </varlistentry>
                    </variablelist>

                    <para>Additional navigation types can be included in the EPUB Navigation Document. See <xref
                            linkend="sec-package-nav-def-types-other"/> for more information.</para>
                </section>

                <section xml:id="sec-nav-toc">
                    <title>The <property>toc</property>
                        <markup>nav</markup> Element</title>

                    <para>The <property>toc</property>
                        <markup>nav</markup> element defines the primary navigational hierarchy of the given <olink
                            targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/>. It conceptually corresponds to a
                        table of contents in a printed work (i.e., it provides navigation to the major structural sections of
                        the publication).</para>

                    <para>For usability and accessibility reasons, <olink targetdoc="spec" targetptr="gloss-author"
                            type="epub-spec">Authors</olink>
                        <literal role="rfc2119">should</literal> provide a comprehensive table of contents: the
                            <property>toc</property>
                        <markup>nav</markup>
                        <literal role="rfc2119">should not</literal> exclude references based solely on their nesting depth
                        within the document hierarchy, as is often the case in print works (particularly in reduced tables of
                        contents).</para>

                    <para>In the case of Renditions that exclusively reference <olink targetdoc="spec"
                            targetptr="gloss-content-document-epub-xhtml" type="epub-spec">XHTML Content Documents</olink>
                        from their <link linkend="sec-spine-elem">spines</link>, the <property>toc</property>
                        <markup>nav</markup> will typically correspond to the aggregation of <link
                            xlink:href="http://www.w3.org/TR/html5/sections.html#headings-and-sections">HTML5 outlines</link>
                        of those documents (excluding any subtrees that do not contribute to the primary outline).</para>

                    <para>The order of <markup>li</markup> elements contained within the <property>toc</property>
                        <markup>nav</markup> element <literal role="rfc2119">must</literal> match the order of the targeted
                        elements within each <link linkend="confreq-nav-a-href">targeted EPUB Content Document</link>, and
                            <literal role="rfc2119">must</literal> also follow the order of Content Documents in the
                        Rendition's <olink targetdoc="spec" targetptr="gloss-spine" type="epub-spec"/>.</para>

                    <para>The <property>toc</property>
                        <markup>nav</markup> element <literal role="rfc2119">must</literal> occur exactly once in an EPUB
                        Navigation Document.</para>
                </section>

                <section xml:id="sec-nav-pagelist">
                    <title>The <property>pagelist</property>
                        <markup>nav</markup> Element</title>

                    <para>The <property>pagelist</property>
                        <markup>nav</markup> element is a container for pagination information. It provides navigation to
                        positions in the content that correspond to the locations of page boundaries present in a print
                        source being represented by the <olink targetdoc="spec" targetptr="gloss-epub-publication"
                            type="epub-spec"/>.</para>

                    <para>The <property>pagelist</property>
                        <markup>nav</markup> element is <literal role="rfc2119">optional</literal> in EPUB Navigation
                        Documents and <literal role="rfc2119">must not</literal> occur more than once. </para>

                    <para> The order of <markup>li</markup> elements contained within a <property>pagelist</property>
                        <markup>nav</markup> structure <literal role="rfc2119">must</literal> match the order of the actual
                        pages inside each <link linkend="confreq-nav-a-href">targeted EPUB Content Document</link> and
                            <literal role="rfc2119">must</literal> also follow the order of Content Documents in the <olink
                            targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/>'s <xref linkend="sec-spine-elem"
                        />. </para>

                    <para>The <property>pagelist</property>
                        <markup>nav</markup> element <literal role="rfc2119">should</literal> contain only a single
                            <markup>ol</markup> descendant (i.e., no nested sublists). </para>
                </section>

                <section xml:id="sec-nav-landmarks">
                    <title>The <property>landmarks</property>
                        <markup>nav</markup> Element</title>

                    <para>The <property>landmarks</property>
                        <markup>nav</markup> element identifies fundamental structural components in the given <olink
                            targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/> in order to enable Reading
                        Systems to provide the <olink targetdoc="spec" targetptr="gloss-user" type="epub-spec"/> efficient
                        access to them.</para>

                    <para>The <olink targetdoc="contentdocs" targetptr="sec-epub-type-attribute" type="epub-spec">epub:type
                            attribute</olink> is <literal role="rfc2119">required</literal> on <markup>a</markup> element
                        descendants of the <property>landmarks</property>
                        <markup>nav</markup> element. The structural semantics of each link target within the
                            <property>landmarks</property>
                        <markup>nav</markup> element is determined by the value of this attribute.</para>

                    <informalexample>
                        <para>The following example shows a <property>landmarks</property>
                            <markup>nav</markup> element with structural semantics drawn from the <link
                                linkend="refEPUBStructureVocab">EPUB Structural Semantics Vocabulary</link>.</para>
                        <synopsis><xi:include href="./examples/contentdocs-nav/landmarks.xml" parse="text"/></synopsis>
                    </informalexample>

                    <para>The <property>landmarks</property>
                        <markup>nav</markup> element is <literal role="rfc2119">optional</literal> in EPUB Navigation
                        Documents and <literal role="rfc2119">must not</literal> occur more than once. </para>
                </section>

                <section xml:id="sec-package-nav-def-types-other">
                    <title>Other <markup>nav</markup> Elements</title>

                    <para>EPUB Navigation Documents optionally <literal role="rfc2119">may</literal> include one or more
                            <markup>nav</markup> elements in addition to the <property>toc</property>,
                            <property>pagelist</property> and <property>landmarks</property>
                        <markup>nav</markup> elements defined in the preceding sections. These additional
                            <markup>nav</markup> elements <literal role="rfc2119">should</literal> have an
                            <markup>epub:type</markup> attribute to provide a machine-readable semantic, and <literal
                            role="rfc2119">must</literal> have a human-readable heading as their first child.</para>

                    <para>This specification imposes no restrictions on the semantics of any additional <markup>nav</markup>
                        elements: they <literal role="rfc2119">may</literal> be used to represent navigational semantics for
                        any information domain, and they <literal role="rfc2119">may</literal> contain link targets with
                        homogeneous or heterogeneous semantics.</para>

                    <informalexample>
                        <para>The following example shows a custom list of tables navigation element.</para>
                        <synopsis><xi:include href="./examples/contentdocs-nav/grouped-list.xml" parse="text"/></synopsis>
                    </informalexample>
                </section>
            </section>

            <section xml:id="sec-package-nav-def-hidden">
                <title>The <markup>hidden</markup> attribute</title>

                <para>In some cases, <olink targetdoc="spec" targetptr="gloss-author" type="epub-spec">Authors</olink> might
                    wish to hide parts of the navigation data within the content flow (i.e., the Reading System's principal
                    rendering of the <olink targetdoc="spec" targetptr="gloss-spine" type="epub-spec"/> contents). A typical
                    example is the <link linkend="sec-nav-pagelist">list of page breaks</link>, which usually isn't rendered
                    as part of the content flow but is instead exposed to the <olink targetdoc="spec" targetptr="gloss-user"
                        type="epub-spec"/> separately in a dedicated navigation user interface.</para>

                <para> While the <xref linkend="refCSS21"/>
                    <property>display</property> property can be used to control the visual rendering of EPUB Navigation
                    Documents in Reading Systems with <olink targetdoc="spec" targetptr="gloss-viewport" type="epub-spec"
                        >Viewports</olink>, not all Reading Systems provide such an interface. To control rendering across
                    all Reading Systems, authors <literal role="rfc2119">must</literal> use the <xref linkend="refHTML5"/>
                    <markup xlink:href="http://www.w3.org/TR/html5/editing.html#the-hidden-attribute">hidden</markup>
                    attribute to indicate which (if any) portions of the navigation data are excluded from rendering in the
                    content flow. The <markup>hidden</markup> attribute has no effect on how navigation data is rendered
                    outside of the content flow (such as in dedicated navigation user interfaces provided by Reading
                    Systems).</para>

                <informalexample>
                    <para>The following example shows a partial <property>page-list</property>
                        <markup>nav</markup> element. The presence of the <markup>hidden</markup> attribute on the root
                        indicates that the entire list is excluded from rendering in the content flow.</para>
                    <synopsis><xi:include href="./examples/contentdocs-nav/page-list.xml" parse="text"/></synopsis>
                </informalexample>

                <informalexample>
                    <para>The following example shows a partial <property>toc</property>
                        <markup>nav</markup> element where the <markup>hidden</markup> attribute is used to limit content
                        flow rendering to the two topmost hierarchical levels.</para>
                    <synopsis><xi:include href="./examples/contentdocs-nav/toc.xml" parse="text"/></synopsis>
                </informalexample>

            </section>
        </section>
    </chapter>

    <appendix xml:id="app-meta-protocol">
        <title>Metadata HTTP Protocol</title>

        <annotation xml:id="issue-meta-protocol">
            <para>The protocol defined in this section is presented as an initial draft for review. The EPUB Working Group is
                seeking input on its implementability. To make a comment on it, please refer to <link
                    xlink:href="https://github.com/IDPF/epub-revision/issues/703">Issue #703</link>.</para>
        </annotation>
        
        <para>The metadata distribution service defined in this appendix addresses the provision and retrieval of
            remotely-hosted metadata records referenced from <link linkend="sec-link-elem"><markup>link</markup>
                elements</link>.</para>

        <section xml:id="app-meta-terminology">
            <title>Terminology</title>

            <para>The following terminology is defined for this appendix.</para>

            <glosslist>
                <glossentry xml:id="app-gloss-meta-record">
                    <glossterm>Metadata Record</glossterm>
                    <glossdef>
                        <para>A set of resource data about an <olink targetdoc="spec" targetptr="gloss-epub-publication"
                                type="epub-spec" epub:specref-exclude="true"/>.</para>
                    </glossdef>
                </glossentry>
                <glossentry xml:id="app-gloss-meta-url">
                    <glossterm>Metadata Record URL</glossterm>
                    <glossdef>
                        <para>The URL <xref linkend="refRFC3986"/> specified in the <markup>href</markup> attribute of a
                                <xref linkend="sec-link-elem"/> element that references a <xref
                                linkend="app-gloss-meta-record"/>.</para>
                    </glossdef>
                </glossentry>
                <glossentry xml:id="app-gloss-server">
                    <glossterm>Server</glossterm>
                    <glossdef>
                        <para>A program that accepts connections in order to service HTTP requests by sending HTTP responses
                                <xref linkend="refRFC7230"/>.</para>
                    </glossdef>
                </glossentry>
                <glossentry xml:id="app-gloss-metadata-server">
                    <glossterm>Metadata Server</glossterm>
                    <glossdef>
                        <para>A <xref linkend="app-gloss-server"/> that confirms to this specification in order to distribute
                                <link linkend="app-gloss-meta-record">Metadata Records</link>.</para>
                    </glossdef>
                </glossentry>
                <glossentry xml:id="app-gloss-metadata-client">
                    <glossterm>Metadata Client</glossterm>
                    <glossdef>
                        <para>A program that connects to a <xref linkend="app-gloss-metadata-server"/> in order to retrieve
                                <link linkend="app-gloss-meta-record">Metadata Records</link>, such as a <olink
                                targetdoc="spec" targetptr="gloss-epub-reading-system" type="epub-spec"
                                epub:specref-exclude="true"/>.</para>
                    </glossdef>
                </glossentry>
            </glosslist>
        </section>

        <section xml:id="app-meta-conformance">
            <title>Conformance</title>

            <section xml:id="app-meta-conformance-server">
                <title>Metadata Servers</title>

                <para>A conformant <xref linkend="app-gloss-metadata-server"/>
                    <literal role="rfc2119">must</literal> meet the following criteria:</para>

                <itemizedlist role="conformance-list">
                    <listitem>
                        <para xml:id="meta-server-get">It <literal role="rfc2119">must</literal> support HTTP GET method
                                <xref linkend="refRFC7231"/>.</para>
                    </listitem>
                    <listitem>
                        <para xml:id="meta-server-http11">It <literal role="rfc2119">should</literal> be an HTTP/1.1
                            conformant server <xref linkend="refRFC7230"/>
                            <xref linkend="refRFC7231"/>
                            <xref linkend="refRFC7232"/>.</para>
                    </listitem>
                    <listitem>
                        <para xml:id="meta-server-etags">It <literal role="rfc2119">must</literal> use entity tags (ETag
                            header) in its HTTP responses <xref linkend="refRFC7232"/>.</para>
                    </listitem>
                    <listitem>
                        <para xml:id="meta-server-406">It <literal role="rfc2119">must</literal> respond with a 406 status
                            code <xref linkend="refRFC7231"/> when the server is not able to send acceptable
                            responses.</para>
                    </listitem>
                    <listitem>
                        <para xml:id="meta-server-acao">It <literal role="rfc2119">must</literal> return responses with
                            Access-Control-Allow-Origin headers <xref linkend="refRFC7232"/>.</para>
                    </listitem>
                    <listitem>
                        <para xml:id="meta-server-advert">It <literal role="rfc2119">may</literal> advertise its protocol
                            support by providing a Link header <xref linkend="refRFC5988"/> with a target IRI <xref
                                linkend="refRFC3987"/> of "<uri>http://idpf.org/metadata#Container</uri>" and relation type
                            of "<code>type</code>".</para>
                    </listitem>
                </itemizedlist>
            </section>

            <section xml:id="app-meta-conformance-client">
                <title>Metadata Clients</title>

                <para>A conformant <xref linkend="app-gloss-metadata-client"/>
                    <literal role="rfc2119">must</literal> meet the following criteria:</para>

                <itemizedlist role="conformance-list">
                    <listitem>
                        <para xml:id="meta-client-access">It <literal role="rfc2119">may</literal> access a <xref
                                linkend="app-gloss-meta-url"/> endpoint only when the <link linkend="attrdef-media-type"
                                >media type</link> specified in the given <xref linkend="sec-link-elem"/> element is
                            acceptable.</para>
                    </listitem>
                    <listitem>
                        <para xml:id="meta-client-accept-type">It <literal role="rfc2119">should</literal> set the specified
                            media type <xref linkend="refRFC2046"/> for the Accept request header <xref linkend="refRFC7231"
                            /> to retrieve a <xref linkend="app-gloss-meta-record"/> from the <xref
                                linkend="app-gloss-meta-url"/>. If the URL accepts any media type, the <link
                                linkend="app-gloss-metadata-client">Metadata Client</link>
                            <literal role="rfc2119">may</literal> send an HTTP request with the prefered Accept type.</para>
                    </listitem>
                    <listitem>
                        <para xml:id="meta-client-last-update">It <literal role="rfc2119">should</literal> use the HTTP
                            If-Match header and ETags <xref linkend="refRFC7232"/> to check whether the <xref
                                linkend="app-gloss-meta-record"/> has changed since it had been updated.</para>
                    </listitem>
                </itemizedlist>
            </section>
        </section>

        <section xml:id="app-meta-ex">
            <title>Examples</title>

            <informalexample>
                <para>Example 1. Simple Metadata Request</para>
                <synopsis><xi:include href="examples/publications/meta-server1.txt" parse="text"/></synopsis>
            </informalexample>

            <informalexample>
                <para>Example 2. Simple EPUB Metadata Response</para>
                <synopsis><xi:include href="examples/publications/meta-server2.txt" parse="text"/></synopsis>
            </informalexample>
        </section>
    </appendix>

    <appendix xml:id="app-obs-features">
        <title>Unstable Features</title>

        <para>This appendix lists <olink targetdoc="spec" targetptr="sec-overview-deprecated" type="epub-spec">deprecated,
                superseded and obsolete</olink> features of the <olink targetdoc="spec" targetptr="gloss-package-document"
                type="epub-spec" epub:specref-exclude="true"/>.</para>

        <section xml:id="attrdef-meta-refines">
            <title>The <markup>refines</markup> attribute</title>

            <para>The <xref linkend="sec-meta-elem"/>
                <markup>refines</markup> attribute is <emphasis><olink targetdoc="spec" targetptr="superseded"
                        type="epub-spec" epub:specref-exclude="true">superseded</olink></emphasis>.</para>

            <para><olink targetdoc="spec" targetptr="gloss-author" type="epub-spec" epub:specref-exclude="true"
                    >Authors</olink> are strongly encouraged to use the dedicated attributes <markup
                    linkend="attrdef-opf-alt-script">opf:alt-script</markup>, <markup linkend="attrdef-opf-file-as"
                    >opf:file-as</markup>, <markup linkend="attrdef-opf-scheme">opf:scheme</markup> and <markup
                    linkend="attrdef-opf-role">opf:role</markup> instead.</para>

            <para>For more information about this attribute, see its definition in <xref linkend="refPublications301"
                />.</para>
        </section>

        <section xml:id="app-obs-ncx">
            <title>NCX</title>

            <para>Inclusion of an <xref linkend="refOPF2"/> NCX file is <emphasis><olink targetdoc="spec"
                        targetptr="obsolete" type="epub-spec" epub:specref-exclude="true">obsolete</olink></emphasis>. This
                feature will be removed in the next major version of EPUB.</para>

            <para>The NCX provides a measure of backwards compatibility for EPUB 2 Reading Systems, but has no function in
                EPUB 3. It is replaced by the <link linkend="sec-package-nav">EPUB Navigation Document</link>. EPUB 3 Reading
                Systems <literal role="rfc2119">must</literal> ignore the NCX.</para>

            <para>As the NCX is not used in the rendering of an EPUB 3 Publication, it can be included in the manifest
                without a fallback.</para>

            <section xml:id="attrdef-spine-toc">
                <title>The <markup>toc</markup> attribute</title>

                <para>The <xref linkend="sec-spine-elem"/>
                    <markup>toc</markup> attribute is <emphasis><olink targetdoc="spec" targetptr="obsolete" type="epub-spec"
                            epub:specref-exclude="true">obsolete</olink></emphasis>.</para>

                <para>This attribute allows the <xref linkend="refOPF2"/> NCX to be identified.</para>
            </section>

        </section>
    </appendix>

    <appendix xml:id="app-package-schema">
        <title>Package Document Schema</title>
        <para>The schema for Package Documents is available at <link
                xlink:href="http://www.idpf.org/epub/31/schema/package-31.nvdl"
                >http://www.idpf.org/epub/31/schema/package-31.nvdl</link>.</para>
        <para>Validation using this schema requires a processor that supports <xref linkend="refNVDL"/>, <xref
                linkend="refRelaxNG"/>, <xref linkend="refISOSchematron"/> and <xref linkend="refXSDDatatypes"/>.</para>
        <note>
            <para>The NVDL schema layer can be substituted by a multi-pass validation using the embedded RELAX NG and ISO
                Schematron schemas alone.</para>
        </note>
    </appendix>

    <appendix xml:id="app-media-type-app-oebps-package" conformance="informative">
        <title>The <code role="media-type">application/oebps-package+xml</code> Media Type</title>
        <para>This appendix registers the media type <code role="media-type">application/oebps-package+xml</code> for the
            EPUB Package Document. This registration supersedes <xref linkend="refRFC4839"/>.</para>

        <para>The Package Document is an XML file that describes a Rendition of an EPUB Publication. It identifies the
            resources in the Rendition and provides metadata information. The Package Document and its related standards are
            maintained and defined by the International Digital Publishing Forum (IDPF).</para>

        <variablelist>
            <varlistentry>
                <term>MIME media type name:</term>
                <listitem>
                    <para><code role="media-type">application</code></para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term>MIME subtype name:</term>
                <listitem>
                    <para><code role="media-type">oebps-package+xml</code></para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term>Required parameters:</term>
                <listitem>
                    <para>None.</para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term>Optional parameters:</term>
                <listitem>
                    <para>None.</para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term>Encoding considerations:</term>
                <listitem>
                    <para>Package Documents are UTF-8 or UTF-16 encoded XML.</para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term>Security considerations:</term>
                <listitem>
                    <para>Package Documents contain well-formed XML conforming to the XML 1.0 specification.</para>

                    <para>Clearly, it is possible to author malicious files which, for example, contain malformed data. Most
                        XML parsers protect themselves from such attacks by rigorously enforcing conformance.</para>

                    <para>All processors that read Package Documents should rigorously check the size and validity of data
                        retrieved.</para>

                    <para>There is no current provision in the EPUB Publications 3.0 standard for encryption, signing, or
                        authentication within the Package Document format.</para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term>Interoperability considerations:</term>
                <listitem>
                    <para>None.</para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term>Published specification:</term>
                <listitem>
                    <para>This media type registration is for the EPUB Package Document, as described by the EPUB
                        Publications 3.0 specification located at <link
                            xlink:href="http://www.idpf.org/epub/30/spec/epub30-publications.html"
                            >http://www.idpf.org/epub/30/spec/epub30-publications.html</link>.</para>
                    <para>The EPUB Publications 3.0 specification supersedes the Open Packaging Format 2.0.1 specification,
                        which is located at <link xlink:href="http://www.idpf.org/epub/20/spec/OPF_2.0.1_draft.htm"
                            >http://www.idpf.org/epub/20/spec/OPF_2.0.1_draft.htm</link> and which also uses the <code
                            role="media-type">application/oepbs-package+xml</code> media type.</para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term>Applications which use this media type:</term>
                <listitem>
                    <para>This media type is in wide use for the distribution of ebooks in the EPUB format. The following
                        list of applications is not exhaustive.</para>
                    <itemizedlist>
                        <listitem>
                            <para>Adobe Digital Editions</para>
                        </listitem>
                        <listitem>
                            <para>Aldiko</para>
                        </listitem>
                        <listitem>
                            <para>Azardi</para>
                        </listitem>
                        <listitem>
                            <para>Apple iBooks</para>
                        </listitem>
                        <listitem>
                            <para>Barnes &amp; Noble Nook</para>
                        </listitem>
                        <listitem>
                            <para>Calibre</para>
                        </listitem>
                        <listitem>
                            <para>Google Books</para>
                        </listitem>
                        <listitem>
                            <para>Ibis Reader</para>
                        </listitem>
                        <listitem>
                            <para>MobiPocket reader</para>
                        </listitem>
                        <listitem>
                            <para>Sony Reader</para>
                        </listitem>
                        <listitem>
                            <para>Stanza</para>
                        </listitem>
                    </itemizedlist>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term>Additional information:</term>
                <listitem>
                    <variablelist>
                        <varlistentry>
                            <term>Magic number(s):</term>
                            <listitem>
                                <para>none</para>
                            </listitem>
                        </varlistentry>
                        <varlistentry>
                            <term>File extension(s):</term>
                            <listitem>
                                <para><filename>.opf</filename></para>
                            </listitem>
                        </varlistentry>
                        <varlistentry>
                            <term>Macintosh File Type Code(s):</term>
                            <listitem>
                                <para>TEXT</para>
                            </listitem>
                        </varlistentry>
                        <varlistentry>
                            <term>Fragment Identifiers:</term>
                            <listitem>
                                <para>The IDPF maintains a registry of linking schemes at <uri
                                        xlink:href="http://www.idpf.org/epub/linking/"
                                        >http://www.idpf.org/epub/linking/</uri>. Some of these schemes define custom
                                    fragment identifiers that resolve to <code role="media-type"
                                        >application/oebps-package+xml</code> documents.</para>
                            </listitem>
                        </varlistentry>
                    </variablelist>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term>Person &amp; email address to contact for further information:</term>
                <listitem>
                    <para>William McCoy, <link xlink:href="mailto:bmccoy@idpf.org">bmccoy@idpf.org</link></para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term>Intended usage:</term>
                <listitem>
                    <para>COMMON</para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term>Author/Change controller:</term>
                <listitem>
                    <para>International Digital Publishing Forum (<link xlink:href="http://www.idpf.org"
                            >http://www.idpf.org</link>)</para>
                </listitem>
            </varlistentry>
        </variablelist>
    </appendix>

    <xi:include href="./share/contributors.xml"/>

    <xi:include href="./share/references.xml"/>
</book>
