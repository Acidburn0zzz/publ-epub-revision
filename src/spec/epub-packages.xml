<?xml version="1.0" encoding="UTF-8"?>
<?xml-model href="../../util/docbook/schema/docbookspec.rng" type="application/xml" schematypens="http://relaxng.org/ns/structure/1.0"?>
<?xml-model href="../../util/docbook/schema/docbookspec.sch" type="application/xml" schematypens="http://purl.oclc.org/dsdl/schematron"?>
<?xml-model href="../../util/docbook/schema/docbook.sch" type="application/xml" schematypens="http://purl.oclc.org/dsdl/schematron"?>
<book xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"
    xmlns:xi="http://www.w3.org/2001/XInclude" version="5.1" xmlns:epub="http://www.idpf.org/2011/epub" xml:lang="en">
    <title>EPUB Packages 3.1</title>

    <info>
        <releaseinfo>Editor's Draft</releaseinfo>
        <pubdate>01 January 2016</pubdate>
        <printhistory>
            <formalpara>
                <title>This version</title>
                <para><link xlink:href="http://www.idpf.org/epub/31/spec/epub-packages-20160101.html"/></para>
            </formalpara>
            <formalpara>
                <title>Latest version</title>
                <para><link xlink:href="http://www.idpf.org/epub3/latest/packages"/></para>
            </formalpara>
            <formalpara>
                <title>Previous version</title>
                <para><link xlink:href="http://www.idpf.org/epub/301/spec/epub-publications-20140626.html"/></para>
            </formalpara>
            <formalpara>
                <title>Previous recommendation</title>
                <para><link xlink:href="http://www.idpf.org/epub/301/spec/epub-publications-20140626.html"/></para>
            </formalpara>
        </printhistory>
        <releaseinfo role="errata"><link xlink:href="./epub-packages-errata/">Errata</link></releaseinfo>
        <releaseinfo role="history"><link
                xlink:href="https://github.com/IDPF/epub-revision/commits/master/src/spec/epub-packages.xml">Changes to this
                document</link></releaseinfo>
        <releaseinfo role="formats">The complete EPUB 3.1 specification is also available for download as an <link
                xlink:href="http://www.idpf.org/epub/31/epub31.epub">EPUB Publication</link>.</releaseinfo>
        <xi:include href="./share/copyright.xml"/>
        <xi:include href="./share/legalnotice.xml"/>
        <authorgroup role="current">
            <editor>
                <personname>Markus Gylling</personname>
                <affiliation>
                    <org>
                        <orgname>International Digital Publishing Forum (IDPF)</orgname>
                    </org>
                </affiliation>
            </editor>
            <editor>
                <personname>William McCoy</personname>
                <affiliation>
                    <org>
                        <orgname>International Digital Publishing Forum (IDPF)</orgname>
                    </org>
                </affiliation>
            </editor>
            <editor>
                <personname>Matt Garrish</personname>
                <affiliation>
                    <org>
                        <orgname>Invited Expert</orgname>
                    </org>
                </affiliation>
            </editor>
        </authorgroup>
        <abstract>
            <para>EPUB Packages 3.1 defines package semantics and conformance requirements.</para>
        </abstract>
    </info>

    <xi:include href="share/status.xml"/>

    <chapter xml:id="sec-overview">
        <title>Overview</title>

        <section xml:id="sec-overview-purpose-and-scope" conformance="informative">
            <title>Purpose and Scope</title>

            <para>This specification, EPUB Packages 3.1, defines semantics and conformance requirements for an <olink
                    targetdoc="spec" targetptr="gloss-epub-package" type="epub-spec">EPUB® Pacakge</olink>. Each Package
                represents one <olink targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/> of an <olink
                    targetdoc="spec" targetptr="gloss-epub-publication" type="epub-spec"/>, and is defined by a <olink
                    targetdoc="spec" targetptr="gloss-package-document" type="epub-spec"/> that describes the content and
                rules for how it and other <olink targetdoc="spec" targetptr="gloss-publication-resource-cmt-or-foreign"
                    type="epub-spec">Publication Resources</olink> are associated.</para>

            <para>This specification also defines the <olink targetdoc="spec" targetptr="gloss-content-document-epub-nav"
                    type="epub-spec"/>, a machine- and human-readable specialization of an EPUB Content Document that
                provides navigation aids such as the table of contents.</para>

            <xi:include href="share/specdesc-all.xml"/>

            <para>This specification supersedes EPUB Publications 3.0.1 <xref linkend="refPublications301"/>. Refer to <xref
                    linkend="refEPUB3Changes"/> for more information on the differences between this specification and its
                predecessor.</para>

        </section>

        <xi:include href="./share/terminology.xml"/>

        <xi:include href="./share/typography.xml"/>
        
        <xi:include href="./share/conformancestatements.xml"/>
        
        <xi:include href="./share/deprecated.xml"/>
        
        <section xml:id="sec-overview-pfx">
            <title>Prefix mappings</title>
            <para>For convenience, the following prefix mappings are used in this specification.</para>
            <table xml:id="tbl-nspfx">
                <caption>Prefix mappings</caption>
                <tr>
                    <th class="left">prefix</th>
                    <th class="odd">URI</th>
                </tr>
                <tr>
                    <td class="left">
                        <markup>dcterms</markup>
                    </td>
                    <td class="odd">
                        <uri>http://purl.org/dc/terms/</uri>
                    </td>
                </tr>
                <tr>
                    <td class="left">
                        <markup>onix</markup>
                    </td>
                    <td class="odd">
                        <uri>http://www.editeur.org/ONIX/book/codelists/current.html#</uri>
                    </td>
                </tr>
                <tr>
                    <td class="left">
                        <markup>rendition</markup>
                    </td>
                    <td class="odd">
                        <uri>http://www.idpf.org/2013/rendition/#</uri>
                    </td>
                </tr>
            </table>

            <para>These prefixes are all <link linkend="sec-metadata-reserved-vocabs">reserved</link> for use and do not have
                to be declared.</para>
        </section>

    </chapter>

    <!-- TODO
    <chapter xml:id="sec-pub-rend-pkg" conformance="informative">
        <title>Publications, Renditions and Packages</title>

        <para>Although the focus of the <xref linkend="refEPUB3"/> specification is on the creation of an <olink
                targetdoc="spec" targetptr="gloss-epub-publication" type="epub-spec"/> for consumption by a <olink
                targetdoc="spec" targetptr="gloss-user" type="epub-spec"/>, often invisible to the User is that the <olink
                targetdoc="spec" targetptr="gloss-author" type="epub-spec"/> might have included more than one rendering of
            the publication.</para>

        <para>In EPUB parlance, this distinction between the publication and how it is presented is manifested in the terms
            EPUB Publication and <olink targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/>. Renditions are the
            specific renderings of the content available. An EPUB Publication always has at least one Rendition, but is
            unlimited in how many alternatives that Author chooses to create and distribute together.</para>

        <para>Since a Rendition is one rendering of an EPUB Publication, it is often the case that this specification will
            talk about requirements for the EPUB Publication in relation to a given Rendition of it. An EPUB Publication
            always has a title, for example, and it is required to express it for each Rendition. But although every
            Rendition will carry the title for the EPUB Publication, it's not the case that that title will be expressed
            exactly the same way in each Rendition. For example, a multilingual EPUB Publication will typically include a
            language-localized version of the title in each Rendition. Similarly, each Rendition of an EPUB Publication could
            be assigned a different identifier, such as an ISBN, if the Author considers them distinct works.</para>

        <para>While bibliographic metadata between Renditions is often very similar, metadata related to the rendering of the
            Rendition can be quite different. One Rendition might be a reflowable version of the content while another
            represents fixed-layout content. Such Rendition will also include different resources (e.g., reflowabled
            documents v. fixed pages) and will also have different reading orders.</para>

        <para>For all the above reasons, Renditions need to be defined separately from each other. That's where the <olink
                targetdoc="spec" targetptr="gloss-epub-package" type="epub-spec"/> comes in. If Rendition is the overarching
            concept of a specific rendering of the content, a Package is the tangible manifestation. It takes the form of the
                <olink targetdoc="spec" targetptr="gloss-package-document" type="epub-spec"/> and includes the <olink
                targetdoc="spec" targetptr="gloss-content-document-epub-nav" type="epub-spec"/> as well as all the <olink
                targetdoc="spec" targetptr="gloss-publication-resource-cmt-or-foreign" type="epub-spec"/>.</para>
    </chapter>
-->

    <chapter xml:id="sec-package-conformance">
        <title>Package Conformance</title>

        <section xml:id="sec-package-content-conformance" xreflabel="EPUB Package—Content Conformance">
            <title>Content Conformance</title>

            <para>A conformant <olink targetdoc="spec" targetptr="gloss-epub-package" type="epub-spec"/>
                <literal role="rfc2119">must</literal> meet all of the following criteria:</para>

            <variablelist role="conformance-list">
                <varlistentry xml:id="sec-epub-rendition-content-conformance-all">
                    <term>Publication Resources</term>
                    <listitem>
                        <para xml:id="confreq-rendition-manifest">All <olink targetdoc="spec"
                                targetptr="gloss-publication-resource-cmt-or-foreign" type="epub-spec">Publication
                                Resources</olink> associated with the Package <literal role="rfc2119">must</literal> be
                            listed in the Package Document (as defined in <xref linkend="sec-manifest-elem"/>).</para>
                    </listitem>
                </varlistentry>
                <varlistentry xml:id="sec-package-content-conformance-package">
                    <term>Package Document</term>
                    <listitem>
                        <para xml:id="confreq-package">It <literal role="rfc2119">must</literal> contain exactly one <olink
                                targetdoc="spec" targetptr="gloss-package-document" type="epub-spec"/>, which <literal
                                role="rfc2119">must</literal> conform to the content requirements defined in <xref
                                linkend="sec-package-content-conf"/>.</para>
                    </listitem>
                </varlistentry>
                <varlistentry xml:id="sec-package-content-conformance-contentdocs">
                    <term>Content Documents</term>
                    <listitem>
                        <para xml:id="confreq-cd">It <literal role="rfc2119">must</literal> contain at least one <olink
                                targetdoc="spec" targetptr="gloss-content-document-epub" type="epub-spec"/> conformant to the
                            content requirements defined in <xref linkend="refContentDocs3"/>.</para>
                        <!--
                        <para xml:id="confreq-cdf">It <literal role="rfc2119">may</literal> contain one or more <olink targetdoc="spec" targetptr="gloss-content-document-foreign" type="epub-spec"/>s, and <literal role="rfc2119">must</literal> in this case
                            conform to the requirements for fallback provision defined in <xref
                                linkend="sec-foreign-restrictions"/>.</para> -->
                    </listitem>
                </varlistentry>
                <varlistentry xml:id="sec-package-content-conformance-nav">
                    <term>EPUB Navigation Document</term>
                    <listitem>
                        <para xml:id="confreq-nav-occur">It <literal role="rfc2119">must</literal> contain exactly one <olink
                                targetdoc="spec" targetptr="gloss-content-document-epub-nav" type="epub-spec"/> conformant to
                            the content requirements defined in <xref linkend="sec-package-nav-content-conf"/>.</para>
                    </listitem>
                </varlistentry>
                <varlistentry xml:id="sec-package-content-conformance-css">
                    <term>CSS Style Sheets</term>
                    <listitem>
                        <para xml:id="confreq-css">It <literal role="rfc2119">may</literal> contain zero or more CSS Style
                            Sheets conformant to the content requirements defined in <olink targetdoc="contentdocs"
                                targetptr="sec-css-content-conf" type="epub-spec"/>. </para>
                    </listitem>
                </varlistentry>
                <varlistentry xml:id="sec-package-content-conformance-pls">
                    <term>Pronunciation Lexicons</term>
                    <listitem>
                        <para xml:id="confreq-pls">It <literal role="rfc2119">may</literal> contain zero or more PLS
                            Documents conformant to the content requirements defined in <olink targetdoc="contentdocs"
                                targetptr="sec-pls-conf-content" type="epub-spec"/>.</para>
                    </listitem>
                </varlistentry>
                <varlistentry xml:id="sec-package-content-conformance-media-overlays">
                    <term>Media Overlay Documents</term>
                    <listitem>
                        <para xml:id="confreq-mo">It <literal role="rfc2119">may</literal> contain zero or more <olink
                                targetdoc="spec" targetptr="gloss-media-overlay-document" type="epub-spec">Media Overlay
                                Documents</olink> conformant to the content requirements defined in <xref
                                linkend="refOverlays3"/>. </para>
                    </listitem>
                </varlistentry>
                <varlistentry xml:id="sec-package-content-conformance-additional">
                    <term>Additional Resources</term>
                    <listitem>
                        <para xml:id="confreq-additional">It <literal role="rfc2119">may</literal> contain zero or more
                                <olink targetdoc="spec" targetptr="gloss-publication-resource-cmt-or-foreign"
                                type="epub-spec">Publication Resources</olink> in addition to those listed above, each of
                            which <literal role="rfc2119">must</literal> adhere to the requirements in <olink
                                targetdoc="spec" targetptr="sec-epub-pub-conformance-all" type="epub-spec"/>. </para>
                    </listitem>
                </varlistentry>
            </variablelist>

        </section>

        <section xml:id="sec-rendition-rs-conformance" xreflabel="EPUB Package—Reading System">
            <title>Reading System Conformance</title>

            <para>An <olink targetdoc="spec" targetptr="gloss-epub-reading-system" type="epub-spec"/>
                <literal role="rfc2119">must</literal> meet all of the following criteria:</para>

            <itemizedlist role="conformance-list" xml:id="rendition-rs-confreqs">
                <listitem>
                    <para xml:id="confreq-rendition-rs-package">It <literal role="rfc2119">must</literal> process the <olink
                            targetdoc="spec" targetptr="gloss-package-document" type="epub-spec"/> as defined in <xref
                            linkend="sec-package-rs-conf"/>, and honor all presentation logic expressed through the Package
                        Document (e.g., the reading order, fallback chains, bindings, page progression direction and fixed
                        layouts).</para>
                </listitem>
                <listitem>
                    <para xml:id="confreq-rendition-rs-nav">It <literal role="rfc2119">must</literal> process the <olink
                            targetdoc="spec" targetptr="gloss-content-document-epub-nav" type="epub-spec"/> as defined in
                            <xref linkend="sec-package-nav-rs-conf"/>.</para>
                </listitem>
                <listitem>
                    <para xml:id="confreq-rendition-rs-manifest">It <literal role="rfc2119">must not</literal> use any
                        resources not listed in the Package Document in the processing of the Package (e.g.,
                            <filename>META-INF</filename> files <xref linkend="refOCF3"/> and resources specific to other
                        Renditions of the EPUB Publication).</para>
                </listitem>
            </itemizedlist>
        </section>
    </chapter>

    <chapter xml:id="sec-package-doc">
        <title>Package Document</title>

        <section xml:id="sec-package-intro" conformance="informative">
            <title>Introduction</title>
            <para>The <olink targetdoc="spec" targetptr="gloss-package-document" type="epub-spec"/> carries the bibliographic
                and structural metadata associated with an <olink targetdoc="spec" targetptr="gloss-epub-package"
                    type="epub-spec"/> and represents the primary source of information about how to process and display the
                    <olink targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/> it represents.</para>

            <para>The Package Document is an XML document that consists of a set of container elements, each of which houses
                information about a particular aspect of the Package. These containers effectively centralize metadata,
                detail the individual resources that compose the Package and provide reading order and other information to
                render the Rendition.</para>

            <para>The following list summarizes the information a Package Document contains:</para>

            <itemizedlist>
                <listitem>
                    <para><link linkend="sec-package-metadata">Metadata</link> — mechanisms to include and/or reference
                        metadata applicable to the of an <olink targetdoc="spec" targetptr="gloss-epub-publication"
                            type="epub-spec"/> and/or the specific Rendition of it, including for particular resources within
                        the Rendition.</para>
                </listitem>
                <listitem>
                    <para>A <link linkend="sec-manifest-elem">manifest</link> — identifies (via IRI) and describes (via MIME
                        media type) the set of resources that collectively compose the given Rendition of the EPUB
                        Publication.</para>
                </listitem>
                <listitem>
                    <para>A <link linkend="sec-spine-elem">spine</link> — an ordered sequence of ID references to top-level
                        resources in the manifest from which all other resources in the set can be reached or utilized. The
                        spine defines the default reading order of the given Rendition.</para>
                </listitem>
                <listitem>
                    <para><link linkend="sec-bindings-elem">Collections</link> — a method of encapsulating and identifying
                        subcomponents within the Package.</para>
                </listitem>
                <listitem>
                    <para><link linkend="sec-foreign-restrictions-manifest">Manifest fallback chains</link> — an optional
                        mechanism that defines an ordered list of top-level resources as content equivalents. A Reading
                        System can then choose between the resources based on which it is capable of rendering.</para>
                </listitem>
                <listitem>
                    <para><link linkend="sec-bindings-elem">Bindings</link> — an optional mechanism that associates
                        script-based implementations with custom media types.</para>
                </listitem>
            </itemizedlist>

        </section>

        <section xml:id="sec-package-content-conf" xreflabel="Package Document—Content Conformance">
            <title>Content Conformance</title>

            <para>A <olink targetdoc="spec" targetptr="gloss-package-document" type="epub-spec"/>
                <literal role="rfc2119">must</literal> meet all of the following criteria:</para>
            <variablelist role="conformance-list">
                <varlistentry xml:id="confreq-package-docprops">
                    <term>Document Properties</term>
                    <listitem>
                        <para xml:id="confreq-package-xml">
                            <xi:include href="./share/xml-defref.xml"/>
                        </para>
                        <para xml:id="confreq-package-docprops-schema">It <literal role="rfc2119">must</literal> be valid to
                            the Package Document schema, as defined in <xref linkend="app-package-schema"/>, and conform to
                            all content conformance constraints expressed in <xref linkend="sec-package-def"/>.</para>
                    </listitem>
                </varlistentry>
                <varlistentry xml:id="confreq-package-fileprops">
                    <term>File Properties</term>
                    <listitem>
                        <para xml:id="confreq-package-fileprops-name">The Package Document filename <literal role="rfc2119"
                                >should</literal> use the file extension <filename>.opf</filename>.</para>
                    </listitem>
                </varlistentry>
            </variablelist>

            <para xml:id="media-type">Package Documents have the MIME media type <code role="media-type"
                    >application/oebps-package+xml</code>
                <xref linkend="refRFC4839"/>.</para>

        </section>

        <section xml:id="sec-package-rs-conf" xreflabel="Package Document—Reading System Conformance">
            <title>Reading System Conformance</title>

            <para>An <olink targetdoc="spec" targetptr="gloss-epub-reading-system" type="epub-spec"/>
                <literal role="rfc2119">must</literal> meet all of the following criteria:</para>

            <variablelist role="conformance-list">
                <varlistentry xml:id="confreq-rs-package-base">
                    <term>Processing</term>
                    <listitem>
                        <para xml:id="confreq-rs-package-def">It <literal role="rfc2119">must</literal> process the Package
                            Document in conformance with all Reading System conformance constraints expressed in <xref
                                linkend="sec-package-def"/>.</para>
                        <para xml:id="confreq-rs-epub3-presentational-meta">It <literal role="rfc2119">should</literal>
                            process presentational metadata, as expressed in <xref linkend="sec-package-metadata-rendering"
                            /></para>
                        <para xml:id="confreq-rs-epub3-fxl-meta">It <literal role="rfc2119">must</literal> process fixed
                            layout metadata, as expressed in <xref linkend="sec-package-metadata-fxl"/></para>
                        <para xml:id="confreq-rs-epub3-fxl">For <link linkend="sec-package-metadata-fxl">fixed layouts</link>
                            expressed using the <property linkend="fxl-property-viewport">rendition:layout</property>
                            property, it <literal role="rfc2119">must</literal> determine the rendering dimensions as defined
                            in <olink targetdoc="contentdocs" targetptr="sec-fixed-layouts" type="epub-spec"/>.</para>
                        <para xml:id="confreq-rs-epub3-fxl-conflicts">It <literal role="rfc2119">must</literal> ignore
                            proprietary metadata properties that pertain to layout expressions if they conflict behaviorally
                            with the property semantics defined in <xref linkend="sec-package-metadata-fxl"/>.</para>
                    </listitem>
                </varlistentry>
            </variablelist>
        </section>

        <section xml:id="sec-package-def">
            <title>Package Document Definition</title>

            <para>All elements <xref linkend="refXML"/> defined in this section are in the
                    <uri>http://www.idpf.org/2007/opf</uri> namespace <xref linkend="refXMLNamespaces"/> unless otherwise
                specified.</para>

            <section xml:id="sec-package-elem" xreflabel="package">
                <title>The <markup>package</markup> Element</title>

                <para>The <markup>package</markup> element is the root container of the <olink targetdoc="spec"
                        targetptr="gloss-package-document" type="epub-spec"/> and encapsulates metadata and resource
                    information associated with an <olink targetdoc="spec" targetptr="gloss-epub-package" type="epub-spec"
                    />.</para>

                <variablelist xreflabel="package" role="elem-synopsis" xml:id="elemdef-opf-package">
                    <varlistentry>
                        <term>Element Name</term>
                        <listitem>
                            <para><markup>package</markup></para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>The <markup>package</markup> element is the root element of the Package Document.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>
                            <variablelist role="elem-synopsis-attlist">
                                <varlistentry xml:id="attrdef-package-version" xreflabel="version">
                                    <term><markup>version</markup>
                                        <option>[required]</option></term>
                                    <listitem>
                                        <para>Specifies the EPUB specification version to which the given EPUB Package
                                            conforms.</para>
                                        <para>The attribute <literal role="rfc2119">must</literal> have the value <code
                                                role="value">3.0</code> to indicate compliance with this version of the
                                            specification.</para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-package-unique-identifier" xreflabel="unique-identifier">
                                    <term><markup>unique-identifier</markup>
                                        <option>[required]</option></term>
                                    <listitem>
                                        <para>An IDREF <xref linkend="refXML"/> that identifies the <markup><xref
                                                    role="codelink" linkend="sec-opf-dcidentifier"/></markup> element that
                                            provides the preferred, or primary, identifier.</para>
                                        <para>Refer to <xref linkend="sec-package-metadata-identifiers"/> for more
                                            information.</para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-package-prefix" xreflabel="prefix">
                                    <term><markup>prefix</markup>
                                        <option>[optional]</option></term>
                                    <listitem>
                                        <para>Declaration mechanism for prefixes not <link
                                                linkend="sec-metadata-reserved-vocabs">reserved by this
                                            specification</link>.</para>
                                        <para>Refer to <xref linkend="sec-prefix-attr"/> for more information.</para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-package-xml-lang">
                                    <term><markup>xml:lang</markup>
                                        <option>[optional]</option></term>
                                    <listitem>
                                        <xi:include href="./share/xmllang-prose-para.xml"/>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-package-dir">
                                    <term><markup>dir</markup>
                                        <option>[optional]</option></term>
                                    <xi:include href="./share/dir-prose-listitem.xml"/>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-package-id">
                                    <term><markup>id</markup>
                                        <option>[optional]</option></term>
                                    <listitem>
                                        <xi:include href="./share/id-prose-para.xml"/>
                                    </listitem>
                                </varlistentry>
                            </variablelist>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>In this order: <markup><xref role="codelink" linkend="elemdef-opf-metadata"/></markup>
                                <option>[required]</option>, <markup><xref linkend="elemdef-opf-manifest"/></markup>
                                <option>[required]</option>, <markup><xref linkend="elemdef-opf-spine"/></markup>
                                <option>[required]</option>, <markup><link role="codelink" linkend="sec-guide-elem"
                                        >guide</link></markup>
                                <option>[optional/deprecated]</option>, <markup><xref linkend="elemdef-bindings"/></markup>
                                <option>[optional]</option>, <markup><xref linkend="elemdef-collection"/></markup>
                                <option>[0 or more]</option></para>
                        </listitem>
                    </varlistentry>

                </variablelist>

            </section>

            <section xml:id="sec-metadata-elem" xreflabel="metadata">
                <title>The <markup>metadata</markup> Element</title>

                <para>The <markup>metadata</markup> element encapsulates bibliographic and rendering meta information for the
                        <olink targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/> of an <olink targetdoc="spec"
                        targetptr="gloss-epub-publication" type="epub-spec"/> defined by the <olink targetdoc="spec"
                        targetptr="gloss-epub-package" type="epub-spec"/>.</para>

                <variablelist xreflabel="metadata" role="elem-synopsis" xml:id="elemdef-opf-metadata">
                    <varlistentry>
                        <term>Element Name</term>
                        <listitem>
                            <para><markup>metadata</markup></para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>Required first child of <markup><xref linkend="elemdef-opf-package"/></markup>.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>
                            <para>The <markup>metadata</markup> element has no attributes defined in this
                                specification.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>In any order: <markup><xref role="codelink" linkend="elemdef-opf-dcidentifier"/></markup>
                                <option>[1 or more]</option>, <markup><xref linkend="elemdef-opf-dctitle"/></markup>
                                <option>[1 or more]</option>, <markup><xref linkend="elemdef-opf-dclanguage"/></markup>
                                <option>[1 or more]</option>, <markup><xref linkend="sec-opf-dcmes-optional"/></markup>
                                <option>[0 or more]</option>, <markup><xref linkend="elemdef-meta"/></markup>
                                <option>[1 or more]</option>, <markup><xref linkend="sec-opf-meta-elem"/></markup>
                                <option>[0 or more]</option>, <markup><xref linkend="elemdef-opf-link"/></markup>
                                <option>[0 or more]</option></para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <para>The minimal required metadata that each Rendition of an EPUB Publication <literal role="rfc2119"
                        >must</literal> include consists of three elements from the Dublin Core Metadata Element Set <xref
                        linkend="refDCMES"/> — <markup linkend="sec-opf-dcidentifier">title</markup>, <markup
                        linkend="elemdef-opf-dcidentifier">identifier</markup> and <markup linkend="elemdef-opf-dclanguage"
                        >language</markup> — together with the <markup linkend="last-modified-date">modified</markup>
                    property from DCMI Metadata Terms <xref linkend="refDCTERMS"/>. Refer to the <link
                        linkend="sec-metadata-elem-examples">example</link> at the end of this section for an instance of a
                    complete minimal metadata set.</para>

                <para>Additional optional metadata is expressed using the <link linkend="sec-opf-dcmes-optional">DCMES
                        optional elements</link> and the <markup linkend="sec-meta-elem">meta</markup> element. </para>

                <para>Metadata records can also be associated with the EPUB Package using the <markup linkend="sec-link-elem"
                        >link</markup> element. </para>

                <!-- <section xml:id="sec-metadata-extensibility"
                    xreflabel="Metadata Extensibility Mechanism">
                    <title>Metadata Extensibility</title> 

                <para> This specification subsets the <xref linkend="refRDFa11Core"/>
                    profile and prefix definition mechanisms to enable the inclusion and extension
                    of metadata vocabularies for defining Publications. These features allow core
                    metadata properties to be added unprefixed, and additionally work to standardize
                    the inclusion of metadata across the publishing spectrum by predefining prefixes
                    for the most commonly-used vocabularies. </para> 

                <para>All Publications <literal role="rfc2119">must</literal> reference the metadata profile on the root
                        <markup>package</markup> element using the <markup><link
                            linkend="attrdef-package-profile">profile</link></code> attribute.
                    Unlike its RDFa equivalent, the <markup>profile</markup> attribute <literal role="rfc2119">must</literal> 
                    contain only the single canonical URI of the EPUB default profile.</para>

                <para> The addition of the metadata profile allows all properties from the <link
                        linkend="refEPUBPackageVocab">EPUB 3 Package Metadata Vocabulary</link> to
                    be referenced without using prefixes. The profile also defines prefixes
                    for other common vocabularies (refer to <link
                        linkend="refEPUBPackageProfile">the profile</link> for more
                    information on which). </para> 

                <para> If the metadata profile does not define a prefix for a needed vocabulary, it
                    does not mean that the vocabulary cannot be used. The <link
                        linkend="attrdef-package-prefix">prefix</link> attribute can also be
                    attached to the <markup>package</markup> element to define additional prefixes. New
                    prefixes are defined by including whitespace-separated prefix/URI pairings. </para>

                <informalexample>
                    <para>The following example shows how to define a new prefix for a
                        vocabulary.</para>
                    <synopsis><xi:include parse="text" href="examples/publications/rdfa-prefix.xml"/></synopsis>
                </informalexample>

                <xi:include href="./share/rdfa-prefix-reqs.xml"/>-->

                <bridgehead xml:id="sec-metadata-elem-examples">Examples</bridgehead>

                <informalexample>
                    <para>The following example represents the minimal set of metadata that has to be present in the
                            <markup>metadata</markup>.</para>
                    <synopsis><xi:include href="examples/publications/metadata-min-complete.xml" parse="text"/></synopsis>
                </informalexample>

            </section>

            <section xml:id="sec-opf-dcidentifier" xreflabel="dc:identifier">
                <title>The DCMES <markup>identifier</markup> Element</title>

                <para>The <xref linkend="refDCMES"/>
                    <markup>identifier</markup> element contains a single identifier associated with the given <olink
                        targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/> of the <olink targetdoc="spec"
                        targetptr="gloss-epub-publication" type="epub-spec"/>, such as a UUID, DOI, ISBN or ISSN.</para>
                <variablelist xreflabel="dc:identifier" role="elem-synopsis" xml:id="elemdef-opf-dcidentifier">
                    <varlistentry>
                        <term>Element Name</term>
                        <listitem>
                            <para>
                                <markup>dc:identifier</markup>
                            </para>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>Namespace</term>
                        <listitem>
                            <para><uri>http://purl.org/dc/elements/1.1/</uri></para>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>Required child of <markup><xref role="codelink" linkend="elemdef-opf-metadata"/></markup>.
                                Repeatable.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>

                            <variablelist role="elem-synopsis-attlist">

                                <varlistentry xml:id="attrdef-dcidentifier-id">
                                    <term>
                                        <markup>id</markup>
                                        <option>[optional]</option>
                                    </term>
                                    <listitem>
                                        <xi:include href="share/id-prose-para.xml"/>
                                        <para>The <markup>id</markup> attribute is required on the
                                                <markup>identifier</markup> element containing the unique identifier. See
                                            below.</para>
                                    </listitem>
                                </varlistentry>
                            </variablelist>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>Text</para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <para>The <markup>metadata</markup> section <literal role="rfc2119">must</literal> include at least one
                        <markup>identifier</markup> element that contains an unambiguous identifier for the Rendition.
                    Multiple <markup>identifier</markup> elements are permitted, but only one can be marked as the <olink
                        targetdoc="spec" targetptr="gloss-unique-identifier" type="epub-spec"/> via the
                        <markup>package</markup> element <markup><link linkend="attrdef-package-unique-identifier"
                            >unique-identifier</link></markup> attribute. </para>

                <informalexample>
                    <para>The following example shows the unique <markup>identifier</markup> element for an EPUB
                        Publication.</para>
                    <synopsis><xi:include parse="text" href="examples/publications/identifier.xml"/></synopsis>
                </informalexample>

                <para>This specification makes a distinction between the <olink targetdoc="spec"
                        targetptr="gloss-unique-identifier" type="epub-spec"/> for an EPUB Publication and the identifier
                    that uniquely identifies a specific version of it (i.e., to be able to differentiate different versions
                    of the same EPUB Publication). Whenever a Rendition is modified, it <literal role="rfc2119"
                        >must</literal> include a new <link linkend="elemdef-meta">last modified date</link>.</para>

                <para>To identify a specific version of a packaged EPUB Publication, a <olink targetdoc="spec"
                        targetptr="gloss-release-identifier" type="epub-spec"/> can be constructed by combining the Unique
                    Identifier with the last modified date of the Rendition. For more information on the semantics and
                    requirements of the Release Identifier, refer to <xref linkend="sec-metadata-elem-identifiers-pid"
                    />.</para>

                <para>Identifiers <literal role="rfc2119">may</literal> differ from <olink targetdoc="spec"
                        targetptr="gloss-rendition" type="epub-spec"/> to Rendition.</para>

                <para> This specification imposes no additional restrictions or requirements on identifiers except that they
                        <literal role="rfc2119">must</literal> be at least one character in length. It is strongly <literal
                        role="rfc2119">recommended</literal> that all identifiers be fully qualified URIs, however.</para>

                <xi:include href="share/whitespace.xml"/>

                <para> To determine whether an <markup>identifier</markup> conforms to an established system or has been
                    granted by an issuing authority, Reading Systems <literal role="rfc2119">should</literal> parse the value
                    of the property. For additional precision (e.g., if the scheme cannot be determined from the value or
                    could lead to an ambiguous result), <olink targetdoc="spec" targetptr="gloss-author" type="epub-spec"
                        >Authors</olink>
                    <literal role="rfc2119">may</literal>
                    <link linkend="attrdef-meta-refines">attach</link> an <link
                        xlink:href="../../vocab/package/epub-vocab-package.html#identifier-type"
                            ><property>identifier-type</property> property</link>
                    <xref linkend="refEPUBPackageVocab"/> to assist in Reading System identification. When included, the
                        <property>identifier-type</property> property <literal role="rfc2119">should</literal> take
                    precedence over value parsing the <markup>identifier</markup>.</para>

                <informalexample>
                    <para>The following example shows how an <markup>identifier</markup> can be additionally marked as a DOI
                        using the <property>identifier-type</property> property.</para>
                    <synopsis><xi:include parse="text" href="examples/publications/identifier-2.xml"/></synopsis>
                </informalexample>

                <para> This specification does not require or endorse the use of any specific scheme for identifiers, and
                    imposes no restrictions or requirements on <property>identifier-type</property> identifiers beyond those
                    specified in the property definition. </para>

                <para>When an EPUB Publication is derived from another publication, the identifier for that source
                    publication <literal role="rfc2119">may</literal> be included in the metadata, and <literal
                        role="rfc2119">must</literal> be represented using the <link linkend="sec-opf-dcsource">DCMES
                            <markup>source</markup> element</link>.</para>
            </section>

            <section xml:id="sec-opf-dctitle" xreflabel="dc:title">
                <title>The DCMES <markup>title</markup> Element</title>

                <para>The <xref linkend="refDCMES"/>
                    <markup>title</markup> element represents an instance of a name given to the <olink targetdoc="spec"
                        targetptr="gloss-epub-publication" type="epub-spec"/>.</para>

                <variablelist xreflabel="dc:title" role="elem-synopsis" xml:id="elemdef-opf-dctitle">
                    <varlistentry>
                        <term>Element Name</term>
                        <listitem>
                            <para>
                                <markup>dc:title</markup>
                            </para>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>Namespace</term>
                        <listitem>
                            <para><uri>http://purl.org/dc/elements/1.1/</uri></para>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>Required child of <markup><xref role="codelink" linkend="elemdef-opf-metadata"/></markup>.
                                Repeatable.</para>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>
                            <variablelist role="elem-synopsis-attlist">

                                <varlistentry xml:id="attrdef-dctitle-id">
                                    <term>
                                        <markup>id</markup>
                                        <option>[optional]</option></term>
                                    <listitem>
                                        <xi:include href="share/id-prose-para.xml"/>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-dctitle-xml-lang">
                                    <term><markup>xml:lang</markup>
                                        <option>[optional]</option></term>
                                    <listitem>
                                        <xi:include href="./share/xmllang-prose-para.xml"/>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-dctitle-dir">
                                    <term><markup>dir</markup>
                                        <option>[optional]</option></term>
                                    <xi:include href="./share/dir-prose-listitem.xml"/>
                                </varlistentry>
                            </variablelist>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>Text</para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <para>Every <markup>metadata</markup> section <literal role="rfc2119">must</literal> include at least one
                        <markup>title</markup> element containing the title for the EPUB Publication. Multiple
                        <markup>title</markup> elements are permitted, but the <link
                        xlink:href="../../vocab/package/epub-vocab-package.html#title-type"><property>title-type</property>
                        property</link>
                    <xref linkend="refEPUBPackageVocab"/>
                    <literal role="rfc2119">should</literal> be <link linkend="attrdef-meta-refines">attached</link> to
                    indicate the type of title (e.g., the main title of a work or a subtitle). </para>

                <informalexample>
                    <para>The following example shows how to indicate different title types.</para>
                    <synopsis><xi:include parse="text" href="examples/publications/title.xml"/></synopsis>
                </informalexample>

                <para>When adding the <property>title-type</property> property, <olink targetdoc="spec"
                        targetptr="gloss-author" type="epub-spec">Authors</olink>
                    <literal role="rfc2119">should</literal> designate only one <markup>title</markup> element as containing
                    the main title for the Publication. If no means of determining title types is provided, or understood,
                    Reading Systems <literal role="rfc2119">must</literal> treat the first <markup>title</markup> element in
                    document order as the main title. This specification does not define how to process additional
                        <markup>title</markup> elements in such situations.</para>

                <para>The optional <link xlink:href="../../vocab/package/epub-vocab-package.html#display-seq"
                            ><property>display-seq</property> property</link>
                    <xref linkend="refEPUBPackageVocab"/>
                    <literal role="rfc2119">may</literal> also be attached to each <markup>title</markup> to indicate their
                    primacy for display and other rendering purposes. </para>

                <informalexample>
                    <para>The following example shows how to indicate display sequence.</para>
                    <synopsis><xi:include parse="text" href="examples/publications/title-2.xml"/></synopsis>
                </informalexample>

                <para>Titles <literal role="rfc2119">may</literal> differ from <olink targetdoc="spec"
                        targetptr="gloss-rendition" type="epub-spec"/> to Rendition.</para>

                <para> This specification imposes no additional restrictions or requirements on titles except that they
                        <literal role="rfc2119">must</literal> be at least one character in length. </para>

                <xi:include href="share/whitespace.xml"/>

                <bridgehead xml:id="sec-dctitles-examples">Examples</bridgehead>

                <informalexample>
                    <para>The following example shows how the title "THE LORD OF THE RINGS, Part One: The Fellowship of the
                        Ring" could be classified. </para>
                    <synopsis><xi:include parse="text" href="examples/publications/meta-ex-title-3.xml"/></synopsis>
                </informalexample>

                <informalexample>
                    <para>The following example shows how the complex title "The Great Cookbooks of the World: Mon premier
                        guide de cuisson, un Mémoire. The New French Cuisine Masters, Volume Two. Special Anniversary
                        Edition" could be classified. </para>
                    <synopsis><xi:include parse="text" href="examples/publications/meta-ex-title-2.xml"/></synopsis>
                </informalexample>

                <!--
                    <para> The <markup><link role="codelink" linkend="file-as">file-as</link></markup>
                    property can be attached to a <markup>title</markup> to include a normalized
                    representation of the title for machine and bibliographic sorting purposes. </para>
                    
                    <informalexample>
                    <para>The following example shows a <markup>title</markup> and its normalized
                    form for sorting.</para>
                    <synopsis><xi:include parse="text" href="examples/publications/title-3.xml"/></synopsis>
                    </informalexample>
                    
                    <para> The <markup><link role="codelink" linkend="alternate-script"
                    >alternate-script</link></code> property can also be attached to provide
                    a rendition of the <markup>title</markup> in another language and/or script. </para>
                    
                    <informalexample>
                    <para>The following example shows alternate renditions of a
                    <markup>title</markup> for French and English readers.</para>
                    <synopsis><xi:include parse="text" href="examples/publications/title-4.xml"/></synopsis>
                    </informalexample>
                -->

            </section>

            <section xml:id="sec-opf-dclanguage" xreflabel="dc:language">
                <title>The DCMES <markup>language</markup> Element</title>

                <para>The <xref linkend="refDCMES"/>
                    <markup>language</markup> element specifies the language of the content of the given <olink
                        targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/>.</para>

                <variablelist xreflabel="dc:language" role="elem-synopsis" xml:id="elemdef-opf-dclanguage">
                    <varlistentry>
                        <term>Element Name</term>
                        <listitem>
                            <para>
                                <markup>dc:language</markup>
                            </para>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>Namespace</term>
                        <listitem>
                            <para><uri>http://purl.org/dc/elements/1.1/</uri></para>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>Required child of <markup><xref role="codelink" linkend="elemdef-opf-metadata"
                                /></markup>.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>

                            <variablelist role="elem-synopsis-attlist">

                                <varlistentry xml:id="attrdef-dclanguage-id">
                                    <term>
                                        <markup>id</markup>
                                        <option>[optional]</option>
                                    </term>
                                    <listitem>
                                        <xi:include href="share/id-prose-para.xml"/>
                                    </listitem>
                                </varlistentry>
                            </variablelist>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>Text</para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <para>Each Rendition's <markup>metadata</markup> section <literal role="rfc2119">must</literal> include at
                    least one <markup>language</markup> element with a value conforming to <xref linkend="refRFC5646"
                    />.</para>

                <informalexample>
                    <para>The following example shows an <olink targetdoc="spec" targetptr="gloss-epub-publication"
                            type="epub-spec"/> is in U.S. English.</para>
                    <synopsis><xi:include parse="text" href="examples/publications/language.xml"/></synopsis>
                </informalexample>

                <para>Additional <markup>language</markup> elements <literal role="rfc2119">may</literal> be included for
                    multilingual Publications, but each element's value <literal role="rfc2119">must</literal> conform to
                        <xref linkend="refRFC5646"/>.</para>

                <para>Languages <literal role="rfc2119">may</literal> differ from <olink targetdoc="spec"
                        targetptr="gloss-rendition" type="epub-spec"/> to Rendition.</para>

                <xi:include href="share/whitespace.xml"/>

                <!--
                    <para>The <markup>metadata</markup> section <literal role="rfc2119">may</literal> optionally include a single <xref
                    linkend="refDCTERMS"/>
                    <markup>language</markup> property, which, when present, <literal role="rfc2119">must</literal> contain a value that
                    is:</para>
                    
                    <itemizedlist>
                    <listitem>
                    <para>a variable-length code as defined in <xref linkend="refRFC5646"
                    />;</para>
                    </listitem>
                    <listitem>
                    <para>a 2-letter language code as defined in <xref linkend="refISO6391"
                    />;</para>
                    </listitem>
                    <listitem>
                    <para>a 3-letter language code as defined in <xref linkend="refISO6392T"/>;
                    or</para>
                    </listitem>
                    <listitem>
                    <para>a 3-letter language code as defined in <xref linkend="refISO6393"
                    />.</para>
                    </listitem>
                    </itemizedlist>-->

            </section>

            <section xml:id="sec-opf-dcmes-optional" xreflabel="DCMES Optional Elements">
                <title>The DCMES Optional Elements</title>

                <para>All elements from the <xref linkend="refDCMES"/> element set — except for <markup><link
                            linkend="sec-opf-dcidentifier">identifier</link></markup>, <markup><link
                            linkend="sec-opf-dclanguage">language</link></markup> and <markup><link linkend="sec-opf-dctitle"
                            >title</link></markup>, as defined above — are designated as optional. These elements all conform
                    to the following generalized definition:</para>

                <variablelist xreflabel="optional DCMES definition" role="elem-synopsis" xml:id="elemdef-opf-dc-opt">
                    <varlistentry>
                        <term>Element Name</term>
                        <listitem>
                            <para>
                                <markup>contributor</markup> | <markup>coverage</markup> | <markup>creator</markup> |
                                    <markup>date</markup> | <markup>description</markup> | <markup>format</markup> |
                                    <markup>publisher</markup> | <markup>relation</markup> | <markup>rights</markup> |
                                    <markup>source</markup> | <markup>subject</markup> | <markup>type</markup>
                            </para>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>Namespace</term>
                        <listitem>
                            <para><uri>http://purl.org/dc/elements/1.1/</uri></para>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>Optional child of <markup><xref role="codelink" linkend="elemdef-opf-metadata"/></markup>.
                                Repeatable.</para>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>
                            <variablelist role="elem-synopsis-attlist">

                                <varlistentry xml:id="attrdef-dc-id">
                                    <term>
                                        <markup>id</markup>
                                        <option>[optional]</option></term>
                                    <listitem>
                                        <xi:include href="share/id-prose-para.xml"/>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-dc-xml-lang">
                                    <term><markup>xml:lang</markup>* <option>[optional]</option>
                                    </term>
                                    <listitem>
                                        <xi:include href="./share/xmllang-prose-para.xml"/>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-dc-dir">
                                    <term><markup>dir</markup>* <option>[optional]</option></term>
                                    <xi:include href="./share/dir-prose-listitem.xml"/>
                                </varlistentry>
                            </variablelist>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>Text</para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <para>* The <markup>xml:lang</markup> and <markup>dir</markup> attributes are permitted only on the following
                    elements: <markup>contributor</markup>, <markup>coverage</markup>, <markup>creator</markup>,
                        <markup>description</markup>, <markup>publisher</markup>, <markup>relation</markup>,
                        <markup>rights</markup> and <markup>subject</markup>.</para>

                <para>Optional metadata <literal role="rfc2119">may</literal> differ from <olink targetdoc="spec"
                        targetptr="gloss-rendition" type="epub-spec"/> to Rendition.</para>

                <para> The value of all optional <xref linkend="refDCMES"/> elements <literal role="rfc2119">must</literal>
                    be at least one character in length. </para>

                <xi:include href="share/whitespace.xml"/>

                <para>Except as detailed below, this specification does not modify the <xref linkend="refDCMES"/> definitions
                    for these elements.</para>

                <bridgehead xml:id="sec-opf-dccontributor" xreflabel="dc:contributor">The DCMES <markup>contributor</markup>
                    Element</bridgehead>

                <para>The <markup>contributor</markup> element is used to represent the name of a person, organization, etc.
                    that played a secondary role in the creation of the content of an EPUB Publication.</para>

                <para>The use of the <markup>contributor</markup> element is identical to the use of the
                        <markup>creator</markup> element in all other respects, as detailed in the next section.</para>

                <bridgehead xml:id="sec-opf-dccreator" xreflabel="dc:creator">The DCMES <markup>creator</markup>
                    Element</bridgehead>

                <para>The <markup>creator</markup> element represents the name of a person, organization, etc. responsible
                    for the creation of the content of an EPUB Publication. The <link
                        xlink:href="../../vocab/package/epub-vocab-package.html#role"><markup>role</markup> property</link>
                    <xref linkend="refEPUBPackageVocab"/> can be <link linkend="attrdef-meta-refines">attached</link> to the
                    element to indicate the function the creator played in the creation of the content.</para>

                <informalexample>
                    <para>The following example shows how to represent a <markup>creator</markup> as an author using a MARC
                        relators term.</para>
                    <synopsis><xi:include parse="text" href="examples/publications/creator.xml"/></synopsis>
                </informalexample>

                <para>The <markup>creator</markup> element <literal role="rfc2119">should</literal> contain the name of the
                    creator as a Reading System will present it to a <olink targetdoc="spec" targetptr="gloss-user"
                        type="epub-spec"/>. The <property>file-as</property> property <literal role="rfc2119">may</literal>
                    be attached to include a normalized form of the name, and the <link
                        xlink:href="../../vocab/package/epub-vocab-package.html#alternate-script"
                            ><property>alternate-script</property> property</link>
                    <xref linkend="refEPUBPackageVocab"/> can be used to represent a creator's name in another language or
                    script.</para>

                <informalexample>
                    <para>The following example shows the different ways a creator's name can be included to facilitate
                        processing and rendering.</para>
                    <synopsis><xi:include parse="text" href="examples/publications/creator-1.xml"/></synopsis>
                </informalexample>

                <para>If an EPUB Publication has more than one creator, each <literal role="rfc2119">should</literal> be
                    included in a separate <markup>creator</markup> element. The order in which to render the
                        <markup>creator</markup> names <literal role="rfc2119">should</literal> be specified using the <link
                        xlink:href="../../vocab/package/epub-vocab-package.html#display-seq"><property>display-seq</property>
                        property</link>
                    <xref linkend="refEPUBPackageVocab"/>.</para>

                <informalexample>
                    <para>The following example shows how to indicate the display order for <markup>creator</markup>
                        elements.</para>
                    <synopsis><xi:include parse="text" href="examples/publications/creator-2.xml"/></synopsis>
                </informalexample>

                <para>If no means of establishing the primacy of creators for rendering is identifiable, Reading Systems
                        <literal role="rfc2119">must</literal> use the document order of <markup>creator</markup> elements in
                    the <markup>metadata</markup> section (i.e., where the first <markup>creator</markup> element encountered
                    is the primary creator). If a Reading System exposes creator metadata for the User, it <literal
                        role="rfc2119">should</literal> include all the creators listed in the <markup>metadata</markup>
                    section whenever possible (e.g., when not constrained by display considerations).</para>

                <para>Secondary contributors <literal role="rfc2119">should</literal> be represented using DCMES
                        <markup>contributor</markup> elements.</para>

                <bridgehead xml:id="sec-opf-dcdate" xreflabel="dc:date">The DCMES <markup>date</markup> Element</bridgehead>

                <para>The <markup>date</markup> element <literal role="rfc2119">must</literal> only be used to define the
                    publication date of the <olink targetdoc="spec" targetptr="gloss-epub-publication" type="epub-spec"/>.
                    The publication date is not the same as the <link linkend="last-modified-date">last modified date</link>
                    (the last time the <olink targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/> was changed),
                    which <literal role="rfc2119">must</literal> be included using the <xref linkend="refDCTERMS"/>
                    <property>modified</property> property.</para>

                <para>It is <literal role="rfc2119">recommended</literal> that the date string conform to <xref
                        linkend="refISO8601"/>, particularly the subset expressed in W3C Date and Time Formats <xref
                        linkend="refDateTime"/>, as such strings are both human and machine readable.</para>

                <informalexample>
                    <para>The following example shows a publication date.</para>
                    <synopsis><xi:include parse="text" href="examples/publications/date.xml"/></synopsis>
                </informalexample>

                <para>Additional dates <literal role="rfc2119">should</literal> be expressed using the specialized date
                    properties available in the <xref linkend="refDCTERMS"/> vocabulary, or similar.</para>

                <para>The publication date <literal role="rfc2119">may</literal> be common to all instances of an EPUB
                    Publication or <literal role="rfc2119">may</literal> change from instance to instance (e.g., if the EPUB
                    Publication gets generated on demand).</para>

                <para>Only one <markup>date</markup> element is allowed.</para>

                <bridgehead xml:id="sec-opf-dcsource" xreflabel="dc:source">The DCMES <markup>source</markup>
                    Element</bridgehead>

                <para>The <markup>source</markup> element identifies the related resource(s) from which this <olink
                        targetdoc="spec" targetptr="gloss-epub-publication" type="epub-spec"/> is derived.</para>

                <para>When a <olink targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/> includes page
                    identifiers, using the <property xlink:href="../../vocab/structure/epub-vocab-structure.html#pagebreak"
                        >pagebreak</property> property from the EPUB Structural Semantics Vocabulary <xref
                        linkend="refEPUBStructureVocab"/>, a <link
                        xlink:href="http://www.idpf.org/epub/vocab/package/#source-of"><property>source-of</property>
                        refinement property</link>
                    <xref linkend="refEPUBPackageVocab"/>
                    <literal role="rfc2119">should</literal> be attached to the <markup>source</markup> element that
                    identifies the source of the pagination.</para>

                <informalexample>
                    <para>The following example shows the ISBN identifier for an EPUB Publication together with the source
                        ISBN identifier for the print work it was derived from.</para>
                    <synopsis><xi:include parse="text" href="examples/publications/source.xml"/></synopsis>
                </informalexample>

                <bridgehead xml:id="sec-opf-dctype" xreflabel="dc:type">The DCMES <markup>type</markup> Element</bridgehead>

                <para>The <markup>type</markup> element is used to indicate that the given EPUB Publication is of a
                    specialized type (e.g., annotations packaged in EPUB format or a dictionary).</para>

                <para>The IDPF maintains an informative registry of specialized EPUB Publication types for use with this
                    element at <uri xlink:href="http://www.idpf.org/epub/vocab/package/types"
                        >http://www.idpf.org/epub/vocab/package/types</uri>.</para>

            </section>

            <section xml:id="sec-meta-elem" xreflabel="meta">
                <title>The <markup>meta</markup> Element</title>

                <para>The <markup>meta</markup> element provides a generic means of including package metadata, allowing the
                    expression of primary metadata about the package or content and refinement of that metadata.</para>

                <variablelist xreflabel="meta" role="elem-synopsis" xml:id="elemdef-meta">
                    <varlistentry>
                        <term>Element Name</term>
                        <listitem>
                            <para>
                                <markup>meta</markup>
                            </para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>As child of the <markup><xref role="codelink" linkend="elemdef-opf-metadata"/></markup>
                                element. Repeatable.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>
                            <variablelist role="elem-synopsis-attlist">
                                <varlistentry xml:id="attrdef-meta-property">
                                    <term>
                                        <markup>property</markup>
                                        <option>[required]</option>
                                    </term>
                                    <listitem>
                                        <para>A <link linkend="sec-property-datatype">property</link>.</para>
                                        <para>Refer to <xref linkend="sec-metadata-assoc"/> for more information.</para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-meta-refines">
                                    <term>
                                        <markup>refines</markup>
                                        <option>[context dependent]</option>
                                    </term>
                                    <listitem>
                                        <xi:include href="./share/refines-prose-para.xml"/>
                                        <para>The <markup>refines</markup> attribute is optional depending on the type of
                                            metadata being expressed. When omitted, the <markup>meta</markup> element defines
                                            a <link linkend="primary-expression">primary expression</link>.</para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-meta-id" xreflabel="id">
                                    <term>
                                        <markup>id</markup>
                                        <option>[optional]</option>
                                    </term>
                                    <listitem>
                                        <xi:include href="share/id-prose-para.xml"/>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-meta-scheme">
                                    <term>
                                        <markup>scheme</markup>
                                        <option>[optional]</option>
                                    </term>
                                    <listitem>
                                        <para>A <link linkend="sec-property-datatype">property</link> data type value
                                            indicating the source the value of the element is drawn from.</para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-meta-xml-lang">
                                    <term><markup>xml:lang</markup>
                                        <option>[optional]</option></term>
                                    <listitem>
                                        <xi:include href="./share/xmllang-prose-para.xml"/>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-meta-dir">
                                    <term><markup>dir</markup>
                                        <option>[optional]</option></term>
                                    <xi:include href="./share/dir-prose-listitem.xml"/>
                                </varlistentry>
                            </variablelist>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>Text</para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <para>Each <markup>meta</markup> element defines a metadata expression, where the <markup>property</markup>
                    attribute defines the statement being made in the expression and the text content of the element
                    represents the assertion. </para>

                <para>This specification defines two types of metadata expressions that can be defined using the
                        <markup>meta</markup> element:</para>

                <itemizedlist>
                    <listitem xml:id="primary-expression">
                        <para>A <emphasis>primary expression</emphasis> is one in which the expression defined in the
                                <markup>meta</markup> element establishes some aspect of the <olink targetdoc="spec"
                                targetptr="gloss-epub-publication" type="epub-spec"/>. A <markup>meta</markup> element that
                            omits a <markup>refines</markup> attribute defines a primary expression.</para>
                    </listitem>
                    <listitem xml:id="subexpression">
                        <para>A <emphasis>subexpression</emphasis> is one in which the expression defined in the
                                <markup>meta</markup> element enhances the meaning of the expression or resource referenced
                            in its <markup>refines</markup> attribute. A subexpression <literal role="rfc2119">may</literal>
                            refine a media clip, for example, by expressing its duration, or refine a creator or contributor
                            expression by defining the person's role. </para>
                        <para>Subexpressions are not limited to refining only primary expressions and resources; they
                                <literal role="rfc2119">may</literal> be used to refine the meaning of other subexpressions,
                            thereby creating chains of information.</para>
                    </listitem>
                </itemizedlist>

                <note>
                    <para>All of the <xref linkend="refDCMES"/> elements represent primary expressions, and permit refinement
                        by <markup>meta</markup> element subexpressions.</para>
                </note>

                <para>This specification <link linkend="sec-metadata-reserved-vocabs">reserves a set of vocabularies</link>
                    for use in the <markup>property</markup> attribute, but terms from any vocabulary <literal role="rfc2119"
                        >may</literal> be used so long as a <link linkend="sec-prefix-attr">prefix is declared</link> for the
                    vocabulary.</para>

                <para>The <markup>scheme</markup> attribute can be used to identify the system or scheme that a
                        <markup>meta</markup> element's value is drawn from. The value of the <markup>scheme</markup>
                    attribute is a <link linkend="sec-property-datatype">property</link> data type that resolves to the
                    resource that defines the scheme.</para>

                <informalexample>
                    <para>The following example shows how a subexpression can be attached to an <markup>creator</markup> to
                        indicate it represents an author. The <markup>scheme</markup> indicates the value is drawn from the
                        MARC relators terms.</para>
                    <synopsis><xi:include parse="text" href="examples/publications/meta-ancillary.xml"/></synopsis>
                </informalexample>

                <para>If a Reading System does not recognize the <markup>scheme</markup> attribute value, it <literal
                        role="rfc2119">should</literal> treat the value of the element as a string.</para>

                <para>Reading Systems <literal role="rfc2119">should</literal> ignore all <markup>meta</markup> elements
                    whose <markup>property</markup> attributes define expressions they do not recognize. A Reading System
                        <literal role="rfc2119">must not</literal> fail when encountering unknown expressions.</para>

                <para xml:id="last-modified-date">In order to ensure that a <olink targetdoc="spec"
                        targetptr="gloss-release-identifier" type="epub-spec"/> can be constructed, the
                        <markup>metadata</markup> element <literal role="rfc2119">must</literal> contain exactly one
                        <markup>meta</markup> element defining a <xref linkend="refDCTERMS"/>
                    <property>modified</property> property for the given Rendition. Additional <markup>modified</markup>
                    properties <literal role="rfc2119">may</literal> be included, but they <literal role="rfc2119"
                        >must</literal> have a different subject (i.e., they <literal role="rfc2119">must</literal> include a
                        <markup>refines</markup> attribute that references an element or resource).</para>

                <para>Every <markup>meta</markup> element <literal role="rfc2119">must</literal> express a value that is at
                    least one character in length after whitespace normalization.</para>

                <para>Unless an individual property explicitly defines a different whitespace normalization algorithm,
                    Reading Systems <literal role="rfc2119">must</literal> trim all leading and trailing whitespace from the
                        <markup>meta</markup> element values, as defined by the XML specification <xref linkend="refXML"/>,
                    before further processing them.</para>

                <bridgehead xml:id="sec-meta-elem-examples">Examples</bridgehead>

                <informalexample>
                    <para>The following example represents a more complete set of metadata that a Rendition will typically
                        contain.</para>
                    <synopsis><xi:include href="examples/publications/meta-example-full.xml" parse="text"/></synopsis>
                </informalexample>

                <informalexample>
                    <para>The following example shows an identifier that has been issued by a metadata authority.</para>
                    <synopsis><xi:include parse="text" href="examples/publications/meta-example-authority.xml"/></synopsis>
                </informalexample>

            </section>

            <section xml:id="sec-opf-meta-elem" xreflabel="OPF2 meta">
                <title>The <markup>meta</markup> Element (OPF2) [OBSOLETE]</title>

                <para>The <markup>meta</markup> element defined in <xref linkend="refOPF2"/> has been obsoleted and replaced
                    by the new <markup linkend="elemdef-meta">meta</markup> element, but <literal role="rfc2119"
                        >may</literal> be included as an optional repeatable child of the <markup>metadata</markup> element
                    for forwards compatibility purposes. </para>

                <para>EPUB 3 Reading Systems <literal role="rfc2119">must</literal> ignore this element.</para>

            </section>

            <section xml:id="sec-link-elem" xreflabel="link">
                <title>The <markup>link</markup> Element</title>

                <para>The <markup>link</markup> element is used to associate resources with the given <olink targetdoc="spec"
                        targetptr="gloss-rendition" type="epub-spec"/> of the <olink targetdoc="spec"
                        targetptr="gloss-epub-publication" type="epub-spec"/>, such as metadata records.</para>

                <variablelist xreflabel="link" role="elem-synopsis" xml:id="elemdef-opf-link">
                    <varlistentry>
                        <term>Element Name</term>
                        <listitem>
                            <para>
                                <markup>link</markup>
                            </para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>As a child of <markup><xref role="codelink" linkend="elemdef-opf-metadata"/></markup>.
                                Repeatable.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>
                            <variablelist role="elem-synopsis-attlist">
                                <varlistentry xml:id="attrdef-link-href" xreflabel="href">
                                    <term>
                                        <markup>href</markup>
                                        <option>[required]</option>
                                    </term>
                                    <listitem>
                                        <para>An absolute or relative IRI reference <xref linkend="refRFC3987"/> to a
                                            resource.</para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-link-rel" xreflabel="rel">
                                    <term>
                                        <markup>rel</markup>
                                        <option>[required]</option>
                                    </term>
                                    <listitem>
                                        <xi:include href="./share/curies-resolve-para.xml"/>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-link-id" xreflabel="id">
                                    <term>
                                        <markup>id</markup>
                                        <option>[optional]</option>
                                    </term>
                                    <listitem>
                                        <xi:include href="share/id-prose-para.xml"/>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-link-refines">
                                    <term>
                                        <markup>refines</markup>
                                        <option>[optional]</option>
                                    </term>
                                    <listitem>
                                        <xi:include href="./share/refines-prose-para.xml"/>
                                        <para>When the <markup>refines</markup> attribute is omitted, the expression applies
                                            to the EPUB Publication as a whole.</para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-link-media-type">
                                    <term>
                                        <markup>media-type</markup>
                                        <option>[optional]</option>
                                    </term>
                                    <listitem>
                                        <para>A media type <xref linkend="refRFC2046"/> that specifies the type and format of
                                            the resource referenced by this <markup>link</markup>.</para>
                                    </listitem>
                                </varlistentry>
                            </variablelist>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>Empty</para>
                        </listitem>
                    </varlistentry>
                </variablelist>
                <para>The <markup>metadata</markup> element <literal role="rfc2119">may</literal> contain zero or more
                        <markup>link</markup> elements.</para>
                <para> The <markup>href</markup> attribute of the <markup>link</markup> element identifies the location of
                    the resource — inclusion of which is optional in the container file — and the <markup>rel</markup>
                    attribute defines the nature of the resource (i.e., its relation to the given Rensition of the EPUB
                    Publication or property specified in the <markup>refines</markup> attribute). Reading Systems are
                        <literal role="rfc2119">not required</literal> to dereference these resources. Refer to the <link
                        xlink:href="http://www.idpf.org/epub/vocab/package/link/">EPUB Link Relationships
                    Vocabulary</link>for the list of resource types that are recognized by this specification.</para>
                <para>Resources identified by the <markup>link</markup> element <markup>href</markup> attribute <literal
                        role="rfc2119">must not</literal> be listed in the <link linkend="sec-manifest-elem"
                    >manifest</link>.</para>
                <para>When the <markup>link</markup> element references a metadata record, precedence <literal role="rfc2119"
                        >must</literal> be given to metadata defined inline in the Package Document <markup>metadata</markup>
                    element in the case of conflicts.</para>
                <para>The optional <markup>refines</markup> attribute can be attached when the referenced resource applies to
                    another metadata item (e.g., to tie an XML Signature <xref linkend="refXMLDSIGCORE"/> to a metadata
                    authority). The resource applies to the Rendition when the attribute is not present.</para>
                <para>If a Reading System does not recognize the relationship of the resource as defined in the
                        <markup>rel</markup> attribute, it <literal role="rfc2119">should</literal> ignore the
                        <markup>link</markup> element.</para>
                <bridgehead>Examples</bridgehead>
                <informalexample>
                    <para>The following example shows the <markup>link</markup> element used to associate three metadata
                        resources with the Rendition: an ONIX record, an XMP record, and a link to an informational web page.
                        Note that as <property>foaf</property> is not a <link linkend="sec-metadata-reserved-vocabs"
                            >predefined prefix</link>, the <link linkend="attrdef-package-prefix">metadata extensibility
                            mechanism</link> is employed to associate the vocabulary. </para>
                    <synopsis><xi:include parse="text" href="examples/publications/link-2.xml"/></synopsis>
                </informalexample>
            </section>

            <section xml:id="sec-manifest-elem" xreflabel="manifest">
                <title>The <markup>manifest</markup> Element</title>

                <para>The <markup>manifest</markup> element provides an exhaustive list of the <olink targetdoc="spec"
                        targetptr="gloss-publication-resource-cmt-or-foreign" type="epub-spec">Publication Resources</olink>
                    that constitute the given <olink targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/>, each
                    represented by an <markup><xref role="codelink" linkend="sec-item-elem"/></markup> element.</para>

                <variablelist xreflabel="manifest" role="elem-synopsis" xml:id="elemdef-opf-manifest">
                    <varlistentry>
                        <term>Element name</term>
                        <listitem>
                            <para><markup>manifest</markup></para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>Required second child of <markup><xref role="codelink" linkend="elemdef-opf-package"
                                    /></markup>, following <markup><xref role="codelink" linkend="elemdef-opf-metadata"
                                    /></markup>.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>
                            <variablelist role="elem-synopsis-attlist">
                                <varlistentry xml:id="attrdef-manifest-id" xreflabel="id">
                                    <term><markup>id</markup>
                                        <option>[optional]</option></term>
                                    <listitem>
                                        <xi:include href="./share/id-prose-para.xml"/>
                                    </listitem>
                                </varlistentry>
                            </variablelist>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>One or more <markup><xref role="codelink" linkend="elemdef-package-item"/></markup>
                                elements <option>[required]</option></para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <note>
                    <para>This specification supports internationalized resource naming, so elements and attributes that
                        reference Publication Resources accept IRIs as their value. For compatibility with older Reading
                        Systems that only accept URIs, resource names should be restricted to the ASCII character set.</para>
                </note>

            </section>

            <section xml:id="sec-item-elem" xreflabel="item">
                <title>The <markup>item</markup> Element</title>

                <para>The <markup>item</markup> element represents a <olink targetdoc="spec"
                        targetptr="gloss-publication-resource-cmt-or-foreign" type="epub-spec"/>.</para>

                <variablelist xreflabel="item" role="elem-synopsis" xml:id="elemdef-package-item">
                    <varlistentry>
                        <term>Element Name</term>
                        <listitem>
                            <para><markup>item</markup></para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>As a child of <markup><xref role="codelink" linkend="elemdef-opf-manifest"/></markup>.
                                Repeatable.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>
                            <variablelist role="elem-synopsis-attlist">
                                <varlistentry xml:id="attrdef-item-id" xreflabel="id">
                                    <term><markup>id</markup>
                                        <option>[required]</option></term>
                                    <listitem>
                                        <xi:include href="share/id-prose-para.xml"/>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-item-href" xreflabel="href">
                                    <term><markup>href</markup>
                                        <option>[required]</option></term>
                                    <listitem>
                                        <para>An IRI <xref linkend="refRFC3987"/> specifying the location of the Publication
                                            Resource described by this <markup>item</markup>.</para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-item-media-type" xreflabel="media-type">
                                    <term><markup>media-type</markup>
                                        <option>[required]</option></term>
                                    <listitem>
                                        <para>A media type <xref linkend="refRFC2046"/> that specifies the type and format of
                                            the Publication Resource described by this <markup>item</markup>.</para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-item-fallback" xreflabel="fallback">
                                    <term><markup>fallback</markup>
                                        <option>[conditionally required]</option></term>
                                    <listitem>
                                        <para>An IDREF <xref linkend="refXML"/> that identifies the fallback for a non-Core
                                            Media Type.</para>
                                        <para>Refer to <xref linkend="sec-foreign-restrictions-manifest"/> for more
                                            information.</para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xreflabel="properties" xml:id="attrdef-item-properties">
                                    <term><markup>properties</markup>
                                        <option>[optional]</option></term>
                                    <listitem>
                                        <xi:include href="./share/curies-resolve-para.xml"/>
                                        <para>Refer to <link
                                                xlink:href="http://www.idpf.org/epub/vocab/package/#sec-item-property-values"
                                                >Manifest <markup>item</markup> Properties</link>
                                            <xref linkend="refEPUBPackageVocab"/> for a set of properties defined by this
                                            specification.</para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xreflabel="media-overlay" xml:id="attrdef-item-media-overlay">
                                    <term><markup>media-overlay</markup>
                                        <option>[optional]</option></term>
                                    <listitem>
                                        <para>An IDREF <xref linkend="refXML"/> that identifies the <olink targetdoc="spec"
                                                targetptr="gloss-media-overlay-document" type="epub-spec"/> for the resource
                                            described by this <markup>item</markup>.</para>
                                        <para>Refer to <olink type="epub-spec" targetdoc="mediaoverlays"
                                                targetptr="sec-docs-package"/> for more information.</para>
                                    </listitem>
                                </varlistentry>
                            </variablelist>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>Empty</para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <para>Each <markup>item</markup> element in the <markup>manifest</markup> identifies a <olink
                        targetdoc="spec" targetptr="gloss-publication-resource-cmt-or-foreign" type="epub-spec"/> by the IRI
                    provided in its <markup>href</markup> attribute. The IRI <literal role="rfc2119">may</literal> be
                    absolute or relative. In the case of relative IRIs, Reading Systems <literal role="rfc2119"
                        >must</literal> use the IRI of the Package Document as the base when resolving these to absolute
                    IRIs. The resulting absolute IRI <literal role="rfc2119">must</literal> be unique within the
                        <markup>manifest</markup> scope.</para>

                <para>All Publication Resources <literal role="rfc2119">must</literal> be referenced from the
                        <markup>manifest</markup>, regardless of whether they are included in the <olink targetdoc="spec"
                        targetptr="gloss-container" type="epub-spec"/> or made available remotely. Refer to <olink
                        targetdoc="spec" targetptr="sec-resource-locations" type="epub-spec"/> for media type-specific
                    requirements regarding resource locations.</para>

                <para>The Publication Resource identified by an <markup>item</markup> element <literal role="rfc2119"
                        >must</literal> conform to the applicable specification(s) as inferred from the MIME media type
                    provided in the <markup>media-type</markup> attribute. <olink targetdoc="spec"
                        targetptr="gloss-publication-resource-cmt" type="epub-spec">Core Media Type Resources</olink>
                    <literal role="rfc2119">must</literal> use the media type designated in <olink targetdoc="spec"
                        targetptr="tbl-core-media-types" type="epub-spec"/>.</para>

                <para>All <olink targetdoc="spec" targetptr="gloss-publication-resource-foreign" type="epub-spec">Foreign
                        Resources</olink>
                    <literal role="rfc2119">must</literal> provide a fallback as defined in <xref
                        linkend="sec-foreign-restrictions-manifest"/>.</para>

                <para>All Publication Resources <literal role="rfc2119">must</literal> declare any applicable descriptive
                    metadata properties as defined in <link
                        xlink:href="http://www.idpf.org/epub/vocab/package/#sec-item-property-values">Manifest
                            <markup>item</markup> Properties</link>
                    <xref linkend="refEPUBPackageVocab"/> via the <markup>item</markup> element <markup><xref role="codelink"
                            linkend="attrdef-item-properties"/></markup> attribute. Exactly one <markup>item</markup>
                    <literal role="rfc2119">must</literal> be declared as the <olink targetdoc="spec"
                        targetptr="gloss-content-document-epub-nav" type="epub-spec"/> using the <property>nav</property>
                    property.</para>

                <para>Reading Systems <literal role="rfc2119">must</literal> ignore all descriptive metadata properties that
                    they do not recognize.</para>

                <para>The <markup>manifest</markup> is not self-referencing: it <literal role="rfc2119">must not</literal>
                    include an <markup>item</markup> element that refers to the Package Document itself.</para>

                <note>
                    <para>The order of <markup>item</markup> elements in the <markup>manifest</markup> is not significant.
                        The presentation sequence of content documents is provided in the <markup><link role="codelink"
                                linkend="sec-spine-elem">spine</link></markup>.</para>
                </note>

                <bridgehead xml:id="examples-manifest" xreflabel="Manifest examples">Examples</bridgehead>

                <informalexample xml:id="example-manifest-cmt">
                    <para>The following example shows a <markup>manifest</markup> that only contains <olink targetdoc="spec"
                            targetptr="gloss-publication-resource-cmt" type="epub-spec">Core Media Type
                        Resources</olink>.</para>
                    <synopsis><xi:include href="./examples/publications/manifest-1.xml" parse="text"/></synopsis>
                </informalexample>

                <informalexample xml:id="example-manifest-flbk">
                    <para>The following example shows a <markup>manifest</markup> that references two <olink targetdoc="spec"
                            targetptr="gloss-publication-resource-foreign" type="epub-spec">Foreign Resources</olink>, and
                        therefore uses the <link linkend="sec-foreign-restrictions-manifest">fallback chain mechanism</link>
                        to supply content alternatives. The fallback chain terminates with a Core Media Type. </para>
                    <synopsis><xi:include href="./examples/publications/manifest-2.xml" parse="text"/></synopsis>
                </informalexample>

                <note>
                    <para>Refer also to the <link
                            xlink:href="http://www.idpf.org/epub/vocab/package/#examples-item-properties">Manifest item
                            properties examples</link> for use of the <markup>properties</markup> attribute.</para>
                </note>
            </section>

            <section xml:id="sec-spine-elem" xreflabel="spine">
                <title>The <markup>spine</markup> Element</title>

                <para>The <markup>spine</markup> element defines the default reading order of the given <olink
                        targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/> of the <olink targetdoc="spec"
                        targetptr="gloss-epub-publication" type="epub-spec"/> content by defining an ordered list of <link
                        linkend="sec-itemref-elem">manifest <markup>item</markup> references</link>.</para>

                <variablelist xreflabel="spine" role="elem-synopsis" xml:id="elemdef-opf-spine">
                    <varlistentry>
                        <term>Element name</term>
                        <listitem>
                            <para><markup>spine</markup></para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>Required third child of <markup><xref role="codelink" linkend="elemdef-opf-package"
                                    /></markup>, following <markup><xref role="codelink" linkend="elemdef-opf-manifest"
                                    /></markup>.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>
                            <variablelist role="elem-synopsis-attlist">
                                <varlistentry xml:id="attrdef-spine-id">
                                    <term><markup>id</markup>
                                        <option>[optional]</option></term>
                                    <listitem>
                                        <xi:include href="./share/id-prose-para.xml"/>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-spine-toc" xreflabel="toc">
                                    <term><markup>toc</markup>
                                        <option>[optional]</option></term>
                                    <listitem>
                                        <para>An IDREF <xref linkend="refXML"/> that identifies the manifest <markup><xref
                                                    role="codelink" linkend="elemdef-package-item"/></markup> that represents
                                            the superseded NCX.</para>
                                        <para>Refer to <xref linkend="ncx-superseded"/> for more information.</para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-spine-page-progression-direction"
                                    xreflabel="page-progression-direction">
                                    <term><markup>page-progression-direction</markup>
                                        <option>[optional]</option></term>
                                    <listitem>
                                        <para>The global direction in which the content flows.</para>
                                        <para>Allowed values are <code role="value">ltr</code> (left-to-right), <code
                                                role="value">rtl</code> (right-to-left) and <code role="value"
                                            >default</code>.</para>
                                        <para>When the <code role="value">default</code> value is specified, the Author is
                                            expressing no preference and the Reading System <literal role="rfc2119"
                                                >may</literal> chose the rendering direction. This value <literal
                                                role="rfc2119">must</literal> be assumed when the attribute is not
                                            specified.</para>
                                    </listitem>
                                </varlistentry>
                            </variablelist>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>One or more <markup><xref role="codelink" linkend="elemdef-spine-itemref"/></markup>
                                elements <option>[required]</option></para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <para>The <markup>spine</markup> represents an ordered subset of the Publication Resources listed in the
                        <markup>manifest</markup>, providing the default reading order for the given Rendition.</para>

                <para>Reading Systems <literal role="rfc2119">must</literal> provide a means of rendering the Rendition in
                    the order defined in the <markup>spine</markup>, which includes: 1) recognizing the first primary
                        <markup>itemref</markup> as the beginning of the default reading order; and, 2) rendering successive
                    primary items in the order given in the <markup>spine</markup>.</para>

                <para>All <olink targetdoc="spec" targetptr="gloss-content-document-epub" type="epub-spec">EPUB Content
                        Documents</olink> that are linked to from EPUB Content Documents in the <markup>spine</markup>
                    <literal role="rfc2119">must</literal> themselves be listed in the <markup>spine</markup>. Linked
                    documents include documents referenced from the <markup>href</markup> attribute of <markup>a</markup> and
                        <markup>area</markup> elements and scripted links (e.g., using DOM Events and/or form elements). All
                    EPUB Content Documents linked to from the EPUB Navigation Document <literal role="rfc2119">must</literal>
                    be listed in the <markup>spine</markup>, as well, regardless of whether the Navigation Document has been
                    included in the <markup>spine</markup>. The requirement to list linked documents applies recursively
                    (i.e., all Content Documents linked to from linked Content Documents also have to be listed, and so
                    on.).</para>

                <para>Although the <markup>page-progression-direction</markup> attribute sets the global flow direction,
                    individual Content Documents and parts of Content Documents <literal role="rfc2119">may</literal>
                    override this setting (e.g., via the <property>writing-mode</property> CSS property). Reading Systems
                        <literal role="rfc2119">may</literal> also provide mechanisms to override the default direction
                    (e.g., buttons or settings that allow the application of alternate style sheets).</para>

                <para>Reading Systems <literal role="rfc2119">must</literal> ignore the page progression direction defined in
                        <link linkend="fxl-property-layout"><code role="value">pre-paginated</code></link> XHTML Content
                    Documents. The <markup>page-progression-direction</markup> attribute defines the flow direction from one
                    fixed-layout page to the next.</para>


                <bridgehead xml:id="ncx-superseded" xreflabel="NCX Superseded">NCX Superseded</bridgehead>

                <para>The NCX feature defined in <xref linkend="refOPF2"/> is superseded by the <link
                        linkend="sec-package-nav">EPUB Navigation Document</link>. EPUB 3.1 Publications <literal
                        role="rfc2119">may</literal> include an NCX (as defined in OPF 2.0.1) for EPUB 2 Reading System
                    forwards compatibility purposes, but EPUB 3.1 Reading Systems <literal role="rfc2119">must</literal>
                    ignore the NCX.</para>

                <note xml:id="note-ncx">
                    <para>As the EPUB 2 NCX and the EPUB 3 Navigation Document use different mechanisms for identification in
                        the Package Document (the spine <markup><link linkend="attrdef-spine-toc">toc</link></markup>
                        attribute and the <link xlink:href="http://www.idpf.org/epub/vocab/package/#nav"
                                ><property>nav</property> property</link>
                        <xref linkend="refEPUBPackageVocab"/> on the manifest <markup>item</markup> element, respectively)
                        they can co-exist without conflict in an EPUB 3 Publication.</para>
                </note>

            </section>

            <section xml:id="sec-itemref-elem" xreflabel="itemref">
                <title>The <markup>itemref</markup> Element</title>

                <para>The child <markup>itemref</markup> elements of the <markup>spine</markup> represent a sequential list
                    of <olink targetdoc="spec" targetptr="gloss-publication-resource-cmt-or-foreign" type="epub-spec"
                        >Publication Resources</olink> (<link linkend="confreq-spine-itemtypes">typically</link>
                    <olink targetdoc="spec" targetptr="gloss-content-document-epub" type="epub-spec">EPUB Content
                        Documents</olink>). The order of the <markup>itemref</markup> elements defines the default reading
                    order of the given <olink targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/> of the <olink
                        targetdoc="spec" targetptr="gloss-epub-publication" type="epub-spec"/>.</para>

                <variablelist xreflabel="itemref" role="elem-synopsis" xml:id="elemdef-spine-itemref">
                    <varlistentry>
                        <term>Element Name</term>
                        <listitem>
                            <para><markup>itemref</markup></para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>As a child of <markup><xref role="codelink" linkend="elemdef-opf-spine"/></markup>.
                                Repeatable.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>
                            <variablelist role="elem-synopsis-attlist">
                                <varlistentry xml:id="attrdef-itemref-idref" xreflabel="idref">
                                    <term><markup>idref</markup>
                                        <option>[required]</option></term>
                                    <listitem>
                                        <para>An IDREF <xref linkend="refXML"/> that identifies a manifest <xref
                                                linkend="elemdef-package-item"/>.</para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xreflabel="linear" xml:id="attrdef-itemref-linear">
                                    <term><markup>linear</markup>
                                        <option>[optional]</option></term>
                                    <listitem>
                                        <para>Specifies whether the referenced content is primary.</para>
                                        <para>The value of the attribute <literal role="rfc2119">must</literal> be <code
                                                role="value">yes</code> or <code role="value">no</code>. The default value is
                                                <code role="value">yes</code>.</para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-itemref-id">
                                    <term><markup>id</markup>
                                        <option>[optional]</option></term>
                                    <listitem>
                                        <xi:include href="./share/id-prose-para.xml"/>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xreflabel="properties" xml:id="attrdef-itemref-properties">
                                    <term><markup>properties</markup>
                                        <option>[optional]</option></term>
                                    <listitem>
                                        <xi:include href="./share/curies-resolve-para.xml"/>
                                        <para>Refer to <link
                                                xlink:href="http://www.idpf.org/epub/vocab/package/#sec-itemref-property-values"
                                                >Spine itemref Properties</link>
                                            <xref linkend="refEPUBPackageVocab"/> for a set of properties defined by this
                                            specification.</para>
                                    </listitem>
                                </varlistentry>
                            </variablelist>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>Empty</para>
                        </listitem>
                    </varlistentry>

                </variablelist>

                <para>Each <markup>itemref</markup> element <literal role="rfc2119">must</literal> reference a unique
                            <markup><xref linkend="elemdef-package-item"/></markup> in the <olink targetdoc="spec"
                        targetptr="gloss-manifest" type="epub-spec"/> via its <markup><xref linkend="attrdef-itemref-idref"
                        /></markup> attribute. </para>

                <para xml:id="confreq-spine-itemtypes">Each referenced manifest <markup>item</markup>
                    <literal role="rfc2119">must</literal> be either a) an <olink targetdoc="spec"
                        targetptr="gloss-content-document-epub" type="epub-spec"/> or b) another type of <olink
                        targetdoc="spec" targetptr="gloss-publication-resource-cmt-or-foreign" type="epub-spec"/> which,
                        <emphasis>regardless of whether it is a <olink targetdoc="spec"
                            targetptr="gloss-publication-resource-cmt" type="epub-spec"/> or a <olink targetdoc="spec"
                            targetptr="gloss-publication-resource-foreign" type="epub-spec"/></emphasis>, <literal
                        role="rfc2119">must</literal> include an EPUB Content Document in its <link
                        linkend="sec-foreign-restrictions-manifest">fallback chain</link>.</para>

                <note>
                    <para>Although the <olink targetdoc="spec" targetptr="gloss-content-document-epub-nav" type="epub-spec"/>
                        is <link linkend="confreq-nav-occur">required in EPUB Publications</link>, it is optional to include
                        it in the <markup>spine</markup>.</para>
                </note>

                <para>The <markup>itemref</markup> element <markup>linear</markup> attribute indicates whether referenced
                    item is considered primary (<code role="value">yes</code>) or auxiliary (<code role="value">no</code>) in
                    the <markup>spine</markup>. Each Rendition <literal role="rfc2119">must</literal> include at least one
                    primary <markup>itemref</markup>.</para>

                <para>The <markup>linear</markup> attribute <literal role="rfc2119">may</literal> be used to enable Reading
                    Systems to distinguish presentation of body content from supplementary content which might be, for
                    example, presented in a popup window or omitted from an aural rendering. Reading Systems <literal
                        role="rfc2119">should</literal> provide Users the ability to control whether non-linear content is
                    rendered in the default reading order.</para>

                <para>Any applicable descriptive metadata properties, such as those defined in the <link
                        xlink:href="http://www.idpf.org/epub/vocab/package/#sec-itemref-property-values">Spine
                            <markup>itemref</markup> Properties</link>
                    <xref linkend="refEPUBPackageVocab"/>, <literal role="rfc2119">should</literal> be declared via the
                            <markup><xref role="codelink" linkend="attrdef-itemref-properties"/></markup> attribute.</para>

                <para>Reading Systems <literal role="rfc2119">must</literal> ignore all metadata properties expressed in the
                        <markup>properties</markup> attribute that they do not recognize.</para>

                <bridgehead>Examples</bridgehead>
                <informalexample>
                    <para>The following example shows a <markup>spine</markup> element corresponding to <link
                            linkend="example-manifest-cmt">the manifest example above</link>.</para>
                    <synopsis><xi:include href="./examples/publications/spine-1.xml" parse="text"/></synopsis>
                </informalexample>

            </section>

            <section xml:id="sec-guide-elem" xreflabel="guide">
                <title>The <markup>guide</markup> Element [DEPRECATED]</title>

                <para>The <markup>guide</markup> element <xref linkend="refOPF2"/> is deprecated in favor of the
                        <property>landmarks</property> feature in the <olink targetdoc="spec"
                        targetptr="gloss-content-document-epub-nav" type="epub-spec"/>. Refer to <xref
                        linkend="sec-nav-landmarks"/> for more information.</para>

                <para>Authors <literal role="rfc2119">may</literal> include the <markup>guide</markup> element in the Package
                    Document for EPUB 2 Reading System forwards compatibility purposes. EPUB Reading Systems <literal
                        role="rfc2119">must</literal> ignore the <markup>guide</markup> element when provided in EPUB
                    Publications whose <olink targetdoc="spec" targetptr="gloss-content-document-epub-nav" type="epub-spec"/>
                    includes the <property>landmarks</property> feature.</para>

            </section>

            <section xml:id="sec-bindings-elem" xreflabel="bindings">
                <title>The <markup>bindings</markup> Element</title>

                <para>The <markup>bindings</markup> element defines a set of custom handlers for media types not supported by
                    this specification.</para>

                <variablelist xreflabel="bindings" role="elem-synopsis" xml:id="elemdef-bindings">
                    <varlistentry>
                        <term>Element Name</term>
                        <listitem>
                            <para><markup>bindings</markup></para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>Optional fourth or fifth child of <markup><xref role="codelink"
                                        linkend="elemdef-opf-package"/></markup>, following <markup><xref role="codelink"
                                        linkend="elemdef-opf-spine"/></markup> or <markup><link role="codelink"
                                        linkend="sec-guide-elem">guide</link></markup>.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>
                            <para>None.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>One or more <markup><xref role="codelink" linkend="elemdef-mediaType"/></markup> elements
                                    <option>[required]</option></para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <para>The <markup><xref role="codelink" linkend="elemdef-opf-package"/></markup> element <literal
                        role="rfc2119">may</literal> contain at most one <markup>bindings</markup> element. </para>

                <para>The <markup>bindings</markup> element provides a means for Authors to include more sophisticated
                    fallbacks than would otherwise be possible with the <xref linkend="refHTML5"/>
                    <markup xlink:href="http://www.w3.org/TR/html5/Overview.html#the-object-element">object</markup>
                    element's intrinsic fallback mechanisms. When present, Reading Systems that support scripting <literal
                        role="rfc2119">must</literal> utilize the <markup>bindings</markup> element to handle
                        <markup>object</markup> elements that reference unsupported media types.</para>

                <para>Each of the <markup>bindings</markup> element's child <markup><link linkend="sec-mediaType-elem"
                            >mediaType</link></markup> elements defines a unique handler for one of the foreign media types
                    referenced in the <olink targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/>'s <olink
                        targetdoc="spec" targetptr="gloss-content-document-epub-xhtml" type="epub-spec">XHTML Content
                        Documents</olink>.</para>

                <para>When an unsupported media type is encountered during processing of a document, the Reading System
                        <literal role="rfc2119">must</literal> look up the handler in the <markup>bindings</markup> element
                    by checking the <markup><link linkend="attrdef-mediaType-media-type">media-type</link></markup> attribute
                    of each <markup>mediaType</markup> element for a match (and before attempting any other type of <link
                        linkend="sec-foreign-restrictions-manifest">fallback processing</link>). If a match is found, the
                    XHTML Content Document referenced in the element's <markup><link linkend="attrdef-mediaType-handler"
                            >handler</link></markup> attribute <literal role="rfc2119">must</literal> be instantiated instead
                    of the referenced resource. If no match is found, the Reading System <literal role="rfc2119"
                        >should</literal> continue with normal fallback processing (i.e., check for an intrinsic fallback for
                    the <markup>object</markup>).</para>

                <para>The Reading System <literal role="rfc2119">must</literal> instantiate the designated handler as if it
                    had been referenced from the <markup>object</markup> element's <markup>data</markup> attribute with the
                    following parameters:</para>

                <variablelist>
                    <varlistentry>
                        <term><markup>src</markup></term>
                        <listitem>
                            <para>the value of which <literal role="rfc2119">must</literal> be an IRI <xref
                                    linkend="refRFC3987"/> to the resource (i.e., the value of the <markup>object</markup>
                                element's <markup>data</markup> attribute).</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term><markup>type</markup></term>
                        <listitem>
                            <para>the value of which <literal role="rfc2119">must</literal> be the resource media type (i.e.,
                                the value of the <markup>object</markup> element's <markup>type</markup> attribute).</para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <para>Any additional <markup>param</markup> children of the <markup>object</markup> element <literal
                        role="rfc2119">must</literal> be similarly added as parameters using the <markup>param</markup>
                    element's <markup>name</markup> attribute as the new parameter name and its <markup>value</markup>
                    attribute as the new value.</para>

                <para>For example, the following <markup>object</markup> element containing a foreign media type:</para>

                <informalexample>
                    <synopsis><xi:include href="examples/publications/bindings-1.xml" parse="text"/></synopsis>
                </informalexample>

                <para>would result in the following query string being sent to the handler XHTML Content Document after
                    processing:</para>

                <informalexample>
                    <synopsis>src=horse.ogg&amp;type=audio/ogg&amp;autoplay=false</synopsis>
                </informalexample>

                <para>All IRI reserved characters, plus the characters <literal>&lt;</literal>, <literal>&gt;</literal>,
                        <literal>"</literal>, <literal>space</literal>, <literal>{</literal>, <literal>}</literal>,
                        <literal>|</literal>, <literal>\</literal>, <literal>^</literal> and <literal>`</literal>, in the
                    generated query string <literal role="rfc2119">must</literal> be encoded and decoded as per <xref
                        linkend="refRFC3987"/>.</para>

                <para><markup>object</markup> elements that reference media types handled by the <markup>bindings</markup>
                    element are only processed in <olink targetdoc="spec" targetptr="gloss-spine" type="epub-spec"
                    />-referenced XHTML Content Documents (i.e., they are ignored in <olink targetdoc="contentdocs"
                        targetptr="sec-scripted-content-models" type="epub-spec">container-constrained scripting
                        contexts</olink>).</para>

                <bridgehead>Example</bridgehead>

                <para>The following partial example illustrates how bindings can be used to provide a slideshow.</para>

                <para>Consider a Rendition of an EPUB Publication with the following Package Document:</para>

                <informalexample>
                    <synopsis><xi:include href="examples/publications/bindings-2.xml" parse="text"/></synopsis>
                </informalexample>

                <para>and the following content in the file <filename>content.xhtml</filename>:</para>

                <informalexample>
                    <synopsis><xi:include href="examples/publications/bindings-3.xml" parse="text"/></synopsis>
                </informalexample>

                <para>and the following content in the file <filename>slideshow.xml</filename>:</para>

                <informalexample>
                    <synopsis><xi:include href="examples/publications/bindings-4.xml" parse="text"/></synopsis>
                </informalexample>

                <para>Depending on the capabilities of the <olink targetdoc="spec" targetptr="gloss-user" type="epub-spec"
                    />'s Reading System, they will see one of the following renderings of the slideshow:</para>

                <itemizedlist>
                    <listitem>
                        <para>If the Reading System supports the native slideshow format, it will render a rotating set of
                            images as specified in <filename>slideshow.xml</filename>.</para>
                    </listitem>
                    <listitem>
                        <para>If the Reading System cannot support the slideshow media type but supports scripting, it can
                            check the <markup>bindings</markup> element in the Package Document for a scripted fallback.
                            There it will find a reference to the <markup>item</markup> element containing the handler
                            document (<filename>impl.xhtml</filename>). The Reading System can now load this document to
                            render a JavaScripted equivalent of the slideshow (source not shown).</para>
                    </listitem>
                    <listitem>
                        <para>If the Reading System does not support the slideshow media type and also does not support
                            scripting, it will use the fallback images specified in the <markup>object</markup> element to
                            show a static set of all the images.</para>
                    </listitem>
                </itemizedlist>

            </section>

            <section xml:id="sec-mediaType-elem" xreflabel="mediaType">
                <title>The <markup>mediaType</markup> Element</title>

                <para>The <markup>mediaType</markup> element associates a <olink targetdoc="spec"
                        targetptr="gloss-publication-resource-foreign" type="epub-spec"/> media type with a handler <olink
                        targetdoc="spec" targetptr="gloss-content-document-epub-xhtml" type="epub-spec"/>.</para>

                <variablelist xreflabel="mediaType" role="elem-synopsis" xml:id="elemdef-mediaType">
                    <varlistentry>
                        <term>Element Name</term>
                        <listitem>
                            <para><markup>mediaType</markup></para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>As a child of <markup><xref role="codelink" linkend="elemdef-bindings"/></markup>.
                                Repeatable.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>
                            <variablelist role="elem-synopsis-attlist">

                                <varlistentry xml:id="attrdef-mediaType-media-type" xreflabel="media-type">
                                    <term><markup>media-type</markup>
                                        <option>[required]</option></term>
                                    <listitem>
                                        <para>A media type <xref linkend="refRFC2046"/> that specifies the type and format of
                                            the resource to be handled.</para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-mediaType-handler" xreflabel="handler">
                                    <term><markup>handler</markup>
                                        <option>[required]</option></term>
                                    <listitem>
                                        <para>An IDREF <xref linkend="refXML"/> that identifies the manifest XHTML Content
                                            Document to be invoked to handle content of the type specified in this
                                            element</para>
                                    </listitem>
                                </varlistentry>
                            </variablelist>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>Empty</para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <para>Each child <markup>mediaType</markup> of a <markup>bindings</markup> element <literal role="rfc2119"
                        >must</literal> define a unique content type in its <markup>media-type</markup> attribute, and the
                    media type specified <literal role="rfc2119">must not</literal> be a Core Media Type.</para>

                <para>The required <markup>handler</markup> attribute <literal role="rfc2119">must</literal> reference the ID
                        <xref linkend="refXML"/> of an <markup><link role="codelink" linkend="elemdef-package-item"
                            >item</link></markup> in the <markup><link role="codelink" linkend="elemdef-opf-manifest"
                            >manifest</link></markup> of the default implementation for this media type. The referenced
                        <markup>item</markup>
                    <literal role="rfc2119">must</literal> be an XHTML Content Document.</para>

                <para>All XHTML Content Documents designated as handlers <literal role="rfc2119">must</literal> have the
                        <link xlink:href="http://www.idpf.org/epub/vocab/package/#scripted"><property>scripted</property>
                        property</link>
                    <xref linkend="refEPUBPackageVocab"/> set in their <olink targetdoc="spec" targetptr="gloss-manifest"
                        type="epub-spec"/>
                    <markup><link linkend="sec-item-elem">item</link></markup> element's <markup><link
                            linkend="attrdef-item-properties">properties</link></markup> attribute.</para>

            </section>

            <section xml:id="sec-collection-elem" xreflabel="collection">
                <title>The <markup>collection</markup> Element</title>

                <para>The <markup>collection</markup> element defines a related group of resources.</para>

                <variablelist xreflabel="collection" role="elem-synopsis" xml:id="elemdef-collection">
                    <varlistentry>
                        <term>Element Name</term>
                        <listitem>
                            <para><markup>collection</markup></para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>Optional sixth element of <markup>package</markup>. Repeatable.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>
                            <variablelist role="elem-synopsis-attlist">
                                <varlistentry xml:id="attrdef-collection-xml-lang">
                                    <term><markup>xml:lang</markup>
                                        <option>[optional]</option></term>
                                    <listitem>
                                        <xi:include href="./share/xmllang-prose-para.xml"/>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-collection-dir">
                                    <term><markup>dir</markup>
                                        <option>[optional]</option></term>
                                    <xi:include href="./share/dir-prose-listitem.xml"/>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-collection-id">
                                    <term><markup>id</markup>
                                        <option>[optional]</option></term>
                                    <listitem>
                                        <xi:include href="./share/id-prose-para.xml"/>
                                    </listitem>
                                </varlistentry>
                                <varlistentry>
                                    <term><markup>role</markup>
                                        <option>[required]</option></term>
                                    <listitem>
                                        <para>Specifies the nature of the <markup>collection</markup>, as defined
                                            below.</para>
                                    </listitem>
                                </varlistentry>
                            </variablelist>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>In this order: <markup><link linkend="elemdef-collection-metadata">metadata</link></markup>
                                <option>[optional]</option>, ( <markup><xref linkend="elemdef-collection"/></markup>
                                <option>[1 or more]</option> or ( <markup><xref linkend="elemdef-collection"/></markup>
                                <option>[0 or more]</option>, <markup><link linkend="elemdef-collection-link"
                                    >link</link></markup>
                                <option>[1 or more]</option> ))</para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <para>The <markup>collection</markup> element allows resources to be assembled into logical groups for a
                    variety of potential uses: enabling content that has been split across multiple <olink targetdoc="spec"
                        targetptr="gloss-content-document-epub" type="epub-spec">EPUB Content Documents</olink> to be
                    reassembled back into a meaningful unit (e.g., an index split across multiple documents), identifying
                    resources for specialized purposes (e.g., preview content), or collecting together resources that present
                    additional information about the given <olink targetdoc="spec" targetptr="gloss-rendition"
                        type="epub-spec"/>.</para>

                <para>The <markup>collection</markup> element, as defined in this section, represents a generic framework
                    from which specific implementations are intended to be derived (e.g., through IDPF sub-specifications).
                    Such implementations <literal role="rfc2119">must</literal> define the purpose of the
                        <markup>collection</markup> element within a Rendition, as well as all requirements for its valid
                    production and use (specifically any requirements that differ from the general framework presented
                    below).</para>

                <para>Each implementation <literal role="rfc2119">must</literal> define a role value that uniquely identifies
                    all conformant <markup>collection</markup> elements. The role of each <markup>collection</markup> element
                    in the Package Document <literal role="rfc2119">must</literal> be identified in its <markup>role</markup>
                    attribute, whose value <literal role="rfc2119">must</literal> be one or more NMTOKENs <xref
                        linkend="refXSDDatatypes"/> and/or full IRIs <xref linkend="refRFC3987"/>. The use of NMTOKEN values
                    is reserved for IDPF-defined roles, a registry of which is maintained at <uri
                        xlink:href="http://www.idpf.org/epub/vocab/package/roles"
                        >http://www.idpf.org/epub/vocab/package/roles</uri>. NMTOKEN values not defined in the registry are
                    not valid. No roles are defined in this section.</para>

                <para>Third parties <literal role="rfc2119">may</literal> define custom roles for the
                        <markup>collection</markup> element, but such roles <literal role="rfc2119">must</literal> be
                    identified using full IRIs. Custom roles <literal role="rfc2119">must not</literal> incorporate the
                    string <uri>idpf.org</uri> in the host component of their identifying IRI.</para>

                <note>
                    <para>To facilitate interoperability of custom roles across Reading Systems, implementers are strongly
                        encouraged to document their use of the <markup>collection</markup> element at <uri
                            xlink:href="http://www.idpf.org/epub/extensions/roles"
                            >http://www.idpf.org/epub/extensions/roles</uri>.</para>
                </note>

                <para xml:id="elemdef-collection-metadata">The optional <markup>metadata</markup> element child of
                        <markup>collection</markup> is an adaptation of the package <markup linkend="elemdef-opf-metadata"
                        >metadata</markup> element, with the following differences in syntax and semantics:</para>

                <itemizedlist>
                    <listitem>
                        <para>No metadata is required by default.</para>
                    </listitem>
                    <listitem>
                        <para>Package-level restrictions on the use of metadata elements <literal role="rfc2119"
                                >may</literal> be overridden.</para>
                    </listitem>
                    <listitem>
                        <para>All primary metadata expressions apply to the <markup>collection</markup>.</para>
                    </listitem>
                    <listitem>
                        <para>The refines attribute <literal role="rfc2119">must not</literal> reference elements outside the
                            containing <markup>collection</markup>.</para>
                    </listitem>
                    <listitem>
                        <para>The <link linkend="sec-opf-meta-elem">OPF2 <markup>meta</markup> element</link>
                            <literal role="rfc2119">must not</literal> be included.</para>
                    </listitem>
                </itemizedlist>

                <para>A <markup>collection</markup>
                    <literal role="rfc2119">may</literal> define sub-collections through the inclusion of one or more child
                        <markup>collection</markup> elements.</para>

                <para xml:id="elemdef-collection-link">The <markup>link</markup> element child of <markup>collection</markup>
                    is an adaptation of the metadata <markup linkend="elemdef-opf-link">link</markup> element, with the
                    following differences in syntax and semantics:</para>

                <itemizedlist>
                    <listitem>
                        <para>The <markup>href</markup> attribute <literal role="rfc2119">may</literal> reference any
                            resource, including those listed in the <markup linkend="elemdef-opf-manifest"
                            >manifest</markup>.</para>
                    </listitem>
                    <listitem>
                        <para>The IRI value of the <markup>href</markup> attribute <literal role="rfc2119">may</literal> have
                            a fragment component to indicate that only a portion or subset of a resource is included in the
                            collection.</para>
                    </listitem>
                    <listitem>
                        <para>The <markup>rel</markup> attribute is <literal role="rfc2119">optional</literal>.</para>
                    </listitem>
                    <listitem>
                        <para>The <markup>refines</markup> attribute <literal role="rfc2119">must not</literal> be
                            attached.</para>
                    </listitem>
                </itemizedlist>

                <para>Each <markup>link</markup>
                    <literal role="rfc2119">must</literal> reference a resource that is a member of the group. The order of
                        <markup>link</markup> elements is not significant.</para>

                <para>Specific implementations of the <markup>collection</markup> element <literal role="rfc2119"
                        >may</literal> tailor the requirements defined above to better reflect their needs (e.g., requiring
                    metadata, imposing further restrictions on the use of elements and attributes, or making the order of
                        <markup>link</markup> elements significant). However, the resulting content model <literal
                        role="rfc2119">must</literal> represent a valid subset of the one defined in this section (e.g.,
                    specific implementations cannot introduce new elements or attributes, or re-introduce those expressly
                    forbidden above). Specific implementations <literal role="rfc2119">must not</literal> define collections
                    in a way that overrides the requirements of the <markup linkend="elemdef-opf-manifest">manifest</markup>
                    and <markup linkend="elemdef-opf-spine">spine</markup>.</para>

                <para>In the context of this specification, support for collections in Reading Systems is <literal
                        role="rfc2119">optional</literal>. Reading Systems <literal role="rfc2119">must</literal> ignore
                        <markup>collection</markup> elements that define unrecognized roles.</para>

                <para>The rendering of a Rendition <literal role="rfc2119">must not</literal> be dependent on the recognition
                    of <markup>collection</markup> elements. The content <literal role="rfc2119">must</literal> remain
                    consumable by a User without any information loss or other significant deterioration.</para>

                <bridgehead>Examples</bridgehead>

                <informalexample xml:id="example-collection">
                    <para>The following example shows the assembly of two <olink targetdoc="spec"
                            targetptr="gloss-content-document-epub-xhtml" type="epub-spec">XHTML Content Documents</olink>
                        that represent a single unit.</para>
                    <synopsis><xi:include href="./examples/publications/collection.xml" parse="text"/></synopsis>
                </informalexample>
            </section>
        </section>

        <section xml:id="sec-foreign-restrictions-manifest">
            <title>Manifest Fallbacks</title>

            <para>Foreign Resources <literal role="rfc2119">may</literal> be referenced in contexts in which an intrinsic
                fallback cannot be provided (e.g., directly from <olink targetdoc="spec" targetptr="gloss-spine"
                    type="epub-spec"/>
                <markup><xref linkend="elemdef-spine-itemref"/></markup> elements; from <xref linkend="refHTML5"/>
                <markup>img</markup>, <markup>iframe</markup> and <markup>link</markup> elements in <olink targetdoc="spec"
                    targetptr="gloss-content-document-epub-xhtml" type="epub-spec">XHTML Content Documents</olink>; and from
                    <property>@import</property> rules in CSS Style Sheets). Manifest fallbacks <literal role="rfc2119"
                    >must</literal> be provided in such cases.</para>

            <para>Manifest fallbacks are provided using the <markup><xref linkend="attrdef-item-fallback"/></markup>
                attribute on the <olink targetdoc="spec" targetptr="gloss-manifest" type="epub-spec">manifest</olink>
                <markup><xref linkend="elemdef-package-item"/></markup> element that represents the Publication Resource. The
                    <markup>fallback</markup> attribute's IDREF <xref linkend="refXML"/> value <literal role="rfc2119"
                    >must</literal> resolve to another <markup>item</markup> in the <markup>manifest</markup>. This fallback
                    <markup>item</markup>
                <literal role="rfc2119">may</literal> itself specify another fallback <markup>item</markup>, and so on. </para>

            <para>The ordered list of all the ID references that can be reached starting from a given item's
                    <markup>fallback</markup> attribute represents the <emphasis>fallback chain</emphasis> for that item. The
                order of the resources in the fallback chain represents the Authors' preferred fallback order.</para>

            <para>A Reading System that does not support the Media Type of a given Publication Resource <literal
                    role="rfc2119">must</literal> traverse the fallback chain until it has identified at least one supported
                Publication Resource to be used in place of the unsupported resource. If the Reading System supports multiple
                Publication Resources in the fallback chain, it <literal role="rfc2119">may</literal> select the resource to
                use based on specific <link linkend="attrdef-item-properties">properties</link> of that resource, otherwise
                it <literal role="rfc2119">should</literal> honor the Authors' preferred fallback order.</para>

            <para>Fallback chains <literal role="rfc2119">must</literal> conform to one of the following requirements, as
                appropriate:</para>

            <itemizedlist>
                <listitem>
                    <para>For Foreign Resources referenced directly from spine <markup><link linkend="elemdef-spine-itemref"
                                >itemref</link></markup> elements, the chain <literal role="rfc2119">must</literal> contain
                        at least one <olink targetdoc="spec" targetptr="gloss-content-document-epub" type="epub-spec"
                        />.</para>
                </listitem>
                <listitem>
                    <para>For Foreign Resources for which an intrinsic fallback cannot be provided, the chain <literal
                            role="rfc2119">must</literal> contain at least one <olink targetdoc="spec"
                            targetptr="gloss-core-media-type" type="epub-spec"/>.</para>
                </listitem>
            </itemizedlist>

            <para>Fallback chains <literal role="rfc2119">must not</literal> contain any circular- or self-references to
                    <markup>item</markup> elements in the chain.</para>

            <para>Fallbacks <literal role="rfc2119">may</literal> also be provided for <olink targetdoc="spec"
                    targetptr="gloss-content-document-top-level" type="epub-spec">Top-Level Content Documents</olink> that
                are EPUB Content Documents; a Reading System <literal role="rfc2119">may</literal> choose to utilize such
                fallbacks in order to find the optimal version of a Content Document to render in a given context. An example
                of when this feature can be utilized is when providing <olink targetdoc="contentdocs"
                    targetptr="confreq-cd-scripted-flbk" type="epub-spec">fallbacks for scripted content</olink>.</para>

        </section>

    </chapter>

    <chapter xml:id="sec-package-metadata">
        <title>Package Metadata</title>

        <section xml:id="sec-package-metadata-identifiers">
            <title>Publication Identifiers</title>

            <section xml:id="sec-metadata-elem-identifiers-uid">
                <title>Unique Identifier</title>

                <para>The <olink targetdoc="spec" targetptr="gloss-author" type="epub-spec"/> is responsible for including a
                    primary identifier in the <olink targetdoc="spec" targetptr="gloss-package-document" type="epub-spec"/>
                    metadata that is unique to one and only one <olink targetdoc="spec" targetptr="gloss-epub-publication"
                        type="epub-spec"/>. This <olink targetdoc="spec" targetptr="gloss-unique-identifier" type="epub-spec"
                    />, whether chosen or assigned, <literal role="rfc2119">must</literal> be stored in a <markup
                        linkend="sec-opf-dcidentifier">dc:identifier</markup> element and be referenced as the Unique
                    Identifier in the <markup linkend="elemdef-opf-package">package</markup> element <markup
                        linkend="attrdef-package-unique-identifier">unique-identifier</markup> attribute. </para>

                <para>Although not static, changes to the Unique Identifier for an EPUB Publication <literal role="rfc2119"
                        >should</literal> be made as infrequently as possible. New identifiers <literal role="rfc2119">should
                        not</literal> be issued when updating metadata, fixing errata or making other minor changes to the
                    EPUB Publication.</para>

            </section>

            <section xml:id="sec-metadata-elem-identifiers-pid">
                <title>Release Identifier</title>

                <para>The <olink targetdoc="spec" targetptr="gloss-unique-identifier" type="epub-spec"/> of an <olink
                        targetdoc="spec" targetptr="gloss-epub-publication" type="epub-spec"/> typically <literal
                        role="rfc2119">should not</literal> change with each minor revision to the package or its contents,
                    as Unique Identifiers are intended to have maximal persistence both for referencing and distribution
                    purposes. Each release of an EPUB Publication normally requires that the new version be uniquely
                    identifiable, however, which results in the contradictory need for reliable Unique Identifiers that are
                    changeable.</para>

                <para>To redress this problem of identifying minor modifications and releases without changing the Unique
                    Identifier, this specification defines the semantics for a <emphasis>Release Identifier</emphasis>, or
                    means of distinguishing and sequentially ordering EPUB Publications with the same Unique Identifier. The
                    Release Identifier is not an actual property in the package <markup>metadata</markup> section, but is a
                    value that can be obtained from two required pieces of metadata: the Unique Identifier and the last
                    modification date of the Rendition.</para>

                <para>When the taken together, the combined value represents a unique identity that can be used to
                    distinguish any particular version of an EPUB Publication from another. To ensure that a Release
                    Identifier can be constructed, each <olink targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/>
                    <literal role="rfc2119">must</literal> include exactly one <xref linkend="refDCTERMS"/>
                    <property>modified</property> property containing its last modification date (see <xref
                        linkend="elemdef-meta"/>). The value of this property <literal role="rfc2119">must</literal> be an
                    XML Schema <xref linkend="refXSDDatatypes"/> dateTime conformant date of the form:</para>

                <informalexample>
                    <synopsis>CCYY-MM-DDThh:mm:ssZ</synopsis>
                </informalexample>

                <para>The last modification date <literal role="rfc2119">must</literal> be expressed in Coordinated Universal
                    Time (UTC) and <literal role="rfc2119">must</literal> be terminated by the <literal>Z</literal> time zone
                    indicator.</para>

                <para>Although not a part of the package metadata, for referencing and other purposes all string
                    representations of the identifier <literal role="rfc2119">must</literal> be constructed using the at sign
                        (<literal>@</literal>) as the separator (i.e., of the form "id<literal>@</literal>date"). Whitespace
                        <literal role="rfc2119">must not</literal> be included when concatenating the strings.</para>

                <informalexample>
                    <para>The following example shows how a Unique Identifier and modification date are combined to form the
                        Release Identifier.</para>
                    <synopsis><xi:include href="examples/publications/package-identifier.xml" parse="text"/></synopsis>
                </informalexample>

                <para>Note that it is possible that the separator character <literal role="rfc2119">may</literal> occur in
                    the Unique Identifier, as these identifiers <literal role="rfc2119">may</literal> be any string value.
                    The Release Identifier consequently <literal role="rfc2119">must</literal> be split on the last instance
                    of the at sign when decomposing it into its component parts.</para>

                <para>The Release Identifier does not supersede the Unique Identifier, but represents the means by which
                    different versions of the same EPUB Publication can be distinguished and identified in distribution
                    channels and by Reading Systems. The sequential, chronological order inherent in the required format of
                    the timestamp also places EPUB Publications in order without requiring knowledge of the exact identifier
                    that came before.</para>

                <para>The Release Identifier consequently allows a set of EPUB Publications to be inspected to determine if
                    they represent the same version of the same Publication, different versions of a single EPUB Publication,
                    or any combination of differing and similar EPUB Publications.</para>

                <note>
                    <para>When an <olink targetdoc="spec" targetptr="gloss-container" type="epub-spec"/> includes more than
                        one <olink targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/> of an EPUB Publication,
                        updating the last modified date of the <olink targetdoc="spec" targetptr="gloss-rendition-default"
                            type="epub-spec"/> for each release — even if it has not been updated — will help ensure that the
                        EPUB Publication does not appear to be the same version as an earlier release, as Reading Systems are
                        only required to process the Default Rendition.</para>
                </note>
            </section>
        </section>

        <section xml:id="sec-metadata-assoc">
            <title>Vocabulary Association Mechanisms</title>

            <section xml:id="sec-metadata-assoc-intro" conformance="informative">
                <title>Introduction</title>

                <para>The <markup>property</markup>, <markup>properties</markup>, <markup>rel</markup> and
                        <markup>scheme</markup> attributes use the <link linkend="sec-property-datatype">property data
                        type</link> to represent terms from metadata vocabularies. Similar to a CURIE <xref linkend="refRDFa"
                    />, the property data type represents an IRI <xref linkend="refRFC3987"/> in compact form and simplifies
                    the authoring of metadata from standardized vocabularies. </para>

                <para>A property value is an expression that consists of a prefix and a reference, where the prefix — whether
                    literal or implied — is a shorthand mapping of an IRI that typically resolves to a term vocabulary. When
                    the prefix is converted to its IRI representation and combined with the reference, the resulting IRI
                    normally resolves to a fragment within that vocabulary that contains human- and/or machine-readable
                    information about the term. </para>

                <para>To assist Reading Systems in processing property values, the means of establishing the IRI a prefix
                    maps to is required, and this specification defines three such mechanisms:</para>

                <itemizedlist>
                    <listitem>
                        <para>a <link linkend="sec-metadata-default-vocab">default vocabulary</link> — defines the mapping
                            when a property value does not include a prefix;</para>
                    </listitem>
                    <listitem>
                        <para>a set of <link linkend="sec-metadata-reserved-vocabs">reserved prefixes</link> — these mappings
                            are predefined (i.e., all Reading Systems recognize them) and can be used without having to be
                            declared; and</para>
                    </listitem>
                    <listitem>
                        <para>the <markup linkend="sec-prefix-attr">prefix</markup> attribute — a declarative means of
                            creating new prefix mappings on the root <markup linkend="sec-package-elem">package</markup>
                            element.</para>
                    </listitem>
                </itemizedlist>

            </section>

            <section xml:id="sec-metadata-default-vocab">
                <title>Default Vocabulary</title>

                <para>The default vocabulary is a vocabulary that does not require a prefix to be declared in order to use
                    its terms, and whose terms <literal role="rfc2119">must</literal> always be unprefixed.</para>

                <para>As the Package Document has multiple unrelated uses for metadata terms, a single default vocabulary is
                    not defined. Instead, different default vocabularies are defined for use in attributes that accept a
                        <link linkend="sec-property-datatype">property data type</link> as follows:</para>

                <itemizedlist>
                    <listitem>
                        <para>The <link xlink:href="http://www.idpf.org/epub/vocab/package/metadata/">Package Metadata
                                Vocabulary</link> is defined to be the default vocabulary for the <markup>meta</markup>
                            <markup>property</markup>, <markup>meta</markup>
                            <markup>scheme</markup>, <markup>item</markup>
                            <markup>properties</markup> and <markup>itemref</markup>
                            <markup>properties</markup> attributes.</para>
                        <para>If a property value in any of these attributes does not include a prefix, the IRI <xref
                                linkend="refRFC3987"/> stem
                                <uri>http://idpf.org/epub/vocab/package/epub-vocab-package.html#</uri>
                            <literal role="rfc2119">must</literal> be used to generate the resulting IRI.</para>
                    </listitem>
                    <listitem>
                        <para>The <link xlink:href="../../vocab/package/link/rel-vocab.html">Link Relationships
                                Vocabulary</link> is defined to be the default vocabulary for the <markup>link</markup>
                            <markup>rel</markup> attribute.</para>
                        <para>If a property value in this attribute does not include a prefix, the IRI <xref
                                linkend="refRFC3987"/> stem <uri>http://idpf.org/epub/vocab/package/link/#</uri>
                            <literal role="rfc2119">must</literal> be used to generate the resulting IRI.</para>
                    </listitem>
                </itemizedlist>

                <para>The IRIs associated with the Package Metadata Vocabulary and Link Relationships Vocabulary <literal
                        role="rfc2119">must not</literal> be assigned a prefix using the <markup linkend="sec-prefix-attr"
                        >prefix</markup> attribute.</para>

            </section>

            <section xml:id="sec-metadata-reserved-vocabs">
                <title>Reserved Prefixes</title>

                <para>This specification reserves a set of prefixes that Authors <literal role="rfc2119">may</literal> use in
                    package metadata. These prefixes are defined in the normative document <link
                        xlink:href="http://www.idpf.org/epub/vocab/package/pfx">EPUB Package Document Reserved
                        Prefixes</link>.</para>

                <para>The prefixes defined in this document are maintained and updated separately of this specification and
                    are subject to change at any time.</para>

                <para>Reading Systems <literal role="rfc2119">must</literal> resolve all reserved prefixes used in Package
                    Documents using their pre-defined URIs. Reserved prefixes <literal role="rfc2119">should not</literal> be
                    overridden in the <link linkend="sec-prefix-attr">prefix attribute</link>, but Reading Systems <literal
                        role="rfc2119">must</literal> use such local overrides when encountered.</para>

                <para>As changes to the reserved prefixes and updates to Reading Systems are not always going happen in
                    synchrony, Reading Systems <literal role="rfc2119">must not</literal> fail when encountering unrecognized
                    prefixes (i.e., not reserved and not declared using the <markup>prefix</markup> attribute).</para>
            </section>

            <section xml:id="sec-prefix-attr">
                <title>The <markup>prefix</markup> Attribute</title>

                <para>The <markup>prefix</markup> attribute defines additional prefix mappings not <link
                        linkend="sec-metadata-reserved-vocabs">reserved</link> by the specification.</para>

                <para>The value of the <markup>prefix</markup> attribute is a whitespace-separated list of one or more
                    prefix-to-IRI mappings of the form:</para>

                <productionset>
                    <title>The prefix Syntax</title>
                    <production xml:id="prefix.ebnf.def">
                        <lhs>prefixes</lhs>
                        <rhs><nonterminal def="#prefix.ebnf.mapping">mapping</nonterminal> , { <nonterminal
                                def="#prefix.ebnf.whitespace">whitespace</nonterminal>, { <nonterminal
                                def="#prefix.ebnf.space">whitespace</nonterminal> } , <nonterminal def="#prefix.ebnf.mapping"
                                >mapping</nonterminal> } </rhs>
                    </production>
                    <production xml:id="prefix.ebnf.mapping">
                        <lhs>mapping</lhs>
                        <rhs><nonterminal def="#prefix.ebnf.prefix">prefix</nonterminal> , ":" , <nonterminal
                                def="#prefix.ebnf.space">space</nonterminal> , { <nonterminal def="#prefix.ebnf.space"
                                >space</nonterminal> } , ? xsd:anyURI ? </rhs>
                    </production>
                    <production xml:id="prefix.ebnf.prefix">
                        <lhs>prefix</lhs>
                        <rhs>? xsd:NCName ? </rhs>
                    </production>
                    <production xml:id="prefix.ebnf.space">
                        <lhs>space</lhs>
                        <rhs>#x20 </rhs>
                    </production>
                    <production xml:id="prefix.ebnf.whitespace">
                        <lhs>whitespace</lhs>
                        <rhs>(#x20 | #x9 | #xD | #xA) </rhs>
                    </production>
                </productionset>

                <informalexample>
                    <para>The following example shows prefixes for the Friend of a Friend (<property>foaf</property>) and
                        DBPedia (<property>dbp</property>) vocabularies being declared using the <markup>prefix</markup>
                        attribute.</para>
                    <synopsis><xi:include href="examples/publications/prefix.xml" parse="text"/></synopsis>
                </informalexample>

                <para>To avoid conflicts, the <markup>prefix</markup> attribute <literal role="rfc2119">must not</literal> be
                    used to define a prefix that maps to the <link linkend="sec-metadata-default-vocab">default
                        vocabulary</link>. If the <markup>prefix</markup> attribute includes a declaration for a <link
                        linkend="sec-metadata-reserved-vocabs">pre-defined prefix</link>, Reading Systems <literal
                        role="rfc2119">must</literal> use the URI mapping defined in the <markup>prefix</markup> attribute,
                    regardless of whether of it maps to the same URI as the pre-defined prefix.</para>

                <para>The prefix '_' is reserved for future compatibility with RDFa <xref linkend="refRDFa"/> processing, so
                        <literal role="rfc2119">must not</literal> be defined.</para>

            </section>

            <section xml:id="sec-property-datatype">
                <title>The property Data Type</title>

                <section xml:id="sec-property-syntax">
                    <title>Syntax</title>

                    <para>The property data type is a compact means of expressing an IRI <xref linkend="refRFC3987"/> and
                        consists of an optional prefix separated from a reference by a colon.</para>

                    <productionset>
                        <title>The property Syntax</title>
                        <production xml:id="property.ebnf.property">
                            <lhs>property</lhs>
                            <rhs>[ <nonterminal def="#property.ebnf.prefix">prefix</nonterminal> , ":" ] , <nonterminal
                                    def="#property.ebnf.reference">reference</nonterminal></rhs>
                        </production>
                        <production xml:id="property.ebnf.prefix">
                            <lhs>prefix</lhs>
                            <rhs>? xsd:NCName ? </rhs>
                        </production>
                        <production xml:id="property.ebnf.reference">
                            <lhs>reference</lhs>
                            <rhs>? irelative-ref ? <lineannotation>as defined in <xref linkend="refRFC3987"
                                    /></lineannotation></rhs>
                        </production>
                    </productionset>

                    <para>The property data type is derived from the CURIE data type defined in <xref linkend="refRDFa"/>,
                        and represents a subset of CURIEs.</para>

                    <informalexample>
                        <para>The following example shows a property value composed of the prefix
                                <property>dcterms</property> and the reference <property>modified</property>.</para>
                        <synopsis><![CDATA[<meta property="dcterms:modified">2011-01-01T12:00:00Z</meta>]]></synopsis>
                    </informalexample>

                    <para>After <link linkend="sec-property-processing">processing</link>, this property would expand to the
                        following IRI:</para>

                    <informalexample>
                        <synopsis><![CDATA[http://purl.org/dc/terms/modified]]></synopsis>
                    </informalexample>

                    <para>as the <property>dcterms:</property> prefix is a <link linkend="sec-metadata-reserved-vocabs"
                            >reserved prefix</link> that maps to the IRI <uri>http://purl.org/dc/terms/</uri>.</para>

                    <para>When a prefix is omitted from the property value, the expressed reference represents a term from
                        the <link linkend="sec-metadata-default-vocab">default vocabulary</link>.</para>

                    <informalexample>
                        <para>The following example shows a property value taken from the default vocabulary.</para>
                        <synopsis><![CDATA[<meta … property="role">aut</meta>]]></synopsis>
                    </informalexample>

                    <para>This property would expand to:</para>

                    <informalexample>
                        <synopsis><![CDATA[http://idpf.org/epub/vocab/package/epub-vocab-package.html#role]]></synopsis>
                    </informalexample>

                    <para>when the IRI for the default vocabulary is concatenated with the reference.</para>

                    <para>An empty string does not represent a valid property value, even though it is valid to the
                        definition above.</para>

                </section>

                <section xml:id="sec-property-processing">
                    <title>Processing</title>

                    <para>A Reading System <literal role="rfc2119">must</literal> use the following rules to create an IRI
                            <xref linkend="refRFC3987"/> from a property:</para>

                    <itemizedlist>
                        <listitem>
                            <para>If the property consists only of a reference, the IRI is obtained by concatenating the IRI
                                stem associated with the <link linkend="sec-metadata-default-vocab">default vocabulary</link>
                                to the reference.</para>
                        </listitem>
                        <listitem>
                            <para>If the property consists of a prefix and reference, the IRI is obtained by concatenating
                                the IRI stem associated with the prefix to the reference. If no matching prefix has been
                                defined, the property is invalid and <literal role="rfc2119">must</literal> be
                                ignored.</para>
                        </listitem>
                    </itemizedlist>

                    <para>The resulting IRI <literal role="rfc2119">must</literal> be valid to <xref linkend="refRFC3987"/>.
                        Reading Systems are <literal role="rfc2119">not required</literal> to resolve this IRI,
                        however.</para>
                </section>

            </section>
        </section>

        <section xml:id="sec-package-metadata-rendering">
            <title>Publication Rendering Metadata</title>

            <section xml:id="sec-package-metadata-layout-general-intro" conformance="informative">
                <title>Introduction</title>

                <para>Not all rendering information can be expressed through the underlying technologies that EPUB is built
                    upon. Although XHTML with CSS provides powerful layout capabilities, for example, those capabilities are
                    limited to the scope of the document being rendered.</para>

                <para>This section defines general-purpose properties that allow Authors to express package-level rendering
                    intentions (i.e., functionality that can only be implemented by the <olink targetdoc="spec"
                        targetptr="gloss-epub-reading-system" type="epub-spec"/>). If a Reading System supports the desired
                    rendering, these properties enable the User to be presented the content as the Author optimally designed
                    it.</para>
            </section>

            <section xml:id="sec-package-metadata-general">
                <title>General Properties</title>

                <section xml:id="layout-property-flow">
                    <title>The <property>rendition:flow</property> Property</title>

                    <section xml:id="layout-property-flow-usage">
                        <title>Usage</title>

                        <para xml:id="property-flow-global">When the <link
                                xlink:href="../../vocab/package/epub-vocab-package.html#flow"
                                    ><property>rendition:flow</property> property</link>
                            <xref linkend="refEPUBPackageVocab"/> is specified on a <markup>meta</markup> element, it
                            indicates the Author's global preference for overflow content handling (i.e., for all spine
                            items). Authors <literal role="rfc2119">may</literal> indicate a preference for dynamic
                            pagination or scrolling. For scrolled content, it is also possible to specify whether consecutive
                                <olink targetdoc="spec" targetptr="gloss-content-document-epub" type="epub-spec">EPUB Content
                                Documents</olink> are to be rendered as a continuous scrolling view or whether each is to be
                            rendered separately (i.e., with a dynamic page break between each).</para>

                        <para>If a Reading System supports the specified rendering, it <literal role="rfc2119"
                                >should</literal> use that method to handle overflow content, but <literal role="rfc2119"
                                >may</literal> provide the option for <olink targetdoc="spec" targetptr="gloss-user"
                                type="epub-spec">Users</olink> to override the requested rendering.</para>

                        <para>The default value <code role="value">auto</code>
                            <literal role="rfc2119">must</literal> be assumed by Reading Systems as the global value if no
                                <markup>meta</markup> element carrying this property occurs in the <markup
                                linkend="elemdef-opf-metadata">metadata</markup> section. Reading Systems <literal
                                role="rfc2119">may</literal> support only this default value.</para>

                        <para>If a Reading Systems supports the <property linkend="fxl-property-layout"
                                >rendition:layout</property> property, it <literal role="rfc2119">must</literal> ignore the
                                <property>rendition:flow</property> property when it has been set on a spine item that also
                            specifies the <property linkend="fxl-property-layout">rendition:layout</property> value <code
                                role="value">pre-paginated</code>.</para>
                    </section>

                    <section xml:id="layout-property-flow-values">
                        <title>Allowed values</title>

                        <para>The following values are defined for use with the <property>rendition:flow</property>
                            property:</para>

                        <variablelist>
                            <varlistentry>
                                <term>paginated</term>
                                <listitem>
                                    <para>The Reading System <literal role="rfc2119">should</literal> dynamically paginate
                                        all overflow content.</para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>scrolled-continuous</term>
                                <listitem>
                                    <para>The Reading System <literal role="rfc2119">should</literal> render all Content
                                        Documents such that overflow content is scrollable, and the EPUB Publication
                                        represented by the given <olink targetdoc="spec" targetptr="gloss-rendition"
                                            type="epub-spec"/>
                                        <literal role="rfc2119">should</literal> be presented as one continuous scroll from
                                        spine item to spine item (except where <link linkend="layout-property-flow-overrides"
                                            >locally overridden</link>).</para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>scrolled-doc</term>
                                <listitem>
                                    <para>The Reading System <literal role="rfc2119">should</literal> render all Content
                                        Documents such that overflow content is scrollable, and each spine item <literal
                                            role="rfc2119">should</literal> be presented as a separate scrollable
                                        document.</para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>auto</term>
                                <listitem>
                                    <para>The Author does not have a preference for overflow handling. The Reading System
                                            <literal role="rfc2119">may</literal> render overflow content using its default
                                        method or a User preference, whichever is applicable.</para>
                                </listitem>
                            </varlistentry>
                        </variablelist>

                        <bridgehead>Examples</bridgehead>

                        <informalexample xml:id="property-flow-ex1">
                            <para>The following example demonstrates an Author's intent to have a paginated Rendition with a
                                scrollable table of contents.</para>
                            <synopsis><xi:include href="./examples/publications/flow-01.xml" parse="text"/></synopsis>
                        </informalexample>
                    </section>

                    <section xml:id="layout-property-flow-overrides">
                        <title>Spine Overrides</title>

                        <para xml:id="layout-property-flow-local">The <property
                                xlink:href="../../vocab/package/epub-vocab-package.html#flow-auto"
                                >rendition:flow-auto</property>, <property
                                xlink:href="../../vocab/package/epub-vocab-package.html#flow-paginated"
                                >rendition:flow-paginated</property>, <property
                                xlink:href="../../vocab/package/epub-vocab-package.html#flow-scrolled-continuous"
                                >rendition:flow-scrolled-continuous</property>, <property
                                xlink:href="../../vocab/package/epub-vocab-package.html#flow-scrolled-doc"
                                >rendition:flow-scrolled-doc</property> and properties <xref linkend="refEPUBPackageVocab"/>
                            <literal role="rfc2119">may</literal> be specified locally on spine <markup
                                linkend="elemdef-spine-itemref">itemref</markup> elements, and will, in such cases, override
                            the <link linkend="property-flow-global">global value</link> for the given spine item.</para>
                    </section>
                </section>

                <section xml:id="layout-property-align-x-center">
                    <title>The <property>rendition:align-x-center</property> Property</title>

                    <para>When the <link xlink:href="../../vocab/package/epub-vocab-package.html#align-x-center"
                                ><property>rendition:align-x-center</property> property</link>
                        <xref linkend="refEPUBPackageVocab"/> is set on a spine item, it indicates that the rendered content
                            <literal role="rfc2119">should</literal> be centered horizontally within the viewport or spread,
                        as applicable. This property does not affect the rendering of the spine item, only the placement of
                        the resulting content box.</para>

                    <para>For reflowable content, Reading Systems that support this property <literal role="rfc2119"
                            >must</literal> center each virtual page.</para>

                    <para>This version of this specification does not define a default rendering behavior when this property
                        is not supported or specified. Reading Systems <literal role="rfc2119">may</literal> render spine
                        items by their own design.</para>

                    <note>
                        <para>This property was developed primarily to handle "Naka-Tobira (中扉)" (sectional title pages), in
                            the absence of reliable centering control within the content rendering. As support for paged
                            media evolves in CSS, however, this property may become obsolete. Authors are encouraged to use
                            CSS solutions when effective.</para>
                    </note>
                </section>
            </section>

            <section xml:id="sec-package-metadata-fxl">
                <title>Fixed-Layout Properties</title>

                <section xml:id="fxl-intro" conformance="informative">
                    <title>Introduction</title>
                    <para>EPUB documents, unlike print books or PDF files, are designed to change. The content flows, or
                        reflows, to fit the screen and to fit the needs of the <olink targetdoc="spec" targetptr="gloss-user"
                            type="epub-spec"/>. As noted in <olink type="epub-spec" targetdoc="overview"
                            targetptr="sec-rendering"/>
                        <quote>content presentation should adapt to the <olink targetdoc="spec" targetptr="gloss-user"
                                type="epub-spec"/> rather than the User having to adapt to a particular representation of
                            content.</quote></para>
                    <para>But this principle doesn’t work for all types of documents. Sometimes content and design are so
                        intertwined they cannot be separated. Any change in appearance risks changing the meaning, or losing
                        all meaning. <olink targetdoc="spec" targetptr="gloss-fixed-layout-document" type="epub-spec"
                            >Fixed-Layout Documents</olink> give <olink targetdoc="spec" targetptr="gloss-author"
                            type="epub-spec">Authors</olink> greater control over presentation when a reflowable EPUB is not
                        suitable for the content.</para>
                    <para>This section defines a set of metadata properties to allow declarative expression of intended
                        rendering behaviors of Fixed-Layout Documents in the context of EPUB 3.1.</para>
                    <note xml:id="note-mechanisms">
                        <para>EPUB 3.1 affords multiple mechanisms for representing fixed-layout content. When fixed-layout
                            content is necessary, the Author's choice of mechanism will depend on many factors including
                            desired degree of precision, file size, accessibility, etc. This section does not attempt to
                            dictate the Author's choice of mechanism.</para>
                    </note>
                </section>

                <section xml:id="fxl-property-layout">
                    <title>The <property>rendition:layout</property> Property</title>

                    <section xml:id="fxl-property-layout-usage">
                        <title>Usage</title>

                        <para xml:id="property-layout-global">When the <link
                                xlink:href="../../vocab/package/epub-vocab-package.html#layout"
                                    ><property>rendition:layout</property> property</link>
                            <xref linkend="refEPUBPackageVocab"/> is specified on a <markup>meta</markup> element, it
                            indicates that the paginated or reflowable layout style applies globally for the <olink
                                targetdoc="spec" targetptr="gloss-epub-publication" type="epub-spec"/> (i.e., for all spine
                            items). </para>

                        <para>The default value <code role="value">reflowable</code>
                            <literal role="rfc2119">must</literal> be assumed by <olink targetdoc="spec"
                                targetptr="gloss-epub-reading-system" type="epub-spec">EPUB Reading Systems</olink> as the
                            global value if no <markup>meta</markup> element carrying this property occurs in the <markup
                                linkend="elemdef-opf-metadata">metadata</markup> section.</para>

                        <para>When the <property>rendition:layout</property> property is set to <code role="value"
                                >pre-paginated</code>, Reading Systems <literal role="rfc2119">must not</literal> include
                            space between the adjacent content slots when rendering <olink targetdoc="spec"
                                targetptr="gloss-synthetic-spread" type="epub-spec">Synthetic Spreads</olink>.</para>

                        <para>When the property is set to <code role="value">pre-paginated</code> for a spine item, its
                            content dimensions <literal role="rfc2119">must</literal> be set as defined in <olink
                                targetdoc="contentdocs" targetptr="sec-fixed-layouts" type="epub-spec"/>.</para>

                        <note>
                            <para>Refer to <xref linkend="fxl-property-viewport"/> for how to additionally declare the
                                dimensions within the package metadata to facilitate Reading System optimization of the
                                rendering.</para>
                        </note>
                    </section>

                    <section xml:id="fxl-property-layout-values">
                        <title>Allowed values</title>

                        <para>The following values are defined for use with the <property>rendition:layout</property>
                            property:</para>

                        <variablelist>
                            <varlistentry>
                                <term xml:id="def-layout-reflowable">reflowable</term>
                                <listitem>
                                    <para>The given Rendition is not pre-paginated. Reading Systems <literal role="rfc2119"
                                            >may</literal> apply dynamic pagination when rendering.</para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term xml:id="def-layout-pre-paginated">pre-paginated</term>
                                <listitem>
                                    <para>The given Rendition is pre-paginated. Reading Systems <literal role="rfc2119"
                                            >must</literal> produce exactly one page per spine <markup
                                            linkend="elemdef-spine-itemref">itemref</markup> when rendering.</para>
                                </listitem>
                            </varlistentry>
                        </variablelist>

                        <note xml:id="uaag">
                            <para>Reading Systems typically restrict or deny the application of User or <olink
                                    targetdoc="spec" targetptr="gloss-user-agent" type="epub-spec"/> style sheets to
                                pre-paginated documents, since, as a result of intrinsic properties of such documents,
                                dynamic style changes are highly likely to have unintended consequences. Authors should take
                                into account the negative impact on usability and accessibility that these restrictions have
                                when choosing to use pre-paginated instead of reflowable content. Refer to <link
                                    xlink:href="http://www.w3.org/TR/UAAG20/#gl-text-config">Guideline 1.4 - Provide text
                                    configuration</link>
                                <xref linkend="refUAAG10"/> for related information.</para>
                        </note>

                        <bridgehead>Examples</bridgehead>

                        <informalexample xml:id="fxl-ex1">
                            <para>The following example demonstrates fully fixed-layout content, using <xref
                                    linkend="refMediaQueries"/> to apply different style sheets for three different device
                                categories.</para>
                            <bridgehead>Package Document</bridgehead>
                            <synopsis><xi:include href="./examples/publications/fxl-01a.xml" parse="text"/></synopsis>
                            <bridgehead>XHTML</bridgehead>
                            <synopsis><xi:include href="./examples/publications/fxl-01b.xml" parse="text"/></synopsis>
                            <para>Note that the Media Queries only affect the style sheet applied to the document. The size
                                of the content area set in the <property>viewport</property>
                                <markup>meta</markup> tag is static.</para>
                        </informalexample>
                    </section>

                    <section xml:id="fxl-property-layout-overrides">
                        <title>Spine Overrides</title>

                        <para xml:id="property-layout-local">The <property
                                xlink:href="../../vocab/package/epub-vocab-package.html#layout-pre-paginated"
                                >rendition:layout-pre-paginated</property> and <property
                                xlink:href="../../vocab/package/epub-vocab-package.html#layout-reflowable"
                                >rendition:layout-reflowable</property> properties <xref linkend="refEPUBPackageVocab"/>
                            <literal role="rfc2119">may</literal> be specified locally on spine <markup
                                linkend="elemdef-spine-itemref">itemref</markup> elements, and will, in such cases, override
                            the <link linkend="property-layout-global">global value</link> for the given spine item.</para>
                    </section>
                </section>

                <section xml:id="fxl-property-orientation">
                    <title>The <property>rendition:orientation</property> property</title>

                    <section xml:id="fxl-property-orientation-usage">
                        <title>Usage</title>

                        <para xml:id="property-orientation-global">When the <link
                                xlink:href="../../vocab/package/epub-vocab-package.html#orientation"
                                    ><property>rendition:orientation</property> property</link>
                            <xref linkend="refEPUBPackageVocab"/> is specified on a <markup>meta</markup> element, it
                            indicates that the intended orientation applies globally for the given Rendition (i.e., for all
                            spine items). </para>

                        <para>The default value <code role="value">auto</code>
                            <literal role="rfc2119">must</literal> be assumed by Reading Systems as the global value if no
                                <markup>meta</markup> element carrying this property occurs in the <markup>metadata</markup>
                            section.</para>
                    </section>

                    <section xml:id="fxl-property-orientation-values">
                        <title>Allowed values</title>

                        <para>The following values are defined for use with the <property>rendition:orientation</property>
                            property:</para>

                        <variablelist>
                            <varlistentry>
                                <term>landscape</term>
                                <listitem>
                                    <para>The given Rendition is intended for landscape rendering. </para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>portrait</term>
                                <listitem>
                                    <para> The given Rendition is intended for portrait rendering. </para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>auto</term>
                                <listitem>
                                    <para> The given Rendition is not orientation constrained. </para>
                                </listitem>
                            </varlistentry>
                        </variablelist>

                        <para>Reading Systems that support multiple orientations <literal role="rfc2119">should</literal>
                            convey the intended orientation to the user, unless the given value is <code role="value"
                                >auto</code>. The means by which the intent is conveyed is implementation-specific.</para>

                        <bridgehead>Examples</bridgehead>

                        <informalexample xml:id="fxl-ex2">
                            <para>The following example demonstrates fully fixed-layout content intended to be rendered
                                without synthetic spreads, and locked to landscape orientation.</para>
                            <synopsis><xi:include href="./examples/publications/fxl-02a.xml" parse="text"/></synopsis>
                        </informalexample>
                    </section>

                    <section xml:id="fxl-property-orientation-overrides">
                        <title>Spine Overrides</title>

                        <para xml:id="property-orientation-local">The <property
                                xlink:href="../../vocab/package/epub-vocab-package.html#orientation-landscape"
                                >rendition:orientation-landscape</property>, <property
                                xlink:href="../../vocab/package/epub-vocab-package.html#orientation-portrait"
                                >rendition:orientation-portrait</property> and <property
                                xlink:href="../../vocab/package/epub-vocab-package.html#orientation-auto"
                                >rendition:orientation-auto</property> properties <xref linkend="refEPUBPackageVocab"/>
                            <literal role="rfc2119">may</literal> be specified locally on spine <markup
                                linkend="elemdef-spine-itemref">itemref</markup> elements, and will, in such cases, override
                            the <link linkend="property-orientation-global">global value</link> for the given spine
                            item.</para>
                    </section>
                </section>

                <section xml:id="fxl-property-spread">
                    <title>The <property>rendition:spread</property> Property</title>

                    <section xml:id="fxl-property-spread-usage">
                        <title>Usage</title>

                        <para xml:id="property-spread-global">When the <property>rendition:spread</property> property is
                            specified on a <markup>meta</markup> element, it indicates that the intended <olink
                                targetdoc="spec" targetptr="gloss-synthetic-spread" type="epub-spec"/> behavior applies
                            globally for the given Rendition (i.e., for all spine items).</para>

                        <para>The default value <code role="value">auto</code>
                            <literal role="rfc2119">must</literal> be assumed by Reading Systems as the global value if no
                                <markup>meta</markup> element carrying this property occurs in the <markup>metadata</markup>
                            section.</para>
                    </section>

                    <section xml:id="fxl-property-spread-values">
                        <title>Allowed values</title>

                        <para>The following values are defined for use with the <property>rendition:spread</property>
                            property:</para>

                        <variablelist>
                            <varlistentry>
                                <term>none</term>
                                <listitem>
                                    <para>Reading Systems <literal role="rfc2119">must not</literal> incorporate spine items
                                        in a Synthetic Spread. </para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>landscape</term>
                                <listitem>
                                    <para> Reading Systems <literal role="rfc2119">should</literal> render a Synthetic Spread
                                        for spine items only when the device is in landscape orientation. </para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>portrait</term>
                                <listitem>
                                    <para>Reading Systems <literal role="rfc2119">should</literal> render a Synthetic Spread
                                        for spine items only when the device is in portrait orientation.</para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>both</term>
                                <listitem>
                                    <para>Reading Systems <literal role="rfc2119">should</literal> render a Synthetic Spread
                                        regardless of device orientation.</para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>auto</term>
                                <listitem>
                                    <para>No explicit Synthetic Spread behavior is defined. Reading Systems <literal
                                            role="rfc2119">may</literal> use Synthetic Spreads in specific or all device
                                        orientations as part of a display area utilization optimization process.</para>
                                </listitem>
                            </varlistentry>
                        </variablelist>

                        <note>
                            <para>When Synthetic Spreads are used in the context of XHTML and SVG Content Documents, the
                                dimensions given via the <olink targetdoc="contentdocs" targetptr="sec-fxl-icb-xhtml"
                                    type="epub-spec">viewport meta element</olink> and <olink targetdoc="contentdocs"
                                    targetptr="sec-fxl-icb-svg" type="epub-spec">viewBox attribute</olink> represents the
                                size of one page in the spread, respectively.</para>
                        </note>

                        <note>
                            <para>Refer to <xref linkend="sec-spine-elem"/> for information about declaration of global flow
                                directionality using the <markup>page-progression-direction</markup> attribute and that of
                                local page-progression-direction within content documents. </para>
                        </note>

                        <bridgehead>Examples</bridgehead>

                        <informalexample xml:id="fxl-ex3">
                            <para>The following example demonstrates fully fixed-layout content intended to be rendered using
                                synthetic spreads in landscape orientation, and with no spreads in portrait
                                orientation.</para>
                            <synopsis><xi:include href="./examples/publications/fxl-03a.xml" parse="text"/></synopsis>
                        </informalexample>

                        <informalexample xml:id="fxl-ex4">
                            <para>The following example demonstrates reflowable content with a single fixed-layout title
                                page, where the fixed-layout page is intended for right-hand spread slot if the device
                                renders Synthetic Spreads.</para>
                            <synopsis><xi:include href="./examples/publications/fxl-04a.xml" parse="text"/></synopsis>
                        </informalexample>
                    </section>

                    <section xml:id="fxl-property-spread-overrides">
                        <title>Spine Overrides</title>

                        <para xml:id="property-spread-local">The <property
                                xlink:href="../../vocab/package/epub-vocab-package.html#spread-landscape"
                                >rendition:spread-landscape</property>, <property
                                xlink:href="../../vocab/package/epub-vocab-package.html#spread-portrait"
                                >rendition:spread-portrait</property>, <property
                                xlink:href="../../vocab/package/epub-vocab-package.html#spread-both"
                                >rendition:spread-both</property>, <property
                                xlink:href="../../vocab/package/epub-vocab-package.html#spread-auto"
                                >rendition:spread-auto</property> and <property
                                xlink:href="../../vocab/package/epub-vocab-package.html#spread-none"
                                >rendition:spread-none</property> properties <xref linkend="refEPUBPackageVocab"/>
                            <literal role="rfc2119">may</literal> be specified locally on spine <markup
                                linkend="elemdef-spine-itemref">itemref</markup> elements, and will, in such cases, override
                            the <link linkend="property-spread-global">global value</link> for the given spine item.</para>
                    </section>
                </section>

                <section xml:id="fxl-properties-page-spread">
                    <title>The <property>page-spread-*</property> Properties</title>

                    <para>When a Reading System renders a <olink targetdoc="spec" targetptr="gloss-synthetic-spread"
                            type="epub-spec"/>, the default behavior is to populate the spread by rendering the next <olink
                            targetdoc="spec" targetptr="gloss-content-document-epub" type="epub-spec"/> in the next available
                        unpopulated viewport, where the next available viewport is determined by the given <link
                            linkend="sec-spine-elem">page progression direction</link> or by local declarations within
                        Content Documents. By providing one of the <property
                            xlink:href="../../vocab/package/epub-vocab-package.html#page-spread-left"
                            >page-spread-left</property>, <property
                            xlink:href="../../vocab/package/epub-vocab-package.html#page-spread-right"
                            >page-spread-right</property> or <property
                            xlink:href="../../vocab/package/epub-vocab-package.html#page-spread-left"
                            >rendition:page-spread-center</property> properties <xref linkend="refEPUBPackageVocab"/> on a
                        spine <markup>itemref</markup> element, an Author <literal role="rfc2119">may</literal> override this
                        automatic population behavior by forcing that document to be placed in a particular viewport. </para>

                    <para>The <property>page-spread-left</property> property indicates that the given spine item <literal
                            role="rfc2119">should</literal> be rendered in the left-hand slot in the spread, and
                            <property>page-spread-right</property> that it <literal role="rfc2119">should</literal> be
                        rendered in the right-hand slot. The <property>rendition:page-spread-center</property> property
                        indicates that the synthetic spread mode <literal role="rfc2119">should</literal> be overridden and a
                        single viewport rendered and positioned at the center of the screen.</para>

                    <para>The <property>page-spread-left</property>, <property>page-spread-right</property> and
                            <property>rendition:page-spread-center</property> properties apply to both pre-paginated and
                        reflowable content, and they only apply when the Reading System is creating Synthetic Spreads.</para>

                    <para>The <property>page-spread-*</property> properties take precedence over whatever value of the <xref
                            linkend="refCSS21"/>
                        <property>page-break-before</property> property has been set for an <olink targetdoc="spec"
                            targetptr="gloss-content-document-epub-xhtml" type="epub-spec"/>.</para>

                    <note>
                        <para>The presence of <property>rendition:page-spread-center</property> does not change the viewport
                            dimensions. In particular, it does not indicate that a viewport with the size of the whole spread
                            should be created. This is important so that the scale factor stays consistent between regular
                            and center-spread pages.</para>
                    </note>

                    <para>When a <link linkend="def-layout-reflowable">reflowable</link> spine item follows a <link
                            linkend="def-layout-pre-paginated">pre-paginated</link> one, the reflowable one <literal
                            role="rfc2119">should</literal> start on the next page (as defined by the <link
                            linkend="attrdef-spine-page-progression-direction"
                            ><markup>page-progression-direction</markup></link>) when it lacks a
                            <property>page-spread-*</property> property value. If the reflowable spine item has a
                            <property>page-spread-*</property> specification, it <literal role="rfc2119">must</literal> be
                        honored (e.g., by inserting a blank page).</para>

                    <para>Similarly, when a pre-paginated spine item follows a reflowable one, the pre-paginated one <literal
                            role="rfc2119">should</literal> start on the next page (as defined by the
                            <markup>page-progression-direction</markup>) when it lacks a <property>page-spread-*</property>
                        property value. If the pre-paginated spine item has a <property>page-spread-*</property>
                        specification, it <literal role="rfc2119">must</literal> be honored (e.g., by inserting a blank
                        page).</para>

                    <bridgehead>Examples</bridgehead>

                    <informalexample xml:id="fxl-ex5">
                        <para>The following example demonstrates reflowable content with a two-page fixed-layout center plate
                            that is intended to be rendered using synthetic spreads in any device orientation.</para>
                        <synopsis><xi:include href="./examples/publications/fxl-05a.xml" parse="text"/></synopsis>
                        <para>Note that the author has left spread behavior for the other (reflowable) parts of the <olink
                                targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/> undefined, since the global
                            value of <property>rendition:spread</property> is initialized to <code role="value">auto</code>
                            by default.</para>
                    </informalexample>

                    <informalexample xml:id="fxl-ex6">
                        <para>The following example demonstrates fixed-layout content, where synthetic spreads, when used,
                            must be disabled for a center plate.</para>
                        <synopsis><xi:include href="./examples/publications/fxl-06a.xml" parse="text"/></synopsis>
                        <para>Note that the <property>rendition:spread</property> declaration <code role="value">none</code>
                            expression is not needed on the center plate item, as the
                                <property>rendition:page-spread-center</property> property already specifies semantics that
                            dictates that synthetic spreads be disabled.</para>
                    </informalexample>
                </section>

                <section xml:id="fxl-property-viewport" xreflabel="rendition:viewport property">
                    <title>The <property>rendition:viewport</property> Property</title>

                    <para>The <link xlink:href="../../vocab/package/epub-vocab-package.html#viewport"
                                ><property>rendition:viewport</property> property</link>
                        <xref linkend="refEPUBPackageVocab"/> allows Authors to express the CSS initial containing block
                        (ICB) <xref linkend="refCSS21"/> for XHTML and SVG Content Documents whose <link
                            xlink:href="../../vocab/package/epub-vocab-package.html#layout"
                                ><property>rendition:layout</property> property</link>
                        <xref linkend="refEPUBPackageVocab"/> has been set to <code role="value">pre-paginated</code>.</para>

                    <para>The value of the property <literal role="rfc2119">must</literal> be of the form:</para>

                    <informalexample>
                        <programlisting>width=x, height=y</programlisting>
                    </informalexample>

                    <para>where <code role="var">x</code> and <code role="var">y</code>
                        <literal role="rfc2119">must</literal> be the height and width of the ICB in CSS pixels <xref
                            linkend="refCSS21"/>, respectively. The order in which the values are expressed is not
                        significant.</para>

                    <para>The <property>rendition:viewport</property> property does not replace the required ICB expression
                        mechanisms defined in <olink targetdoc="contentdocs" targetptr="sec-fixed-layouts" type="epub-spec"
                        />; the property serves as a complement to facilitate Reading System optimization of the rendering.
                        The dimensions expressed in the content and the dimensions expressed in the package metadata <literal
                            role="rfc2119">must</literal> match.</para>

                    <para xml:id="property-viewport-global">When the <property>rendition:viewport</property> property is
                        specified on a <markup>meta</markup> element without a <markup linkend="attrdef-meta-refines"
                            >refines</markup> attribute, it defines the ICB globally for the <olink targetdoc="spec"
                            targetptr="gloss-epub-publication" type="epub-spec"/> (i.e., for all pre-paginated XHTML and SVG
                        Content Documents).</para>

                    <para xml:id="fxl-property-viewport-local">When the <property>rendition:viewport</property> property is
                        specified on a <markup>meta</markup> element with a <markup>refines</markup> attribute, it indicates
                        the content dimensions apply only to the referenced XHTML or SVG Content Document, overriding the
                        global value (if set). The <markup>refines</markup> attribute <literal role="rfc2119">must</literal>
                        reference the spine <markup linkend="elemdef-spine-itemref">itemref</markup> that references the
                        XHTML or SVG Content Document when this property has been set; it <literal role="rfc2119">must
                            not</literal> reference manifest <markup>item</markup> elements directly.</para>

                    <para>Reading Systems <literal role="rfc2119">must</literal> ignore this property when it is applied to
                        spine items whose <property>rendition:layout</property> property has not been set to <code
                            role="value">pre-paginated</code>. Reading Systems <literal role="rfc2119">must</literal> also
                        ignore this property on spine items that are not XHTML or SVG Content Documents.</para>

                    <bridgehead>Examples</bridgehead>

                    <informalexample xml:id="property-viewport-ex1">
                        <para>The following example demonstrates how to set the dimensions for all spine items, overriding
                            only a cover.</para>
                        <synopsis><xi:include href="./examples/publications/viewport-01.xml" parse="text"/></synopsis>
                    </informalexample>
                </section>
            </section>
        </section>
    </chapter>

    <chapter xml:id="sec-package-nav">
        <title>EPUB Navigation Document</title>

        <section xml:id="sec-package-nav-intro" conformance="informative">
            <title>Introduction</title>

            <para>The EPUB Navigation Document is a <link linkend="sec-package-content-conformance-nav">mandatory
                    component</link> of an <olink targetdoc="spec" targetptr="gloss-epub-package" type="epub-spec"/>. It
                provides the <olink targetdoc="spec" targetptr="gloss-author" type="epub-spec"/> with a mechanism to include
                a human- and machine-readable global navigation layer, thereby ensuring increased usability and accessibility
                for the <olink targetdoc="spec" targetptr="gloss-user" type="epub-spec"/>.</para>

            <para>The EPUB Navigation Document is an adaptation of <olink targetdoc="spec"
                    targetptr="gloss-content-document-epub-xhtml" type="epub-spec"/> and is, <link
                    linkend="confreq-cd-nav-docprops-parent">by definition</link>, a valid XHTML Content Document instance.
                All Content and Reading System conformance requirements that apply to XHTML Content Documents also apply to
                the EPUB Navigation Document.</para>

            <para>The navigation features of this adaptation are expressed through specializations of the <xref
                    linkend="refHTML5"/>
                <markup xlink:href="http://www.w3.org/TR/html5/sections.html#the-nav-element">nav</markup> element. Each
                    <markup>nav</markup> element in an EPUB Navigation Document represents a data island—an embedded source
                of specialized information within the general markup—from which Reading Systems can retrieve navigational
                information. Unlike typical XML data islands, however, the information within the <markup>nav</markup>
                element remains human readable as an <xref linkend="refHTML5"/> document.</para>

            <para>To facilitate machine readability, the content model of <markup>nav</markup> elements in EPUB Navigation
                Documents is restricted relative to what is allowed in general XHTML Content Documents.</para>

            <para>Note that the navigation document is not exclusively for machine processing. Formulating the document as an
                XHTML Content Document enables its reuse in the linear reading order, avoiding the creation of additional
                tables of contents (i.e., it can also be added to the <olink targetdoc="packages"
                    targetptr="elemdef-opf-spine" type="epub-spec"/>). The visual display of components defined in the
                navigation document can be controlled using the <link linkend="sec-package-nav-def-hidden">hidden</link>
                attribute, which has no effect outside of spine rendering (i.e., hiding a component from rendering in the
                spine does not hide it from Reading System presentation in a custom control).</para>

            <para>When designing a navigation document for such dual use, however, be aware that machine extraction of the
                content can result in loss of formatting control. Scripting, styling and other HTML formatting can be
                stripped by a Reading System as it generates a custom control, such as the table of contents, from the
                markup. If such formatting and functionality is used, then the Navigation Document also needs to be included
                in the linear reading order. Another design consideration is to to use <olink targetdoc="contentdocs"
                    targetptr="confreq-cd-scripted-spine" type="epub-spec">progressive enhancement</olink> techniques for
                scripting and styling of the navigation document, such that that the content will retain its integrity when
                rendered in a non-browser context.</para>

            <note xml:id="note-ncx-cdoc">
                <para>The EPUB Navigation Document supersedes the NCX document type as defined in <xref linkend="refOPF2"
                    />.</para>
                <para>Information on how to include an NCX document for EPUB 2 Reading System forwards compatibility purposes
                    is provided in <xref linkend="ncx-superseded"/>.</para>
            </note>
        </section>

        <section xml:id="sec-package-nav-content-conf" xreflabel="EPUB Navigation Documents — Content Conformance">
            <title>Content Conformance</title>

            <para>A conformant <olink targetdoc="spec" targetptr="gloss-content-document-epub-nav" type="epub-spec"/>
                <literal role="rfc2119">must</literal> meet all of the following criteria:</para>

            <variablelist role="conformance-list" xml:id="confreq-cd-nav">
                <varlistentry xml:id="confreq-cd-nav-docprops">
                    <term>Document Properties</term>
                    <listitem>
                        <para xml:id="confreq-cd-nav-docprops-parent">It <literal role="rfc2119">must</literal> conform to
                            all content conformance constraints for <olink targetdoc="spec"
                                targetptr="gloss-content-document-epub-xhtml" type="epub-spec"/>s as defined in <olink
                                targetdoc="contentdocs" targetptr="sec-xhtml-conf-content" type="epub-spec"/>.</para>
                        <para xml:id="confreq-cd-nav-docprops-schema">It <literal role="rfc2119">must</literal> conform to
                            all content conformance constraints specific for EPUB Navigation Documents expressed in <xref
                                linkend="sec-package-nav-def"/>.</para>
                        <para xml:id="confreq-cd-nav-docprops-spine">As a conforming XHTML Content Document, it <literal
                                role="rfc2119">may</literal> be included in the <xref linkend="sec-spine-elem"/>. </para>
                    </listitem>
                </varlistentry>
            </variablelist>
        </section>

        <section xml:id="sec-package-nav-rs-conf" xreflabel="EPUB Navigation Documents — Reading System Conformance">
            <title>Reading System Conformance</title>

            <para>A conformant <olink targetdoc="spec" targetptr="gloss-epub-reading-system" type="epub-spec"/>
                <literal role="rfc2119">must</literal> meet all of the following criteria for processing <olink
                    targetdoc="spec" targetptr="gloss-content-document-epub-nav" type="epub-spec"/>s:</para>

            <itemizedlist role="conformance-list" xml:id="xhtml-nav-rs-confreqs">
                <listitem>
                    <para xml:id="confreq-nav-access">When requested by a User, Reading Systems <literal role="rfc2119"
                            >must</literal> provide access to the links and link labels in <link
                            linkend="sec-package-nav-def-types">the <markup>nav</markup> elements</link> of the EPUB
                        Navigation Document in a fashion that allows the User to activate the links provided. When a link is
                        activated, the Reading System <literal role="rfc2119">must</literal> relocate the application's
                        current reading position to the destination identified by that link.</para>
                </listitem>
                <listitem>
                    <para xml:id="confreq-nav-spine">Reading Systems <literal role="rfc2119">must</literal> honor the above
                        requirement irrespective of whether the EPUB Navigation Document is part of the <xref
                            linkend="sec-spine-elem"/>.</para>
                </listitem>

            </itemizedlist>
        </section>

        <section xml:id="sec-package-nav-def">
            <title>EPUB Navigation Document Definition</title>

            <section xml:id="sec-package-nav-def-model">
                <title>The <markup>nav</markup> Element: Restrictions</title>
                <para>When a <markup>nav</markup> element carries the <markup><olink targetdoc="contentdocs"
                            targetptr="sec-xhtml-content-type-attribute" type="epub-spec">epub:type</olink></markup>
                    attribute in an <olink targetdoc="spec" targetptr="gloss-content-document-epub-nav" type="epub-spec"/>,
                    this specification restricts the content model of the element and its descendants as follows:</para>

                <itemizedlist role="conformance-list">
                    <listitem>
                        <para xml:id="confreq-nav-hd">Each <markup>nav</markup> element <literal role="rfc2119">may</literal>
                            contain an optional heading indicating the title of the navigation list. The heading <literal
                                role="rfc2119">must</literal> be an <link
                                xlink:href="http://www.w3.org/TR/html5/dom.html#heading-content">HTML5 heading content</link>
                            element.</para>
                    </listitem>
                    <listitem>
                        <para xml:id="confreq-nav-ol">The optional heading <literal role="rfc2119">must</literal> be followed
                            by a single <markup xlink:href="http://www.w3.org/TR/html5/grouping-content.html#the-ol-element"
                                >ol</markup> ordered list; no other elements are permitted as direct children of the
                                <markup>nav</markup> element. This ordered list represents the primary level of content
                            navigation.</para>
                    </listitem>
                    <listitem>
                        <para xml:id="confreq-nav-a">Each list item (<markup
                                xlink:href="http://www.w3.org/TR/html5/grouping-content.html#the-li-element">li</markup>) of
                            the ordered list represents a primary heading, structure or other point of interest within the
                            given <olink targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/> and <literal
                                role="rfc2119">must</literal> contain either a child <markup
                                xlink:href="http://www.w3.org/TR/html5/text-level-semantics.html#the-a-element">a</markup>
                            element or a child <markup
                                xlink:href="http://www.w3.org/TR/html5/text-level-semantics.html#the-span-element"
                                >span</markup> element. The <markup>a</markup> element describes the target that the link
                            points to. The <markup>span</markup> element serves as a heading for breaking down lists into
                            distinct groups (for example, a large list of illustrations can be segmented into several lists,
                            one for each chapter).</para>
                    </listitem>
                    <listitem>
                        <para xml:id="confreq-nav-a-cnt">The child <markup>a</markup> or <markup>span</markup> element of the
                            list item <literal role="rfc2119">may</literal> contain any valid <link
                                xlink:href="http://www.w3.org/TR/html5/rendering.html#phrasing-content-0">HTML5 phrasing
                                content</link>, but <literal role="rfc2119">must</literal> provide a non zero-length text
                            label after concatenation of all child content and application of whitespace normalization rules.
                            Although non-textual descendant elements <literal role="rfc2119">may</literal> be rendered
                            directly to Users, text content included in <markup>title</markup> or <markup>alt</markup>
                            attributes <literal role="rfc2119">must</literal> be used when determining compliance with this
                            requirement.</para>
                    </listitem>
                    <listitem xml:id="confreq-nav-a-title">
                        <para>If an <markup>a</markup> or <markup>span</markup> element contains instances of <link
                                xlink:href="http://www.w3.org/TR/html5/embedded-content-0.html#embedded-content-0">HTML5
                                embedded content</link> that do not provide intrinsic text alternatives, the element <literal
                                role="rfc2119">must</literal> also include a <markup>title</markup> attribute with an
                            alternate text rendering of the link label.</para>
                    </listitem>
                    <listitem>
                        <para xml:id="confreq-nav-a-href">The relative IRI reference provided in the <markup>href</markup>
                            attribute of the <markup>a</markup> element <literal role="rfc2119">must</literal> resolve to an
                                <olink targetdoc="spec" targetptr="gloss-content-document-epub" type="epub-spec"/> or
                            fragment therein.</para>
                    </listitem>
                    <listitem>
                        <para xml:id="confreq-nav-a-nest">The <markup>a</markup> element <literal role="rfc2119"
                                >may</literal> optionally be followed by an <markup>ol</markup> ordered list representing a
                            subsidiary content level below that heading (e.g., all the subsection headings of a section). The
                                <markup>span</markup> element <literal role="rfc2119">must</literal> be followed by an
                                <markup>ol</markup> ordered list; it cannot be used in "leaf" <markup>li</markup> elements.
                            Regardless of whether an <markup>a</markup> or <markup>span</markup> element precedes it, every
                            sublist <literal role="rfc2119">must</literal> adhere to all the content requirements defined in
                            this section for constructing the primary navigation list.</para>
                    </listitem>
                </itemizedlist>

                <para>IDPF specifications <literal role="rfc2119">may</literal> introduce further restrictions on the content
                    model defined above for <markup>nav</markup> elements in the EPUB Navigation Document.</para>

                <para xml:id="confreq-nav-ol-style">In the context of this specification, the default display style of list
                    items within <markup>nav</markup> elements <literal role="rfc2119">must</literal> be equivalent to the
                        <xref linkend="refCSS21"/>
                    <property>list-style: none</property> property. Reading Systems <literal role="rfc2119">must
                        not</literal> show list item numbering on these lists regardless of their support for CSS. <olink
                        targetdoc="spec" targetptr="gloss-author" type="epub-spec">Authors</olink>
                    <literal role="rfc2119">may</literal> specify alternative list item styles using CSS for rendering of the
                    document in the <markup linkend="sec-spine-elem">spine</markup>.</para>

                <informalexample>
                    <para>The following example shows a partial <property>lot</property> ("list of tables")
                            <markup>nav</markup> element, with <markup>span</markup> elements used as link-less headings for
                        grouping the sublists.</para>
                    <synopsis><xi:include href="./examples/contentdocs-nav/grouped-list.xml" parse="text"/></synopsis>
                </informalexample>
            </section>

            <section xml:id="sec-package-nav-def-types">
                <title>The <markup>nav</markup> Element: Types</title>

                <section xml:id="sec-package-nav-def-types-intro" conformance="informative">
                    <title>Introduction</title>

                    <para>The <markup>nav</markup> elements defined in an EPUB Navigation Document are distinguished
                        semantically by the value of their <markup><olink targetdoc="contentdocs"
                                targetptr="attrdef-epub-type" type="epub-spec">epub:type</olink></markup> attribute. By
                            <olink targetdoc="contentdocs" targetptr="sec-contentdocs-default-vocab" type="epub-spec"
                            >default</olink>, these values are drawn from the EPUB 3 Structural Semantics Vocabulary <xref
                            linkend="refEPUBStructureVocab"/>, but values drawn from other vocabularies are also
                        allowed.</para>

                    <para>This specification defines three types of navigation aid:</para>

                    <variablelist>
                        <varlistentry>
                            <term><markup linkend="sec-nav-toc">toc</markup></term>
                            <listitem>
                                <para>Identifies the <markup>nav</markup> element that contains the table of contents.</para>
                            </listitem>
                        </varlistentry>
                        <varlistentry>
                            <term><markup linkend="sec-nav-pagelist">page-list</markup></term>
                            <listitem>
                                <para>Identifies the <markup>nav</markup> element that contains a list of pages for a print
                                    or other statically-paginated source for the <olink targetdoc="spec"
                                        targetptr="gloss-epub-publication" type="epub-spec"/>.</para>
                            </listitem>
                        </varlistentry>
                        <varlistentry>
                            <term><markup linkend="sec-nav-landmarks">landmarks</markup></term>
                            <listitem>
                                <para>Identifies the <markup>nav</markup> element that contains a list of points of
                                    interest.</para>
                            </listitem>
                        </varlistentry>
                    </variablelist>

                    <para>Additional navigation types can be defined by <link linkend="sec-package-nav-def-types-other"
                            >extending</link> the <markup>epub:type</markup> attribute.</para>
                </section>

                <section xml:id="sec-nav-toc">
                    <title>The <property>toc</property>
                        <markup>nav</markup> Element</title>

                    <para>The <property>toc</property>
                        <markup>nav</markup> element defines the primary navigational hierarchy of the given <olink
                            targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/>. It conceptually corresponds to a
                        table of contents in a printed work (i.e., it provides navigation to the major structural sections of
                        the publication).</para>

                    <para>For usability and accessibility reasons, <olink targetdoc="spec" targetptr="gloss-author"
                            type="epub-spec">Authors</olink>
                        <literal role="rfc2119">should</literal> provide a comprehensive table of contents: the
                            <property>toc</property>
                        <markup>nav</markup>
                        <literal role="rfc2119">should not</literal> exclude references based solely on their nesting depth
                        within the document hierarchy, as is often the case in print works (particularly in reduced tables of
                        contents).</para>

                    <para>In the case of Renditions that exclusively reference <olink targetdoc="spec"
                            targetptr="gloss-content-document-epub-xhtml" type="epub-spec">XHTML Content Documents</olink>
                        from their <link linkend="sec-spine-elem">spines</link>, the <property>toc</property>
                        <markup>nav</markup> will typically correspond to the aggregation of <link
                            xlink:href="http://www.w3.org/TR/html5/sections.html#headings-and-sections">HTML5 outlines</link>
                        of those documents (excluding any subtrees that do not contribute to the primary outline).</para>

                    <para>The order of <markup>li</markup> elements contained within the <property>toc</property>
                        <markup>nav</markup> element <literal role="rfc2119">must</literal> match the order of the targeted
                        elements within each <link linkend="confreq-nav-a-href">targeted EPUB Content Document</link>, and
                            <literal role="rfc2119">must</literal> also follow the order of Content Documents in the
                        Rendition's <olink targetdoc="spec" targetptr="gloss-spine" type="epub-spec"/>.</para>

                    <para>The <property>toc</property>
                        <markup>nav</markup> element <literal role="rfc2119">must</literal> occur exactly once in an EPUB
                        Navigation Document.</para>

                    <note>
                        <para>The <property>toc</property>
                            <markup>nav</markup> element corresponds to the <markup>navMap</markup> element in the superseded
                            NCX <xref linkend="refOPF2"/>.</para>
                    </note>

                    <!--<note>
                            <para>When <olink targetdoc="spec" targetptr="gloss-content-document-epub-xhtml" type="epub-spec"/>s are used
                                in the Publication <olink targetdoc="spec" targetptr="gloss-spine" type="epub-spec"/>, authoring tools
                                <literal role="rfc2119">may</literal> utilize the <link
                                    xlink:href="http://www.w3.org/TR/html5/Overview.html#outlines"
                                    >HTML5 document outline algorithm</link> to generate the
                                    <literal>toc</literal>
                                <markup>nav</markup> element contents. Note, however, that when the spine
                                includes multiple Content Documents, the <literal>toc</literal>
                                <markup>nav</markup> element contains navigation information that spans
                                across multiple outlines (the full table of contents aggregates
                                outlines obtained from several XHTML Content Documents).</para>
                        </note>-->

                </section>

                <section xml:id="sec-nav-pagelist">
                    <title>The <property>page-list</property>
                        <markup>nav</markup> Element</title>

                    <para>The <property>page-list</property>
                        <markup>nav</markup> element is a container for pagination information. It provides navigation to
                        positions in the content that correspond to the locations of page boundaries present in a print
                        source being represented by the <olink targetdoc="spec" targetptr="gloss-epub-publication"
                            type="epub-spec"/>.</para>

                    <para>The <property>page-list</property>
                        <markup>nav</markup> element is <literal role="rfc2119">optional</literal> in EPUB Navigation
                        Documents and <literal role="rfc2119">must not</literal> occur more than once. </para>

                    <para> The order of <markup>li</markup> elements contained within a <property>page-list</property>
                        <markup>nav</markup> structure <literal role="rfc2119">must</literal> match the order of the actual
                        pages inside each <link linkend="confreq-nav-a-href">targeted EPUB Content Document</link> and
                            <literal role="rfc2119">must</literal> also follow the order of Content Documents in the <olink
                            targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/>'s <xref linkend="sec-spine-elem"
                        />. </para>

                    <para>The <property>page-list</property>
                        <markup>nav</markup> element <literal role="rfc2119">should</literal> contain only a single
                            <markup>ol</markup> descendant (i.e., no nested sublists). </para>

                    <note>
                        <para>The <property>page-list</property>
                            <markup>nav</markup> element corresponds to the <markup>pageList</markup> element in the
                            superseded NCX. <xref linkend="refOPF2"/></para>
                    </note>

                    <note>
                        <para>The <olink targetdoc="packages" targetptr="sec-opf-dcsource" type="epub-spec"/> element
                            provides a means of identifying the source publication to which the given pagination information
                            applies.</para>
                    </note>
                </section>

                <section xml:id="sec-nav-landmarks">
                    <title>The <property>landmarks</property>
                        <markup>nav</markup> Element</title>

                    <para>The <property>landmarks</property>
                        <markup>nav</markup> element identifies fundamental structural components in the given <olink
                            targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/> in order to enable Reading
                        Systems to provide the <olink targetdoc="spec" targetptr="gloss-user" type="epub-spec"/> efficient
                        access to them.</para>

                    <para>The <olink targetdoc="contentdocs" targetptr="sec-xhtml-content-type-attribute" type="epub-spec"
                            >epub:type</olink> attribute is <literal role="rfc2119">required</literal> on <markup>a</markup>
                        element descendants of the <property>landmarks</property>
                        <markup>nav</markup> element. The structural semantics of each link target within the
                            <property>landmarks</property>
                        <markup>nav</markup> element is determined by the value of this attribute.</para>

                    <para xml:id="nav-landmarks-htu-extend">The <property>landmarks</property>
                        <markup>nav</markup> element extends the suggested <link
                            xlink:href="http://www.idpf.org/epub/vocab/structure/#htu-expl">HTML context</link> of terms from
                        the <link linkend="refEPUBStructureVocab">EPUB Structural Semantics Vocabulary</link> to include the
                            <markup>a</markup> element. </para>

                    <informalexample>
                        <para>The following example shows a <property>landmarks</property>
                            <markup>nav</markup> element with structural semantics drawn from the <link
                                linkend="refEPUBStructureVocab">EPUB Structural Semantics Vocabulary</link>.</para>
                        <synopsis><xi:include href="./examples/contentdocs-nav/landmarks.xml" parse="text"/></synopsis>
                    </informalexample>

                    <para>The <property>landmarks</property>
                        <markup>nav</markup> element is <literal role="rfc2119">optional</literal> in EPUB Navigation
                        Documents and <literal role="rfc2119">must not</literal> occur more than once. </para>

                    <note>
                        <para>The <property>landmarks</property>
                            <markup>nav</markup> element corresponds to the deprecated OPF <markup>guide</markup> element.
                            Refer to <olink targetdoc="packages" targetptr="sec-guide-elem" type="epub-spec"/> for more
                            information. </para>
                    </note>
                </section>

                <section xml:id="sec-package-nav-def-types-other">
                    <title>Other <markup>nav</markup> Elements</title>

                    <para>EPUB Navigation Documents optionally <literal role="rfc2119">may</literal> include one or more
                            <markup>nav</markup> elements in addition to the <property>toc</property>,
                            <property>page-list</property> and <property>landmarks</property>
                        <markup>nav</markup> elements defined above. Such additional <markup>nav</markup> elements <literal
                            role="rfc2119">should</literal> have an <markup>epub:type</markup> attribute to provide a
                        machine-readable semantic and <literal role="rfc2119">must</literal> have a human-readable heading as
                        their first child.</para>

                    <para>This specification imposes no restrictions on the semantics of such additional <markup>nav</markup>
                        elements: they <literal role="rfc2119">may</literal> be used to represent navigational semantics for
                        any information domain, and they <literal role="rfc2119">may</literal> contain link targets with
                        homogeneous or heterogeneous semantics.</para>

                </section>
            </section>

            <section xml:id="sec-package-nav-def-hidden">
                <title>The <markup>hidden</markup> attribute</title>

                <para>In some cases, <olink targetdoc="spec" targetptr="gloss-author" type="epub-spec">Authors</olink> might
                    wish to hide parts of the navigation data within the content flow (i.e., the Reading System's principal
                    rendering of the <olink targetdoc="spec" targetptr="gloss-spine" type="epub-spec"/> contents). A typical
                    example is the <link linkend="sec-nav-pagelist">list of page breaks</link>, which usually isn't rendered
                    as part of the content flow but is instead exposed to the <olink targetdoc="spec" targetptr="gloss-user"
                        type="epub-spec"/> separately in a dedicated navigation user interface.</para>

                <para> While the <xref linkend="refCSS21"/>
                    <property>display</property> property can be used to control the visual rendering of EPUB Navigation
                    Documents in Reading Systems with <olink targetdoc="spec" targetptr="gloss-viewport-css" type="epub-spec"
                        >Viewports</olink>, not all Reading Systems provide such an interface. To control rendering across
                    all Reading Systems, authors <literal role="rfc2119">must</literal> use the <xref linkend="refHTML5"/>
                    <markup xlink:href="http://www.w3.org/TR/html5/editing.html#the-hidden-attribute">hidden</markup>
                    attribute to indicate which (if any) portions of the navigation data are excluded from rendering in the
                    content flow. The <markup>hidden</markup> attribute has no effect on how navigation data is rendered
                    outside of the content flow (such as in dedicated navigation user interfaces provided by Reading
                    Systems).</para>

                <informalexample>
                    <para>The following example shows a partial <property>page-list</property>
                        <markup>nav</markup> element. The presence of the <markup>hidden</markup> attribute on the root
                        indicates that the entire list is excluded from rendering in the content flow.</para>
                    <synopsis><xi:include href="./examples/contentdocs-nav/page-list.xml" parse="text"/></synopsis>
                </informalexample>

                <informalexample>
                    <para>The following example shows a partial <property>toc</property>
                        <markup>nav</markup> element where the <markup>hidden</markup> attribute is used to limit content
                        flow rendering to the two topmost hierarchical levels.</para>
                    <synopsis><xi:include href="./examples/contentdocs-nav/toc.xml" parse="text"/></synopsis>
                </informalexample>

            </section>
        </section>
    </chapter>

    <appendix xml:id="app-package-schema">
        <title>Package Document Schema</title>
        <para>The schema for Package Documents is available at <link
                xlink:href="http://www.idpf.org/epub/31/schema/package-30.nvdl"
                >http://www.idpf.org/epub/31/schema/package-30.nvdl</link>.</para>
        <para>Validation using this schema requires a processor that supports <xref linkend="refNVDL"/>, <xref
                linkend="refRelaxNG"/>, <xref linkend="refISOSchematron"/> and <xref linkend="refXSDDatatypes"/>.</para>
        <note>
            <para>The NVDL schema layer can be substituted by a multi-pass validation using the embedded RELAX NG and ISO
                Schematron schemas alone.</para>
        </note>
    </appendix>

    <appendix xml:id="app-media-type-app-oebps-package" conformance="informative">
        <title>The <code role="media-type">application/oebps-package+xml</code> Media Type</title>
        <para>This appendix registers the media type <code role="media-type">application/oebps-package+xml</code> for the
            EPUB Package Document. This registration supersedes <xref linkend="refRFC4839"/>.</para>

        <para>The Package Document is an XML file that describes a Rendition of an EPUB Publication. It identifies the
            resources in the Rendition and provides metadata information. The Package Document and its related standards are
            maintained and defined by the International Digital Publishing Forum (IDPF).</para>

        <variablelist>
            <varlistentry>
                <term>MIME media type name:</term>
                <listitem>
                    <para><code role="media-type">application</code></para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term>MIME subtype name:</term>
                <listitem>
                    <para><code role="media-type">oebps-package+xml</code></para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term>Required parameters:</term>
                <listitem>
                    <para>None.</para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term>Optional parameters:</term>
                <listitem>
                    <para>None.</para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term>Encoding considerations:</term>
                <listitem>
                    <para>Package Documents are UTF-8 or UTF-16 encoded XML.</para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term>Security considerations:</term>
                <listitem>
                    <para>Package Documents contain well-formed XML conforming to the XML 1.0 specification.</para>

                    <para>Clearly, it is possible to author malicious files which, for example, contain malformed data. Most
                        XML parsers protect themselves from such attacks by rigorously enforcing conformance.</para>

                    <para>All processors that read Package Documents should rigorously check the size and validity of data
                        retrieved.</para>

                    <para>There is no current provision in the EPUB Publications 3.0 standard for encryption, signing, or
                        authentication within the Package Document format.</para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term>Interoperability considerations:</term>
                <listitem>
                    <para>None.</para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term>Published specification:</term>
                <listitem>
                    <para>This media type registration is for the EPUB Package Document, as described by the EPUB
                        Publications 3.0 specification located at <link
                            xlink:href="http://www.idpf.org/epub/30/spec/epub30-publications.html"
                            >http://www.idpf.org/epub/30/spec/epub30-publications.html</link>.</para>
                    <para>The EPUB Publications 3.0 specification supersedes the Open Packaging Format 2.0.1 specification,
                        which is located at <link xlink:href="http://www.idpf.org/epub/20/spec/OPF_2.0.1_draft.htm"
                            >http://www.idpf.org/epub/20/spec/OPF_2.0.1_draft.htm</link> and which also uses the <code
                            role="media-type">application/oepbs-package+xml</code> media type.</para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term>Applications which use this media type:</term>
                <listitem>
                    <para>This media type is in wide use for the distribution of ebooks in the EPUB format. The following
                        list of applications is not exhaustive.</para>
                    <itemizedlist>
                        <listitem>
                            <para>Adobe Digital Editions</para>
                        </listitem>
                        <listitem>
                            <para>Aldiko</para>
                        </listitem>
                        <listitem>
                            <para>Azardi</para>
                        </listitem>
                        <listitem>
                            <para>Apple iBooks</para>
                        </listitem>
                        <listitem>
                            <para>Barnes &amp; Noble Nook</para>
                        </listitem>
                        <listitem>
                            <para>Calibre</para>
                        </listitem>
                        <listitem>
                            <para>Google Books</para>
                        </listitem>
                        <listitem>
                            <para>Ibis Reader</para>
                        </listitem>
                        <listitem>
                            <para>MobiPocket reader</para>
                        </listitem>
                        <listitem>
                            <para>Sony Reader</para>
                        </listitem>
                        <listitem>
                            <para>Stanza</para>
                        </listitem>
                    </itemizedlist>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term>Additional information:</term>
                <listitem>
                    <variablelist>
                        <varlistentry>
                            <term>Magic number(s):</term>
                            <listitem>
                                <para>none</para>
                            </listitem>
                        </varlistentry>
                        <varlistentry>
                            <term>File extension(s):</term>
                            <listitem>
                                <para><filename>.opf</filename></para>
                            </listitem>
                        </varlistentry>
                        <varlistentry>
                            <term>Macintosh File Type Code(s):</term>
                            <listitem>
                                <para>TEXT</para>
                            </listitem>
                        </varlistentry>
                        <varlistentry>
                            <term>Fragment Identifiers:</term>
                            <listitem>
                                <para>The IDPF maintains a registry of linking schemes at <uri
                                        xlink:href="http://www.idpf.org/epub/linking/"
                                        >http://www.idpf.org/epub/linking/</uri>. Some of these schemes define custom
                                    fragment identifiers that resolve to <code role="media-type"
                                        >application/oebps-package+xml</code> documents.</para>
                            </listitem>
                        </varlistentry>
                    </variablelist>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term>Person &amp; email address to contact for further information:</term>
                <listitem>
                    <para>William McCoy, <link xlink:href="mailto:bmccoy@idpf.org">bmccoy@idpf.org</link></para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term>Intended usage:</term>
                <listitem>
                    <para>COMMON</para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term>Author/Change controller:</term>
                <listitem>
                    <para>International Digital Publishing Forum (<link xlink:href="http://www.idpf.org"
                            >http://www.idpf.org</link>)</para>
                </listitem>
            </varlistentry>
        </variablelist>
    </appendix>

    <xi:include href="./share/contributors.xml"/>

    <xi:include href="./share/references.xml"/>
</book>
