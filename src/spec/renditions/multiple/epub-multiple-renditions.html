<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
	<head>
		<title>EPUB Multiple-Rendition Publications 1.0</title>
		<meta charset="utf-8" />
		<link rel="stylesheet" href="../../css/epub-spec.css" />
	</head>
	<body>
		<h1 class="title">EPUB Multiple-Rendition Publications 1.0</h1>
		<p class="identity">
			<span class="releaseinfo">Proposed Specification</span>
			<span class="pubdate">8 July 2015</span>
		</p>
		<p>Updated to address issues raised during review.</p>
		<dl class="printhistory">
			<dt>This version:</dt>
			<dd>
				<a class="link" href="http://www.idpf.org/epub/renditions/multiple/epub-multiple-renditions-20150708.html">http://www.idpf.org/epub/renditions/multiple/epub-multiple-renditions-20150708.html</a>
			</dd>
			<dt>Latest version:</dt>
			<dd>
				<a class="link" href="http://www.idpf.org/epub/renditions/multiple/">http://www.idpf.org/epub/renditions/multiple/</a>
			</dd>
			<dt>Previous version:</dt>
			<dd>
				<a class="link" href="http://www.idpf.org/epub/renditions/multiple/epub-multiple-renditions-20141202.html">http://www.idpf.org/epub/renditions/multiple/epub-multiple-renditions-20141202.html</a>
			</dd>
		</dl>
		<p class="errata">Please refer to the <a href="http://www.idpf.org/epub/renditions/multiple/errata/">errata</a> for this document, which may include some normative corrections.</p>
		<div class="legal">
			<p class="copyright">Copyright © 2012-2015 International Digital Publishing Forum™</p>
			<div class="legalnotice" title="Legal Notice" id="legalnotice">
				<p>All rights reserved. This work is protected under Title 17 of the United States Code. Reproduction and dissemination of this work with changes is prohibited except with the written permission of the <a class="link" href="http://www.idpf.org">International Digital Publishing Forum (IDPF)</a>. </p>
				<p>EPUB is a registered trademark of the International Digital Publishing Forum.</p>
			</div>
		</div>
		<div class="authorgroup">
			<p class="bridgehead">Editors</p>
			<p class="editor">Jim Lester, Barnes &amp; Noble</p>
			<p class="editor">Takeshi Kanai, Sony</p>
			<p class="editor">Matt Garrish, Invited Expert</p>
			<p class="bridgehead">Authors</p>
			<p class="editor">Garth Conboy, Google</p>
			<p class="editor">Brady Duga, Google</p>
			<p class="editor">Hadrien Gardeur, Feedbooks</p>
			<p class="editor">Brady Kroupa, Barnes &amp; Noble</p>
			<p class="editor">MURATA Makoto, JEPA</p>
			<p class="editor">Edward O’Connor, Apple</p>
		</div>
		<h2>Status of this Document</h2>
		<p>This document is in proposed recommendation status and is made available for final IDPF membership review.</p>
		<div class="toc">
			<h2>Table of Contents</h2>
			<ol>
				<li>
					<a href="#sec-1">1. Overview</a>
					<ol>
						<li>
							<a href="#sec-1.1">1.1 Purpose and Scope</a>
						</li>
						<li>
							<a href="#sec-1.2">1.2 Relationship to Other Specifications</a>
							<ol>
								<li>
									<a href="#sec-1.2.1">1.2.1 Relationship to OCF 3.0.1</a>
								</li>
								<li>
									<a href="#sec-1.2.2">1.2.2 Relationship to Publications 3.0.1</a>
								</li>
							</ol>
						</li>
						<li>
							<a href="#sec-1.3">1.3 Terminology</a>
						</li>
						<li>
							<a href="#sec-1.4">1.4 Conformance Statements</a>
						</li>
					</ol>
				</li>
				<li>
					<a href="#sec-2">2. Publication Metadata</a>
					<ol>
						<li>
							<a href="#sec-2.1">2.1 The metadata.xml File</a>
						</li>
						<li>
							<a href="#sec-2.2">2.2 Vocabulary Association Mechanisms</a>
						</li>
						<li>
							<a href="#sec-2.3">2.3 Release Identifier</a>
							<ol>
								<li>
									<a href="#sec-2.3.1">2.3.1 Introduction</a>
								</li>
								<li>
									<a href="#sec-2.3.2">2.3.2 Expressing</a>
								</li>
							</ol>
						</li>
					</ol>
				</li>
				<li>
					<a href="#sec-3">3. Rendition Selection</a>
					<ol>
						<li>
							<a href="#sec-3.1">3.1 Introduction</a>
						</li>
						<li>
							<a href="#sec-3.2">3.2 Content Conformance</a>
						</li>
						<li>
							<a href="#sec-3.3">3.3 Reading System Conformance</a>
						</li>
						<li>
							<a href="#sec-3.4">3.4 Rendition Selection Attributes</a>
							<ol>
								<li>
									<a href="#sec-3.4.1">3.4.1 The rendition:media attribute</a>
								</li>
								<li>
									<a href="#sec-3.4.2">3.4.2 The rendition:layout attribute</a>
								</li>
								<li>
									<a href="#sec-3.4.3">3.4.3 The rendition:language attribute</a>
								</li>
								<li>
									<a href="#sec-3.4.4">3.4.4 The rendition:accessMode attribute</a>
								</li>
								<li>
									<a href="#sec-3.4.5">3.4.5 The rendition:label attribute</a>
								</li>
							</ol>
						</li>
						<li>
							<a href="#sec-3.5">3.5 Processing Model</a>
						</li>
					</ol>
				</li>
				<li>
					<a href="#sec-4">4. Rendition Mapping</a>
					<ol>
						<li>
							<a href="#sec-4.1">4.1 Introduction</a>
						</li>
						<li>
							<a href="#sec-4.2">4.2 Content Conformance</a>
						</li>
						<li>
							<a href="#sec-4.3">4.3 Reading System Conformance</a>
						</li>
						<li>
							<a href="#sec-4.4">4.4 EPUB Rendition Mapping Document Definition</a>
							<ol>
								<li>
									<a href="#sec-4.4.1">4.4.1 XHTML Content Document: Restrictions</a>
								</li>
								<li>
									<a href="#sec-4.4.2">4.4.2 The nav Element: Modifications and Restrictions</a>
								</li>
								<li>
									<a href="#sec-4.4.3">4.4.3 Rendition Mappings</a>
								</li>
								<li>
									<a href="#sec-4.4.4">4.4.4 Container Identification</a>
								</li>
							</ol>
						</li>
						<li>
							<a href="#sec-4.5">4.5 Processing Model</a>
						</li>
					</ol>
				</li>
				<li>
					<a href="#app-a">Appendix A. Schemas</a>
					<ol>
						<li>
							<a href="#app-a.1">A.1 Metadata.xml Schema</a>
						</li>
						<li>
							<a href="#app-a.2">A.2 Container.xml Schema</a>
						</li>
						<li>
							<a href="#app-a.3">A.3 Mapping Document Schema</a>
						</li>
					</ol>
				</li>
				<li>
					<a href="#app-b">Appendix B. Acknowledgements and Contributors</a>
				</li>
				<li>
					<a href="#refs">References</a>
					<ol>
						<li>
							<a href="#refs-norm">Normative References</a>
						</li>
					</ol>
				</li>
			</ol>
		</div>
		<h2 class="title" id="sec-1">1. Overview</h2>
		<h3 class="title" id="sec-1.1">1.1 Purpose and Scope</h3>
		<p class="informative">This section is informative</p>
		<p>This specification, EPUB Multiple-Rendition Publications, defines the creation and rendering of EPUB® Publications consisting of more than one Rendition.</p>
		<p>The need to include more than one Rendition of the content in an EPUB Publication has grown as Reading Systems have evolved and become more sophisticated. While some measure of content adaptation has always been possible at the style sheet level, it is both limited in what it can accomplish and limited to content rendering. Existing fallback mechanisms within the EPUB Package Document similarly only ensure that resources can be rendered.</p>
		<p>Adaptation is not just about optimizing styling and positioning content for screen considerations, such as dimensions and color or Reading System orientation, but often involves changing the content itself. The resources and markup required to render a fixed-layout Rendition of an EPUB Publication may overlap with a reflowable version of the same, but the two are never exactly the same. Adaptation also involves adapting the prose of a work. In an increasingly interconnected world, including multiple translations of a work rather than bundling them all separately as single-language EPUB Publications is often a necessity. And adaptation is also about the ability to move from the same spot in one Rendition to the equivalent spot in another as changes in the reading environment occur.</p>
		<p>This specification does not define methods for modifying content on the fly, but defines how a Reading System selects from multiple Author-provided Renditions of the content to best match the current device characteristics and User preferences. As changes occur to device orientation or the User's preferred reading modality, for example, the Reading System will be able to check for a better Rendition and seamlessly present it to the User using the functionality defined herein.</p>
		<p>The specification addresses each of the major requirements in the discovery of, selection of, and mapping between, multiple Renditions of an EPUB Publication. In particular:</p>
		<ul>
			<li>the establishment of a unique identifier common to all the Renditions in the <code class="markup">META-INF/metadata.xml</code> file;</li>
			<li>the selection of Renditions through a set of attributes that can be attached to <code class="markup">rootfile</code> elements in the Container Document;</li>
			<li>the optional ability to move from a point in one Rendition to the same location in another by means of a mapping document.</li>
		</ul>
		<p>Taken together, these features enable the creation of advanced Multiple-Rendition Publications that Reading Systems can adapt to changing User needs.</p>
		<h3 class="title" id="sec-1.2">1.2 Relationship to Other Specifications</h3>
		<h4 class="title" id="sec-1.2.1">1.2.1 Relationship to OCF 3.0.1</h4>
		<p>The method for including multiple Renditions within an OCF Container <a href="#id.9uw9cc5fs51w">[OCF301]</a> defined in this specification is not a requirement for the production of compliant EPUB Publications. Multiple Renditions <span class="rfc2119">may</span> be included in a Container without adhering to this specification, as the ability to create multiple-Rendition Containers pre-dates this specification.</p>
		<p>It is strongly <span class="rfc2119">recommended</span> that all future needs for multiple Renditions in a Container follow this specification. Existing implementations that utilize other methods for selecting from multiple Renditions are also encouraged to consider migrating to use this specification to improve the overall interoperability of Multiple-Rendition Publications.</p>
		<h4 class="title" id="sec-1.2.2">1.2.2 Relationship to Publications 3.0.1</h4>
		<p>Some of the <a href="#sec-3.4">Rendition selection attributes</a> defined in this specification share common names with Package Document elements and properties <a href="#id.6r1wfqzacfia">[Publications301]</a> as they are designed to reflect that information for selection purposes.</p>
		<p>Despite this commonality, this specification does not enforce equivalence between the Rendition selection properties expressed on a <code class="markup">rootfile</code> element <a href="#id.9uw9cc5fs51w">[OCF301]</a> and the metadata expressed in the corresponding Package Document, as direct equivalence is not always possible.</p>
		<p>For example, a multilingual EPUB Publication will define more than one <a href="http://www.idpf.org/epub/301/spec/epub-publications.html#sec-opf-dclanguage">DCMES <code class="markup">language</code> element</a> <a href="#id.6r1wfqzacfia">[Publications301]</a> ‒ one for each language ‒ but for Rendition selection only the primary language is defined. Likewise, the language defined in the Package Document could include a specific region code, but for selection purposes the Author might identify only the language code.</p>
		<p>The reason for common metadata in both locations is to simplify the selection process: including attributes avoids the requirement to parse each referenced Package Document and allows for expressions of primacy that aren't possible at the package level. It also avoids collisions and ambiguities between metadata being used for different purposes (selection versus rendering).</p>
		<p>The selection properties defined in the <a href="http://www.idpf.org/epub/301/spec/epub-ocf.html#sec-container-metainf-container.xml"><code class="markup">container.xml</code> file</a> <a href="#id.9uw9cc5fs51w">[OCF301]</a> have no rendering behaviors attached to them, either. For example, indicating that a Rendition is fixed layout in the <a href="#sec-3.4.2"><code class="markup">rendition:layout</code> attribute</a> does not trigger fixed layout rendering behaviors within the specified Rendition.</p>
		<p>A Reading System renders a Rendition according to the metadata expressed in the Package Document only.</p>
		<h3 class="title" id="sec-1.3">1.3 Terminology</h3>
		<p class="italic">Refer to the <a href="http://idpf.org/epub/301/">EPUB Specifications</a> for definitions of EPUB-specific terminology used in this document.</p>
		<div class="glosslist">
			<dl>
				<dt class="glossentry" id="id.x8crrxpx5fk1">Container Document</dt>
				<dd>
					<p>The <a href="http://www.idpf.org/epub/301/spec/epub-ocf.html#sec-container-metainf-container.xml"><code class="markup">container.xml</code> file</a> located in the child <a href="http://www.idpf.org/epub/301/spec/epub-ocf.html#sec-container-metainf"><code class="markup">META-INF</code> directory</a> of the OCF Container Root Directory <a href="#id.9uw9cc5fs51w">[OCF301]</a>. Each Rendition in the Container is identified by a <code class="markup">rootfile</code> element <a href="#id.9uw9cc5fs51w">[OCF301]</a>.</p>
				</dd>
				<dt class="glossentry" id="id.2gz2o7j76ss6">Multiple-Rendition Publication</dt>
				<dd>
					<p>An EPUB Publication that consists of two or more Renditions of the content.</p>
				</dd>
				<dt class="glossentry" id="id.2i1f9sz8df2h">Rendition Mapping Document</dt>
				<dd>
					<p>A specialization of the XHTML Content Document, containing machine-readable mappings between equivalent content in different Renditions, conforming to the constraints expressed in <a href="#sec-4">Rendition Mapping</a>.</p>
				</dd>
			</dl>
		</div>
		<h3 class="title" id="sec-1.4">1.4 Conformance Statements</h3>
		<p>The keywords <span class="rfc2119">must</span>, <span class="rfc2119">must not</span>, <span class="rfc2119">required</span>, <span class="rfc2119">shall</span>, <span class="rfc2119">shall not</span>, <span class="rfc2119">should</span>, <span class="rfc2119">should not</span>, <span class="rfc2119">recommended</span>, <span class="rfc2119">may</span>, and <span class="rfc2119">optional</span> in this document are to be interpreted as described in <a href="#id.4v706jdntcjd">[RFC2119]</a>.</p>
		<p>All sections of this specification are normative except where identified by the informative status label "This section is informative". The application of informative status to sections and appendices applies to all child content and subsections they may contain.</p>
		<p>All examples in this specification are informative.</p>
		<h2 class="chapter" id="sec-2">2. Publication Metadata</h2>
		<h3 class="title" id="sec-2.1">2.1 The <code class="markup">metadata.xml</code> File</h3>
		<p>To ensure consistency of metadata at the Publication and Rendition levels, this specification defines the content model of the root <code class="markup">metadata</code> element in the <a href="http://www.idpf.org/epub/301/spec/epub-ocf.html#sec-container-metainf-metadata.xml"><code class="markup">metadata.xml</code> file</a> <a href="#id.9uw9cc5fs51w">[OCF301]</a> to be the same as the Package Document <a href="http://www.idpf.org/epub/301/spec/epub-publications.html#elemdef-opf-metadata"><code class="markup">metadata</code> element</a> <a href="#id.6r1wfqzacfia">[Publications301]</a>, with the following differences in syntax and semantics:</p>
		<ul>
			<li>Only a <a href="#sec-2.3">Release Identifier</a> is <span class="rfc2119">required</span>; all other metadata is <span class="rfc2119">optional</span>.</li>
			<li>The obsolete <a href="http://www.idpf.org/epub/301/spec/epub-publications.html#sec-opf-meta-elem">OPF2 <code class="markup">meta</code> element</a> <a href="#id.6r1wfqzacfia">[Publications301]</a> is not allowed.</li>
			<li>The <code class="markup">meta</code> and <code class="markup">link</code> elements are defined in the same namespace as the <code class="markup">metadata</code> root element: <code class="uri"><a href="http://www.idpf.org/2013/metadata">http://www.idpf.org/2013/metadata</a></code></li>
		</ul>
		<ul>
			<li>In order to enable the full expression of metadata in the <code class="markup">metadata.xml</code> file, all attributes allowed on the <a href="http://www.idpf.org/epub/301/spec/epub-publications.html#sec-package-elem"><code class="markup">package</code> element</a> <a href="#id.6r1wfqzacfia">[Publications301]</a> are allowed on the root <code class="markup">metadata</code> element.</li>
		</ul>
		<p>This specification does not define a model for the inheritance of metadata from the Publication level to the Rendition level, as EPUB processing only requires that the default Rendition be recognized by Reading Systems (i.e., reliance on inheritance could result in Reading Systems not locating necessary metadata).</p>
		<div class="note">
			<h4 class="title">note</h4>
			<p>Authors are strongly encouraged to include a complete set of Publication metadata in the default Rendition to ensure cross-compatibility, even when making use of this file.</p>
			<p>Titles, languages and other metadata is often not applicable from one Rendition to another, further complicating the sharing of metadata. No assumption can be made that metadata in the <code class="markup">metadata.xml</code> file is applicable to any given Rendition, whether the metadata is expressed in the Rendition or not.</p>
		</div>
		<div class="note">
			<h4 class="title">note</h4>
			<p>As <a href="#id.9uw9cc5fs51w">[OCF301]</a> does not define a content model for the <code class="markup">metadata.xml</code> file, EPUB Publications that do not conform to this specification can include different metadata. EPUB Publications that are not valid to the schema in <a href="#app-a.1">Appendix A.1</a> are not valid Multiple-Rendition Publications as defined by this specification, but might still be valid EPUB 3.0.1 Publications.</p>
			<p>Authors are strongly encouraged to migrate to the content model defined in this specification, even if not producing Multiple-Rendition Publications, to ensure consistent processing.</p>
		</div>
		<h3 class="title" id="sec-2.2">2.2 Vocabulary Association Mechanisms</h3>
		<p>This specification inherits the mechanisms for associating vocabularies defined in <a href="http://www.idpf.org/epub/301/spec/epub-publications.html#sec-metadata-assoc">4.2 Vocabulary Association Mechanisms</a> <a href="https://docs.google.com/document/d/1w1fdTp_c0kP4L4VYdT7QFst2VG5LPBcwP2w25wKg_SM/edit#bookmark=id.6r1wfqzacfia">[Publications301]</a> as they relate to the Package Document metadata, with only the following modification: the <code class="markup">prefix</code> attribute <span class="rfc2119">may</span> be attached only to the root <code class="markup">metadata</code> element.</p>
		<p><a href="http://www.idpf.org/epub/301/spec/epub-publications.html#sec-metadata-reserved-vocabs">Reserved prefixes</a> <a href="#id.6r1wfqzacfia">[Publications301]</a> for metadata attribute expressions are adopted without change.</p>
		<h3 class="title" id="sec-2.3">2.3 Release Identifier</h3>
		<h4 class="title" id="sec-2.3.1">2.3.1 Introduction</h4>
		<p class="informative">This section is informative</p>
		<p>For reliable processing of EPUB Publications, each needs to be uniquely identifiable. But uniqueness between EPUB Publications is not enough for total reliability, as more than one version of a given EPUB Publication could exist. As a result, it is also necessary to be able to identify and order each release of an EPUB Publication</p>
		<p>To distinguish both these characteristics, the concept of a <a href="http://www.idpf.org/epub/301/spec/epub-publications.html#sec-opf-metadata-identifiers-pid">Release Identifier</a> <a href="#id.6r1wfqzacfia">[Publications301]</a> was introduced in EPUB 3. This identifier is a combination of the Unique Identifier and the last modified date, where the Unique Identifier enables differentiation between EPUB Publications and the last modified date enables differentiation between different versions of the same EPUB Publication.</p>
		<p>The problem with this identifier, however, is that it is unique to each Rendition because it is expressed in the Package Document metadata. For example, the last modification dates for Renditions could be different if minor corrections only were necessary to some of them, and each could have a different Unique Identifier. As a result, it only effectively identifies an EPUB Publication if that EPUB Publication contains only one Rendition.</p>
		<p>Consequently, a new Release Identifier that covers all the Renditions of the EPUB Publication is necessary for Multiple-Rendition Publications, otherwise comparisons are complicated by trying to figure out which Rendition(s) have changed and how to compare them from one release to the next (e.g., if their order in the <a href="http://www.idpf.org/epub/301/spec/epub-ocf.html#sec-container-metainf-container.xml"><code class="markup">container.xml</code> file</a> <a href="#id.9uw9cc5fs51w">[OCF301]</a> changes). This section details how to define such a global Release Identifier.</p>
		<h4 class="title" id="sec-2.3.2">2.3.2 Expressing</h4>
		<p>The <a href="http://www.idpf.org/epub/301/spec/epub-publications.html#sec-opf-metadata-identifiers-pid">Release Identifier</a> <a href="#id.6r1wfqzacfia">[Publications301]</a> for a Multiple-Rendition Publication is expressed in the <a href="http://www.idpf.org/epub/301/spec/epub-ocf.html#sec-container-metainf-metadata.xml"><code class="markup">metadata.xml</code> file</a> <a href="#id.9uw9cc5fs51w">[OCF301]</a> in the same manner as it is in the Package Document:</p>
		<ul>
			<li>A <code class="markup">dc:identifier</code> element <a href="#id.1scc71kxd91i">[DCMES]</a> <span class="rfc2119">must</span> contain the <a href="http://www.idpf.org/epub/301/spec/epub-publications.html#sec-opf-metadata-identifiers-uid">unique identifier</a> <a href="#id.6r1wfqzacfia">[Publications301]</a> for the EPUB Publication.</li>
			<li>A <code class="markup">meta</code> element <a href="#id.6r1wfqzacfia">[Publications301]</a> <span class="rfc2119">must</span> contain the last modified date, expressed using the <code class="markup">dcterms:modified</code> property <a href="#id.7gv9kdw04jc2">[DCTERMS]</a>.</li>
		</ul>
		<p>The identifier <span class="rfc2119">must</span> conform to the requirements for identifiers defined in <a href="http://www.idpf.org/epub/301/spec/epub-publications.html#sec-opf-dcidentifier">3.4.3 The DCMES <code class="markup">identifier</code> Element</a> <a href="#id.6r1wfqzacfia">[Publications301]</a>.</p>
		<p>The value of the <code class="markup">dcterms:modified</code> property must conform to the pattern and rules defined in <a href="http://www.idpf.org/epub/301/spec/epub-publications.html#sec-opf-metadata-identifiers-pid">4.1.2 Release Identifier</a> <a href="#id.6r1wfqzacfia">[Publications301]</a>. Only one <code class="markup">dcterms:modified</code> property without a <a href="http://www.idpf.org/epub/301/spec/epub-publications.html#attrdef-meta-refines"><code class="markup">refines</code> attribute</a> <a href="#id.6r1wfqzacfia">[Publications301]</a> is allowed in the <code class="markup">metadata.xml</code> file.</p>
		<div class="informalexample">
			<p>The following example shows a Release Identifier expressed in the metadata.xml file:</p>
			<pre class="synopsis">&lt;metadata xmlns="http://www.idpf.org/2013/metadata"
          xmlns:dc="http://purl.org/dc/elements/1.1/"
          unique-identifier="pub-id"&gt;
   &lt;dc:identifier id="pub-id"&gt;urn:uuid:A1B0D67E-2E81-4DF5-9E67-A64CBE366809&lt;/dc:identifier&gt;
   &lt;meta property="dcterms:modified"&gt;2011-01-01T12:00:00Z&lt;/meta&gt;
&lt;/metadata&gt;</pre>
		</div>
		<h2 class="chapter" id="sec-3">3. Rendition Selection</h2>
		<h3 class="title" id="sec-3.1">3.1 Introduction</h3>
		<p class="informative">This section is informative</p>
		<p>Although each EPUB Publication represents a single work, it is possible to optimize the rendering of that work in any number of different ways. An issue of a magazine, for example, could include a fixed layout version (print replica) for rendering on tablet-sized screens with a reflowable version for smaller cellphone screens where the fixed layout would be scaled to illegibility (or automatically reflowed in unwanted ways if fixed layouts are not supported).</p>
		<p>The OCF Container allows multiple Renditions of the content to be included in an EPUB Publication, but does not specify how Reading Systems are to determine the unique properties of the Renditions listed in the Container Document, or select between them.</p>
		<p>This section redresses this problem by defining both a set of rendition selection attributes that can be attached to <a href="http://www.idpf.org/epub/301/spec/epub-ocf.html#sec-container-metainf-container.xml"><code class="markup">rootfile</code> elements</a> <a href="#id.9uw9cc5fs51w">[OCF301]</a> in the Container Document and a processing model that allows Authors to specify which Rendition is the best representation depending on various conditions. Reading Systems can then select the appropriate representation from the list of Renditions to match the current configuration and User preferences.</p>
		<h3 class="title" id="sec-3.2">3.2 Content Conformance</h3>
		<p>A Container Document <span class="rfc2119">must</span> meet all of the following criteria:</p>
		<ul class="nomark">
			<li id="confreq-container"><a class="hidden-reveal" title="Link here" href="#confreq-container">›</a> It <span class="rfc2119">must</span> be valid to the definition and requirements for the <code class="markup">container.xml</code> file specified in <a href="http://www.idpf.org/epub/301/spec/epub-ocf.html#sec-container-metainf-container.xml">Container – META-INF/container.xml</a> <a href="#id.9uw9cc5fs51w">[OCF301]</a>.</li>
			<li id="confreq-selection-attr"><a class="hidden-reveal" title="Link here" href="#confreq-selection-attr">›</a> It <span class="rfc2119">may</span> include any of the selection attributes defined in <a href="#id.defwwtk2h8oa">Rendition Selection Attributes</a>.</li>
			<li id="confreq-selection-min"><a class="hidden-reveal" title="Link here" href="#confreq-selection-min">›</a> Inclusion of selection attributes is <span class="rfc2119">optional</span> on the <a href="#id.defwwtk2h8oa"><code class="markup">rootfile</code> element</a>
				<a href="#id.9uw9cc5fs51w">[OCF301]</a> for the Default Rendition, but it <span class="rfc2119">should</span> include at least one selection attribute ‒ in addition to the <span class="rfc2119">optional</span> label ‒ on each subsequent <code class="markup">rootfile</code> element.</li>
		</ul>
		<h3 class="title" id="sec-3.3">3.3 Reading System Conformance</h3>
		<p>An EPUB Reading System <span class="rfc2119">must</span> meet all of the following criteria for Rendition selection:</p>
		<ul class="nomark">
			<li id="confreq-rs-processing"><a class="hidden-reveal" title="Link here" href="#confreq-rs-processing">›</a> It <span class="rfc2119">should</span> determine the Rendition to present to a User as defined in <a href="#sec-3.5">3.5 Processing Model</a>.</li>
		</ul>
		<h3 class="title" id="sec-3.4">3.4 Rendition Selection Attributes</h3>
		<h4 class="title" id="sec-3.4.1">3.4.1 The <code class="markup">rendition:media</code> attribute</h4>
		<p>The <code class="markup">rendition:media</code> attribute identifies the media features of a Reading System the given Rendition is best suitable for rendering on.</p>
		<div class="elem-synopsis" id="attrdef-media">
			<dl>
				<dt class="varlistentry"><span class="term">Attribute Name</span></dt>
				<dd>
					<p><code class="markup">media</code></p>
				</dd>
				<dt class="varlistentry"><span class="term">Namespace</span></dt>
				<dd><p><code class="uri">http://www.idpf.org/2013/rendition</code></p></dd>
				<dt class="varlistentry"><span class="term">Usage</span></dt>
				<dd><p><span class="rfc2119">may</span> be specified on Container Document <code class="markup">rootfile</code> elements <a href="#id.9uw9cc5fs51w">[OCF301]</a>.</p></dd>
				<dt class="varlistentry"><span class="term">Value</span></dt>
				<dd><p>A CSS 3 media query <a href="#id.nzphuc65nqcs">[MediaQueries]</a>, where the media type, if specified, <span class="rfc2119">must</span> only be the value "<code class="markup">all</code>".</p></dd>
			</dl>
		</div>
		<p>As per <a href="#id.nzphuc65nqcs">[MediaQueries]</a>, the media query in this attribute <span class="rfc2119">must</span> evaluate to true in order for the given Rendition to be selected for rendering. Media queries that evaluate to “not all” per <a href="http://www.w3.org/TR/css3-mediaqueries/#error-handling">3.1 Error Handling</a> <a href="#id.nzphuc65nqcs">[MediaQueries]</a> <span class="rfc2119">should</span> be treated as false for the purposes of Rendition selection (i.e., the given Rendition is not a valid match).</p>
		<div class="informalexample">
			<p>The following example shows two Renditions of The Sandman bundled in the same container, one optimized for screens 1920 pixels or wider. The Default Rendition will be used for screen sizes smaller than 1920 pixels by default.</p>
			<pre class="synopsis">&lt;container xmlns="urn:oasis:names:tc:opendocument:xmlns:container"
           xmlns:rendition="http://www.idpf.org/2013/rendition"
           version="1.0"&gt;
   &lt;rootfiles&gt;
       &lt;rootfile full-path="Sandman.opf"
           media-type="application/oebps-package+xml"/&gt;
       &lt;rootfile full-path="Sandman-large.opf"
           media-type="application/oebps-package+xml"
            rendition:media="(min-width: 1920px)"/&gt;
   &lt;/rootfiles&gt;
&lt;/container&gt;</pre>
		</div>
		<h4 class="title" id="sec-3.4.2">3.4.2 The <code class="markup">rendition:layout</code> attribute</h4>
		<p>The <code class="markup">rendition:layout</code> attribute indicates whether the given Rendition is reflowable or pre-paginated.</p>
		<div class="elem-synopsis" id="attrdef-layout">
			<dl>
				<dt class="varlistentry"><span class="term">Attribute Name</span></dt>
				<dd>
					<p><code class="markup">layout</code></p>
				</dd>
				<dt class="varlistentry"><span class="term">Namespace</span></dt>
				<dd><p><code class="uri">http://www.idpf.org/2013/rendition</code></p></dd>
				<dt class="varlistentry"><span class="term">Usage</span></dt>
				<dd><p><span class="rfc2119">may</span> be specified on Container Document <code class="markup">rootfile</code> elements <a href="#id.9uw9cc5fs51w">[OCF301]</a>.</p></dd>
				<dt class="varlistentry"><span class="term">Value</span></dt>
				<dd><p>The value of the attribute <span class="rfc2119">must</span> be <code class="markup">reflowable</code> or <code class="markup">pre-paginated</code>.</p></dd>
			</dl>
		</div>
		<p>When specified, the value of this attribute <span class="rfc2119">must</span> match the <a href="http://www.idpf.org/epub/301/spec/epub-publications.html#property-layout-global">global rendition:layout setting</a> <a href="#id.6r1wfqzacfia">[Publications301]</a> for the referenced Rendition.</p>
		<p>If a User layout preference is defined in the Reading System, the attribute evaluates to true if the preference matches the specified value, otherwise it evaluates to false. If no User preference is defined, the Reading System <span class="rfc2119">should</span> ignore the attribute when selecting from the available Renditions.</p>
		<div class="informalexample">
			<p>The following example shows two Renditions of a magazine bundled in the same container. Note that it is not necessary to state that the Default Rendition is reflowable, since Renditions are reflowable by default.</p>
			<pre class="synopsis">&lt;container xmlns="urn:oasis:names:tc:opendocument:xmlns:container"
           xmlns:rendition="http://www.idpf.org/2013/rendition"
           version="1.0"&gt;
   &lt;rootfiles&gt;
       &lt;rootfile full-path="EPUB/reflow/magazine.opf"
           media-type="application/oebps-package+xml"/&gt;
       &lt;rootfile full-path="EPUB/fxl/magazine.opf"
           media-type="application/oebps-package+xml"
           rendition:layout="pre-paginated"/&gt;
    &lt;/rootfiles&gt;
&lt;/container&gt;</pre>
		</div>
		<h4 class="title" id="sec-3.4.3">3.4.3 The <code class="markup">rendition:language</code> attribute</h4>
		<p>The <code class="markup">rendition:language</code> attribute indicates that the given Rendition is optimized for the specified language. </p>
		<div class="elem-synopsis" id="attrdef-language">
			<dl>
				<dt class="varlistentry"><span class="term">Attribute Name</span></dt>
				<dd>
					<p><code class="markup">language</code></p>
				</dd>
				<dt class="varlistentry"><span class="term">Namespace</span></dt>
				<dd><p><code class="uri">http://www.idpf.org/2013/rendition</code></p></dd>
				<dt class="varlistentry"><span class="term">Usage</span></dt>
				<dd><p><span class="rfc2119">may</span> be specified on Container Document <code class="markup">rootfile</code> elements <a href="#id.9uw9cc5fs51w">[OCF301]</a>.</p></dd>
				<dt class="varlistentry"><span class="term">Value</span></dt>
				<dd><p><span class="rfc2119">must</span> contain a valid language code conforming to <a href="#id.2mrux28pdrnn">[RFC5646]</a>.</p></dd>
			</dl>
		</div>
		<p>The <code class="markup">rendition:language</code> attribute more precisely identifies the primary language of a Rendition than does the inclusion of <code class="markup">dc:language</code> elements in the Rendition’s Package Document, as the presence of <code class="markup">dc:language</code> elements only indicates that the specified languages are prominently used in the prose.</p>
		<p>If a User language preference is defined in the Reading System, the attribute evaluates to true if the preference matches the specified value, otherwise it evaluates to false. Several matching schemes are defined in Section 3 of <a href="#id.n9ltxzb8qshz">[RFC4647]</a>. Reading systems can use the most appropriate matching scheme. If no User preference is defined, the Reading System <span class="rfc2119">should</span> ignore the attribute when selecting from the available Renditions.</p>
		<div class="informalexample">
			<p>The following example shows a multilingual EPUB Publication, with English, French and Spanish Renditions of the content.</p>
			<pre class="synopsis">&lt;container xmlns="urn:oasis:names:tc:opendocument:xmlns:container"
           xmlns:rendition="http://www.idpf.org/2013/rendition"
           version="1.0"&gt;
   &lt;rootfiles&gt;
       &lt;rootfile full-path="EPUB/en/package.opf"
           media-type="application/oebps-package+xml"
           rendition:language="en"/&gt;
       &lt;rootfile full-path="EPUB/fr/package.opf"
           media-type="application/oebps-package+xml"
           rendition:language="fr"/&gt;
       &lt;rootfile full-path="EPUB/es/package.opf"
           media-type="application/oebps-package+xml"
           rendition:language="es"/&gt;
   &lt;/rootfiles&gt;
&lt;/container&gt;</pre>
		</div>
		<h4 class="title" id="sec-3.4.4">3.4.4 The <code class="markup">rendition:accessMode</code> attribute</h4>
		<p>The <code class="markup">rendition:accessMode</code> attribute identifies the way in which intellectual content is communicated in a Rendition, and is based on the <a href="#kix.e87agjlkdjfl">[ISO24751-3]</a> "Access Mode" property.</p>
		<div class="elem-synopsis" id="attrdef-accessMode">
			<dl>
				<dt class="varlistentry"><span class="term">Attribute Name</span></dt>
				<dd>
					<p><code class="markup">accessMode</code></p>
				</dd>
				<dt class="varlistentry"><span class="term">Namespace</span></dt>
				<dd><p><code class="uri">http://www.idpf.org/2013/rendition</code></p></dd>
				<dt class="varlistentry"><span class="term">Usage</span></dt>
				<dd><p><span class="rfc2119">may</span> be specified on Container Document <code class="markup">rootfile</code> elements <a href="#id.9uw9cc5fs51w">[OCF301]</a>.</p></dd>
				<dt class="varlistentry"><span class="term">Value</span></dt>
				<dd><p><span class="rfc2119">must</span> be one or more of the values: <code class="markup">auditory</code>, <code class="markup">tactile</code>, <code class="markup">textual</code> or <code class="markup">visual</code></p></dd>
			</dl>
		</div>
		<p>The <code class="markup">rendition:accessMode</code> attribute defines the primary access mode(s) for a given Rendition. For example, although a textual work may include images, audio and video, its primary means of conveying information is the text. Likewise, a visual work might include alternative text and/or descriptions, but these adaptations are not listed as a textual mode for the Rendition for the purpose of selection.</p>
		<p>The way in which information is encoded also needs to be considered when designating an access mode. If a work has text components, or is completely textual in nature, but that content is burned into an image format, the access mode is visual (e.g., character dialogue in a JPEG page of a comic or a scan of a document).</p>
		<p>A rendition <span class="rfc2119">may</span> include more than one primary access mode. For example, the textual version might also embed the auditory version using media overlays. In such cases, the attribute should list each primary access mode that is available.</p>
		<p>If a User access mode preference is defined in the Reading System, the attribute evaluates to true if that preference matches any of the access modes defined in it, otherwise it evaluates to false. If no User preference is defined, the Reading System <span class="rfc2119">should</span> ignore the attribute when selecting from the available Renditions.</p>
		<p>The <a href="#kix.x2qus16eiwp"><code class="markup">rendition:label</code> attribute</a> can be use to inform Users about the nature of the content, particularly where such information is not available, or not yet standardized, for selection. For example, a tactile rendition could indicate the braille code and grade in its label, or a textual rendition could be marked as optimized for text-to-speech rendering, not general use.</p>
		<div class="informalexample">
			<p>The following example shows an EPUB Publication with an image-based Rendition and a text-based serialization available.</p>
			<pre class="synopsis">&lt;container xmlns="urn:oasis:names:tc:opendocument:xmlns:container"
           xmlns:rendition="http://www.idpf.org/2013/rendition"
           version="1.0"&gt;
   &lt;rootfiles&gt;
       &lt;rootfile full-path="EPUB/comic/package.opf"
           media-type="application/oebps-package+xml"
           rendition:accessMode="visual"/&gt;
       &lt;rootfile full-path="EPUB/novel/package.opf"
           media-type="application/oebps-package+xml"
           rendition:accessMode="textual"/&gt;
   &lt;/rootfiles&gt;
&lt;/container&gt;</pre>
		</div>
		<h4 class="title" id="sec-3.4.5">3.4.5 The <code class="markup">rendition:label</code> attribute</h4>
		<p>The <code class="markup">rendition:label</code> attribute allows each <code class="markup">rootfile</code> element <a href="#id.9uw9cc5fs51w">[OCF301]</a> to be annotated with a human-readable name.</p>
		<div class="elem-synopsis" id="attrdef-label">
			<dl>
				<dt class="varlistentry"><span class="term">Attribute Name</span></dt>
				<dd>
					<p><code class="markup">label</code></p>
				</dd>
				<dt class="varlistentry"><span class="term">Namespace</span></dt>
				<dd><p><code class="uri">http://www.idpf.org/2013/rendition</code></p></dd>
				<dt class="varlistentry"><span class="term">Usage</span></dt>
				<dd><p><span class="rfc2119">may</span> be specified on Container Document <code class="markup">rootfile</code> elements <a href="#id.9uw9cc5fs51w">[OCF301]</a>.</p></dd>
				<dt class="varlistentry"><span class="term">Value</span></dt>
				<dd><p>Text.</p></dd>
			</dl>
		</div>
		<p>The <code class="markup">rendition:label</code> attribute provides a name for the given rendition (e.g., for manual rendition selection)<span class="rfc2119">.</span></p>
		<p>The language of the <code class="markup">rendition:label</code> attribute <span class="rfc2119">may</span> be expressed in an <code class="markup">xml:lang</code> attribute.</p>
		<div class="informalexample">
			<p>The following example shows the <code class="markup">rendition:label</code> attribute being used to provide a human-readable name for a Rendition.</p>
			<pre class="synopsis">&lt;container xmlns="urn:oasis:names:tc:opendocument:xmlns:container"
           xmlns:rendition="http://www.idpf.org/2013/rendition"
           version="1.0"
           xml:lang="en"&gt;
   &lt;rootfiles&gt;
        …
       &lt;rootfile full-path="EPUB/package.opf"
           media-type="application/oebps-package+xml"
           rendition:media="color, min-width: 1024"
           rendition:layout="pre-paginated"
           rendition:label="Color-optimized print replica"/&gt;
   &lt;/rootfiles&gt;
&lt;/container&gt;</pre>
		</div>
		<p>The <code class="markup">rendition:label</code> attribute is not a selection attribute for the purposes of evaluating which Rendition to render.</p>
		<h3 class="title" id="sec-3.5">3.5 Processing Model</h3>
		<p>This section describes the method by which Reading Systems locate the optimal Rendition to present to a User.</p>
		<p>Rendition selection <span class="rfc2119">should </span>occur on initial rendering, and Reading Systems <span class="rfc2119">should</span> re-evaluate the selection in response to changes in the User environment (e.g., change in device orientation or viewport size).</p>
		<p>When a change condition is triggered, the Reading System <span class="rfc2119">should</span> evaluate the <code class="markup">rootfile</code> elements <a href="#id.9uw9cc5fs51w">[OCF301]</a> in the Container Document as follows, starting with the last <code class="markup">rootfile</code> entry:</p>
		<ul>
			<li>If rendition namespaced attributes are set, check each attribute per its definition in <a href="#sec-3.4">section 3.4</a> to determine if the specified conditions are true:</li>
		</ul>
		<ul>
			<li>If all conditions evaluate to true, select the given Rendition and exit the selection process.</li>
			<li>If any condition is false, move to the preceding <code class="markup">rootfile</code> element and continue the evaluation process.</li>
			<li>If any unrecognized rendition-namespaced attributes are found, they are ignored for the purposes of evaluating a match.</li>
		</ul>
		<ul>
			<li>If no rendition namespaced attributes are found, move to the preceding <code class="markup">rootfile</code> element and continue the evaluation process.</li>
		</ul>
		<p>If the Default Rendition is reached, select that Rendition and exit the process.</p>
		<div class="note">
			<h4 class="title">note</h4>
			<p>This processing model does not require that the selection process occur on a User's device, or that all Renditions be provided in the Container. Rendition selection could occur on the server side of a cloud-based delivery system, for example, and only a single best-match Rendition sent to the device.</p>
		</div>
		<div class="note">
			<h4 class="title">note</h4>
			<p>Since EPUB 2 Reading Systems, and EPUB 3 Reading Systems that do not support multiple-Rendition selection, will render the Default Rendition, Authors need to consider which Rendition will have the greatest compatibility across Reading Systems and ensure it is listed first.</p>
		</div>
		<p>A Reading System <span class="rfc2119">may</span> provide the User the option to manually select any of the Renditions in the Container. It <span class="rfc2119">should</span> use the <a href="#sec-3.4.5"><code class="markup">rendition:label</code> attribute</a> attribute value to present the option, when available.</p>
		<p>As EPUB did not previously define a Rendition selection model, custom selection models might be encountered in some EPUB Publications. When recognized, these selection models <span class="rfc2119">should</span> be utilized. If both rendition selection attributes conformant to this specification and custom attributes are defined, the latter <span class="rfc2119">should</span> be ignored.</p>
		<h2 class="chapter" id="sec-4">4. Rendition Mapping</h2>
		<h3 class="title" id="sec-4.1">4.1 Introduction</h3>
		<p class="informative">This section is informative</p>
		<p>The Rendition Mapping Document identifies related content locations across the Renditions in a Multiple-Rendition Publication, allowing Reading Systems to switch between Renditions while keeping the User’s place.</p>
		<p>The Rendition Mapping Document is represented as XHTML, and uses <code class="markup">nav</code> elements with unordered lists to group the mappings. There is no display component to the Rendition Mapping Document; it is designed to enable automated switching. The lack of a rendering context means that the XHTML content model for this document is very restrictive, allowing only a single <code class="markup">nav</code> element in the <code class="markup">body</code>, to ease both authoring and processing.</p>
		<p>To enable the mapping of content locations between Renditions, the Rendition Mapping Document’s <code class="markup">nav</code> element consists of a series of one or more unordered lists, each of which represents a common point across all the Renditions (e.g., a chapter, a page or a component within a page). The list items in each unordered list represent the set of equivalent link destinations across the available Renditions for that content (e.g., one link might point to a document representing one page of a fixed layout Rendition, while the equivalent link to a reflowable Rendition might point to the corresponding page break indicator within the XHTML Content Document containing the page).</p>
		<p>Knowing the position of the User in the current Rendition, when a change in context occurs, or is triggered by the User, the Reading System can inspect the sibling list items to determine the EPUB Content Document to load that best meets the new conditions.</p>
		<h3 class="title" id="sec-4.2">4.2 Content Conformance</h3>
		<p>An EPUB Publication <span class="rfc2119">may</span> include an EPUB Rendition Mapping Document.</p>
		<p>A conformant EPUB Rendition Mapping Document <span class="rfc2119">must</span> meet all of the following criteria:</p>
		<p class="bridgehead">Document Properties</p>
		<ul class="nomark">
			<li id="confreq-map-xhtml"><a class="hidden-reveal" title="Link here" href="#confreq-map-xhtml">›</a> It <span class="rfc2119">must</span> conform to all content conformance constraints for XHTML Content Documents as defined in <a href="http://www.idpf.org/epub/301/spec/epub-contentdocs.html#sec-xhtml-conf-content">XHTML Content Documents — Content Conformance</a> <a href="#kix.ueoolc8rbyeo">[ContentDocs301]</a>.</li>
			<li id="confreq-map-content-model"><a class="hidden-reveal" title="Link here" href="#confreq-map-content-model">›</a> It <span class="rfc2119">must</span> conform to all content conformance constraints specific for EPUB Rendition Mapping Documents expressed in <a href="#id.e7urwahfwkon">EPUB Rendition Mapping Document Definition</a>.</li>
		</ul>
		<p class="bridgehead">Publication</p>
		<ul class="nomark">
			<li id="confreq-map-unlisted"><a class="hidden-reveal" title="Link here" href="#confreq-map-unlisted">›</a> It <span class="rfc2119">must not</span> be listed in the Package Document manifest of any of the EPUB Publication’s Renditions.</li>
		</ul>
		<h3 class="title" id="sec-4.3">4.3 Reading System Conformance</h3>
		<p>Reading Systems <span class="rfc2119">should</span> support the use of Rendition Mapping Documents to switch between content. </p>
		<p>If a Reading System supports mapping, it <span class="rfc2119">must</span> meet all of the following criteria:</p>
		<ul class="nomark">
			<li id="confreq-rs-remap"><a class="hidden-reveal" title="Link here" href="#confreq-rs-remap">›</a> When a change in Renditions occurs, it <span class="rfc2119">must</span> locate the current position in the Rendition Mapping Document and load the matching position in the new Rendition.</li>
		</ul>
		<h3 class="title" id="sec-4.4">4.4 EPUB Rendition Mapping Document Definition</h3>
		<h4 class="title" id="sec-4.4.1">4.4.1 XHTML Content Document: Restrictions</h4>
		<p>The Rendition Mapping Document is a compliant EPUB XHTML Content Document, but with the following restrictions on the <a href="#id.jzd50gsqhyoq">[HTML5]</a> content model:</p>
		<ul>
			<li>No attributes are allowed on the <code class="markup">html</code>, <code class="markup">head</code>, <code class="markup">body</code>, <code class="markup">ul</code> and <code class="markup">li</code> elements. (The <code class="markup">xmlns</code> pseudo-attribute for namespace declarations is allowed.) The <code class="markup">nav</code> element only accepts an <code class="markup">epub:type</code> attribute.</li>
			<li>The <code class="markup">head</code> <span class="rfc2119">may</span> contain only <code class="markup">meta</code> elements. Only the <code class="markup">charset</code> attribute or <code class="markup">name</code> and <code class="markup">content</code> attributes <span class="rfc2119">may</span> be attached to the <code class="markup">meta</code> elements.</li>
			<li>The <code class="markup">head</code> <span class="rfc2119">m</span><span class="rfc2119">ust</span> include a <code class="markup">meta</code> element whose <code class="markup">name</code> attribute has the value "<code class="markup">epub.multiple.renditions.version</code>" and whose  <code class="markup">content</code> attribute has the value "<code class="markup">1.0</code>". Reading Systems <span class="rfc2119">may</span> ignore all other <code class="markup">meta</code> elements.</li>
			<li>The <code class="markup">body</code> element <span class="rfc2119">must</span> include exactly one <code class="markup">nav</code> element child whose <code class="markup">epub:type</code> attribute specifies the value "<code class="markup">resource-map</code>", and <span class="rfc2119">may</span> include one or more optional <code class="markup">nav</code> elements. No other <a href="#id.jzd50gsqhyoq">[HTML5]</a> content is allowed as a child of the <code class="markup">body</code>.</li>
		</ul>
		<h4 class="title" id="sec-4.4.2">4.4.2 The nav Element: Modifications and Restrictions</h4>
		<p>This specification restricts the content model of <code class="markup">nav</code> elements and their descendants in the Rendition Mapping Document as follows:</p>
		<ul>
			<li>Each <code class="markup">nav</code> element <span class="rfc2119">must</span> identify its nature in an <code class="markup">epub:type</code> attribute.</li>
			<li>The Rendition Mapping Documents uses unordered lists (<code class="markup">ul</code>) in place of ordered lists (<code class="markup">ol</code>).</li>
			<li>The <code class="markup">nav</code> element <span class="rfc2119">may</span> contain one or more <code class="markup">ul</code> element.</li>
			<li>Each list item (<code class="markup">li</code>) <span class="rfc2119">must</span> contain exactly one <code class="markup">a</code> element (i.e., <code class="markup">span</code> headings and nested lists are forbidden).</li>
			<li><code class="markup">a</code> elements <span class="rfc2119">must</span> be empty.</li>
			<li>The <code class="markup">a</code> element <span class="rfc2119">must</span> specify the rendition it is referring to either:</li>
		</ul>
		<ul>
			<li>by using an <a href="http://www.idpf.org/epub/linking/cfi/#sec-intra-cfis">Intra-Publication CFI</a> as the value of the <code class="markup">href</code> attribute or,</li>
			<li>by having an <code class="markup">epub:rendition</code> attribute whose value is the relative path to the Publication Document for the rendition.</li>
		</ul>
		<h4 class="title" id="sec-4.4.3">4.4.3 Rendition Mappings</h4>
		<p>Each <code class="markup">ul</code> element in the Rendition Mapping Document <code class="markup">resource-map</code> <code class="markup">nav</code> element identifies a content location, listing in its child <code class="markup">li</code> elements where that location is found in each of the available Renditions. Consequently, each <code class="markup">ul</code> element <span class="rfc2119">must</span> contain an <code class="markup">li</code> for each Rendition.</p>
		<div class="note">
			<h5 class="title">note</h5>
			<p>In order to allow a broad variety of use cases, this specification does not impose any particular level of mapping granularity. For example, some publications aimed at language learners may define sentence-level synchronisation points, whereas other types of publications may only map major sections across Renditions.</p>
		</div>
		<p>Each list item in the unordered list <span class="rfc2119">must</span> identify an EPUB Content Document, or a fragment therein, for one of the Renditions ‒ defined in a child <code class="markup">a</code> element. Each of these links <span class="rfc2119">must</span> reference a <a href="http://www.idpf.org/epub/301/spec/epub-publications.html#sec-itemref-elem">linear Top-level Content Document</a> <a href="#id.6r1wfqzacfia">[Publications301]</a>.</p>
		<p>Each <code class="markup">a</code> element <span class="rfc2119">must</span> specify which Rendition it refers to either 1) by including an <a href="http://www.idpf.org/epub/linking/cfi/#sec-intra-cfis">Intra-Publication CFI</a> <a href="#id.41jkr8oqz2ki">[EPUBCFI]</a> in its <code class="markup">href</code> attribute, or 2) by providing the relative path to the Package Document for the Rendition as the value of an <code class="markup">epub:rendition</code> attribute.</p>
		<p>If the <code class="markup">epub:rendition</code> attribute is used to specify the target Rendition, any fragment identifier scheme <span class="rfc2119">may</span> be used within the URI value of the <code class="markup">href</code> attribute of <code class="markup">a</code> elements (e.g., unique identifier, or W3C Media Fragment).</p>
		<div class="note">
			<h5 class="title">note</h5>
			<p>The use of <a href="#id.41jkr8oqz2ki">[EPUBCFI]</a> expressions is strongly encouraged over other fragment identifier schemes (particularly in the context of reflowable XHTML Content Documents), as they allow Reading Systems to ingest Rendition Mappings without any prior pre-processing. Conversely, the use of unique identifiers forces Reading Systems to load the targeted Content Documents and process their DOM in order to sort/compare the link destinations (in relation to document order). This additional processing has performance implications, and implementation costs in terms of caching, incremental updating, etc.</p>
		</div>
		<p>Examples</p>
		<div class="informalexample">
			<p>The following example shows a Rendition Mapping Document for a magazine with 3 Renditions: text, portrait and landscape. ‘article 1’ is on pages 5 and 6 of the fixed layout Renditions and the landscape Rendition uses spreads (non-synthetic).</p>
			<pre class="synopsis">&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
    &lt;head&gt;
        &lt;meta charset="utf-8"/&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;nav epub:type="resource-map"&gt;
            &lt;ul&gt;
             &lt;!-- First Page of the Article 1 --&gt;
                 &lt;li&gt;
                     &lt;a href= "../../text/default.opf#epubcfi(/6/8[article1]!/4/2:20)" /&gt;
                 &lt;/li&gt;
                 &lt;li&gt;
                     &lt;a href="../../images/page5.png"
                        epub:rendition="../../portrait/portrait.opf" /&gt;
                 &lt;/li&gt;
             &lt;/ul&gt;
             &lt;ul&gt;
                 &lt;!-- Second Page of the Article 1 --&gt;
                 &lt;li&gt;
                     &lt;a href= "../../text/default.opf#epubcfi(/6/8[article1]!/4/22:40)" /&gt;
                 &lt;/li&gt;
                 &lt;li&gt;
                     &lt;a href="../../images/page6.png"
                        epub:rendition="../../portrait/portrait.opf" /&gt;
                 &lt;/li&gt;
             &lt;/ul&gt;
             &lt;ul&gt;
                 &lt;!-- Article 1 --&gt;
                 &lt;li&gt;
                     &lt;a href= "../../text/default.opf#epubcfi(/6/8[article1])" /&gt;
                 &lt;/li&gt;
                 &lt;li&gt;
                     &lt;a href="../../images/page5-6.png"
                        epub:rendition="../../landscape/landscape.opf" /&gt;
                 &lt;/li&gt;
             &lt;/ul&gt;
        &lt;/nav&gt;
    &lt;/body&gt;
&lt;/html&gt;</pre>
		</div>
		<div class="informalexample">
			<p>The following example shows a multilingual EPUB Publication with each language in a separate Rendition.</p>
			<pre class="synopsis">&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
    &lt;head&gt;
        &lt;meta charset="utf-8"/&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;nav epub:type="resource-map"&gt;
            &lt;ul&gt;
                &lt;!-- Chapter 1 --&gt;
                &lt;li&gt;&lt;a href = "../../en/en.opf#epubcfi(/6/2)" /&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href = "../../fr/fr.opf#epubcfi(/6/4)" /&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href = "../../de/de.opf#epubcfi(/6/2)" /&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href = "../../es/es.opf#epubcfi(/6/6)" /&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href = "../../it/it.opf#epubcfi(/6/2)" /&gt;&lt;/li&gt;
            &lt;/ul&gt;
            &lt;ul&gt;
                 &lt;!-- Chapter 2 --&gt;
                &lt;li&gt;&lt;a href = "../../en/en.opf#epubcfi(/6/4)" /&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href = "../../fr/fr.opf#epubcfi(/6/6)" /&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href = "../../de/de.opf#epubcfi(/6/4)" /&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href = "../../es/es.opf#epubcfi(/6/8)" /&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href = "../../it/it.opf#epubcfi(/6/6)" /&gt;&lt;/li&gt;
            &lt;/ul&gt;
            &lt;ul&gt;
                &lt;!-- Chapter 3 --&gt;
                &lt;li&gt;&lt;a href = "../../en/en.opf#epubcfi(/6/6)" /&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href = "../../fr/fr.opf#epubcfi(/6/8)" /&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href = "../../de/de.opf#epubcfi(/6/6)" /&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href = "../../es/es.opf#epubcfi(/6/10)" /&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href = "../../it/it.opf#epubcfi(/6/8)" /&gt;&lt;/li&gt;
            &lt;/ul&gt;
            &lt;!-- …  could be even more fine grained for better results … --&gt;
        &lt;/nav&gt;
    &lt;/body&gt;
&lt;/html&gt;</pre>
		</div>
		<h4 class="title" id="sec-4.4.4">4.4.4 Container Identification</h4>
		<p>The location of the Rendition Mapping Document is identified in the Container Document using an <a href="#id.9uw9cc5fs51w">[OCF301]</a> <code class="markup">link</code> element child of the root <code class="markup">container</code> element, where:</p>
		<ul>
			<li>the <code class="markup">href</code> attribute <span class="rfc2119">must</span> reference the location of the Rendition Mapping Document relative to the root of the OCF Container;</li>
			<li>the <code class="markup">rel</code> attribute <span class="rfc2119">must</span> specify the value “<code class="markup">mapping</code>";</li>
			<li>the <code class="markup">media-type</code> attribute <span class="rfc2119">must</span> specify the value “<code class="markup">application/xhtml+xml</code>".</li>
		</ul>
		<p>The Container Document <span class="rfc2119">must not</span> reference more than one mapping document.</p>
		<div class="informalexample">
			<p>The following example shows the <code class="markup">container.xml</code> file for a multilingual EPUB Publication. The location of the Rendition Mapping Document is included in the <code class="markup">link</code> element.</p>
			<pre class="synopsis">&lt;container xmlns="urn:oasis:names:tc:opendocument:xmlns:container"
           xmlns:rendition="http://www.idpf.org/2013/rendition"
           version="1.0"&gt;
   &lt;rootfiles&gt;
       &lt;rootfile full-path="en/en.opf"
           rendition:language="en"
           media-type="application/oebps-package+xml" /&gt;
       &lt;rootfile full-path="de/de.opf"
           rendition:language="de"
           media-type="application/oebps-package+xml" /&gt;
   &lt;/rootfiles&gt;
   &lt;links&gt;
      &lt;link href="renditionMapping.html"
             rel="mapping"
             media-type="application/xhtml+xml" /&gt;
   &lt;/links&gt;
&lt;/container&gt;</pre>
		</div>
		<h3 class="title" id="sec-4.5">4.5 Processing Model</h3>
		<p class="informative">This section is informative</p>
		<p>This section provides an informative model by which the Rendition Mapping Document could be processed by a Reading System. It does not address how or when a Reading System should switch Renditions. </p>
		<p>The desired outcome of the Rendition Mapping Document’s mapping capabilities is to display content in the new Rendition that is equivalent to their location in the current Rendition, so that a user maintains their place during reading. To accomplish this goal, a compliant Reading System could follow these steps to reset the current Rendition when a change condition is triggered:</p>
		<ul>
			<li>First, it would ascertain the position range in the current Rendition:<br /></li>
		</ul>
		<ul>
			<li>For a fixed format Rendition, this will most likely be the rectangle for the current viewport.<br /></li>
			<li>For a reflowable Rendition, this will most likely be the range of text currently shown on the screen.<br /></li>
		</ul>
		<ul>
			<li>Next, it would determine which Rendition to navigate to, as defined in <a href="#sec-3.5">3.5 Processing Model</a>.<br /></li>
			<li>Finally, the Reading System would parse the <code class="markup">ul</code> elements to find ones that contain <code class="markup">li</code> elements with child <code class="markup">a</code> elements that both specify the same rendition and intersect the current range:<br /></li>
		</ul>
		<ul>
			<li>If there is one and only one such <code class="markup">ul</code> element, the Reading System would navigate to the beginning of the range in the new rendition. </li>
		</ul>
		<ul>
			<li>If there is more than one such <code class="markup">ul</code> element, then the Reading System behavior is undefined. The Reading System might prompt the User to select between the new locations, or might choose between them using its own heuristics.<br /></li>
			<li>If no matching <code class="markup">ul</code> elements are found, the Reading System will have to determine the location to navigate to in the new Rendition as if there was no Rendition Mapping Document.</li>
		</ul>
		<p>Note that what happens during navigation is largely a user experience issue, so a Reading System might choose to consider additional information than above to try to achieve a better outcome.</p>
		<h2 class="chapter" id="app-a">Appendix A. Schemas</h2>
		<p>Validation using the schemas in this appendix requires a processor that supports <a href="#id.kwfsqbmri2cf">[RelaxNG]</a> and <a href="#id.5gn7ollob792">[XSD-DATATYPES]</a>.</p>
		<h3 class="title" id="app-a.1">A.1 Metadata.xml Schema</h3>
		<p class="informative">This section is informative</p>
		<p>The schema for including metadata in the <code class="markup">metadata.xml</code> file, as described in <a href="#sec-2">2. Publication Metadata</a>,  is available at <a href="http://www.idpf.org/epub/renditions/multiple/schema/epub-rendition-mapping.rnc">http://www.idpf.org/epub/renditions/multiple/schema/mr-metadata.rnc</a>.</p>
		<h3 class="title" id="app-a.2">A.2 Container.xml Schema</h3>
		<p class="informative">This section is informative</p>
		<p>The schema for including rendition selection attributes in the <code class="markup">container.xml</code> file, as described in <a href="#sec-3">3. Rendition Selection</a>, is available at <a href="http://www.idpf.org/epub/renditions/multiple/schema/epub-rendition-mapping.rnc">http://www.idpf.org/epub/renditions/multiple/schema/mr-container.</a><a href="http://www.idpf.org/epub/renditions/multiple/schema/epub-rendition-mapping.rnc">rnc</a>.</p>
		<h3 id="app-a.3">A.3 Mapping Document Schema</h3>
		<p>The schema for Mapping Documents, as described in <a href="#id.85gy49fkx00z">4. Rendition Mapping</a>, is available at <a href="http://www.idpf.org/epub/renditions/multiple/schema/epub-rendition-mapping.rnc">http://www.idpf.org/epub/renditions/multiple/schema/epub-rendition-mapping.rnc</a>.</p>
		<h2 class="chapter" id="app-b">Appendix B. Acknowledgements and Contributors</h2>
		<p class="informative">This appendix is informative</p>
		<p>EPUB has been developed by the International Digital Publishing Forum in a cooperative effort, bringing together publishers, vendors, software developers, and experts in the relevant standards.</p>
		<p>The EPUB Multiple-Rendition Publications 1.0 specification was prepared by the International Digital Publishing Forum's Advanced/Hybrid Layouts working group, operating under a <a href="http://www.idpf.org/charters/2012/layout/ahl.html">charter</a> approved by the membership in November 2012, under the leadership of:</p>
		<ul class="nomark">
			<li>Kopp, Matthieu (Aquafadas) <span class="italic">Co-Chair</span></li>
			<li>MURATA, Makoto (JEPA) <span class="italic">Co-Chair</span></li>
		</ul>
		<p>Active members of the working group included:</p>
		<p class="bridgehead">IDPF Members</p>
		<ul class="nomark">
			<li>Anaya, Cyril (izneo)</li>
			<li>Audrain, Luc (Hachette Livre)</li>
			<li>Bell, Jeff (Microsoft)</li>
			<li>Berthe, Eric (izneo)</li>
			<li>Chow, King-Wai (ASTRI)</li>
			<li>Conboy, Garth (Google)</li>
			<li>Cramer, Dave (Hachette Book Group)</li>
			<li>Dougherty, Casey (Apple)</li>
			<li>Dovey, Jim (Kobo)</li>
			<li>Duga, Brady (Google)</li>
			<li>Gardeur, Hadrien (Feedbooks)</li>
			<li>Gros, Vincent (Hachette Livre)</li>
			<li>Gylling, Markus (IDPF)</li>
			<li>Heki, Tatsuo (Fujifilm)</li>
			<li>Ikeuchi, Yasuki (ACCESS)</li>
			<li>Ishii, Koji (Rakuten)</li>
			<li>Kanai, Takeshi (Sony)</li>
			<li>Kopp, Matthieu (Aquafadas)</li>
			<li>Kroupa, Brady (B&amp;N)</li>
			<li>Leo, Arthic A E (Amnet Systems Private Ltd)</li>
			<li>Lester, Jim (B&amp;N)</li>
			<li>MURATA, Makoto (JEPA)</li>
			<li>Murata, Masao (Fujifilm)</li>
			<li>Nagai, Seiji (ACCESS)</li>
			<li>Nonaka, Shunichiro (Fujifilm)</li>
			<li>O'Connor, Edward (Apple)</li>
			<li>O'Neill, Paul (Sourcebooks)</li>
			<li>Petit, Samuel (Actialuna)</li>
			<li>Seigel-Laddy, Seth (Scholastic Media)</li>
			<li>Severdia, Ron (Metrodigi)</li>
			<li>So, Youngwan (Samsung)</li>
			<li>Tufis, Mihnea (LIP6)</li>
			<li>White, Clay (OverDrive)</li>
			<li>Wright, Ric (Readium)</li>
		</ul>
		<p class="bridgehead">Invited Experts/Observers</p>
		<ul class="nomark">
			<li>Bonelli, Giuseppe</li>
			<li>Garrish, Matt</li>
		</ul>
		<h2 class="chapter" id="refs">References</h2>
		<h3 class="title" id="refs-norm">Normative References</h3>
		<ul class="nomark ref">
			<li id="kix.ueoolc8rbyeo">[ContentDocs301] <span class="italic"><a href="http://idpf.org/epub/301/spec/epub-contentdocs.html">EPUB Content Documents 3.0.1</a></span></li>
			<li id="id.1scc71kxd91i">[DCMES] <span class="italic"><a href="http://dublincore.org/documents/dces/">Dublin Core Metadata Element Set, Version 1.1</a></span>.</li>
			<li id="id.7gv9kdw04jc2">[DCTERMS] <span class="italic"><a href="http://dublincore.org/documents/dcmi-terms/">DCMI Metadata Terms</a></span>.</li>
			<li id="id.41jkr8oqz2ki">[EPUBCFI] <span class="italic"><a href="http://www.idpf.org/epub/linking/cfi/">EPUB Canonical Fragment Identifier (epubcfi) Specification</a></span>.</li>
			<li id="id.jzd50gsqhyoq">[HTML5] <span class="italic"><a href="http://www.w3.org/TR/html5/">HTML5: A vocabulary and associated APIs for HTML and XHTML</a></span>.</li>
			<li id="kix.e87agjlkdjfl">[ISO24751-3] <a href="http://www.iso.org/iso/catalogue_detail?csnumber=43604">ISO/IEC 24751-3:2008 Information technology -- Individualized adaptability and accessibility in e-learning, education and training -- Part 3: "Access for all" digital resource description</a>.</li>
			<li id="id.nzphuc65nqcs">[MediaQueries] <span class="italic"><a href="http://www.w3.org/TR/css3-mediaqueries/">Media Queries</a></span><span class="italic"> </span>. Florian Rivoal. 19 June 2012.</li>
			<li id="id.9uw9cc5fs51w">[OCF301] <span class="italic"><a href="http://www.idpf.org/epub/301/spec/epub-ocf.html">Open Container Format 3.0.1</a></span>.</li>
			<li id="id.6r1wfqzacfia">[Publications301] <span class="italic"><a href="http://www.idpf.org/epub/301/spec/epub-publications.html">EPUB Publications 3.0.1</a></span>.</li>
			<li id="id.kwfsqbmri2cf">[RelaxNG] <span class="italic"><a href="http://standards.iso.org/ittf/PubliclyAvailableStandards/c052348_ISO_IEC_19757-2_2008(E).zip">ISO/IEC 19757-2: Regular-grammar-based validation — RELAX NG. Second Edition</a></span>. 2008-12-15.</li>
			<li id="id.gpn9tkbef4ld">[RFC2046] <span class="italic"><a href="http://tools.ietf.org/html/rfc2046">Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types</a></span><span class="italic"> (RFC 2046)</span>. N. Freed, N. Borenstein. November 1996.</li>
			<li id="kix.ynibp598ilkh">[RFC2119] <span class="italic"><a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a></span><span class="italic"> (RFC 2119)</span>. March 1997.</li>
			<li id="id.odcxxziwlh4x">[RFC3986] <span class="italic"><a href="http://tools.ietf.org/html/rfc3986">Uniform Resource Identifier (URI): Generic Syntax</a></span><span class="italic"> (RFC 3986)</span>. Berners-Lee, et al. January 2005.</li>
			<li id="id.qxyptzefpr0n">[RFC3987] <span class="italic"><a href="http://tools.ietf.org/html/rfc3987">Internationalized Resource Identifiers (IRIs)</a></span><span class="italic"> (RFC 3987)</span>. M Duerst, et al. January 2005.</li>
			<li id="id.n9ltxzb8qshz">[RFC 4647] <span class="italic"><a href="http://tools.ietf.org/html/rfc4647">Matching of Language Tags</a></span><span class="italic"> (RFC 4647)</span>. A. Phillips, M. Davis. September 2006.</li>
			<li id="id.2mrux28pdrnn">[RFC5646] <span class="italic"><a href="http://tools.ietf.org/html/rfc5646">Tags for Identifying Languages</a></span><span class="italic"> (RFC 5646)</span>. A. Phillips, M. Davis. September 2009.</li>
			<li id="id.dlicc6jqvuox">[XML] <span class="italic"><a href="http://www.w3.org/TR/2008/REC-xml-20081126/">Extensible Markup Language (XML) 1.0 (Fifth Edition)</a></span>. T. Bray, et al. 26 November 2008.</li>
			<li id="id.5gn7ollob792">[XSD-DATATYPES] <span class="italic"><a href="http://www.w3.org/TR/xmlschema-2/">XML Schema Part 2: Datatypes Second Edition</a></span><span class="italic"> </span>. Paul V. Biron et al. 28 October 2004.</li>
		</ul>
	</body>
</html>
