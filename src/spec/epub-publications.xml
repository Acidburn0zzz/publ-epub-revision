<?xml version="1.0" encoding="UTF-8"?>
<?xml-model href="../../util/docbook/schema/docbookspec.rng" type="application/xml" schematypens="http://relaxng.org/ns/structure/1.0"?>
<?xml-model href="../../util/docbook/schema/docbookspec.sch" type="application/xml" schematypens="http://purl.oclc.org/dsdl/schematron"?>
<?xml-model href="../../util/docbook/schema/docbook.sch" type="application/xml" schematypens="http://purl.oclc.org/dsdl/schematron"?>
<book xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"
    xmlns:xi="http://www.w3.org/2001/XInclude" version="5.1" xmlns:epub="http://www.idpf.org/2011/epub">
    <title>EPUB Publications 3.1</title>

    <info>
        <releaseinfo>Editor's Draft</releaseinfo>
        <pubdate>01 January 2016</pubdate>
        <printhistory>
            <formalpara>
                <title>This version</title>
                <para><link xlink:href="http://www.idpf.org/epub/31/spec/epub-publications-20160101.html"/></para>
            </formalpara>
            <formalpara>
                <title>Latest version</title>
                <para><link xlink:href="http://www.idpf.org/epub3/latest/publications"/></para>
            </formalpara>
            <formalpara>
                <title>Previous version</title>
                <para><link xlink:href="http://www.idpf.org/epub/301/spec/epub-publications-20140626.html"/></para>
            </formalpara>
        </printhistory>
        <releaseinfo role="errata"> Please refer to the <link xlink:href="./epub-publications-errata/">errata</link> for this
            document, which may include some normative corrections. </releaseinfo>
        <releaseinfo role="diff">A <link
                xlink:href="https://github.com/IDPF/epub-revision/commits/master/src/spec/epub-publications.xml">history of
                changes</link> to this document is available for review.</releaseinfo>
        <xi:include href="./share/copyright.xml"/>
        <xi:include href="./share/legalnotice.xml"/>
        <authorgroup role="current">
            <editor>
                <personname>Markus Gylling</personname>
                <affiliation>
                    <org>
                        <orgname>International Digital Publishing Forum (IDPF)</orgname>
                    </org>
                </affiliation>
            </editor>
            <editor>
                <personname>William McCoy</personname>
                <affiliation>
                    <org>
                        <orgname>International Digital Publishing Forum (IDPF)</orgname>
                    </org>
                </affiliation>
            </editor>
            <editor>
                <personname>Matt Garrish</personname>
                <affiliation>
                    <org>
                        <orgname>Invited Expert</orgname>
                    </org>
                </affiliation>
            </editor>
            <editor>
                <personname>Elika J. Etemad</personname>
                <affiliation>
                    <org>
                        <orgname>Invited Expert</orgname>
                    </org>
                </affiliation>
            </editor>
        </authorgroup>
        <abstract>
            <title>EPUB Publications 3.0.1</title>
            <para>EPUB is an interchange and delivery format for digital publications based on XML and Web Standards. EPUB 3,
                the third major revision of EPUB, is defined by <link linkend="refEPUB3Overview">a set of specification
                    documents</link> including this document, which defines publication-level semantics and conformance
                requirements for EPUB 3.</para>
        </abstract>
    </info>

    <chapter xml:id="sec-overview">
        <title>Overview</title>

        <section xml:id="sec-overview-purpose-and-scope" conformance="informative">
            <title>Purpose and Scope</title>

            <para>This specification, EPUB 3.1, is a distribution and interchange format standard for digital publications
                and documents. EPUB® defines a means of representing, packaging and encoding structured and semantically
                enhanced Web content — including HTML5, CSS, SVG and other resources — for distribution in a single-file
                format.</para>

            <para>This specification is accompanied by a suite of specifications that define additional technologies that
                enhance the format:</para>

            <itemizedlist xml:id="epub-specs-listing">
                <listitem>
                    <para role="todo">Editor's Note: Demote overview to a purely informative doc?</para>
                </listitem>
                <xi:include href="./share/specdesc-overlays.xml"/>
                <listitem>
                    <para role="todo">TODO -- add defs for consolidated specs</para>
                </listitem>
            </itemizedlist>

            <para>EPUB has been widely adopted as the format for digital books (eBooks), and this specification significantly
                increase the format's capabilities in order to better support a wider range of publication requirements,
                including complex layouts, rich media and interactivity, and global typography features. The expectation is
                that EPUB 3 will be utilized for a broad range of content, including books, magazines and educational,
                professional and scientific publications.</para>

        </section>

        <section xml:id="sec-overview-relations" conformance="informative">

            <title>Relationship to Other Specifications</title>

            <section xml:id="sec-overview-relations-html">
                <title>Relationship to HTML5</title>

                <para>The <link linkend="sec-xhtml">XHTML document type defined by this specification</link> is based on W3C
                        <xref linkend="refHTML5"/>, and inherits all definitions of semantics, structure and processing
                    behaviors from the HTML5 specification unless otherwise specified.</para>

                <para>In addition, this specification <link linkend="sec-xhtml-extensions">defines a set of extensions</link>
                    to the W3C HTML5 document model that <olink targetdoc="spec" targetptr="gloss-author" type="epub-spec"
                        >Authors</olink> may include in <olink targetdoc="spec" targetptr="gloss-content-document-epub-xhtml"
                        >XHTML Content Documents</olink>.</para>

                <para>This specification defines a simplified processing model that does not require <olink targetdoc="spec"
                        targetptr="gloss-epub-reading-system" type="epub-spec">EPUB Reading Systems</olink> to support
                    scripting, HTML5 forms or the HTML5 DOM. Reading Systems conformant with this specification are only
                    required to be able to process a conforming <olink targetdoc="spec"
                        targetptr="gloss-content-document-epub" type="epub-spec"/>. As <link
                        linkend="sec-scripted-content-rs-reqs">support for scripting and HTML5 forms</link> are optional
                    Reading System features, a conformant Reading System might not be a fully-conformant HTML5 User Agent
                    (i.e., it might not implement the complete HTML5 processing model).</para>

            </section>

            <section xml:id="sec-overview-relations-svg">
                <title>Relationship to SVG</title>

                <para>This specification defines <link linkend="sec-svg">a restricted subset of SVG 1.1</link> to represent
                    vector graphics inline in <olink targetdoc="spec" targetptr="gloss-content-document-epub-xhtml"
                        type="epub-spec">XHTML Content Documents</olink> and as standalone <olink targetdoc="spec"
                        targetptr="gloss-content-document-epub-svg" type="epub-spec">SVG Content Documents</olink>. </para>
            </section>

            <section xml:id="sec-overview-relations-css">
                <title>Relationship to CSS</title>
                <para>The <link linkend="sec-css">CSS profile</link> defined in this specification has CSS 2.1 <xref
                        linkend="refCSS21"/> as its baseline. Any CSS Style Sheet that conforms to CSS 2.1 may be used in the
                    context of an EPUB Publication, except as noted in <xref linkend="sec-css-2.1"/>.</para>
                <para>This specification also incorporates features defined by CSS3 Modules and introduces EPUB-specific CSS
                    constructs.</para>
            </section>

            <section xml:id="sec-overview-versioning">
                <title>Future Maintenance</title>
                <para xml:id="sec-overview-versionining">This specification references W3C specifications that are not yet
                    final, and incompatible changes to them may occur in the future that would cause EPUB 3 Content Documents
                    that were previously conformant to no longer be conformant to the latest versions of the referenced
                    specifications.</para>
                <para>The IDPF anticipates revisions to this specification, as necessary, to update the normative constraints
                    defined herein if and when such incompatible changes occur.</para>
            </section>

        </section>

        <xi:include href="./share/terminology.xml"/>

        <xi:include href="./share/typography.xml"/>

        <xi:include href="./share/conformancestatements.xml"/>

        <section xml:id="sec-overview-pfx">
            <title>Prefix mappings</title>
            <para>For convenience, the following prefix mappings are used in this specification.</para>
            <informaltable xml:id="tbl-nspfx">
                <tr>
                    <th class="left">prefix</th>
                    <th class="odd">URI</th>
                </tr>
                <tr>
                    <td class="left">
                        <markup>dcterms</markup>
                    </td>
                    <td class="odd">
                        <uri>http://purl.org/dc/terms/</uri>
                    </td>
                </tr>
                <tr>
                    <td class="left">
                        <markup>epub</markup>
                    </td>
                    <td class="odd">
                        <uri>http://www.idpf.org/2007/ops</uri>
                    </td>
                </tr>
                <tr>
                    <td class="left">
                        <markup>m</markup>
                    </td>
                    <td class="odd">
                        <uri>http://www.w3.org/1998/Math/MathML</uri>
                    </td>
                </tr>
                <tr>
                    <td class="left">
                        <markup>onix</markup>
                    </td>
                    <td class="odd">
                        <uri>http://www.editeur.org/ONIX/book/codelists/current.html#</uri>
                    </td>
                </tr>
                <tr>
                    <td class="left">
                        <markup>pls</markup>
                    </td>
                    <td class="odd">
                        <uri>http://www.w3.org/2005/01/pronunciation-lexicon</uri>
                    </td>
                </tr>
                <tr>
                    <td class="left">
                        <markup>rendition</markup>
                    </td>
                    <td class="odd">
                        <uri>http://www.idpf.org/2013/rendition/#</uri>
                    </td>
                </tr>
                <tr>
                    <td class="left">
                        <markup>ssml</markup>
                    </td>
                    <td class="odd">
                        <uri>http://www.w3.org/2001/10/synthesis</uri>
                    </td>
                </tr>
                <tr>
                    <td class="left">
                        <markup>svg</markup>
                    </td>
                    <td class="odd">
                        <uri>http://www.w3.org/2000/svg</uri>
                    </td>
                </tr>
            </informaltable>

            <note>
                <para>Only <xref linkend="refXMLNamespaces"/> prefixes have to be declared. Refer to the registry of <link
                        linkend="sec-metadata-reserved-vocabs">reserved prefixes</link> for prefix declarations that can be
                    omitted when used in attributes that accept a <link linkend="sec-property-datatype">property
                    value</link>.</para>
            </note>

        </section>

    </chapter>

    <chapter xml:id="sec-epub-publications">
        <title>EPUB Publications</title>

        <section xml:id="sec-epub-conformance">
            <title>Conformance Requirements</title>

            <section xml:id="sec-epub-content-conf" xreflabel="EPUB Publications — Content Conformance">
                <title>Content Conformance</title>

                <para>Each <olink targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/> of an <olink
                        targetdoc="spec" targetptr="gloss-epub-publication" type="epub-spec"/>
                    <literal role="rfc2119">must</literal> meet all of the following criteria:</para>

                <variablelist role="conformance-list">
                    <varlistentry xml:id="sec-epub-content-conformance-all">
                        <term>All Publication Resources</term>
                        <listitem>
                            <para xml:id="confreq-manifest">All <olink targetdoc="spec"
                                    targetptr="gloss-publication-resource-cmt-or-foreign" type="epub-spec">Publication
                                    Resources</olink>
                                <literal role="rfc2119">must</literal> be listed in the Package Document (as defined in <xref
                                    linkend="sec-manifest-elem"/>), adhere to the <link linkend="sec-publication-resources"
                                    >constraints for Core Media Types and Fallback</link> and be located as per <xref
                                    linkend="sec-resource-locations"/>.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry xml:id="sec-epub-content-conformance-package">
                        <term>The Package Document</term>
                        <listitem>
                            <para xml:id="confreq-package">It <literal role="rfc2119">must</literal> contain exactly one
                                    <olink targetdoc="spec" targetptr="gloss-package-document" type="epub-spec"/>, which
                                    <literal role="rfc2119">must</literal> conform to the content requirements defined in
                                    <xref linkend="sec-package-content-conf"/>.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry xml:id="sec-epub-content-conformance-contentdocs">
                        <term>Content Documents</term>
                        <listitem>
                            <para xml:id="confreq-cd">It <literal role="rfc2119">must</literal> contain at least one <olink
                                    targetdoc="spec" targetptr="gloss-content-document-epub" type="epub-spec"/> conformant to
                                the content requirements defined in <xref linkend="sec-contentdocs"/>.</para>
                            <!--
                        <para xml:id="confreq-cdf">It <literal role="rfc2119">may</literal> contain one or more <olink targetdoc="spec" targetptr="gloss-content-document-foreign" type="epub-spec"/>s, and <literal role="rfc2119">must</literal> in this case
                            conform to the requirements for fallback provision defined in <xref
                                linkend="sec-fallback-processing-flow"/>.</para> -->
                        </listitem>
                    </varlistentry>
                    <varlistentry xml:id="sec-epub-content-conformance-nav">
                        <term>The EPUB Navigation Document</term>
                        <listitem>
                            <para xml:id="confreq-nav-occur">It <literal role="rfc2119">must</literal> contain exactly one
                                    <olink targetdoc="spec" targetptr="gloss-content-document-epub-nav" type="epub-spec"/>
                                conformant to the content requirements defined in <xref linkend="sec-xhtml-nav-content-conf"
                                />.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry xml:id="sec-epub-content-conformance-css">
                        <term>EPUB Style Sheets</term>
                        <listitem>
                            <para xml:id="confreq-css">It <literal role="rfc2119">may</literal> contain zero or more <olink
                                    targetdoc="spec" targetptr="gloss-stylesheet" type="epub-spec">EPUB Style Sheets</olink>
                                conformant to the content requirements defined in <xref linkend="sec-css-content-conf"/>.
                            </para>
                        </listitem>
                    </varlistentry>
                    <varlistentry xml:id="sec-epub-content-conformance-pls">
                        <term>EPUB Pronunciation Lexicons</term>
                        <listitem>
                            <para xml:id="confreq-pls">It <literal role="rfc2119">may</literal> contain zero or more PLS
                                Documents conformant to the content requirements defined in <xref
                                    linkend="sec-pls-conf-content"/>.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry xml:id="sec-epub-content-conformance-media-overlays">
                        <term>Media Overlay Documents</term>
                        <listitem>
                            <para xml:id="confreq-mo">It <literal role="rfc2119">may</literal> contain zero or more <olink
                                    targetdoc="spec" targetptr="gloss-media-overlay-document" type="epub-spec">Media Overlay
                                    Documents</olink> conformant to the content requirements defined in <xref
                                    linkend="refOverlays3"/>. </para>
                        </listitem>
                    </varlistentry>
                    <varlistentry xml:id="sec-epub-content-conformance-additional">
                        <term>Additional Publication Resources</term>
                        <listitem>
                            <para xml:id="confreq-additional">It <literal role="rfc2119">may</literal> contain zero or more
                                    <olink targetdoc="spec" targetptr="gloss-publication-resource-cmt-or-foreign"
                                    type="epub-spec">Publication Resources</olink> in addition to those listed above, each of
                                which <literal role="rfc2119">must</literal> adhere to the requirements in <xref
                                    linkend="sec-epub-content-conformance-all"/>. </para>
                        </listitem>
                    </varlistentry>
                    <varlistentry xml:id="sec-epub-content-conformance-container">
                        <term>Container</term>
                        <listitem>
                            <para xml:id="confreq-ocf">It <literal role="rfc2119">must</literal> be packaged in a <olink
                                    targetdoc="spec" targetptr="gloss-container" type="epub-spec"/> as defined in <xref
                                    linkend="refOCF3"/>. </para>
                        </listitem>
                    </varlistentry>
                </variablelist>

            </section>

            <section xml:id="sec-epub-rs-conf" xreflabel="EPUB Publication — Reading System Conformance">
                <title>Reading System Conformance</title>

                <para>An <olink targetdoc="spec" targetptr="gloss-epub-reading-system" type="epub-spec"/>
                    <literal role="rfc2119">must</literal> meet all of the following criteria:</para>

                <variablelist role="conformance-list">
                    <varlistentry xml:id="sec-epub-rs-conf-epub3">
                        <term>EPUB 3 Processing</term>
                        <listitem>
                            <para xml:id="confreq-rs-epub3-ocf">It <literal role="rfc2119">must</literal> process the <olink
                                    targetdoc="spec" targetptr="gloss-container" type="epub-spec"/> as defined in <xref
                                    linkend="refOCF3"/>.</para>

                            <para xml:id="confreq-rs-epub3-package">It <literal role="rfc2119">must</literal> process the
                                    <olink targetdoc="spec" targetptr="gloss-package-document" type="epub-spec"/> as defined
                                in <xref linkend="sec-package-rs-conf"/>, and honor all presentation logic expressed through
                                the Package Document (e.g., the reading order, fallback chains, bindings, page progression
                                direction and fixed layouts).</para>

                            <para xml:id="confreq-rs-epub3-uid">It <literal role="rfc2119">must not</literal> fail
                                catastrophically if it encounters two distinct EPUB Publications with the same <olink
                                    targetdoc="spec" targetptr="gloss-unique-identifier" type="epub-spec"/>. </para>

                            <para xml:id="confreq-rs-epub3-cmt">Unless specified as <phrase role="conditional">conditional
                                    behavior</phrase> in this section, it <literal role="rfc2119">must</literal> support all
                                    <olink targetdoc="spec" targetptr="gloss-publication-resource-cmt" type="epub-spec">Core
                                    Media Type Resources</olink>.</para>

                            <para xml:id="confreq-rs-foreign">It <literal role="rfc2119">may</literal> support an arbitrary
                                set of <olink targetdoc="spec" targetptr="gloss-publication-resource-foreign"
                                    type="epub-spec"/> types, and <literal role="rfc2119">must</literal> process fallbacks
                                for unsupported Foreign Resources as defined in <xref linkend="sec-fallback-processing-flow"
                                /> if not.</para>

                            <para xml:id="confreq-rs-epub3-xhtml">It <literal role="rfc2119">must</literal> process <olink
                                    targetdoc="spec" targetptr="gloss-content-document-epub-xhtml" type="epub-spec">XHTML
                                    Content Documents</olink> as defined in <xref linkend="sec-xhtml-conf-rs"/>.</para>

                            <para xml:id="confreq-rs-epub3-svg">It <literal role="rfc2119">must</literal> process <olink
                                    targetdoc="spec" targetptr="gloss-content-document-epub-svg" type="epub-spec">SVG Content
                                    Documents</olink> as defined in <xref linkend="sec-svg-rs-conf"/>.</para>

                            <para xml:id="confreq-rs-epub3-css"><phrase role="conditional">If it has a <olink
                                        targetdoc="spec" targetptr="gloss-viewport-css" type="epub-spec"/></phrase>, it
                                    <literal role="rfc2119">must</literal> support visual rendering of <olink
                                    targetdoc="spec" targetptr="gloss-content-document-epub-xhtml" type="epub-spec">XHTML
                                    Content Documents</olink> as defined in <xref linkend="sec-css-rs-conf"/>.</para>

                            <para xml:id="confreq-rs-epub3-raster"><phrase role="conditional">If it has the capability to
                                    render raster images</phrase>, it <literal role="rfc2119">must</literal> support the
                                    <link linkend="cmt-grp-image">raster image Core Media Types</link>.</para>

                            <para xml:id="confreq-rs-epub3-vector"><phrase role="conditional">If it has the capability to
                                    render vector images</phrase>, it <literal role="rfc2119">must</literal> support the
                                    <link linkend="cmt-grp-image">vector image Core Media Types</link>.</para>

                            <para xml:id="confreq-rs-epub3-mp3-aac"><phrase role="conditional">If it has the capability to
                                    render pre-recorded audio</phrase>, it <literal role="rfc2119">must</literal> support the
                                    <link linkend="cmt-mp3">MP3 audio Core Media Type</link>, <literal role="rfc2119"
                                    >should</literal> support the <link linkend="cmt-mp4-aac">MP4 audio Core Media
                                    Type</link> and <literal role="rfc2119">should</literal> support Media Overlays <xref
                                    linkend="refOverlays3"/>.</para>
                            <para xml:id="confreq-rs-epub3-tts"
                                xreflabel="Reading System Text-to-Speech Conformance Requirements"><phrase role="conditional"
                                    >If it supports <olink targetdoc="spec" targetptr="gloss-tts" type="epub-spec"/>
                                    rendering</phrase>, it <literal role="rfc2119">should</literal> support <xref
                                    linkend="sec-pls"/>, the CSS3 Speech features of the <link linkend="sec-css">EPUB CSS
                                    Profile</link> and <link linkend="sec-xhtml-ssml-attrib">SSML attributes</link> in <olink
                                    targetdoc="spec" targetptr="gloss-content-document-epub-xhtml" type="epub-spec">XHTML
                                    Content Documents</olink>.</para>
                            <para xml:id="confreq-rs-cfi">It <literal role="rfc2119">must</literal> support the EPUB
                                Canonical Fragment Identifiers scheme <xref linkend="refEPUBCFI"/> for linking, and <literal
                                    role="rfc2119">may</literal> support additional linking schemes as defined in the <link
                                    xlink:href="http://www.idpf.org/epub/linking/">EPUB Linking Scheme
                                Registry</link>.</para>
                            <note xml:id="note-video-codecs">
                                <para>It is recommended that Reading Systems support at least one of the <xref
                                        linkend="refH264"/> and <xref linkend="refVP8"/> video codecs, but this is not a
                                    conformance requirement; a Reading System may support no video codecs at all. Content
                                    creators and Reading System developers should take into consideration factors such as
                                    breadth of adoption, video playback quality, and technology usage royalty requirements
                                    when making a choice to include or implement video in either (or potentially, both)
                                    formats.</para>
                            </note>
                        </listitem>
                    </varlistentry>
                    <varlistentry xml:id="sec-epub-rs-conf-backward">
                        <term>Backward Compatibility</term>
                        <listitem>
                            <para xml:id="confreq-rs-backward-epub2">It <literal role="rfc2119">should</literal> process EPUB
                                version 2 Publications as defined in <xref linkend="refOPF2"/>, <xref linkend="refOPS2"/> and
                                    <xref linkend="refOCF2"/>.</para>
                            <para xml:id="confreq-rs-backward-epub">It <literal role="rfc2119">must</literal> attempt to
                                process any given Rendition of an EPUB Publication whose Package Document
                                    <markup>version</markup> attribute designates a version lower than "<code role="value"
                                    >3.0</code>" or which omits the <markup>version</markup> attribute.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry xml:id="sec-epub-rs-conf-forward">
                        <term>Forward Compatibility</term>
                        <listitem>
                            <para xml:id="confreq-rs-forward-epubn">It <literal role="rfc2119">should</literal> attempt to
                                process any given Rendition of an EPUB Publication whose Package Document
                                    <markup>version</markup> attribute designates a version higher than "<code role="value"
                                    >3.0</code>".</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry xml:id="sec-epub-rs-conf-xml">
                        <term>XML Processing</term>
                        <listitem>
                            <para xml:id="confreq-rs-xml-nval">It <literal role="rfc2119">must</literal> be a <link
                                    xlink:href="http://www.w3.org/TR/xml/#proc-types">conformant non-validating
                                    processor</link>
                                <xref linkend="refXML"/>.</para>
                            <para xml:id="confreq-rs-xml-ns"> It <literal role="rfc2119">must</literal> be a <link
                                    xlink:href="http://www.w3.org/TR/REC-xml-names/#ProcessorConformance">conformant
                                    processor</link> as defined in <xref linkend="refXMLNamespaces"/>. </para>
                            <para xml:id="confreq-rs-xml-assocss">It <literal role="rfc2119">must</literal> support
                                    <markup>xml-stylesheet</markup> processing instructions <xref linkend="refXMLStylesheets"
                                />, and <literal role="rfc2119">may</literal> support additional processing
                                instructions.</para>

                            <para xml:id="confreq-rs-xml-base">It <literal role="rfc2119">must</literal> be a conformant
                                application as defined by <xref linkend="refXMLBase"/>.</para>
                        </listitem>
                    </varlistentry>

                </variablelist>
                <note>
                    <para>A conforming Reading System is not necessarily a single dedicated program or device, but may exist
                        as a distributed system.</para>
                </note>

            </section>
        </section>

        <section xml:id="sec-publication-resources">
            <title>Publication Resources</title>

            <section xml:id="sec-core-media-types">
                <title>Core Media Types</title>

                <para>The following table lists the <olink targetdoc="spec" targetptr="gloss-core-media-type"
                        type="epub-spec">EPUB 3 Core Media Types</olink>. When a <olink targetdoc="spec"
                        targetptr="gloss-publication-resource-cmt-or-foreign" type="epub-spec"/> conforms to a Core Media
                    Type specification, it is a <olink targetdoc="spec" targetptr="gloss-publication-resource-cmt"
                        type="epub-spec"/> and can be included in the EPUB Publication without the provision of fallbacks
                    (refer to <xref linkend="sec-fallback-processing-flow"/> for more information).</para>

                <para>The columns in the table represent the following information:</para>
                <variablelist xml:id="tbl-cmt-expl">
                    <varlistentry>
                        <term>Media Type</term>
                        <listitem>
                            <para>The MIME media type <xref linkend="refRFC2046"/> used to represent the given Publication
                                Resource in the <xref linkend="sec-manifest-elem"/>. </para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Content Type Definition</term>
                        <listitem>
                            <para>The specification to which the given <olink targetdoc="spec"
                                    targetptr="gloss-publication-resource-cmt" type="epub-spec"/>
                                <literal role="rfc2119">must</literal> conform.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Applies to</term>
                        <listitem>
                            <para>The Publication Resource type(s) that the Media Type and Content Type Definition applies
                                to.</para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <table xml:id="tbl-core-media-types">
                    <caption>EPUB Core Media Types</caption>
                    <thead>
                        <tr>
                            <th xml:id="tbl-cmt-string">Media Type</th>
                            <th xml:id="tbl-cmt-def">Content Type Definition</th>
                            <th xml:id="tbl-cmt-appl">Applies to</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <th xml:id="cmt-grp-image" xreflabel="Image Core Media Types" colspan="3"> Image Types </th>
                        </tr>
                        <tr>
                            <td xml:id="cmt-gif" xreflabel="image/gif">
                                <code role="media-type">image/gif</code>
                            </td>
                            <td>
                                <xref linkend="refGIF"/>
                            </td>
                            <td>GIF
                                Images<!-- (typically embedded in <olink targetdoc="spec" targetptr="gloss-content-document-epub-xhtml" type="epub-spec"/>s or <olink targetdoc="spec" targetptr="gloss-content-document-epub-svg" type="epub-spec"/>s).--></td>
                        </tr>

                        <tr>
                            <td xml:id="cmt-jpeg" xreflabel="image/jpeg">
                                <code role="media-type">image/jpeg</code>
                            </td>
                            <td>
                                <xref linkend="refJPEG"/>
                            </td>
                            <td>JPEG Images</td>
                        </tr>

                        <tr>
                            <td xml:id="cmt-png" xreflabel="image/png">
                                <code role="media-type">image/png</code>
                            </td>
                            <td>
                                <xref linkend="refPNG"/>
                            </td>
                            <td>PNG Images</td>
                        </tr>
                        <tr>
                            <td xml:id="cmt-svg11" xreflabel="image/svg+xml">
                                <code role="media-type">image/svg+xml</code>
                            </td>
                            <td>
                                <xref linkend="sec-svg"/>
                            </td>
                            <td>SVG documents</td>
                        </tr>

                        <tr>
                            <th xml:id="cmt-grp-content-documents" xreflabel="Application Core Media Types" colspan="3"> Application Types </th>
                        </tr>

                        <tr>
                            <td xml:id="cmt-xhtml" xreflabel="application/xhtml+xml">
                                <code role="media-type">application/xhtml+xml</code>
                            </td>
                            <td>
                                <xref linkend="sec-xhtml"/>
                            </td>
                            <td><olink targetdoc="spec" targetptr="gloss-content-document-epub-xhtml" type="epub-spec">XHTML
                                    Content Documents</olink> and the <olink targetdoc="spec"
                                    targetptr="gloss-content-document-epub-nav" type="epub-spec"/>. </td>
                        </tr>
                        <tr>
                            <td xml:id="cmt-ncx" xreflabel="application/x-dtbncx+xml">
                                <code role="media-type">application/x-dtbncx+xml</code>
                            </td>
                            <td>
                                <xref linkend="refOPF2"/>
                            </td>
                            <td>The <link linkend="note-ncx">superseded</link> NCX </td>
                        </tr>
                        <tr>
                            <td xml:id="cmt-opentype" xreflabel="application/vnd.ms-opentype">
                                <code role="media-type">application/vnd.ms-opentype</code>
                            </td>
                            <td>
                                <xref linkend="refOpenType"/>
                            </td>
                            <td>OpenType fonts</td>
                        </tr>
                        <tr>
                            <td xml:id="cmt-woff" xreflabel="application/font-woff">
                                <code role="media-type">application/font-woff</code>
                            </td>
                            <td>
                                <xref linkend="refWOFF"/>
                            </td>
                            <td>WOFF fonts</td>
                        </tr>
                        <tr>
                            <td xml:id="cmt-smil" xreflabel="application/smil+xml">
                                <code role="media-type">application/smil+xml</code>
                            </td>
                            <td>
                                <xref linkend="refOverlays3"/>
                            </td>
                            <td>EPUB Media Overlay documents</td>
                        </tr>
                        <tr>
                            <td xml:id="cmt-pls" xreflabel="application/pls+xml">
                                <code role="media-type">application/pls+xml</code>
                            </td>
                            <td>
                                <xref linkend="refPLS"/>
                            </td>
                            <td><olink targetdoc="spec" targetptr="gloss-tts" type="epub-spec"/> Pronunciation lexicons</td>
                        </tr>
                        <tr>
                            <th xml:id="cmt-grp-audio" xreflabel="Audio Core Media Types" colspan="3"> Audio Types </th>
                        </tr>
                        <tr>
                            <td xml:id="cmt-mp3" xreflabel="audio/mpeg">
                                <code role="media-type">audio/mpeg</code></td>
                            <td>
                                <xref linkend="refMP3"/>
                            </td>
                            <td>MP3 audio</td>
                        </tr>
                        <tr>
                            <td xml:id="cmt-mp4-aac" xreflabel="audio/aac">
                                <code role="media-type">audio/mp4</code>
                            </td>
                            <td>
                                <xref linkend="refAAC"/>, <xref linkend="refMP4"/>
                            </td>
                            <td>AAC LC audio using MP4 container</td>
                        </tr>
                        <tr>
                            <th xml:id="cmt-grp-text" xreflabel="Text Core Media Types" colspan="3"> Text Types </th>
                        </tr>

                        <tr>
                            <td xml:id="cmt-css" xreflabel="text/css">
                                <code role="media-type">text/css</code>
                            </td>
                            <td>
                                <xref linkend="sec-css"/>
                            </td>
                            <td><olink targetdoc="spec" targetptr="gloss-stylesheet" type="epub-spec">EPUB Style
                                    Sheets</olink>. </td>
                        </tr>
                        <tr>
                            <td xml:id="cmt-js" xreflabel="javascript">
                                <code role="media-type">text/javascript</code>
                            </td>
                            <td>
                                <xref linkend="refRFC4329"/>
                            </td>
                            <td>Scripts</td>
                        </tr>


                    </tbody>
                </table>

                <note>
                    <para>This specification does not define any video codecs as Core Media Types. Refer to the <link
                            linkend="note-video-codecs">note in EPUB Publications — Reading System Conformance</link> above
                        for informative recommendations on support for video codecs in EPUB Publications.</para>
                </note>

                <para>IDPF specifications <literal role="rfc2119">may</literal> introduce new Core Media Types provided such
                    Publication Resources are not included in the <link linkend="elemdef-opf-spine">spine</link> or
                    referenced from EPUB Content Documents.</para>

            </section>

            <section xml:id="sec-fallback-processing-flow">
                <title>Restrictions and Fallbacks</title>

                <section xml:id="sec-foreign-restrictions">
                    <title>Foreign Resource Restrictions</title>

                    <para xml:id="confreq-cmt">All <olink targetdoc="spec"
                            targetptr="gloss-publication-resource-cmt-or-foreign" type="epub-spec">Publication
                            Resources</olink> of an <olink targetdoc="spec" targetptr="gloss-epub-publication"
                            type="epub-spec"/>
                        <literal role="rfc2119">must</literal> be <olink targetdoc="spec"
                            targetptr="gloss-publication-resource-cmt" type="epub-spec">Core Media Type Resources</olink> or
                            <literal role="rfc2119">must</literal> provide a Core Media Type fallback. The cases in which
                            <olink targetdoc="spec" targetptr="gloss-publication-resource-foreign" type="epub-spec">Foreign
                            Resources</olink>
                        <literal role="rfc2119">may</literal> be used, and the requirements and rules for Core Media Type
                        fallback provision in such cases, are detailed below.</para>

                    <variablelist role="conformance-list">
                        <varlistentry xml:id="sec-cmt-fallback-cd">
                            <term>Intrinsic Fallback in EPUB Content Documents</term>
                            <listitem>
                                <para xml:id="confreq-resources-cd-fallback">Foreign Resources <literal role="rfc2119"
                                        >may</literal> be referenced from EPUB Content Document elements that have explicit
                                    intrinsic fallback mechanisms (e.g., fallback content in the <xref linkend="refHTML5"/>
                                    <markup xlink:href="http://www.w3.org/TR/html5/Overview.html#the-object-element"
                                        >object</markup> and <markup
                                        xlink:href="http://www.w3.org/TR/html5/Overview.html#the-canvas-element"
                                        >canvas</markup> elements, and the <markup
                                        xlink:href="http://www.w3.org/TR/html5/Overview.html#the-source-element"
                                        >source</markup> element for the <markup
                                        xlink:href="http://www.w3.org/TR/html5/Overview.html#audio">audio</markup> and
                                        <markup xlink:href="http://www.w3.org/TR/html5/Overview.html#video">video</markup>
                                    elements). A Core Media Type resource <literal role="rfc2119">must</literal> be provided
                                    via the given element's intrinsic fallback mechanism in such cases.</para>

                                <para xml:id="confreq-resources-cd-fallback-video">For both the <xref linkend="refHTML5"/>
                                    <markup xlink:href="http://www.w3.org/TR/html5/Overview.html#audio">audio</markup> and
                                        <markup xlink:href="http://www.w3.org/TR/html5/Overview.html#video">video</markup>
                                    elements, flow content embedded within the elements does not represent a Core Media Type
                                    fallback, but <literal role="rfc2119">may</literal> be included for rendering in older
                                    Reading Systems that do not recognize these elements (e.g., EPUB 2 Reading
                                    Systems).</para>

                                <para xml:id="confreq-resources-cd-fallback-track"> In this version of this specification,
                                    the <xref linkend="refHTML5"/>
                                    <markup xlink:href="http://www.w3.org/TR/html5/Overview.html#the-track-element"
                                        >track</markup> element is exempt from the <link linkend="confreq-cmt">Core Media
                                        Type usage rule</link>: Foreign Resources <literal role="rfc2119">may</literal> be
                                    referenced from <markup>track</markup> without the provision of a Core Media Type
                                    fallback.</para>

                            </listitem>
                        </varlistentry>
                        <varlistentry xml:id="sec-cmt-fallback-css">
                            <term>Intrinsic Fallback in EPUB Style Sheets</term>
                            <listitem>
                                <!-- Reference CSS3 Font rather than CSS2.1 for the definition of font fallback, as instructred by John Daggett. -->
                                <para xml:id="confreq-resources-font-fallback" xreflabel="Embedded Font Intrinsic Fallback"
                                    >Fonts embedded in Content Documents or EPUB Style Sheets using the
                                        <property>@font-face</property> mechanism <literal role="rfc2119">may</literal> be
                                    Foreign Resources. Reading Systems <literal role="rfc2119">must</literal> use the <link
                                        xlink:href="http://www.w3.org/TR/css3-fonts/#font-style-matching">rules for matching
                                        font styles</link>
                                    <xref linkend="refCSS3FontsModule"/> when identifying a fallback for an unsupported font
                                    type.</para>
                            </listitem>
                        </varlistentry>
                        <varlistentry xml:id="sec-cmt-fallback-manifest-no-intrinsic">
                            <term>Manifest Fallbacks when No Intrinsic Fallbacks</term>
                            <listitem>
                                <para>Foreign Resources <literal role="rfc2119">may</literal> be referenced in contexts in
                                    which an intrinsic fallback cannot be provided (e.g., directly from <olink
                                        targetdoc="spec" targetptr="gloss-spine" type="epub-spec"/>
                                    <markup><xref role="codelink" linkend="elemdef-spine-itemref"/></markup> elements; from
                                        <xref linkend="refHTML5"/>
                                    <markup>img</markup>, <markup>iframe</markup> and <markup>link</markup> elements in
                                        <olink targetdoc="spec" targetptr="gloss-content-document-epub-xhtml"
                                        type="epub-spec">XHTML Content Documents</olink>; and from
                                        <property>@import</property> rules in <olink targetdoc="spec"
                                        targetptr="gloss-stylesheet" type="epub-spec">EPUB Style Sheets</olink>). <link
                                        linkend="sec-fallback-processing-flow-manifest">Manifest fallbacks</link>
                                    <literal role="rfc2119">must</literal> be provided in such cases.</para>
                            </listitem>
                        </varlistentry>
                    </variablelist>
                </section>

                <section xml:id="sec-fallback-processing-flow-manifest">
                    <title>Manifest Fallbacks</title>

                    <para>Manifest fallbacks are provided using the <markup><xref role="codelink"
                                linkend="attrdef-item-fallback"/></markup> attribute on the <olink targetdoc="spec"
                            targetptr="gloss-manifest" type="epub-spec">manifest</olink>
                        <markup><xref role="codelink" linkend="elemdef-package-item"/></markup> element that represents the
                        Publication Resource. The <markup>fallback</markup> attribute's IDREF <xref linkend="refXML"/> value
                            <literal role="rfc2119">must</literal> resolve to another <markup>item</markup> in the
                            <markup>manifest</markup>. This fallback <markup>item</markup>
                        <literal role="rfc2119">may</literal> itself specify another fallback <markup>item</markup>, and so
                        on. </para>

                    <para>The ordered list of all the ID references that can be reached starting from a given item's
                            <markup>fallback</markup> attribute represents the <emphasis>fallback chain</emphasis> for that
                        item. The order of the resources in the fallback chain represents the Authors' preferred fallback
                        order.</para>

                    <para>A Reading System that does not support the Media Type of a given Publication Resource <literal
                            role="rfc2119">must</literal> traverse the fallback chain until it has identified at least one
                        supported Publication Resource to be used in place of the unsupported resource. If the Reading System
                        supports multiple Publication Resources in the fallback chain, it <literal role="rfc2119"
                            >may</literal> select the resource to use based on specific <link
                            linkend="attrdef-item-properties">properties</link> of that resource, otherwise it <literal
                            role="rfc2119">should</literal> honor the Authors' preferred fallback order.</para>

                    <para>Fallback chains <literal role="rfc2119">must</literal> conform to one of the following
                        requirements, as appropriate:</para>

                    <itemizedlist>
                        <listitem>
                            <para>For Foreign Resources referenced directly from <markup>spine</markup>
                                <markup linkend="elemdef-spine-itemref">itemref</markup> elements, the chain <literal
                                    role="rfc2119">must</literal> contain at least one <olink targetdoc="spec"
                                    targetptr="gloss-content-document-epub" type="epub-spec"/>.</para>
                        </listitem>
                        <listitem>
                            <para>For Foreign Resources for which an intrinsic fallback cannot be provided, the chain
                                    <literal role="rfc2119">must</literal> contain at least one <olink targetdoc="spec"
                                    targetptr="gloss-core-media-type" type="epub-spec"/>.</para>
                        </listitem>
                    </itemizedlist>

                    <para>Fallback chains <literal role="rfc2119">must not</literal> contain any circular- or self-references
                        to <markup>item</markup> elements in the chain.</para>

                    <para>Fallbacks <literal role="rfc2119">may</literal> also be provided for <olink targetdoc="spec"
                            targetptr="gloss-content-document-top-level" type="epub-spec">Top-Level Content Documents</olink>
                        that are EPUB Content Documents; a Reading System <literal role="rfc2119">may</literal> choose to
                        utilize such fallbacks in order to find the optimal version of a Content Document to render in a
                        given context. An example of when this feature can be utilized is when providing <link
                            linkend="confreq-cd-scripted-flbk">fallbacks for scripted content</link>.</para>

                </section>

            </section>

            <section xml:id="sec-resource-locations">
                <title>Publication Resource Locations</title>

                <para>All <olink targetdoc="spec" targetptr="gloss-publication-resource-cmt-or-foreign" type="epub-spec"
                        >Publication Resources</olink>
                    <literal role="rfc2119">must</literal> be located in the <olink targetdoc="spec"
                        targetptr="gloss-container" type="epub-spec"/>, with the following exceptions:</para>

                <itemizedlist role="conformance-list">
                    <listitem xml:id="sec-resource-locations-audio">
                        <para><link linkend="cmt-grp-audio">Audio resources</link>
                            <literal role="rfc2119">may</literal> be located in the Container or remotely.</para>
                    </listitem>
                    <listitem xml:id="sec-resource-locations-video">
                        <para>Video resources <literal role="rfc2119">may</literal> be located in the Container or
                            remotely.</para>
                    </listitem>
                    <listitem xml:id="sec-resource-locations-descriptions">
                        <para>Descriptions referenced from the <link linkend="sec-xhtml-aria-describedat"
                                >aria-describedat</link> attribute <literal role="rfc2119">may</literal> be located in the
                            Container or remotely.</para>
                    </listitem>
                </itemizedlist>

                <para>Authors <literal role="rfc2119">should</literal> prefer locating audio and video resources in the
                    Container to allow the user access to the entire presentation regardless of connectivity status.</para>

                <note>
                    <para>The above rules for Publication Resource locations apply regardless of whether the given resource
                        is a <olink targetdoc="spec" targetptr="gloss-publication-resource-cmt" type="epub-spec"/> or a
                            <olink targetdoc="spec" targetptr="gloss-publication-resource-foreign" type="epub-spec"/>.</para>
                </note>

                <note>
                    <para>The inclusion of remote resources in an <olink targetdoc="spec" targetptr="gloss-epub-publication"
                            type="epub-spec"/> is indicated via the <link
                            xlink:href="http://www.idpf.org/epub/vocab/package/#remote-resources"
                                ><property>remote-resources</property> property</link>
                        <xref linkend="refEPUBPackageVocab"/> on the <olink targetdoc="spec" targetptr="gloss-manifest"
                            type="epub-spec"/>
                        <markup><xref role="codelink" linkend="sec-item-elem"/></markup> element.</para>
                </note>

            </section>

            <section xml:id="sec-xml-constraints">
                <title>XML Conformance</title>

                <para>Any <olink targetdoc="spec" targetptr="gloss-publication-resource-cmt-or-foreign" type="epub-spec"/>
                    that is an XML-Based Media Type <literal role="rfc2119">must</literal> meet the following
                    constraints:</para>

                <itemizedlist role="conformance-list">
                    <listitem>
                        <para xml:id="confreq-xml-wellformed"> It <literal role="rfc2119">must</literal> be a conformant XML
                            1.0 Document as defined in <link xlink:href="http://www.w3.org/TR/REC-xml-names/#Conformance"
                                >Conformance of Documents</link>
                            <xref linkend="refXMLNamespaces"/>.
                            <!-- It <literal role="rfc2119">must</literal> be
                            a <link xlink:href="http://www.w3.org/TR/xml/#sec-well-formed">well-formed XML Document</link>
                            <xref linkend="refXML"/>.-->
                        </para>
                    </listitem>
                    <listitem>
                        <para xml:id="confreq-xml-extmarkupdecl">
                            <link xlink:href="http://www.w3.org/TR/2008/PER-xml-20080205/#NT-ExternalID">External
                                identifiers</link>
                            <literal role="rfc2119">must not</literal> appear in the document type declaration <xref
                                linkend="refXML"/>. </para>
                    </listitem>
                    <listitem>
                        <para xml:id="confreq-xml-xinc"> It <literal role="rfc2119">must not</literal> make use of XInclude
                                <xref linkend="refXInclude"/>.
                            <!-- note: troublesome to say "include elements in the xinclude namespace" in this case, since xinclude happens in a pre stage -->
                        </para>
                    </listitem>
                    <listitem>
                        <para xml:id="confreq-xml-enc">
                            <phrase xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">It
                                    <literal role="rfc2119">must</literal> be encoded in UTF-8 or UTF-16 <xref
                                    linkend="refUnicode5"/>.</phrase>
                        </para>
                    </listitem>
                </itemizedlist>

                <para>The above constraints apply regardless of whether the given Publication Resource is a <olink
                        targetdoc="spec" targetptr="gloss-publication-resource-cmt" type="epub-spec"/> or a <olink
                        targetdoc="spec" targetptr="gloss-publication-resource-foreign" type="epub-spec"/>. </para>

            </section>

        </section>

    </chapter>

    <chapter xml:id="sec-package-documents">
        <title>EPUB Renditions</title>

        <section xml:id="sec-package-intro" conformance="informative">
            <title>Introduction</title>
            <para>The <olink targetdoc="spec" targetptr="gloss-package-document" type="epub-spec"/> carries bibliographic and
                structural metadata about a <olink targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/> of an
                    <olink targetdoc="spec" targetptr="gloss-epub-publication" type="epub-spec"/>, and is thus the primary
                source of information about how to process and display that Rendition. </para>

            <para>The Package Document is an XML document consisting of a set of container elements, each dedicated to
                housing information about a particular aspect of the Rendition. These containers effectively centralize
                metadata, detail the individual resources that compose the Rendition and provide reading order and other
                information for rendering the EPUB Publication is represents to a <olink targetdoc="spec"
                    targetptr="gloss-user" type="epub-spec"/>.</para>

            <para>The following list summarizes the information a Package Document contains:</para>

            <itemizedlist>
                <listitem>
                    <para>Rendition <link linkend="sec-metadata-elem">metadata</link> — mechanisms for including and/or
                        referencing metadata applicable to the EPUB Publication and/or the specific Rendition of it,
                        including for particular resources within the Rendition.</para>
                </listitem>
                <listitem>
                    <para>A <link linkend="sec-manifest-elem">manifest</link> — identifies (via IRI) and describes (via MIME
                        media type) the set of resources that collectively compose the given Rendition of the EPUB
                        Publication.</para>
                </listitem>
                <listitem>
                    <para>A <link linkend="sec-spine-elem">spine</link> — an ordered sequence of ID references to top-level
                        resources in the manifest from which all other resources in the set can be reached or utilized. The
                        spine defines the default reading order of the given Rendition.</para>
                </listitem>
                <listitem>
                    <para><link linkend="sec-fallback-processing-flow-manifest">Fallback chains</link> — an optional means
                        for defining an ordered list of top-level resources that can be considered content equivalents that a
                        Reading System can choose between for rendering.</para>
                </listitem>
                <listitem>
                    <para><link linkend="sec-bindings-elem">Bindings</link> — an optional means of associating script-based
                        implementations with custom media types.</para>
                </listitem>
            </itemizedlist>

        </section>

        <section xml:id="sec-package-conformance">
            <title>Conformance</title>
            <section xml:id="sec-package-content-conf" xreflabel="Package Document — Content Conformance">
                <title>Content Conformance</title>

                <para>A <olink targetdoc="spec" targetptr="gloss-package-document" type="epub-spec"/>
                    <literal role="rfc2119">must</literal> meet all of the following criteria:</para>
                <variablelist role="conformance-list">
                    <varlistentry xml:id="confreq-package-docprops">
                        <term>Document Properties</term>
                        <listitem>
                            <para xml:id="confreq-package-xml">
                                <xi:include href="./share/xml-defref.xml"/>
                            </para>
                            <para xml:id="confreq-package-docprops-schema">It <literal role="rfc2119">must</literal> be valid
                                to the Package Document schema, as defined in <xref linkend="app-package-schema"/>, and
                                conform to all content conformance constraints expressed in <xref linkend="sec-package-def"
                                />.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry xml:id="confreq-package-fileprops">
                        <term>File Properties</term>
                        <listitem>
                            <para xml:id="confreq-package-fileprops-name">The Package Document filename <literal
                                    role="rfc2119">should</literal> use the file extension <filename>.opf</filename>.</para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <para xml:id="media-type">Package Documents have the MIME media type <code role="media-type"
                        >application/oebps-package+xml</code>
                    <xref linkend="refRFC4839"/>.</para>

            </section>

            <section xml:id="sec-package-rs-conf" xreflabel="Package Document — Reading System Conformance">
                <title>Reading System Conformance</title>

                <para>An <olink targetdoc="spec" targetptr="gloss-epub-reading-system" type="epub-spec"/>
                    <literal role="rfc2119">must</literal> meet all of the following criteria:</para>

                <variablelist role="conformance-list">
                    <varlistentry xml:id="confreq-rs-package-base">
                        <term>Processing</term>
                        <listitem>
                            <para xml:id="confreq-rs-package-def">It <literal role="rfc2119">must</literal> process the
                                Package Document in conformance with all Reading System conformance constraints expressed in
                                    <xref linkend="sec-package-def"/>.</para>
                            <para xml:id="confreq-rs-epub3-presentational-meta">It <literal role="rfc2119">should</literal>
                                process presentational metadata, as expressed in <xref
                                    linkend="sec-package-metadata-rendering"/></para>
                            <para xml:id="confreq-rs-epub3-fxl-meta">It <literal role="rfc2119">must</literal> process fixed
                                layout metadata, as expressed in <xref linkend="sec-package-metadata-fxl"/></para>
                            <para xml:id="confreq-rs-epub3-fxl">For <link linkend="sec-package-metadata-fxl">fixed
                                    layouts</link> expressed using the <property linkend="fxl-property-viewport"
                                    >rendition:layout</property> property, it <literal role="rfc2119">must</literal>
                                determine the rendering dimensions as defined in <xref linkend="sec-fixed-layouts"/>.</para>
                            <para xml:id="confreq-rs-epub3-fxl-conflicts">It <literal role="rfc2119">must</literal> ignore
                                proprietary metadata properties that pertain to layout expressions if they conflict
                                behaviorally with the property semantics defined in <xref linkend="sec-package-metadata-fxl"
                                />.</para>
                        </listitem>
                    </varlistentry>
                </variablelist>
            </section>
        </section>

        <section xml:id="sec-package-def">
            <title>Package Document Definition</title>

            <para>All elements <xref linkend="refXML"/> defined in this section are in the
                    <uri>http://www.idpf.org/2007/opf</uri> namespace <xref linkend="refXMLNamespaces"/> unless otherwise
                specified.</para>

            <section xml:id="sec-package-elem" xreflabel="package">
                <title>The <markup>package</markup> Element</title>

                <para>The <markup>package</markup> element is the root container of the <olink targetdoc="spec"
                        targetptr="gloss-package-document" type="epub-spec"/> and encapsulates metadata and resource
                    information for a <olink targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/>.</para>

                <variablelist xreflabel="package" role="elem-synopsis" xml:id="elemdef-opf-package">
                    <varlistentry>
                        <term>Element Name</term>
                        <listitem>
                            <para><markup>package</markup></para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>The <markup>package</markup> element is the root element of the Package Document.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>
                            <variablelist role="elem-synopsis-attlist">
                                <varlistentry xml:id="attrdef-package-version" xreflabel="version">
                                    <term><markup>version</markup>
                                        <option>[required]</option></term>
                                    <listitem>
                                        <para>Specifies the EPUB specification version to which the given Rendition
                                            conforms.</para>
                                        <para>The attribute <literal role="rfc2119">must</literal> have the value <code
                                                role="value">3.0</code> to indicate compliance with this version of the
                                            specification.</para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-package-unique-identifier" xreflabel="unique-identifier">
                                    <term><markup>unique-identifier</markup>
                                        <option>[required]</option></term>
                                    <listitem>
                                        <para>An IDREF <xref linkend="refXML"/> that identifies the <markup><xref
                                                    role="codelink" linkend="sec-opf-dcidentifier"/></markup> element that
                                            provides the package's preferred, or primary, identifier.</para>
                                        <para>Refer to <xref linkend="sec-package-metadata-identifiers"/> for more
                                            information.</para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-package-prefix" xreflabel="prefix">
                                    <term><markup>prefix</markup>
                                        <option>[optional]</option></term>
                                    <listitem>
                                        <para>Declaration mechanism for prefixes not <link
                                                linkend="sec-metadata-reserved-vocabs">reserved by this
                                            specification</link>.</para>
                                        <para>Refer to <xref linkend="sec-prefix-attr"/> for more information.</para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-package-xml-lang">
                                    <term><markup>xml:lang</markup>
                                        <option>[optional]</option></term>
                                    <listitem>
                                        <xi:include href="./share/xmllang-prose-para.xml"/>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-package-dir">
                                    <term><markup>dir</markup>
                                        <option>[optional]</option></term>
                                    <xi:include href="./share/dir-prose-listitem.xml"/>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-package-id">
                                    <term><markup>id</markup>
                                        <option>[optional]</option></term>
                                    <listitem>
                                        <xi:include href="./share/id-prose-para.xml"/>
                                    </listitem>
                                </varlistentry>
                            </variablelist>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>In this order: <markup><xref role="codelink" linkend="elemdef-opf-metadata"/></markup>
                                <option>[required]</option>, <markup><xref linkend="elemdef-opf-manifest"/></markup>
                                <option>[required]</option>, <markup><xref linkend="elemdef-opf-spine"/></markup>
                                <option>[required]</option>, <markup><link role="codelink" linkend="sec-guide-elem"
                                        >guide</link></markup>
                                <option>[optional/deprecated]</option>, <markup><xref linkend="elemdef-bindings"/></markup>
                                <option>[optional]</option>, <markup><xref linkend="elemdef-collection"/></markup>
                                <option>[0 or more]</option></para>
                        </listitem>
                    </varlistentry>

                </variablelist>

            </section>

            <section xml:id="sec-metadata-elem" xreflabel="metadata">
                <title>The <markup>metadata</markup> Element</title>

                <para>The <markup>metadata</markup> element encapsulates meta information for the given <olink
                        targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/>.</para>

                <variablelist xreflabel="metadata" role="elem-synopsis" xml:id="elemdef-opf-metadata">
                    <varlistentry>
                        <term>Element Name</term>
                        <listitem>
                            <para><markup>metadata</markup></para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>Required first child of <markup><xref linkend="elemdef-opf-package"/></markup>.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>
                            <para>The <markup>metadata</markup> element has no attributes defined in this
                                specification.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>In any order: <markup><xref role="codelink" linkend="elemdef-opf-dcidentifier"/></markup>
                                <option>[1 or more]</option>, <markup><xref linkend="elemdef-opf-dctitle"/></markup>
                                <option>[1 or more]</option>, <markup><xref linkend="elemdef-opf-dclanguage"/></markup>
                                <option>[1 or more]</option>, <markup><xref linkend="sec-opf-dcmes-optional"/></markup>
                                <option>[0 or more]</option>, <markup><xref linkend="elemdef-meta"/></markup>
                                <option>[1 or more]</option>, <markup><xref linkend="sec-opf-meta-elem"/></markup>
                                <option>[0 or more]</option>, <markup><xref linkend="elemdef-opf-link"/></markup>
                                <option>[0 or more]</option></para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <para>The minimal required metadata that each Rendition of an <olink targetdoc="spec"
                        targetptr="gloss-epub-publication" type="epub-spec"/>
                    <literal role="rfc2119">must</literal> include consists of three elements from the Dublin Core Metadata
                    Element Set <xref linkend="refDCMES"/> — <markup linkend="sec-opf-dcidentifier">title</markup>, <markup
                        linkend="elemdef-opf-dcidentifier">identifier</markup> and <markup linkend="elemdef-opf-dclanguage"
                        >language</markup> — together with the <markup linkend="last-modified-date">modified</markup>
                    property from DCMI Metadata Terms <xref linkend="refDCTERMS"/>. Refer to the <link
                        linkend="sec-metadata-elem-examples">example</link> at the end of this section for an instance of a
                    complete minimal metadata set.</para>

                <para>Additional optional metadata is expressed using the <link linkend="sec-opf-dcmes-optional">DCMES
                        optional elements</link> and the <markup linkend="sec-meta-elem">meta</markup> element. </para>

                <!-- <section xml:id="sec-metadata-extensibility"
                    xreflabel="Metadata Extensibility Mechanism">
                    <title>Metadata Extensibility</title> 

                <para> This specification subsets the <xref linkend="refRDFa11Core"/>
                    profile and prefix definition mechanisms to enable the inclusion and extension
                    of metadata vocabularies for defining Publications. These features allow core
                    metadata properties to be added unprefixed, and additionally work to standardize
                    the inclusion of metadata across the publishing spectrum by predefining prefixes
                    for the most commonly-used vocabularies. </para> 

                <para>All Publications <literal role="rfc2119">must</literal> reference the metadata profile on the root
                        <markup>package</markup> element using the <markup><link
                            linkend="attrdef-package-profile">profile</link></code> attribute.
                    Unlike its RDFa equivalent, the <markup>profile</markup> attribute <literal role="rfc2119">must</literal> 
                    contain only the single canonical URI of the EPUB default profile.</para>

                <para> The addition of the metadata profile allows all properties from the <link
                        linkend="refEPUBPackageVocab">EPUB 3 Package Metadata Vocabulary</link> to
                    be referenced without using prefixes. The profile also defines prefixes
                    for other common vocabularies (refer to <link
                        linkend="refEPUBPackageProfile">the profile</link> for more
                    information on which). </para> 

                <para> If the metadata profile does not define a prefix for a needed vocabulary, it
                    does not mean that the vocabulary cannot be used. The <link
                        linkend="attrdef-package-prefix">prefix</link> attribute can also be
                    attached to the <markup>package</markup> element to define additional prefixes. New
                    prefixes are defined by including whitespace-separated prefix/URI pairings. </para>

                <informalexample>
                    <para>The following example shows how to define a new prefix for a
                        vocabulary.</para>
                    <synopsis><xi:include parse="text" href="examples/publications/rdfa-prefix.xml"/></synopsis>
                </informalexample>

                <xi:include href="./share/rdfa-prefix-reqs.xml"/>-->

                <bridgehead xml:id="sec-metadata-elem-examples">Examples</bridgehead>

                <informalexample>
                    <para>The following example represents the minimal set of metadata that all Renditions have to
                        contain.</para>
                    <synopsis><xi:include href="examples/publications/metadata-min-complete.xml" parse="text"/></synopsis>
                </informalexample>

            </section>

            <section xml:id="sec-opf-dcidentifier" xreflabel="dc:identifier">
                <title>The DCMES <markup>identifier</markup> Element</title>

                <para>The <xref linkend="refDCMES"/>
                    <markup>identifier</markup> element contains a single identifier associated with the given <olink
                        targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/> of the <olink targetdoc="spec"
                        targetptr="gloss-epub-publication" type="epub-spec"/>, such as a UUID, DOI, ISBN or ISSN.</para>
                <variablelist xreflabel="dc:identifier" role="elem-synopsis" xml:id="elemdef-opf-dcidentifier">
                    <varlistentry>
                        <term>Element Name</term>
                        <listitem>
                            <para>
                                <markup>dc:identifier</markup>
                            </para>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>Namespace</term>
                        <listitem>
                            <para><uri>http://purl.org/dc/elements/1.1/</uri></para>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>Required child of <markup><xref role="codelink" linkend="elemdef-opf-metadata"/></markup>.
                                Repeatable.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>

                            <variablelist role="elem-synopsis-attlist">

                                <varlistentry xml:id="attrdef-dcidentifier-id">
                                    <term>
                                        <markup>id</markup>
                                        <option>[optional]</option>
                                    </term>
                                    <listitem>
                                        <xi:include href="share/id-prose-para.xml"/>
                                        <para>The <markup>id</markup> attribute is required on the
                                                <markup>identifier</markup> element containing the unique identifier. See
                                            below.</para>
                                    </listitem>
                                </varlistentry>
                            </variablelist>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>Text</para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <para>Every Rendition's <markup>metadata</markup> section <literal role="rfc2119">must</literal> include at
                    least one <markup>identifier</markup> element containing an unambiguous identifier for the EPUB
                    Publication. Multiple <markup>identifier</markup> elements are permitted, but only one can be marked as
                    the <olink targetdoc="spec" targetptr="gloss-unique-identifier" type="epub-spec"/> via the
                        <markup>package</markup> element <markup><link linkend="attrdef-package-unique-identifier"
                            >unique-identifier</link></markup> attribute. </para>

                <informalexample>
                    <para>The following example shows the unique <markup>identifier</markup> element for an EPUB
                        Publication.</para>
                    <synopsis><xi:include parse="text" href="examples/publications/identifier.xml"/></synopsis>
                </informalexample>

                <para>This specification makes a distinction between the <olink targetdoc="spec"
                        targetptr="gloss-unique-identifier" type="epub-spec"/> for an EPUB Publication and the identifier
                    that uniquely identifies a specific version of it (i.e., to be able to differentiate different versions
                    of the same EPUB Publication). Whenever a Rendition is modified, it <literal role="rfc2119"
                        >must</literal> include a new <link linkend="elemdef-meta">last modified date</link>.</para>

                <para>To identify a specific version of a packaged EPUB Publication, a <olink targetdoc="spec"
                        targetptr="gloss-release-identifier" type="epub-spec"/> can be constructed by combining the Unique
                    Identifier with the last modified date of the Rendition. For more information on the semantics and
                    requirements of the Release Identifier, refer to <xref linkend="sec-opf-metadata-identifiers-pid"
                    />.</para>

                <para>Identifiers <literal role="rfc2119">may</literal> differ from <olink targetdoc="spec"
                        targetptr="gloss-rendition" type="epub-spec"/> to Rendition.</para>

                <para> This specification imposes no additional restrictions or requirements on identifiers except that they
                        <literal role="rfc2119">must</literal> be at least one character in length. It is strongly <literal
                        role="rfc2119">recommended</literal> that all identifiers be fully qualified URIs, however.</para>

                <xi:include href="share/whitespace.xml"/>

                <para> To determine whether an <markup>identifier</markup> conforms to an established system or has been
                    granted by an issuing authority, Reading Systems <literal role="rfc2119">should</literal> parse the value
                    of the property. For additional precision (e.g., if the scheme cannot be determined from the value or
                    could lead to an ambiguous result), <olink targetdoc="spec" targetptr="gloss-author" type="epub-spec"
                        >Authors</olink>
                    <literal role="rfc2119">may</literal>
                    <link linkend="attrdef-meta-refines">attach</link> an <link
                        xlink:href="http://www.idpf.org/epub/vocab/package/#identifier-type"
                            ><property>identifier-type</property> property</link>
                    <xref linkend="refEPUBPackageVocab"/> to assist in Reading System identification. When included, the
                        <property>identifier-type</property> property <literal role="rfc2119">should</literal> take
                    precedence over value parsing the <markup>identifier</markup>.</para>

                <informalexample>
                    <para>The following example shows how an <markup>identifier</markup> can be additionally marked as a DOI
                        using the <property>identifier-type</property> property.</para>
                    <synopsis><xi:include parse="text" href="examples/publications/identifier-2.xml"/></synopsis>
                </informalexample>

                <para> This specification does not require or endorse the use of any specific scheme for identifiers, and
                    imposes no restrictions or requirements on <property>identifier-type</property> identifiers beyond those
                    specified in the property definition. </para>

                <para>When an EPUB Publication is derived from another publication, the identifier for that source
                    publication <literal role="rfc2119">may</literal> be included in the EPUB Publication metadata, and
                        <literal role="rfc2119">must</literal> be represented using the <link linkend="sec-opf-dcsource"
                        >DCMES <markup>source</markup> element</link>.</para>
            </section>

            <section xml:id="sec-opf-dctitle" xreflabel="dc:title">
                <title>The DCMES <markup>title</markup> Element</title>

                <para>The <xref linkend="refDCMES"/>
                    <markup>title</markup> element represents an instance of a name given to the <olink targetdoc="spec"
                        targetptr="gloss-epub-publication" type="epub-spec"/>.</para>

                <variablelist xreflabel="dc:title" role="elem-synopsis" xml:id="elemdef-opf-dctitle">
                    <varlistentry>
                        <term>Element Name</term>
                        <listitem>
                            <para>
                                <markup>dc:title</markup>
                            </para>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>Namespace</term>
                        <listitem>
                            <para><uri>http://purl.org/dc/elements/1.1/</uri></para>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>Required child of <markup><xref role="codelink" linkend="elemdef-opf-metadata"/></markup>.
                                Repeatable.</para>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>
                            <variablelist role="elem-synopsis-attlist">

                                <varlistentry xml:id="attrdef-dctitle-id">
                                    <term>
                                        <markup>id</markup>
                                        <option>[optional]</option></term>
                                    <listitem>
                                        <xi:include href="share/id-prose-para.xml"/>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-dctitle-xml-lang">
                                    <term><markup>xml:lang</markup>
                                        <option>[optional]</option></term>
                                    <listitem>
                                        <xi:include href="./share/xmllang-prose-para.xml"/>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-dctitle-dir">
                                    <term><markup>dir</markup>
                                        <option>[optional]</option></term>
                                    <xi:include href="./share/dir-prose-listitem.xml"/>
                                </varlistentry>
                            </variablelist>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>Text</para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <para>Every <markup>metadata</markup> section <literal role="rfc2119">must</literal> include at least one
                        <markup>title</markup> element containing the title for the EPUB Publication. Multiple
                        <markup>title</markup> elements are permitted, but the <link
                        xlink:href="http://www.idpf.org/epub/vocab/package/#title-type"><property>title-type</property>
                        property</link>
                    <xref linkend="refEPUBPackageVocab"/>
                    <literal role="rfc2119">should</literal> be <link linkend="attrdef-meta-refines">attached</link> to
                    indicate the type of title (e.g., the main title of a work or a subtitle). </para>

                <informalexample>
                    <para>The following example shows how to indicate different title types.</para>
                    <synopsis><xi:include parse="text" href="examples/publications/title.xml"/></synopsis>
                </informalexample>

                <para>When adding the <property>title-type</property> property, <olink targetdoc="spec"
                        targetptr="gloss-author" type="epub-spec">Authors</olink>
                    <literal role="rfc2119">should</literal> designate only one <markup>title</markup> element as containing
                    the main title for the Publication. If no means of determining title types is provided, or understood,
                    Reading Systems <literal role="rfc2119">must</literal> treat the first <markup>title</markup> element in
                    document order as the main title. This specification does not define how additional
                        <markup>title</markup> elements <literal role="rfc2119">should</literal> be processed in such
                    situations.</para>

                <para>The optional <link xlink:href="http://www.idpf.org/epub/vocab/package/#display-seq"
                            ><property>display-seq</property> property</link>
                    <xref linkend="refEPUBPackageVocab"/>
                    <literal role="rfc2119">may</literal> also be attached to each <markup>title</markup> to indicate their
                    primacy for display and other rendering purposes. </para>

                <informalexample>
                    <para>The following example shows how to indicate display sequence.</para>
                    <synopsis><xi:include parse="text" href="examples/publications/title-2.xml"/></synopsis>
                </informalexample>

                <para>Titles <literal role="rfc2119">may</literal> differ from <olink targetdoc="spec"
                        targetptr="gloss-rendition" type="epub-spec"/> to Rendition.</para>

                <para> This specification imposes no additional restrictions or requirements on titles except that they
                        <literal role="rfc2119">must</literal> be at least one character in length. </para>

                <xi:include href="share/whitespace.xml"/>

                <bridgehead xml:id="sec-dctitles-examples">Examples</bridgehead>

                <informalexample>
                    <para>The following example shows how the title "THE LORD OF THE RINGS, Part One: The Fellowship of the
                        Ring" could be classified. </para>
                    <synopsis><xi:include parse="text" href="examples/publications/meta-ex-title-3.xml"/></synopsis>
                </informalexample>

                <informalexample>
                    <para>The following example shows how the complex title "The Great Cookbooks of the World: Mon premier
                        guide de cuisson, un Mémoire. The New French Cuisine Masters, Volume Two. Special Anniversary
                        Edition" could be classified. </para>
                    <synopsis><xi:include parse="text" href="examples/publications/meta-ex-title-2.xml"/></synopsis>
                </informalexample>

                <!--
                    <para> The <markup><link role="codelink" linkend="file-as">file-as</link></markup>
                    property can be attached to a <markup>title</markup> to include a normalized
                    representation of the title for machine and bibliographic sorting purposes. </para>
                    
                    <informalexample>
                    <para>The following example shows a <markup>title</markup> and its normalized
                    form for sorting.</para>
                    <synopsis><xi:include parse="text" href="examples/publications/title-3.xml"/></synopsis>
                    </informalexample>
                    
                    <para> The <markup><link role="codelink" linkend="alternate-script"
                    >alternate-script</link></code> property can also be attached to provide
                    a rendition of the <markup>title</markup> in another language and/or script. </para>
                    
                    <informalexample>
                    <para>The following example shows alternate renditions of a
                    <markup>title</markup> for French and English readers.</para>
                    <synopsis><xi:include parse="text" href="examples/publications/title-4.xml"/></synopsis>
                    </informalexample>
                -->

            </section>

            <section xml:id="sec-opf-dclanguage" xreflabel="dc:language">
                <title>The DCMES <markup>language</markup> Element</title>

                <para>The <xref linkend="refDCMES"/>
                    <markup>language</markup> element specifies the language of the content of the given <olink
                        targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/>.</para>

                <variablelist xreflabel="dc:language" role="elem-synopsis" xml:id="elemdef-opf-dclanguage">
                    <varlistentry>
                        <term>Element Name</term>
                        <listitem>
                            <para>
                                <markup>dc:language</markup>
                            </para>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>Namespace</term>
                        <listitem>
                            <para><uri>http://purl.org/dc/elements/1.1/</uri></para>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>Required child of <markup><xref role="codelink" linkend="elemdef-opf-metadata"
                                /></markup>.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>

                            <variablelist role="elem-synopsis-attlist">

                                <varlistentry xml:id="attrdef-dclanguage-id">
                                    <term>
                                        <markup>id</markup>
                                        <option>[optional]</option>
                                    </term>
                                    <listitem>
                                        <xi:include href="share/id-prose-para.xml"/>
                                    </listitem>
                                </varlistentry>
                            </variablelist>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>Text</para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <para>Each Rendition's <markup>metadata</markup> section <literal role="rfc2119">must</literal> include at
                    least one <markup>language</markup> element with a value conforming to <xref linkend="refRFC5646"
                    />.</para>

                <informalexample>
                    <para>The following example shows an <olink targetdoc="spec" targetptr="gloss-epub-publication"
                            type="epub-spec"/> is in U.S. English.</para>
                    <synopsis><xi:include parse="text" href="examples/publications/language.xml"/></synopsis>
                </informalexample>

                <para>Additional <markup>language</markup> elements <literal role="rfc2119">may</literal> be included for
                    multilingual Publications, but each element's value <literal role="rfc2119">must</literal> conform to
                        <xref linkend="refRFC5646"/>.</para>

                <para>Languages <literal role="rfc2119">may</literal> differ from <olink targetdoc="spec"
                        targetptr="gloss-rendition" type="epub-spec"/> to Rendition.</para>

                <xi:include href="share/whitespace.xml"/>

                <!--
                    <para>The <markup>metadata</markup> section <literal role="rfc2119">may</literal> optionally include a single <xref
                    linkend="refDCTERMS"/>
                    <markup>language</markup> property, which, when present, <literal role="rfc2119">must</literal> contain a value that
                    is:</para>
                    
                    <itemizedlist>
                    <listitem>
                    <para>a variable-length code as defined in <xref linkend="refRFC5646"
                    />;</para>
                    </listitem>
                    <listitem>
                    <para>a 2-letter language code as defined in <xref linkend="refISO6391"
                    />;</para>
                    </listitem>
                    <listitem>
                    <para>a 3-letter language code as defined in <xref linkend="refISO6392T"/>;
                    or</para>
                    </listitem>
                    <listitem>
                    <para>a 3-letter language code as defined in <xref linkend="refISO6393"
                    />.</para>
                    </listitem>
                    </itemizedlist>-->

            </section>

            <section xml:id="sec-opf-dcmes-optional" xreflabel="DCMES Optional Elements">
                <title>The DCMES Optional Elements</title>

                <para>All elements from the <xref linkend="refDCMES"/> element set — except for <markup><link
                            linkend="sec-opf-dcidentifier">identifier</link></markup>, <markup><link
                            linkend="sec-opf-dclanguage">language</link></markup> and <markup><link linkend="sec-opf-dctitle"
                            >title</link></markup>, as defined above — are designated as optional. These elements all conform
                    to the following generalized definition:</para>

                <variablelist xreflabel="optional DCMES definition" role="elem-synopsis" xml:id="elemdef-opf-dc-opt">
                    <varlistentry>
                        <term>Element Name</term>
                        <listitem>
                            <para>
                                <markup>contributor</markup> | <markup>coverage</markup> | <markup>creator</markup> |
                                    <markup>date</markup> | <markup>description</markup> | <markup>format</markup> |
                                    <markup>publisher</markup> | <markup>relation</markup> | <markup>rights</markup> |
                                    <markup>source</markup> | <markup>subject</markup> | <markup>type</markup>
                            </para>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>Namespace</term>
                        <listitem>
                            <para><uri>http://purl.org/dc/elements/1.1/</uri></para>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>Optional child of <markup><xref role="codelink" linkend="elemdef-opf-metadata"/></markup>.
                                Repeatable.</para>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>
                            <variablelist role="elem-synopsis-attlist">

                                <varlistentry xml:id="attrdef-dc-id">
                                    <term>
                                        <markup>id</markup>
                                        <option>[optional]</option></term>
                                    <listitem>
                                        <xi:include href="share/id-prose-para.xml"/>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-dc-xml-lang">
                                    <term><markup>xml:lang</markup>* <option>[optional]</option>
                                    </term>
                                    <listitem>
                                        <xi:include href="./share/xmllang-prose-para.xml"/>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-dc-dir">
                                    <term><markup>dir</markup>* <option>[optional]</option></term>
                                    <xi:include href="./share/dir-prose-listitem.xml"/>
                                </varlistentry>
                            </variablelist>
                        </listitem>
                    </varlistentry>

                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>Text</para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <para>* The <markup>xml:lang</markup> and <markup>dir</markup> attributes are permitted only on the following
                    elements: <markup>contributor</markup>, <markup>coverage</markup>, <markup>creator</markup>,
                        <markup>description</markup>, <markup>publisher</markup>, <markup>relation</markup>,
                        <markup>rights</markup> and <markup>subject</markup>.</para>

                <para>Optional metadata <literal role="rfc2119">may</literal> differ from <olink targetdoc="spec"
                        targetptr="gloss-rendition" type="epub-spec"/> to Rendition.</para>

                <para> The value of all optional <xref linkend="refDCMES"/> elements <literal role="rfc2119">must</literal>
                    be at least one character in length. </para>

                <xi:include href="share/whitespace.xml"/>

                <para>Except as detailed below, this specification does not modify the <xref linkend="refDCMES"/> definitions
                    for these elements.</para>

                <bridgehead xml:id="sec-opf-dccontributor" xreflabel="dc:contributor">The DCMES <markup>contributor</markup>
                    Element</bridgehead>

                <para>The <markup>contributor</markup> element is used to represent the name of a person, organization, etc.
                    that played a secondary role in the creation of the content of an EPUB Publication.</para>

                <para>The use of the <markup>contributor</markup> element is identical to the use of the
                        <markup>creator</markup> element in all other respects, as detailed in the next section.</para>

                <bridgehead xml:id="sec-opf-dccreator" xreflabel="dc:creator">The DCMES <markup>creator</markup>
                    Element</bridgehead>

                <para>The <markup>creator</markup> element represents the name of a person, organization, etc. responsible
                    for the creation of the content of an EPUB Publication. The <link
                        xlink:href="http://www.idpf.org/epub/vocab/package/#role"><markup>role</markup> property</link>
                    <xref linkend="refEPUBPackageVocab"/> can be <link linkend="attrdef-meta-refines">attached</link> to the
                    element to indicate the function the creator played in the creation of the content.</para>

                <informalexample>
                    <para>The following example shows how to represent a <markup>creator</markup> as an author using a MARC
                        relators term.</para>
                    <synopsis><xi:include parse="text" href="examples/publications/creator.xml"/></synopsis>
                </informalexample>

                <para>The <markup>creator</markup> element <literal role="rfc2119">should</literal> contain the name of the
                    creator as a Reading System will present it to a <olink targetdoc="spec" targetptr="gloss-user"
                        type="epub-spec"/>. The <property>file-as</property> property <literal role="rfc2119">may</literal>
                    be attached to include a normalized form of the name, and the <link
                        xlink:href="http://www.idpf.org/epub/vocab/package/#alternate-script"
                            ><property>alternate-script</property> property</link>
                    <xref linkend="refEPUBPackageVocab"/> can be used to represent a creator's name in another language or
                    script.</para>

                <informalexample>
                    <para>The following example shows the different ways a creator's name can be included to facilitate
                        processing and rendering.</para>
                    <synopsis><xi:include parse="text" href="examples/publications/creator-1.xml"/></synopsis>
                </informalexample>

                <para>If an EPUB Publication has more than one creator, each <literal role="rfc2119">should</literal> be
                    included in a separate <markup>creator</markup> element. The order in which to render the
                        <markup>creator</markup> names <literal role="rfc2119">should</literal> be specified using the <link
                        xlink:href="http://www.idpf.org/epub/vocab/package/#display-seq"><property>display-seq</property>
                        property</link>
                    <xref linkend="refEPUBPackageVocab"/>.</para>

                <informalexample>
                    <para>The following example shows how to indicate the display order for <markup>creator</markup>
                        elements.</para>
                    <synopsis><xi:include parse="text" href="examples/publications/creator-2.xml"/></synopsis>
                </informalexample>

                <para>If no means of establishing the primacy of creators for rendering is identifiable, Reading Systems
                        <literal role="rfc2119">must</literal> use the document order of <markup>creator</markup> elements in
                    the <markup>metadata</markup> section (i.e., where the first <markup>creator</markup> element encountered
                    is the primary creator). If a Reading System exposes creator metadata for the User, it <literal
                        role="rfc2119">should</literal> include all the creators listed in the <markup>metadata</markup>
                    section whenever possible (e.g., when not constrained by display considerations).</para>

                <para>Secondary contributors <literal role="rfc2119">should</literal> be represented using DCMES
                        <markup>contributor</markup> elements.</para>

                <bridgehead xml:id="sec-opf-dcdate" xreflabel="dc:date">The DCMES <markup>date</markup> Element</bridgehead>

                <para>The <markup>date</markup> element <literal role="rfc2119">must</literal> only be used to define the
                    publication date of the <olink targetdoc="spec" targetptr="gloss-epub-publication" type="epub-spec"/>.
                    The publication date is not the same as the <link linkend="last-modified-date">last modified date</link>
                    (the last time the <olink targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/> was changed),
                    which <literal role="rfc2119">must</literal> be included using the <xref linkend="refDCTERMS"/>
                    <property>modified</property> property.</para>

                <para>It is <literal role="rfc2119">recommended</literal> that the date string conform to <xref
                        linkend="refISO8601"/>, particularly the subset expressed in W3C Date and Time Formats <xref
                        linkend="refDateTime"/>, as such strings are both human and machine readable.</para>

                <informalexample>
                    <para>The following example shows a publication date.</para>
                    <synopsis><xi:include parse="text" href="examples/publications/date.xml"/></synopsis>
                </informalexample>

                <para>Additional dates <literal role="rfc2119">should</literal> be expressed using the specialized date
                    properties available in the <xref linkend="refDCTERMS"/> vocabulary, or similar.</para>

                <para>The publication date <literal role="rfc2119">may</literal> be common to all instances of an EPUB
                    Publication or <literal role="rfc2119">may</literal> change from instance to instance (e.g., if the EPUB
                    Publication gets generated on demand).</para>

                <para>Only one <markup>date</markup> element is allowed.</para>

                <bridgehead xml:id="sec-opf-dcsource" xreflabel="dc:source">The DCMES <markup>source</markup>
                    Element</bridgehead>

                <para>The <markup>source</markup> element identifies the related resource(s) from which this <olink
                        targetdoc="spec" targetptr="gloss-epub-publication" type="epub-spec"/> is derived.</para>

                <para>When a <olink targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/> includes page
                    identifiers, using the <property xlink:href="../../vocab/structure/epub-vocab-structure.html#pagebreak"
                        >pagebreak</property> property from the EPUB Structural Semantics Vocabulary <xref
                        linkend="refEPUBStructureVocab"/>, a <link
                        xlink:href="http://www.idpf.org/epub/vocab/package/#source-of"><property>source-of</property>
                        refinement property</link>
                    <xref linkend="refEPUBPackageVocab"/>
                    <literal role="rfc2119">should</literal> be attached to the <markup>source</markup> element that
                    identifies the source of the pagination.</para>

                <informalexample>
                    <para>The following example shows the ISBN identifier for an EPUB Publication together with the source
                        ISBN identifier for the print work it was derived from.</para>
                    <synopsis><xi:include parse="text" href="examples/publications/source.xml"/></synopsis>
                </informalexample>

                <bridgehead xml:id="sec-opf-dctype" xreflabel="dc:type">The DCMES <markup>type</markup> Element</bridgehead>

                <para>The <markup>type</markup> element is used to indicate that the given EPUB Publication is of a
                    specialized type (e.g., annotations packaged in EPUB format or a dictionary).</para>

                <para>The IDPF maintains an informative registry of specialized EPUB Publication types for use with this
                    element at <uri xlink:href="http://www.idpf.org/epub/vocab/package/types"
                        >http://www.idpf.org/epub/vocab/package/types</uri>.</para>

            </section>

            <section xml:id="sec-meta-elem" xreflabel="meta">
                <title>The <markup>meta</markup> Element</title>

                <para>The <markup>meta</markup> element provides a generic means of including package metadata, allowing the
                    expression of primary metadata about the package or content and refinement of that metadata.</para>

                <variablelist xreflabel="meta" role="elem-synopsis" xml:id="elemdef-meta">
                    <varlistentry>
                        <term>Element Name</term>
                        <listitem>
                            <para>
                                <markup>meta</markup>
                            </para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>As child of the <markup><xref role="codelink" linkend="elemdef-opf-metadata"/></markup>
                                element. Repeatable.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>
                            <variablelist role="elem-synopsis-attlist">
                                <varlistentry xml:id="attrdef-meta-property">
                                    <term>
                                        <markup>property</markup>
                                        <option>[required]</option>
                                    </term>
                                    <listitem>
                                        <para>A <link linkend="sec-property-datatype">property</link>.</para>
                                        <para>Refer to <xref linkend="sec-metadata-assoc"/> for more information.</para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-meta-refines">
                                    <term>
                                        <markup>refines</markup>
                                        <option>[context dependent]</option>
                                    </term>
                                    <listitem>
                                        <xi:include href="./share/refines-prose-para.xml"/>
                                        <para>The <markup>refines</markup> attribute is optional depending on the type of
                                            metadata being expressed. When omitted, the <markup>meta</markup> element defines
                                            a <link linkend="primary-expression">primary expression</link>.</para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-meta-id" xreflabel="id">
                                    <term>
                                        <markup>id</markup>
                                        <option>[optional]</option>
                                    </term>
                                    <listitem>
                                        <xi:include href="share/id-prose-para.xml"/>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-meta-scheme">
                                    <term>
                                        <markup>scheme</markup>
                                        <option>[optional]</option>
                                    </term>
                                    <listitem>
                                        <para>A <link linkend="sec-property-datatype">property</link> data type value
                                            indicating the source the value of the element is drawn from.</para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-meta-xml-lang">
                                    <term><markup>xml:lang</markup>
                                        <option>[optional]</option></term>
                                    <listitem>
                                        <xi:include href="./share/xmllang-prose-para.xml"/>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-meta-dir">
                                    <term><markup>dir</markup>
                                        <option>[optional]</option></term>
                                    <xi:include href="./share/dir-prose-listitem.xml"/>
                                </varlistentry>
                            </variablelist>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>Text</para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <para>Each <markup>meta</markup> element defines a metadata expression, where the <markup>property</markup>
                    attribute defines the statement being made in the expression and the text content of the element
                    represents the assertion. </para>

                <para>This specification defines two types of metadata expressions that can be defined using the
                        <markup>meta</markup> element:</para>

                <itemizedlist>
                    <listitem xml:id="primary-expression">
                        <para>A <emphasis>primary expression</emphasis> is one in which the expression defined in the
                                <markup>meta</markup> element establishes some aspect of the <olink targetdoc="spec"
                                targetptr="gloss-epub-publication" type="epub-spec"/>. A <markup>meta</markup> element that
                            omits a <markup>refines</markup> attribute defines a primary expression.</para>
                    </listitem>
                    <listitem xml:id="subexpression">
                        <para>A <emphasis>subexpression</emphasis> is one in which the expression defined in the
                                <markup>meta</markup> element enhances the meaning of the expression or resource referenced
                            in its <markup>refines</markup> attribute. A subexpression <literal role="rfc2119">may</literal>
                            refine a media clip, for example, by expressing its duration, or refine a creator or contributor
                            expression by defining the person's role. </para>
                        <para>Subexpressions are not limited to refining only primary expressions and resources; they
                                <literal role="rfc2119">may</literal> be used to refine the meaning of other subexpressions,
                            thereby creating chains of information.</para>
                    </listitem>
                </itemizedlist>

                <note>
                    <para>All of the <xref linkend="refDCMES"/> elements represent primary expressions, and permit refinement
                        by <markup>meta</markup> element subexpressions.</para>
                </note>

                <para>This specification <link linkend="sec-metadata-reserved-vocabs">reserves a set of vocabularies</link>
                    for use in the <markup>property</markup> attribute, but terms from any vocabulary <literal role="rfc2119"
                        >may</literal> be used so long as a <link linkend="sec-prefix-attr">prefix is declared</link> for the
                    vocabulary.</para>

                <para>The <markup>scheme</markup> attribute can be used to identify the system or scheme that a
                        <markup>meta</markup> element's value is drawn from. The value of the <markup>scheme</markup>
                    attribute is a <link linkend="sec-property-datatype">property</link> data type that resolves to the
                    resource that defines the scheme.</para>

                <informalexample>
                    <para>The following example shows how a subexpression can be attached to an <markup>creator</markup> to
                        indicate it represents an author. The <markup>scheme</markup> indicates the value is drawn from the
                        MARC relators terms.</para>
                    <synopsis><xi:include parse="text" href="examples/publications/meta-ancillary.xml"/></synopsis>
                </informalexample>

                <para>If a Reading System does not recognize the <markup>scheme</markup> attribute value, it <literal
                        role="rfc2119">should</literal> treat the value of the element as a string.</para>

                <para>Reading Systems <literal role="rfc2119">should</literal> ignore all <markup>meta</markup> elements
                    whose <markup>property</markup> attributes define expressions they do not recognize. A Reading System
                        <literal role="rfc2119">must not</literal> fail when encountering unknown expressions.</para>

                <para xml:id="last-modified-date">In order to ensure that a <olink targetdoc="spec"
                        targetptr="gloss-release-identifier" type="epub-spec"/> can be constructed, the
                        <markup>metadata</markup> element <literal role="rfc2119">must</literal> contain exactly one
                        <markup>meta</markup> element defining a <xref linkend="refDCTERMS"/>
                    <property>modified</property> property for the given Rendition. Additional <markup>modified</markup>
                    properties <literal role="rfc2119">may</literal> be included, but they <literal role="rfc2119"
                        >must</literal> have a different subject (i.e., they <literal role="rfc2119">must</literal> include a
                        <markup>refines</markup> attribute that references an element or resource).</para>

                <para>Every <markup>meta</markup> element <literal role="rfc2119">must</literal> express a value that is at
                    least one character in length after whitespace normalization.</para>

                <para>Unless an individual property explicitly defines a different whitespace normalization algorithm,
                    Reading Systems <literal role="rfc2119">must</literal> trim all leading and trailing whitespace from the
                        <markup>meta</markup> element values, as defined by the XML specification <xref linkend="refXML"/>,
                    before further processing them.</para>

                <bridgehead xml:id="sec-meta-elem-examples">Examples</bridgehead>

                <informalexample>
                    <para>The following example represents a more complete set of metadata that a Rendition will typically
                        contain.</para>
                    <synopsis><xi:include href="examples/publications/meta-example-full.xml" parse="text"/></synopsis>
                </informalexample>

                <informalexample>
                    <para>The following example shows an identifier that has been issued by a metadata authority.</para>
                    <synopsis><xi:include parse="text" href="examples/publications/meta-example-authority.xml"/></synopsis>
                </informalexample>

            </section>

            <section xml:id="sec-opf-meta-elem" xreflabel="OPF2 meta">
                <title>The <markup>meta</markup> Element (OPF2) [OBSOLETE]</title>

                <para>The <markup>meta</markup> element defined in <xref linkend="refOPF2"/> has been obsoleted and replaced
                    by the new <markup linkend="elemdef-meta">meta</markup> element, but <literal role="rfc2119"
                        >may</literal> be included as an optional repeatable child of the <markup>metadata</markup> element
                    for forwards compatibility purposes. </para>

                <para>EPUB 3 Reading Systems <literal role="rfc2119">must</literal> ignore this element.</para>

            </section>

            <section xml:id="sec-link-elem" xreflabel="link">
                <title>The <markup>link</markup> Element</title>

                <para>The <markup>link</markup> element is used to associate resources with the given <olink targetdoc="spec"
                        targetptr="gloss-rendition" type="epub-spec"/> of the <olink targetdoc="spec"
                        targetptr="gloss-epub-publication" type="epub-spec"/>, such as metadata records.</para>

                <variablelist xreflabel="link" role="elem-synopsis" xml:id="elemdef-opf-link">
                    <varlistentry>
                        <term>Element Name</term>
                        <listitem>
                            <para>
                                <markup>link</markup>
                            </para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>As a child of <markup><xref role="codelink" linkend="elemdef-opf-metadata"/></markup>.
                                Repeatable.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>
                            <variablelist role="elem-synopsis-attlist">
                                <varlistentry xml:id="attrdef-link-href" xreflabel="href">
                                    <term>
                                        <markup>href</markup>
                                        <option>[required]</option>
                                    </term>
                                    <listitem>
                                        <para>An absolute or relative IRI reference <xref linkend="refRFC3987"/> to a
                                            resource.</para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-link-rel" xreflabel="rel">
                                    <term>
                                        <markup>rel</markup>
                                        <option>[required]</option>
                                    </term>
                                    <listitem>
                                        <xi:include href="./share/curies-resolve-para.xml"/>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-link-id" xreflabel="id">
                                    <term>
                                        <markup>id</markup>
                                        <option>[optional]</option>
                                    </term>
                                    <listitem>
                                        <xi:include href="share/id-prose-para.xml"/>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-link-refines">
                                    <term>
                                        <markup>refines</markup>
                                        <option>[optional]</option>
                                    </term>
                                    <listitem>
                                        <xi:include href="./share/refines-prose-para.xml"/>
                                        <para>When the <markup>refines</markup> attribute is omitted, the expression applies
                                            to the EPUB Publication as a whole.</para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-link-media-type">
                                    <term>
                                        <markup>media-type</markup>
                                        <option>[optional]</option>
                                    </term>
                                    <listitem>
                                        <para>A media type <xref linkend="refRFC2046"/> that specifies the type and format of
                                            the resource referenced by this <markup>link</markup>.</para>
                                    </listitem>
                                </varlistentry>
                            </variablelist>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>Empty</para>
                        </listitem>
                    </varlistentry>
                </variablelist>
                <para>The <markup>metadata</markup> element <literal role="rfc2119">may</literal> contain zero or more
                        <markup>link</markup> elements.</para>
                <para> The <markup>href</markup> attribute of the <markup>link</markup> element identifies the location of
                    the resource — inclusion of which is optional in the container file — and the <markup>rel</markup>
                    attribute defines the nature of the resource (i.e., its relation to the given Rensition of the EPUB
                    Publication or property specified in the <markup>refines</markup> attribute). Reading Systems are
                        <literal role="rfc2119">not required</literal> to dereference these resources. Refer to the <link
                        xlink:href="http://www.idpf.org/epub/vocab/package/link/">EPUB Link Relationships
                    Vocabulary</link>for the list of resource types that are recognized by this specification.</para>
                <para>Resources identified by the <markup>link</markup> element <markup>href</markup> attribute <literal
                        role="rfc2119">must not</literal> be listed in the <link linkend="sec-manifest-elem"
                    >manifest</link>.</para>
                <para>When the <markup>link</markup> element references a metadata record, precedence <literal role="rfc2119"
                        >must</literal> be given to metadata defined inline in the Package Document <markup>metadata</markup>
                    element in the case of conflicts.</para>
                <para>The optional <markup>refines</markup> attribute can be attached when the referenced resource applies to
                    another metadata item (e.g., to tie an XML Signature <xref linkend="refXMLDSIGCORE"/> to a metadata
                    authority). The resource applies to the Rendition when the attribute is not present.</para>
                <para>If a Reading System does not recognize the relationship of the resource as defined in the
                        <markup>rel</markup> attribute, it <literal role="rfc2119">should</literal> ignore the
                        <markup>link</markup> element.</para>
                <bridgehead>Examples</bridgehead>
                <informalexample>
                    <para>The following example shows the <markup>link</markup> element used to associate three metadata
                        resources with the Rendition: an ONIX record, an XMP record, and a link to an informational web page.
                        Note that as <property>foaf</property> is not a <link linkend="sec-metadata-reserved-vocabs"
                            >predefined prefix</link>, the <link linkend="attrdef-package-prefix">metadata extensibility
                            mechanism</link> is employed to associate the vocabulary. </para>
                    <synopsis><xi:include parse="text" href="examples/publications/link-2.xml"/></synopsis>
                </informalexample>
            </section>

            <section xml:id="sec-manifest-elem" xreflabel="manifest">
                <title>The <markup>manifest</markup> Element</title>

                <para>The <markup>manifest</markup> element provides an exhaustive list of the <olink targetdoc="spec"
                        targetptr="gloss-publication-resource-cmt-or-foreign" type="epub-spec">Publication Resources</olink>
                    that constitute the given <olink targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/>, each
                    represented by an <markup><xref role="codelink" linkend="sec-item-elem"/></markup> element.</para>

                <variablelist xreflabel="manifest" role="elem-synopsis" xml:id="elemdef-opf-manifest">
                    <varlistentry>
                        <term>Element name</term>
                        <listitem>
                            <para><markup>manifest</markup></para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>Required second child of <markup><xref role="codelink" linkend="elemdef-opf-package"
                                    /></markup>, following <markup><xref role="codelink" linkend="elemdef-opf-metadata"
                                    /></markup>.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>
                            <variablelist role="elem-synopsis-attlist">
                                <varlistentry xml:id="attrdef-manifest-id" xreflabel="id">
                                    <term><markup>id</markup>
                                        <option>[optional]</option></term>
                                    <listitem>
                                        <xi:include href="./share/id-prose-para.xml"/>
                                    </listitem>
                                </varlistentry>
                            </variablelist>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>One or more <markup><xref role="codelink" linkend="elemdef-package-item"/></markup>
                                elements <option>[required]</option></para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <note>
                    <para>This specification supports internationalized resource naming, so elements and attributes that
                        reference Publication Resources accept IRIs as their value. For compatibility with older Reading
                        Systems that only accept URIs, resource names should be restricted to the ASCII character set.</para>
                </note>

            </section>

            <section xml:id="sec-item-elem" xreflabel="item">
                <title>The <markup>item</markup> Element</title>

                <para>The <markup>item</markup> element represents a <olink targetdoc="spec"
                        targetptr="gloss-publication-resource-cmt-or-foreign" type="epub-spec"/>.</para>

                <variablelist xreflabel="item" role="elem-synopsis" xml:id="elemdef-package-item">
                    <varlistentry>
                        <term>Element Name</term>
                        <listitem>
                            <para><markup>item</markup></para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>As a child of <markup><xref role="codelink" linkend="elemdef-opf-manifest"/></markup>.
                                Repeatable.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>
                            <variablelist role="elem-synopsis-attlist">
                                <varlistentry xml:id="attrdef-item-id" xreflabel="id">
                                    <term><markup>id</markup>
                                        <option>[required]</option></term>
                                    <listitem>
                                        <xi:include href="share/id-prose-para.xml"/>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-item-href" xreflabel="href">
                                    <term><markup>href</markup>
                                        <option>[required]</option></term>
                                    <listitem>
                                        <para>An IRI <xref linkend="refRFC3987"/> specifying the location of the Publication
                                            Resource described by this <markup>item</markup>.</para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-item-media-type" xreflabel="media-type">
                                    <term><markup>media-type</markup>
                                        <option>[required]</option></term>
                                    <listitem>
                                        <para>A media type <xref linkend="refRFC2046"/> that specifies the type and format of
                                            the Publication Resource described by this <markup>item</markup>.</para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-item-fallback" xreflabel="fallback">
                                    <term><markup>fallback</markup>
                                        <option>[conditionally required]</option></term>
                                    <listitem>
                                        <para>An IDREF <xref linkend="refXML"/> that identifies the fallback for a non-Core
                                            Media Type.</para>
                                        <para>Refer to <xref linkend="sec-fallback-processing-flow-manifest"/> for more
                                            information.</para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xreflabel="properties" xml:id="attrdef-item-properties">
                                    <term><markup>properties</markup>
                                        <option>[optional]</option></term>
                                    <listitem>
                                        <xi:include href="./share/curies-resolve-para.xml"/>
                                        <para>Refer to <link
                                                xlink:href="http://www.idpf.org/epub/vocab/package/#sec-item-property-values"
                                                >Manifest <markup>item</markup> Properties</link>
                                            <xref linkend="refEPUBPackageVocab"/> for a set of properties defined by this
                                            specification.</para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xreflabel="media-overlay" xml:id="attrdef-item-media-overlay">
                                    <term><markup>media-overlay</markup>
                                        <option>[optional]</option></term>
                                    <listitem>
                                        <para>An IDREF <xref linkend="refXML"/> that identifies the <olink targetdoc="spec"
                                                targetptr="gloss-media-overlay-document" type="epub-spec"/> for the resource
                                            described by this <markup>item</markup>.</para>
                                        <para>Refer to <olink type="epub-spec" targetdoc="mediaoverlays"
                                                targetptr="sec-docs-package"/> for more information.</para>
                                    </listitem>
                                </varlistentry>
                            </variablelist>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>Empty</para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <para>Each <markup>item</markup> element in the <markup>manifest</markup> identifies a <olink
                        targetdoc="spec" targetptr="gloss-publication-resource-cmt-or-foreign" type="epub-spec"/> by the IRI
                    provided in its <markup>href</markup> attribute. The IRI <literal role="rfc2119">may</literal> be
                    absolute or relative. In the case of relative IRIs, Reading Systems <literal role="rfc2119"
                        >must</literal> use the IRI of the Package Document as the base when resolving these to absolute
                    IRIs. The resulting absolute IRI <literal role="rfc2119">must</literal> be unique within the
                        <markup>manifest</markup> scope.</para>

                <para>All Publication Resources <literal role="rfc2119">must</literal> be referenced from the
                        <markup>manifest</markup>, regardless of whether they are included in the <olink targetdoc="spec"
                        targetptr="gloss-container" type="epub-spec"/> or made available remotely. Refer to <xref
                        linkend="sec-resource-locations"/> for media type-specific requirements regarding resource
                    locations.</para>

                <para>The Publication Resource identified by an <markup>item</markup> element <literal role="rfc2119"
                        >must</literal> conform to the applicable specification(s) as inferred from the MIME media type
                    provided in the <markup>media-type</markup> attribute. <olink targetdoc="spec"
                        targetptr="gloss-publication-resource-cmt" type="epub-spec">Core Media Type Resources</olink>
                    <literal role="rfc2119">must</literal> use the media type designated in <xref
                        linkend="tbl-core-media-types"/>.</para>

                <para>All <olink targetdoc="spec" targetptr="gloss-publication-resource-foreign" type="epub-spec">Foreign
                        Resources</olink>
                    <literal role="rfc2119">must</literal> provide a fallback as defined in <xref
                        linkend="sec-fallback-processing-flow"/>.</para>

                <para>All Publication Resources <literal role="rfc2119">must</literal> declare any applicable descriptive
                    metadata properties as defined in <link
                        xlink:href="http://www.idpf.org/epub/vocab/package/#sec-item-property-values">Manifest
                            <markup>item</markup> Properties</link>
                    <xref linkend="refEPUBPackageVocab"/> via the <markup>item</markup> element <markup><xref role="codelink"
                            linkend="attrdef-item-properties"/></markup> attribute. Exactly one <markup>item</markup>
                    <literal role="rfc2119">must</literal> be declared as the <olink targetdoc="spec"
                        targetptr="gloss-content-document-epub-nav" type="epub-spec"/> using the <property>nav</property>
                    property.</para>

                <para>Reading Systems <literal role="rfc2119">must</literal> ignore all descriptive metadata properties that
                    they do not recognize.</para>

                <para>The <markup>manifest</markup> is not self-referencing: it <literal role="rfc2119">must not</literal>
                    include an <markup>item</markup> element that refers to the Package Document itself.</para>

                <note>
                    <para>The order of <markup>item</markup> elements in the <markup>manifest</markup> is not significant.
                        The presentation sequence of content documents is provided in the <markup><link role="codelink"
                                linkend="sec-spine-elem">spine</link></markup>.</para>
                </note>

                <bridgehead xml:id="examples-manifest" xreflabel="Manifest examples">Examples</bridgehead>

                <informalexample xml:id="example-manifest-cmt">
                    <para>The following example shows a <markup>manifest</markup> that only contains <olink targetdoc="spec"
                            targetptr="gloss-publication-resource-cmt" type="epub-spec">Core Media Type
                        Resources</olink>.</para>
                    <synopsis><xi:include href="./examples/publications/manifest-1.xml" parse="text"/></synopsis>
                </informalexample>

                <informalexample xml:id="example-manifest-flbk">
                    <para>The following example shows a <markup>manifest</markup> that references two <olink targetdoc="spec"
                            targetptr="gloss-publication-resource-foreign" type="epub-spec">Foreign Resources</olink>, and
                        therefore uses the <link linkend="sec-fallback-processing-flow-manifest">fallback chain
                            mechanism</link> to supply content alternatives. The fallback chain terminates with a Core Media
                        Type. </para>
                    <synopsis><xi:include href="./examples/publications/manifest-2.xml" parse="text"/></synopsis>
                </informalexample>

                <note>
                    <para>Refer also to the <link
                            xlink:href="http://www.idpf.org/epub/vocab/package/#examples-item-properties">Manifest item
                            properties examples</link> for use of the <markup>properties</markup> attribute.</para>
                </note>
            </section>

            <section xml:id="sec-spine-elem" xreflabel="spine">
                <title>The <markup>spine</markup> Element</title>

                <para>The <markup>spine</markup> element defines the default reading order of the given <olink
                        targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/> of the <olink targetdoc="spec"
                        targetptr="gloss-epub-publication" type="epub-spec"/> content by defining an ordered list of <link
                        linkend="sec-itemref-elem">manifest <markup>item</markup> references</link>.</para>

                <variablelist xreflabel="spine" role="elem-synopsis" xml:id="elemdef-opf-spine">
                    <varlistentry>
                        <term>Element name</term>
                        <listitem>
                            <para><markup>spine</markup></para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>Required third child of <markup><xref role="codelink" linkend="elemdef-opf-package"
                                    /></markup>, following <markup><xref role="codelink" linkend="elemdef-opf-manifest"
                                    /></markup>.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>
                            <variablelist role="elem-synopsis-attlist">
                                <varlistentry xml:id="attrdef-spine-id">
                                    <term><markup>id</markup>
                                        <option>[optional]</option></term>
                                    <listitem>
                                        <xi:include href="./share/id-prose-para.xml"/>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-spine-toc" xreflabel="toc">
                                    <term><markup>toc</markup>
                                        <option>[optional]</option></term>
                                    <listitem>
                                        <para>An IDREF <xref linkend="refXML"/> that identifies the manifest <markup><xref
                                                    role="codelink" linkend="elemdef-package-item"/></markup> that represents
                                            the superseded NCX.</para>
                                        <para>Refer to <xref linkend="ncx-superseded"/> for more information.</para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-spine-page-progression-direction"
                                    xreflabel="page-progression-direction">
                                    <term><markup>page-progression-direction</markup>
                                        <option>[optional]</option></term>
                                    <listitem>
                                        <para>The global direction in which the content flows.</para>
                                        <para>Allowed values are <code role="value">ltr</code> (left-to-right), <code
                                                role="value">rtl</code> (right-to-left) and <code role="value"
                                            >default</code>.</para>
                                        <para>When the <code role="value">default</code> value is specified, the Author is
                                            expressing no preference and the Reading System <literal role="rfc2119"
                                                >may</literal> chose the rendering direction. This value <literal
                                                role="rfc2119">must</literal> be assumed when the attribute is not
                                            specified.</para>
                                    </listitem>
                                </varlistentry>
                            </variablelist>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>One or more <markup><xref role="codelink" linkend="elemdef-spine-itemref"/></markup>
                                elements <option>[required]</option></para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <para>The <markup>spine</markup> represents an ordered subset of the Publication Resources listed in the
                        <markup>manifest</markup>, providing the default reading order for the given Rendition.</para>

                <para>Reading Systems <literal role="rfc2119">must</literal> provide a means of rendering the Rendition in
                    the order defined in the <markup>spine</markup>, which includes: 1) recognizing the first primary
                        <markup>itemref</markup> as the beginning of the default reading order; and, 2) rendering successive
                    primary items in the order given in the <markup>spine</markup>.</para>

                <para>All <olink targetdoc="spec" targetptr="gloss-content-document-epub" type="epub-spec">EPUB Content
                        Documents</olink> that are linked to from EPUB Content Documents in the <markup>spine</markup>
                    <literal role="rfc2119">must</literal> themselves be listed in the <markup>spine</markup>. Linked
                    documents include documents referenced from the <markup>href</markup> attribute of <markup>a</markup> and
                        <markup>area</markup> elements and scripted links (e.g., using DOM Events and/or form elements). All
                    EPUB Content Documents linked to from the EPUB Navigation Document <literal role="rfc2119">must</literal>
                    be listed in the <markup>spine</markup>, as well, regardless of whether the Navigation Document has been
                    included in the <markup>spine</markup>. The requirement to list linked documents applies recursively
                    (i.e., all Content Documents linked to from linked Content Documents also have to be listed, and so
                    on.).</para>

                <para>Although the <markup>page-progression-direction</markup> attribute sets the global flow direction,
                    individual Content Documents and parts of Content Documents <literal role="rfc2119">may</literal>
                    override this setting (e.g., via the <property>writing-mode</property> CSS property). Reading Systems
                        <literal role="rfc2119">may</literal> also provide mechanisms to override the default direction
                    (e.g., buttons or settings that allow the application of alternate style sheets).</para>

                <para>Reading Systems <literal role="rfc2119">must</literal> ignore the page progression direction defined in
                        <link linkend="fxl-property-layout"><code role="value">pre-paginated</code></link> XHTML Content
                    Documents. The <markup>page-progression-direction</markup> attribute defines the flow direction from one
                    fixed-layout page to the next.</para>


                <bridgehead xml:id="ncx-superseded">NCX Superseded</bridgehead>

                <para>The NCX feature defined in <xref linkend="refOPF2"/> is superseded by the <link linkend="sec-xhtml-nav"
                        >EPUB Navigation Document</link>. EPUB 3 Publications <literal role="rfc2119">may</literal> include
                    an NCX (as defined in OPF 2.0.1) for EPUB 2 Reading System forwards compatibility purposes, but EPUB 3
                    Reading Systems <literal role="rfc2119">must</literal> ignore the NCX.</para>

                <note xml:id="note-ncx">
                    <para>As the EPUB 2 NCX and the EPUB 3 Navigation Document use different mechanisms for identification in
                        the Package Document (the spine <markup><link linkend="attrdef-spine-toc">toc</link></markup>
                        attribute and the <link xlink:href="http://www.idpf.org/epub/vocab/package/#nav"
                                ><property>nav</property> property</link>
                        <xref linkend="refEPUBPackageVocab"/> on the manifest <markup>item</markup> element, respectively)
                        they can co-exist without conflict in an EPUB 3 Publication.</para>
                </note>

            </section>

            <section xml:id="sec-itemref-elem" xreflabel="itemref">
                <title>The <markup>itemref</markup> Element</title>

                <para>The child <markup>itemref</markup> elements of the <markup>spine</markup> represent a sequential list
                    of <olink targetdoc="spec" targetptr="gloss-publication-resource-cmt-or-foreign" type="epub-spec"
                        >Publication Resources</olink> (<link linkend="confreq-spine-itemtypes">typically</link>
                    <olink targetdoc="spec" targetptr="gloss-content-document-epub" type="epub-spec">EPUB Content
                        Documents</olink>). The order of the <markup>itemref</markup> elements defines the default reading
                    order of the given <olink targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/> of the <olink
                        targetdoc="spec" targetptr="gloss-epub-publication" type="epub-spec"/>.</para>

                <variablelist xreflabel="itemref" role="elem-synopsis" xml:id="elemdef-spine-itemref">
                    <varlistentry>
                        <term>Element Name</term>
                        <listitem>
                            <para><markup>itemref</markup></para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>As a child of <markup><xref role="codelink" linkend="elemdef-opf-spine"/></markup>.
                                Repeatable.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>
                            <variablelist role="elem-synopsis-attlist">
                                <varlistentry xml:id="attrdef-itemref-idref" xreflabel="idref">
                                    <term><markup>idref</markup>
                                        <option>[required]</option></term>
                                    <listitem>
                                        <para>An IDREF <xref linkend="refXML"/> that identifies a manifest <xref
                                                linkend="elemdef-package-item"/>.</para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xreflabel="linear" xml:id="attrdef-itemref-linear">
                                    <term><markup>linear</markup>
                                        <option>[optional]</option></term>
                                    <listitem>
                                        <para>Specifies whether the referenced content is primary.</para>
                                        <para>The value of the attribute <literal role="rfc2119">must</literal> be <code
                                                role="value">yes</code> or <code role="value">no</code>. The default value is
                                                <code role="value">yes</code>.</para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-itemref-id">
                                    <term><markup>id</markup>
                                        <option>[optional]</option></term>
                                    <listitem>
                                        <xi:include href="./share/id-prose-para.xml"/>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xreflabel="properties" xml:id="attrdef-itemref-properties">
                                    <term><markup>properties</markup>
                                        <option>[optional]</option></term>
                                    <listitem>
                                        <xi:include href="./share/curies-resolve-para.xml"/>
                                        <para>Refer to <link
                                                xlink:href="http://www.idpf.org/epub/vocab/package/#sec-itemref-property-values"
                                                >Spine itemref Properties</link>
                                            <xref linkend="refEPUBPackageVocab"/> for a set of properties defined by this
                                            specification.</para>
                                    </listitem>
                                </varlistentry>
                            </variablelist>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>Empty</para>
                        </listitem>
                    </varlistentry>

                </variablelist>

                <para>Each <markup>itemref</markup> element <literal role="rfc2119">must</literal> reference a unique
                            <markup><xref linkend="elemdef-package-item"/></markup> in the <olink targetdoc="spec"
                        targetptr="gloss-manifest" type="epub-spec"/> via its <markup><xref linkend="attrdef-itemref-idref"
                        /></markup> attribute. </para>

                <para xml:id="confreq-spine-itemtypes">Each referenced manifest <markup>item</markup>
                    <literal role="rfc2119">must</literal> be either a) an <olink targetdoc="spec"
                        targetptr="gloss-content-document-epub" type="epub-spec"/> or b) another type of <olink
                        targetdoc="spec" targetptr="gloss-publication-resource-cmt-or-foreign" type="epub-spec"/> which,
                        <emphasis>regardless of whether it is a <olink targetdoc="spec"
                            targetptr="gloss-publication-resource-cmt" type="epub-spec"/> or a <olink targetdoc="spec"
                            targetptr="gloss-publication-resource-foreign" type="epub-spec"/></emphasis>, <literal
                        role="rfc2119">must</literal> include an EPUB Content Document in its <link
                        linkend="sec-fallback-processing-flow-manifest">fallback chain</link>.</para>

                <note>
                    <para>Although the <olink targetdoc="spec" targetptr="gloss-content-document-epub-nav" type="epub-spec"/>
                        is <link linkend="confreq-nav-occur">required in EPUB Publications</link>, it is optional to include
                        it in the <markup>spine</markup>.</para>
                </note>

                <para>The <markup>itemref</markup> element <markup>linear</markup> attribute indicates whether referenced
                    item is considered primary (<code role="value">yes</code>) or auxiliary (<code role="value">no</code>) in
                    the <markup>spine</markup>. Each Rendition <literal role="rfc2119">must</literal> include at least one
                    primary <markup>itemref</markup>.</para>

                <para>The <markup>linear</markup> attribute <literal role="rfc2119">may</literal> be used to enable Reading
                    Systems to distinguish presentation of body content from supplementary content which might be, for
                    example, presented in a popup window or omitted from an aural rendering. Reading Systems <literal
                        role="rfc2119">should</literal> provide Users the ability to control whether non-linear content is
                    rendered in the default reading order.</para>

                <para>Any applicable descriptive metadata properties, such as those defined in the <link
                        xlink:href="http://www.idpf.org/epub/vocab/package/#sec-itemref-property-values">Spine
                            <markup>itemref</markup> Properties</link>
                    <xref linkend="refEPUBPackageVocab"/>, <literal role="rfc2119">should</literal> be declared via the
                            <markup><xref role="codelink" linkend="attrdef-itemref-properties"/></markup> attribute.</para>

                <para>Reading Systems <literal role="rfc2119">must</literal> ignore all metadata properties expressed in the
                        <markup>properties</markup> attribute that they do not recognize.</para>

                <bridgehead>Examples</bridgehead>
                <informalexample>
                    <para>The following example shows a <markup>spine</markup> element corresponding to <link
                            linkend="example-manifest-cmt">the manifest example above</link>.</para>
                    <synopsis><xi:include href="./examples/publications/spine-1.xml" parse="text"/></synopsis>
                </informalexample>

            </section>

            <section xml:id="sec-guide-elem" xreflabel="guide">
                <title>The <markup>guide</markup> Element [DEPRECATED]</title>

                <para>The <markup>guide</markup> element <xref linkend="refOPF2"/> is deprecated in favor of the
                        <property>landmarks</property> feature in the <olink targetdoc="spec"
                        targetptr="gloss-content-document-epub-nav" type="epub-spec"/>. Refer to <xref
                        linkend="sec-xhtml-nav-def-types-landmarks"/> for more information.</para>

                <para>Authors <literal role="rfc2119">may</literal> include the <markup>guide</markup> element in the Package
                    Document for EPUB 2 Reading System forwards compatibility purposes. EPUB 3 Reading Systems <literal
                        role="rfc2119">must</literal> ignore the <markup>guide</markup> element when provided in EPUB 3
                    Publications whose <olink targetdoc="spec" targetptr="gloss-content-document-epub-nav" type="epub-spec"/>
                    includes the <property>landmarks</property> feature.</para>

            </section>

            <section xml:id="sec-bindings-elem" xreflabel="bindings">
                <title>The <markup>bindings</markup> Element</title>

                <para>The <markup>bindings</markup> element defines a set of custom handlers for media types not supported by
                    this specification.</para>

                <variablelist xreflabel="bindings" role="elem-synopsis" xml:id="elemdef-bindings">
                    <varlistentry>
                        <term>Element Name</term>
                        <listitem>
                            <para><markup>bindings</markup></para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>Optional fourth or fifth child of <markup><xref role="codelink"
                                        linkend="elemdef-opf-package"/></markup>, following <markup><xref role="codelink"
                                        linkend="elemdef-opf-spine"/></markup> or <markup><link role="codelink"
                                        linkend="sec-guide-elem">guide</link></markup>.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>
                            <para>None.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>One or more <markup><xref role="codelink" linkend="elemdef-mediaType"/></markup> elements
                                    <option>[required]</option></para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <para>The <markup><xref role="codelink" linkend="elemdef-opf-package"/></markup> element <literal
                        role="rfc2119">may</literal> contain at most one <markup>bindings</markup> element. </para>

                <para>The <markup>bindings</markup> element provides a means for Authors to include more sophisticated
                    fallbacks than would otherwise be possible with the <xref linkend="refHTML5"/>
                    <markup xlink:href="http://www.w3.org/TR/html5/Overview.html#the-object-element">object</markup>
                    element's intrinsic fallback mechanisms. When present, Reading Systems that support scripting <literal
                        role="rfc2119">must</literal> utilize the <markup>bindings</markup> element to handle
                        <markup>object</markup> elements that reference unsupported media types.</para>

                <para>Each of the <markup>bindings</markup> element's child <markup><link linkend="sec-mediaType-elem"
                            >mediaType</link></markup> elements defines a unique handler for one of the foreign media types
                    referenced in the <olink targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/>'s <olink
                        targetdoc="spec" targetptr="gloss-content-document-epub-xhtml" type="epub-spec">XHTML Content
                        Documents</olink>.</para>

                <para>When an unsupported media type is encountered during processing of a document, the Reading System
                        <literal role="rfc2119">must</literal> look up the handler in the <markup>bindings</markup> element
                    by checking the <markup><link linkend="attrdef-mediaType-media-type">media-type</link></markup> attribute
                    of each <markup>mediaType</markup> element for a match (and before attempting any other type of <link
                        linkend="sec-fallback-processing-flow">fallback processing</link>). If a match is found, the XHTML
                    Content Document referenced in the element's <markup><link linkend="attrdef-mediaType-handler"
                            >handler</link></markup> attribute <literal role="rfc2119">must</literal> be instantiated instead
                    of the referenced resource. If no match is found, the Reading System <literal role="rfc2119"
                        >should</literal> continue with normal fallback processing (i.e., check for an intrinsic fallback for
                    the <markup>object</markup>).</para>

                <para>The Reading System <literal role="rfc2119">must</literal> instantiate the designated handler as if it
                    had been referenced from the <markup>object</markup> element's <markup>data</markup> attribute with the
                    following parameters:</para>

                <variablelist>
                    <varlistentry>
                        <term><markup>src</markup></term>
                        <listitem>
                            <para>the value of which <literal role="rfc2119">must</literal> be an IRI <xref
                                    linkend="refRFC3987"/> to the resource (i.e., the value of the <markup>object</markup>
                                element's <markup>data</markup> attribute).</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term><markup>type</markup></term>
                        <listitem>
                            <para>the value of which <literal role="rfc2119">must</literal> be the resource media type (i.e.,
                                the value of the <markup>object</markup> element's <markup>type</markup> attribute).</para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <para>Any additional <markup>param</markup> children of the <markup>object</markup> element <literal
                        role="rfc2119">must</literal> be similarly added as parameters using the <markup>param</markup>
                    element's <markup>name</markup> attribute as the new parameter name and its <markup>value</markup>
                    attribute as the new value.</para>

                <para>For example, the following <markup>object</markup> element containing a foreign media type:</para>

                <informalexample>
                    <synopsis><xi:include href="examples/publications/bindings-1.xml" parse="text"/></synopsis>
                </informalexample>

                <para>would result in the following query string being sent to the handler XHTML Content Document after
                    processing:</para>

                <informalexample>
                    <synopsis>src=horse.ogg&amp;type=audio/ogg&amp;autoplay=false</synopsis>
                </informalexample>

                <para>All IRI reserved characters, plus the characters <literal>&lt;</literal>, <literal>&gt;</literal>,
                        <literal>"</literal>, <literal>space</literal>, <literal>{</literal>, <literal>}</literal>,
                        <literal>|</literal>, <literal>\</literal>, <literal>^</literal> and <literal>`</literal>, in the
                    generated query string <literal role="rfc2119">must</literal> be encoded and decoded as per <xref
                        linkend="refRFC3987"/>.</para>

                <para><markup>object</markup> elements that reference media types handled by the <markup>bindings</markup>
                    element are only processed in <olink targetdoc="spec" targetptr="gloss-spine" type="epub-spec"
                    />-referenced XHTML Content Documents (i.e., they are ignored in <link
                        linkend="sec-scripted-content-models">container-constrained scripting contexts</link>).</para>

                <bridgehead>Example</bridgehead>

                <para>The following partial example illustrates how bindings can be used to provide a slideshow.</para>

                <para>Consider a Rendition of an EPUB Publication with the following Package Document:</para>

                <informalexample>
                    <synopsis><xi:include href="examples/publications/bindings-2.xml" parse="text"/></synopsis>
                </informalexample>

                <para>and the following content in the file <filename>content.xhtml</filename>:</para>

                <informalexample>
                    <synopsis><xi:include href="examples/publications/bindings-3.xml" parse="text"/></synopsis>
                </informalexample>

                <para>and the following content in the file <filename>slideshow.xml</filename>:</para>

                <informalexample>
                    <synopsis><xi:include href="examples/publications/bindings-4.xml" parse="text"/></synopsis>
                </informalexample>

                <para>Depending on the capabilities of the <olink targetdoc="spec" targetptr="gloss-user" type="epub-spec"
                    />'s Reading System, they will see one of the following renderings of the slideshow:</para>

                <itemizedlist>
                    <listitem>
                        <para>If the Reading System supports the native slideshow format, it will render a rotating set of
                            images as specified in <filename>slideshow.xml</filename>.</para>
                    </listitem>
                    <listitem>
                        <para>If the Reading System cannot support the slideshow media type but supports scripting, it can
                            check the <markup>bindings</markup> element in the Package Document for a scripted fallback.
                            There it will find a reference to the <markup>item</markup> element containing the handler
                            document (<filename>impl.xhtml</filename>). The Reading System can now load this document to
                            render a JavaScripted equivalent of the slideshow (source not shown).</para>
                    </listitem>
                    <listitem>
                        <para>If the Reading System does not support the slideshow media type and also does not support
                            scripting, it will use the fallback images specified in the <markup>object</markup> element to
                            show a static set of all the images.</para>
                    </listitem>
                </itemizedlist>

            </section>

            <section xml:id="sec-mediaType-elem" xreflabel="mediaType">
                <title>The <markup>mediaType</markup> Element</title>

                <para>The <markup>mediaType</markup> element associates a <olink targetdoc="spec"
                        targetptr="gloss-publication-resource-foreign" type="epub-spec"/> media type with a handler <olink
                        targetdoc="spec" targetptr="gloss-content-document-epub-xhtml" type="epub-spec"/>.</para>

                <variablelist xreflabel="mediaType" role="elem-synopsis" xml:id="elemdef-mediaType">
                    <varlistentry>
                        <term>Element Name</term>
                        <listitem>
                            <para><markup>mediaType</markup></para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>As a child of <markup><xref role="codelink" linkend="elemdef-bindings"/></markup>.
                                Repeatable.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>
                            <variablelist role="elem-synopsis-attlist">

                                <varlistentry xml:id="attrdef-mediaType-media-type" xreflabel="media-type">
                                    <term><markup>media-type</markup>
                                        <option>[required]</option></term>
                                    <listitem>
                                        <para>A media type <xref linkend="refRFC2046"/> that specifies the type and format of
                                            the resource to be handled.</para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-mediaType-handler" xreflabel="handler">
                                    <term><markup>handler</markup>
                                        <option>[required]</option></term>
                                    <listitem>
                                        <para>An IDREF <xref linkend="refXML"/> that identifies the manifest XHTML Content
                                            Document to be invoked to handle content of the type specified in this
                                            element</para>
                                    </listitem>
                                </varlistentry>
                            </variablelist>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>Empty</para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <para>Each child <markup>mediaType</markup> of a <markup>bindings</markup> element <literal role="rfc2119"
                        >must</literal> define a unique content type in its <markup>media-type</markup> attribute, and the
                    media type specified <literal role="rfc2119">must not</literal> be a Core Media Type.</para>

                <para>The required <markup>handler</markup> attribute <literal role="rfc2119">must</literal> reference the ID
                        <xref linkend="refXML"/> of an <markup><link role="codelink" linkend="elemdef-package-item"
                            >item</link></markup> in the <markup><link role="codelink" linkend="elemdef-opf-manifest"
                            >manifest</link></markup> of the default implementation for this media type. The referenced
                        <markup>item</markup>
                    <literal role="rfc2119">must</literal> be an XHTML Content Document.</para>

                <para>All XHTML Content Documents designated as handlers <literal role="rfc2119">must</literal> have the
                        <link xlink:href="http://www.idpf.org/epub/vocab/package/#scripted"><property>scripted</property>
                        property</link>
                    <xref linkend="refEPUBPackageVocab"/> set in their <olink targetdoc="spec" targetptr="gloss-manifest"
                        type="epub-spec"/>
                    <markup><link linkend="sec-item-elem">item</link></markup> element's <markup><link
                            linkend="attrdef-item-properties">properties</link></markup> attribute.</para>

            </section>

            <section xml:id="sec-collection-elem" xreflabel="collection">
                <title>The <markup>collection</markup> Element</title>

                <para>The <markup>collection</markup> element defines a related group of resources.</para>

                <variablelist xreflabel="collection" role="elem-synopsis" xml:id="elemdef-collection">
                    <varlistentry>
                        <term>Element Name</term>
                        <listitem>
                            <para><markup>collection</markup></para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Usage</term>
                        <listitem>
                            <para>Optional sixth element of <markup>package</markup>. Repeatable.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Attributes</term>
                        <listitem>
                            <variablelist role="elem-synopsis-attlist">
                                <varlistentry xml:id="attrdef-collection-xml-lang">
                                    <term><markup>xml:lang</markup>
                                        <option>[optional]</option></term>
                                    <listitem>
                                        <xi:include href="./share/xmllang-prose-para.xml"/>
                                    </listitem>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-collection-dir">
                                    <term><markup>dir</markup>
                                        <option>[optional]</option></term>
                                    <xi:include href="./share/dir-prose-listitem.xml"/>
                                </varlistentry>
                                <varlistentry xml:id="attrdef-collection-id">
                                    <term><markup>id</markup>
                                        <option>[optional]</option></term>
                                    <listitem>
                                        <xi:include href="./share/id-prose-para.xml"/>
                                    </listitem>
                                </varlistentry>
                                <varlistentry>
                                    <term><markup>role</markup>
                                        <option>[required]</option></term>
                                    <listitem>
                                        <para>Specifies the nature of the <markup>collection</markup>, as defined
                                            below.</para>
                                    </listitem>
                                </varlistentry>
                            </variablelist>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Content Model</term>
                        <listitem>
                            <para>In this order: <markup><link linkend="elemdef-collection-metadata">metadata</link></markup>
                                <option>[optional]</option>, ( <markup><xref linkend="elemdef-collection"/></markup>
                                <option>[1 or more]</option> or ( <markup><xref linkend="elemdef-collection"/></markup>
                                <option>[0 or more]</option>, <markup><link linkend="elemdef-collection-link"
                                    >link</link></markup>
                                <option>[1 or more]</option> ))</para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <para>The <markup>collection</markup> element allows resources to be assembled into logical groups for a
                    variety of potential uses: enabling content that has been split across multiple <olink targetdoc="spec"
                        targetptr="gloss-content-document-epub" type="epub-spec">EPUB Content Documents</olink> to be
                    reassembled back into a meaningful unit (e.g., an index split across multiple documents), identifying
                    resources for specialized purposes (e.g., preview content), or collecting together resources that present
                    additional information about the given <olink targetdoc="spec" targetptr="gloss-rendition"
                        type="epub-spec"/>.</para>

                <para>The <markup>collection</markup> element, as defined in this section, represents a generic framework
                    from which specific implementations are intended to be derived (e.g., through IDPF sub-specifications).
                    Such implementations <literal role="rfc2119">must</literal> define the purpose of the
                        <markup>collection</markup> element within a Rendition, as well as all requirements for its valid
                    production and use (specifically any requirements that differ from the general framework presented
                    below).</para>

                <para>Each implementation <literal role="rfc2119">must</literal> define a role value that uniquely identifies
                    all conformant <markup>collection</markup> elements. The role of each <markup>collection</markup> element
                    in the Package Document <literal role="rfc2119">must</literal> be identified in its <markup>role</markup>
                    attribute, whose value <literal role="rfc2119">must</literal> be one or more NMTOKENs <xref
                        linkend="refXSDDatatypes"/> and/or full IRIs <xref linkend="refRFC3987"/>. The use of NMTOKEN values
                    is reserved for IDPF-defined roles, a registry of which is maintained at <uri
                        xlink:href="http://www.idpf.org/epub/vocab/package/roles"
                        >http://www.idpf.org/epub/vocab/package/roles</uri>. NMTOKEN values not defined in the registry are
                    not valid. No roles are defined in this section.</para>

                <para>Third parties <literal role="rfc2119">may</literal> define custom roles for the
                        <markup>collection</markup> element, but such roles <literal role="rfc2119">must</literal> be
                    identified using full IRIs. Custom roles <literal role="rfc2119">must not</literal> incorporate the
                    string <uri>idpf.org</uri> in the host component of their identifying IRI.</para>

                <note>
                    <para>To facilitate interoperability of custom roles across Reading Systems, implementers are strongly
                        encouraged to document their use of the <markup>collection</markup> element at <uri
                            xlink:href="http://www.idpf.org/epub/extensions/roles"
                            >http://www.idpf.org/epub/extensions/roles</uri>.</para>
                </note>

                <para xml:id="elemdef-collection-metadata">The optional <markup>metadata</markup> element child of
                        <markup>collection</markup> is an adaptation of the package <markup linkend="elemdef-opf-metadata"
                        >metadata</markup> element, with the following differences in syntax and semantics:</para>

                <itemizedlist>
                    <listitem>
                        <para>No metadata is required by default.</para>
                    </listitem>
                    <listitem>
                        <para>Package-level restrictions on the use of metadata elements <literal role="rfc2119"
                                >may</literal> be overridden.</para>
                    </listitem>
                    <listitem>
                        <para>All primary metadata expressions apply to the <markup>collection</markup>.</para>
                    </listitem>
                    <listitem>
                        <para>The refines attribute <literal role="rfc2119">must not</literal> reference elements outside the
                            containing <markup>collection</markup>.</para>
                    </listitem>
                    <listitem>
                        <para>The <link linkend="sec-opf-meta-elem">OPF2 <markup>meta</markup> element</link>
                            <literal role="rfc2119">must not</literal> be included.</para>
                    </listitem>
                </itemizedlist>

                <para>A <markup>collection</markup>
                    <literal role="rfc2119">may</literal> define sub-collections through the inclusion of one or more child
                        <markup>collection</markup> elements.</para>

                <para xml:id="elemdef-collection-link">The <markup>link</markup> element child of <markup>collection</markup>
                    is an adaptation of the metadata <markup linkend="elemdef-opf-link">link</markup> element, with the
                    following differences in syntax and semantics:</para>

                <itemizedlist>
                    <listitem>
                        <para>The <markup>href</markup> attribute <literal role="rfc2119">may</literal> reference any
                            resource, including those listed in the <markup linkend="elemdef-opf-manifest"
                            >manifest</markup>.</para>
                    </listitem>
                    <listitem>
                        <para>The IRI value of the <markup>href</markup> attribute <literal role="rfc2119">may</literal> have
                            a fragment component to indicate that only a portion or subset of a resource is included in the
                            collection.</para>
                    </listitem>
                    <listitem>
                        <para>The <markup>rel</markup> attribute is <literal role="rfc2119">optional</literal>.</para>
                    </listitem>
                    <listitem>
                        <para>The <markup>refines</markup> attribute <literal role="rfc2119">must not</literal> be
                            attached.</para>
                    </listitem>
                </itemizedlist>

                <para>Each <markup>link</markup>
                    <literal role="rfc2119">must</literal> reference a resource that is a member of the group. The order of
                        <markup>link</markup> elements is not significant.</para>

                <para>Specific implementations of the <markup>collection</markup> element <literal role="rfc2119"
                        >may</literal> tailor the requirements defined above to better reflect their needs (e.g., requiring
                    metadata, imposing further restrictions on the use of elements and attributes, or making the order of
                        <markup>link</markup> elements significant). However, the resulting content model <literal
                        role="rfc2119">must</literal> represent a valid subset of the one defined in this section (e.g.,
                    specific implementations cannot introduce new elements or attributes, or re-introduce those expressly
                    forbidden above). Specific implementations <literal role="rfc2119">must not</literal> define collections
                    in a way that overrides the requirements of the <markup linkend="elemdef-opf-manifest">manifest</markup>
                    and <markup linkend="elemdef-opf-spine">spine</markup>.</para>

                <para>In the context of this specification, support for collections in Reading Systems is <literal
                        role="rfc2119">optional</literal>. Reading Systems <literal role="rfc2119">must</literal> ignore
                        <markup>collection</markup> elements that define unrecognized roles.</para>

                <para>The rendering of a Rendition <literal role="rfc2119">must not</literal> be dependent on the recognition
                    of <markup>collection</markup> elements. The content <literal role="rfc2119">must</literal> remain
                    consumable by a User without any information loss or other significant deterioration.</para>

                <bridgehead>Examples</bridgehead>

                <informalexample xml:id="example-collection">
                    <para>The following example shows the assembly of two <olink targetdoc="spec"
                            targetptr="gloss-content-document-epub-xhtml" type="epub-spec">XHTML Content Documents</olink>
                        that represent a single unit.</para>
                    <synopsis><xi:include href="./examples/publications/collection.xml" parse="text"/></synopsis>
                </informalexample>
            </section>
        </section>

        <section xml:id="sec-package-metadata">
            <title>Package Metadata</title>

            <section xml:id="sec-package-metadata-identifiers">
                <title>Publication Identifiers</title>

                <section xml:id="sec-opf-metadata-identifiers-uid">
                    <title>Unique Identifier</title>

                    <para>The <olink targetdoc="spec" targetptr="gloss-author" type="epub-spec"/> is responsible for
                        including a primary identifier in the <olink targetdoc="spec" targetptr="gloss-package-document"
                            type="epub-spec"/> metadata that is unique to one and only one <olink targetdoc="spec"
                            targetptr="gloss-epub-publication" type="epub-spec"/>. This <olink targetdoc="spec"
                            targetptr="gloss-unique-identifier" type="epub-spec"/>, whether chosen or assigned, <literal
                            role="rfc2119">must</literal> be stored in a <markup linkend="sec-opf-dcidentifier"
                            >dc:identifier</markup> element and be referenced as the Unique Identifier in the <markup
                            linkend="elemdef-opf-package">package</markup> element <markup
                            linkend="attrdef-package-unique-identifier">unique-identifier</markup> attribute. </para>

                    <para>Although not static, changes to the Unique Identifier for an EPUB Publication <literal
                            role="rfc2119">should</literal> be made as infrequently as possible. New identifiers <literal
                            role="rfc2119">should not</literal> be issued when updating metadata, fixing errata or making
                        other minor changes to the EPUB Publication.</para>

                </section>

                <section xml:id="sec-opf-metadata-identifiers-pid">
                    <title>Release Identifier</title>

                    <para>The <olink targetdoc="spec" targetptr="gloss-unique-identifier" type="epub-spec"/> of an <olink
                            targetdoc="spec" targetptr="gloss-epub-publication" type="epub-spec"/> typically <literal
                            role="rfc2119">should not</literal> change with each minor revision to the package or its
                        contents, as Unique Identifiers are intended to have maximal persistence both for referencing and
                        distribution purposes. Each release of an EPUB Publication normally requires that the new version be
                        uniquely identifiable, however, which results in the contradictory need for reliable Unique
                        Identifiers that are changeable.</para>

                    <para>To redress this problem of identifying minor modifications and releases without changing the Unique
                        Identifier, this specification defines the semantics for a <emphasis>Release Identifier</emphasis>,
                        or means of distinguishing and sequentially ordering EPUB Publications with the same Unique
                        Identifier. The Release Identifier is not an actual property in the package <markup>metadata</markup>
                        section, but is a value that can be obtained from two required pieces of metadata: the Unique
                        Identifier and the last modification date of the Rendition.</para>

                    <para>When the taken together, the combined value represents a unique identity that can be used to
                        distinguish any particular version of an EPUB Publication from another. To ensure that a Release
                        Identifier can be constructed, each <olink targetdoc="spec" targetptr="gloss-rendition"
                            type="epub-spec"/>
                        <literal role="rfc2119">must</literal> include exactly one <xref linkend="refDCTERMS"/>
                        <property>modified</property> property containing its last modification date (see <xref
                            linkend="elemdef-meta"/>). The value of this property <literal role="rfc2119">must</literal> be
                        an XML Schema <xref linkend="refXSDDatatypes"/> dateTime conformant date of the form:</para>

                    <informalexample>
                        <synopsis>CCYY-MM-DDThh:mm:ssZ</synopsis>
                    </informalexample>

                    <para>The last modification date <literal role="rfc2119">must</literal> be expressed in Coordinated
                        Universal Time (UTC) and <literal role="rfc2119">must</literal> be terminated by the
                            <literal>Z</literal> time zone indicator.</para>

                    <para>Although not a part of the package metadata, for referencing and other purposes all string
                        representations of the identifier <literal role="rfc2119">must</literal> be constructed using the at
                        sign (<literal>@</literal>) as the separator (i.e., of the form "id<literal>@</literal>date").
                        Whitespace <literal role="rfc2119">must not</literal> be included when concatenating the
                        strings.</para>

                    <informalexample>
                        <para>The following example shows how a Unique Identifier and modification date are combined to form
                            the Release Identifier.</para>
                        <synopsis><xi:include href="examples/publications/package-identifier.xml" parse="text"/></synopsis>
                    </informalexample>

                    <para>Note that it is possible that the separator character <literal role="rfc2119">may</literal> occur
                        in the Unique Identifier, as these identifiers <literal role="rfc2119">may</literal> be any string
                        value. The Release Identifier consequently <literal role="rfc2119">must</literal> be split on the
                        last instance of the at sign when decomposing it into its component parts.</para>

                    <para>The Release Identifier does not supersede the Unique Identifier, but represents the means by which
                        different versions of the same EPUB Publication can be distinguished and identified in distribution
                        channels and by Reading Systems. The sequential, chronological order inherent in the required format
                        of the timestamp also places EPUB Publications in order without requiring knowledge of the exact
                        identifier that came before.</para>

                    <para>The Release Identifier consequently allows a set of EPUB Publications to be inspected to determine
                        if they represent the same version of the same Publication, different versions of a single EPUB
                        Publication, or any combination of differing and similar EPUB Publications.</para>

                    <note>
                        <para>When an <olink targetdoc="spec" targetptr="gloss-container" type="epub-spec"/> includes more
                            than one <olink targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/> of an EPUB
                            Publication, updating the last modified date of the <olink targetdoc="spec"
                                targetptr="gloss-rendition-default" type="epub-spec"/> for each release — even if it has not
                            been updated — will help ensure that the EPUB Publication does not appear to be the same version
                            as an earlier release, as Reading Systems are only required to process the Default
                            Rendition.</para>
                    </note>
                </section>
            </section>

            <section xml:id="sec-metadata-assoc">
                <title>Vocabulary Association Mechanisms</title>

                <section xml:id="sec-metadata-assoc-overview" conformance="informative">
                    <title>Overview</title>

                    <para>The <markup>property</markup>, <markup>properties</markup>, <markup>rel</markup> and
                            <markup>scheme</markup> attributes use the <link linkend="sec-property-datatype">property data
                            type</link> to represent terms from metadata vocabularies. Similar to a CURIE <xref
                            linkend="refRDFa"/>, the property data type represents an IRI <xref linkend="refRFC3987"/> in
                        compact form and simplifies the authoring of metadata from standardized vocabularies. </para>

                    <para>A property value is an expression that consists of a prefix and a reference, where the prefix —
                        whether literal or implied — is a shorthand mapping of an IRI that typically resolves to a term
                        vocabulary. When the prefix is converted to its IRI representation and combined with the reference,
                        the resulting IRI normally resolves to a fragment within that vocabulary that contains human- and/or
                        machine-readable information about the term. </para>

                    <para>To assist Reading Systems in processing property values, the means of establishing the IRI a prefix
                        maps to is required, and this specification defines three such mechanisms:</para>

                    <itemizedlist>
                        <listitem>
                            <para>a <link linkend="sec-metadata-default-vocab">default vocabulary</link> — defines the
                                mapping when a property value does not include a prefix;</para>
                        </listitem>
                        <listitem>
                            <para>a set of <link linkend="sec-metadata-reserved-vocabs">reserved prefixes</link> — these
                                mappings are predefined (i.e., all Reading Systems recognize them) and can be used without
                                having to be declared; and</para>
                        </listitem>
                        <listitem>
                            <para>the <markup linkend="sec-prefix-attr">prefix</markup> attribute — a declarative means of
                                creating new prefix mappings on the root <markup linkend="sec-package-elem">package</markup>
                                element.</para>
                        </listitem>
                    </itemizedlist>

                </section>

                <section xml:id="sec-metadata-default-vocab">
                    <title>Default Vocabulary</title>

                    <para>The default vocabulary is a vocabulary that does not require a prefix to be declared in order to
                        use its terms, and whose terms <literal role="rfc2119">must</literal> always be unprefixed.</para>

                    <para>As the Package Document has multiple unrelated uses for metadata terms, a single default vocabulary
                        is not defined. Instead, different default vocabularies are defined for use in attributes that accept
                        a <link linkend="sec-property-datatype">property data type</link> as follows:</para>

                    <itemizedlist>
                        <listitem>
                            <para>The <link xlink:href="http://www.idpf.org/epub/vocab/package/metadata/">Package Metadata
                                    Vocabulary</link> is defined to be the default vocabulary for the <markup>meta</markup>
                                <markup>property</markup>, <markup>meta</markup>
                                <markup>scheme</markup>, <markup>item</markup>
                                <markup>properties</markup> and <markup>itemref</markup>
                                <markup>properties</markup> attributes.</para>
                            <para>If a property value in any of these attributes does not include a prefix, the IRI <xref
                                    linkend="refRFC3987"/> stem <uri>http://idpf.org/epub/vocab/package/#</uri>
                                <literal role="rfc2119">must</literal> be used to generate the resulting IRI.</para>
                        </listitem>
                        <listitem>
                            <para>The <link xlink:href="../../vocab/package/link/rel-vocab.html">Link Relationships Vocabulary</link> is
                                defined to be the default vocabulary for the <markup>link</markup>
                                <markup>rel</markup> attribute.</para>
                            <para>If a property value in this attribute does not include a prefix, the IRI <xref
                                    linkend="refRFC3987"/> stem <uri>http://idpf.org/epub/vocab/package/link/#</uri>
                                <literal role="rfc2119">must</literal> be used to generate the resulting IRI.</para>
                        </listitem>
                    </itemizedlist>

                    <para>The IRIs associated with the Package Metadata Vocabulary and Link Relationships Vocabulary <literal
                            role="rfc2119">must not</literal> be assigned a prefix using the <markup
                            linkend="sec-prefix-attr">prefix</markup> attribute.</para>

                </section>

                <section xml:id="sec-metadata-reserved-vocabs">
                    <title>Reserved Prefixes</title>

                    <para>This specification reserves a set of prefixes that Authors <literal role="rfc2119">may</literal>
                        use in package metadata. These prefixes are defined in the normative document <link
                            xlink:href="http://www.idpf.org/epub/vocab/package/pfx">EPUB Package Document Reserved
                            Prefixes</link>.</para>

                    <para>The prefixes defined in this document are maintained and updated separately of this specification
                        and are subject to change at any time.</para>

                    <para>Reading Systems <literal role="rfc2119">must</literal> resolve all reserved prefixes used in
                        Package Documents using their pre-defined URIs. Reserved prefixes <literal role="rfc2119">should
                            not</literal> be overridden in the <link linkend="sec-prefix-attr">prefix attribute</link>, but
                        Reading Systems <literal role="rfc2119">must</literal> use such local overrides when
                        encountered.</para>

                    <para>As changes to the reserved prefixes and updates to Reading Systems are not always going happen in
                        synchrony, Reading Systems <literal role="rfc2119">must not</literal> fail when encountering
                        unrecognized prefixes (i.e., not reserved and not declared using the <markup>prefix</markup>
                        attribute).</para>
                </section>

                <section xml:id="sec-prefix-attr">
                    <title>The <markup>prefix</markup> Attribute</title>

                    <para>The <markup>prefix</markup> attribute defines additional prefix mappings not <link
                            linkend="sec-metadata-reserved-vocabs">reserved</link> by the specification.</para>

                    <para>The value of the <markup>prefix</markup> attribute is a whitespace-separated list of one or more
                        prefix-to-IRI mappings of the form:</para>

                    <productionset>
                        <title>The prefix Syntax</title>
                        <production xml:id="prefix.ebnf.def">
                            <lhs>prefixes</lhs>
                            <rhs><nonterminal def="#prefix.ebnf.mapping">mapping</nonterminal> , { <nonterminal
                                    def="#prefix.ebnf.whitespace">whitespace</nonterminal>, { <nonterminal
                                    def="#prefix.ebnf.space">whitespace</nonterminal> } , <nonterminal
                                    def="#prefix.ebnf.mapping">mapping</nonterminal> } </rhs>
                        </production>
                        <production xml:id="prefix.ebnf.mapping">
                            <lhs>mapping</lhs>
                            <rhs><nonterminal def="#prefix.ebnf.prefix">prefix</nonterminal> , ":" , <nonterminal
                                    def="#prefix.ebnf.space">space</nonterminal> , { <nonterminal def="#prefix.ebnf.space"
                                    >space</nonterminal> } , ? xsd:anyURI ? </rhs>
                        </production>
                        <production xml:id="prefix.ebnf.prefix">
                            <lhs>prefix</lhs>
                            <rhs>? xsd:NCName ? </rhs>
                        </production>
                        <production xml:id="prefix.ebnf.space">
                            <lhs>space</lhs>
                            <rhs>#x20 </rhs>
                        </production>
                        <production xml:id="prefix.ebnf.whitespace">
                            <lhs>whitespace</lhs>
                            <rhs>(#x20 | #x9 | #xD | #xA) </rhs>
                        </production>
                    </productionset>

                    <informalexample>
                        <para>The following example shows prefixes for the Friend of a Friend (<property>foaf</property>) and
                            DBPedia (<property>dbp</property>) vocabularies being declared using the <markup>prefix</markup>
                            attribute.</para>
                        <synopsis><xi:include href="examples/publications/prefix.xml" parse="text"/></synopsis>
                    </informalexample>

                    <para>To avoid conflicts, the <markup>prefix</markup> attribute <literal role="rfc2119">must
                            not</literal> be used to define a prefix that maps to the <link
                            linkend="sec-metadata-default-vocab">default vocabulary</link>. If the <markup>prefix</markup>
                        attribute includes a declaration for a <link linkend="sec-metadata-reserved-vocabs">pre-defined
                            prefix</link>, Reading Systems <literal role="rfc2119">must</literal> use the URI mapping defined
                        in the <markup>prefix</markup> attribute, regardless of whether of it maps to the same URI as the
                        pre-defined prefix.</para>

                    <para>The prefix '_' is reserved for future compatibility with RDFa <xref linkend="refRDFa"/> processing,
                        so <literal role="rfc2119">must not</literal> be defined.</para>

                </section>

                <section xml:id="sec-property-datatype">
                    <title>The property Data Type</title>

                    <section xml:id="sec-property-syntax">
                        <title>Syntax</title>

                        <para>The property data type is a compact means of expressing an IRI <xref linkend="refRFC3987"/> and
                            consists of an optional prefix separated from a reference by a colon.</para>

                        <productionset>
                            <title>The property Syntax</title>
                            <production xml:id="property.ebnf.property">
                                <lhs>property</lhs>
                                <rhs>[ <nonterminal def="#property.ebnf.prefix">prefix</nonterminal> , ":" ] , <nonterminal
                                        def="#property.ebnf.reference">reference</nonterminal></rhs>
                            </production>
                            <production xml:id="property.ebnf.prefix">
                                <lhs>prefix</lhs>
                                <rhs>? xsd:NCName ? </rhs>
                            </production>
                            <production xml:id="property.ebnf.reference">
                                <lhs>reference</lhs>
                                <rhs>? irelative-ref ? <lineannotation>as defined in <xref linkend="refRFC3987"
                                        /></lineannotation></rhs>
                            </production>
                        </productionset>

                        <para>The property data type is derived from the CURIE data type defined in <xref linkend="refRDFa"
                            />, and represents a subset of CURIEs.</para>

                        <informalexample>
                            <para>The following example shows a property value composed of the prefix
                                    <property>dcterms</property> and the reference <property>modified</property>.</para>
                            <synopsis><![CDATA[<meta property="dcterms:modified">2011-01-01T12:00:00Z</meta>]]></synopsis>
                        </informalexample>

                        <para>After <link linkend="sec-property-processing">processing</link>, this property would expand to
                            the following IRI:</para>

                        <informalexample>
                            <synopsis><![CDATA[http://purl.org/dc/terms/modified]]></synopsis>
                        </informalexample>

                        <para>as the <property>dcterms:</property> prefix is a <link linkend="sec-metadata-reserved-vocabs"
                                >reserved prefix</link> that maps to the IRI <uri>http://purl.org/dc/terms/</uri>.</para>

                        <para>When a prefix is omitted from the property value, the expressed reference represents a term
                            from the <link linkend="sec-metadata-default-vocab">default vocabulary</link>.</para>

                        <informalexample>
                            <para>The following example shows a property value taken from the default vocabulary.</para>
                            <synopsis><![CDATA[<meta … property="role">aut</meta>]]></synopsis>
                        </informalexample>

                        <para>This property would expand to:</para>

                        <informalexample>
                            <synopsis><![CDATA[http://idpf.org/epub/vocab/package/#role]]></synopsis>
                        </informalexample>

                        <para>when the IRI for the default vocabulary is concatenated with the reference.</para>

                        <para>An empty string does not represent a valid property value, even though it is valid to the
                            definition above.</para>

                    </section>

                    <section xml:id="sec-property-processing">
                        <title>Processing</title>

                        <para>A Reading System <literal role="rfc2119">must</literal> use the following rules to create an
                            IRI <xref linkend="refRFC3987"/> from a property:</para>

                        <itemizedlist>
                            <listitem>
                                <para>If the property consists only of a reference, the IRI is obtained by concatenating the
                                    IRI stem associated with the <link linkend="sec-metadata-default-vocab">default
                                        vocabulary</link> to the reference.</para>
                            </listitem>
                            <listitem>
                                <para>If the property consists of a prefix and reference, the IRI is obtained by
                                    concatenating the IRI stem associated with the prefix to the reference. If no matching
                                    prefix has been defined, the property is invalid and <literal role="rfc2119"
                                        >must</literal> be ignored.</para>
                            </listitem>
                        </itemizedlist>

                        <para>The resulting IRI <literal role="rfc2119">must</literal> be valid to <xref linkend="refRFC3987"
                            />. Reading Systems are <literal role="rfc2119">not required</literal> to resolve this IRI,
                            however.</para>
                    </section>

                </section>
            </section>

            <section xml:id="sec-package-metadata-rendering">
                <title>Publication Rendering Metadata</title>

                <section xml:id="sec-package-metadata-layout-general-overview" conformance="informative">
                    <title>Overview</title>

                    <para>Not all rendering information can be expressed through the underlying technologies that EPUB is
                        built upon. Although XHTML with CSS provides powerful layout capabilities, for example, those
                        capabilities are limited to the scope of the document being rendered.</para>

                    <para>This section defines general-purpose properties that allow Authors to express package-level
                        rendering intentions (i.e., functionality that can only be implemented by the <olink targetdoc="spec"
                            targetptr="gloss-epub-reading-system" type="epub-spec"/>). If a Reading System supports the
                        desired rendering, these properties enable the User to be presented the content as the Author
                        optimally designed it.</para>
                </section>

                <section xml:id="layout-property-flow">
                    <title>The <property>rendition:flow</property> Property</title>

                    <section xml:id="layout-property-flow-usage">
                        <title>Usage</title>

                        <para xml:id="property-flow-global">When the <link
                                xlink:href="http://www.idpf.org/epub/vocab/package/#flow"><property>rendition:flow</property>
                                property</link>
                            <xref linkend="refEPUBPackageVocab"/> is specified on a <markup>meta</markup> element, it
                            indicates the Author's global preference for overflow content handling (i.e., for all spine
                            items). Authors <literal role="rfc2119">may</literal> indicate a preference for dynamic
                            pagination or scrolling. For scrolled content, it is also possible to specify whether consecutive
                                <olink targetdoc="spec" targetptr="gloss-content-document-epub" type="epub-spec">EPUB Content
                                Documents</olink> are to be rendered as a continuous scrolling view or whether each is to be
                            rendered separately (i.e., with a dynamic page break between each).</para>

                        <para>If a Reading System supports the specified rendering, it <literal role="rfc2119"
                                >should</literal> use that method to handle overflow content, but <literal role="rfc2119"
                                >may</literal> provide the option for <olink targetdoc="spec" targetptr="gloss-user"
                                type="epub-spec">Users</olink> to override the requested rendering.</para>

                        <para>The default value <code role="value">auto</code>
                            <literal role="rfc2119">must</literal> be assumed by Reading Systems as the global value if no
                                <markup>meta</markup> element carrying this property occurs in the <markup
                                linkend="elemdef-opf-metadata">metadata</markup> section. Reading Systems <literal
                                role="rfc2119">may</literal> support only this default value.</para>

                        <para>If a Reading Systems supports the <property linkend="fxl-property-layout"
                                >rendition:layout</property> property, it <literal role="rfc2119">must</literal> ignore the
                                <property>rendition:flow</property> property when it has been set on a spine item that also
                            specifies the <property linkend="fxl-property-layout">rendition:layout</property> value <code
                                role="value">pre-paginated</code>.</para>
                    </section>

                    <section xml:id="layout-property-flow-values">
                        <title>Allowed values</title>

                        <para>The following values are defined for use with the <property>rendition:flow</property>
                            property:</para>

                        <variablelist>
                            <varlistentry>
                                <term>paginated</term>
                                <listitem>
                                    <para>The Reading System <literal role="rfc2119">should</literal> dynamically paginate
                                        all overflow content.</para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>scrolled-continuous</term>
                                <listitem>
                                    <para>The Reading System <literal role="rfc2119">should</literal> render all Content
                                        Documents such that overflow content is scrollable, and the EPUB Publication
                                        represented by the given <olink targetdoc="spec" targetptr="gloss-rendition"
                                            type="epub-spec"/>
                                        <literal role="rfc2119">should</literal> be presented as one continuous scroll from
                                        spine item to spine item (except where <link linkend="layout-property-flow-overrides"
                                            >locally overridden</link>).</para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>scrolled-doc</term>
                                <listitem>
                                    <para>The Reading System <literal role="rfc2119">should</literal> render all Content
                                        Documents such that overflow content is scrollable, and each spine item <literal
                                            role="rfc2119">should</literal> be presented as a separate scrollable
                                        document.</para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>auto</term>
                                <listitem>
                                    <para>The Author does not have a preference for overflow handling. The Reading System
                                            <literal role="rfc2119">may</literal> render overflow content using its default
                                        method or a User preference, whichever is applicable.</para>
                                </listitem>
                            </varlistentry>
                        </variablelist>

                        <bridgehead>Examples</bridgehead>

                        <informalexample xml:id="property-flow-ex1">
                            <para>The following example demonstrates an Author's intent to have a paginated Rendition with a
                                scrollable table of contents.</para>
                            <synopsis><xi:include href="./examples/publications/flow-01.xml" parse="text"/></synopsis>
                        </informalexample>
                    </section>

                    <section xml:id="layout-property-flow-overrides">
                        <title>Spine Overrides</title>

                        <para xml:id="layout-property-flow-local">The <property
                                xlink:href="http://www.idpf.org/epub/vocab/package/#flow-auto"
                            >rendition:flow-auto</property>, <property
                                xlink:href="http://www.idpf.org/epub/vocab/package/#flow-paginated"
                                >rendition:flow-paginated</property>, <property
                                xlink:href="http://www.idpf.org/epub/vocab/package/#flow-scrolled-continuous"
                                >rendition:flow-scrolled-continuous</property>, <property
                                xlink:href="http://www.idpf.org/epub/vocab/package/#flow-scrolled-doc"
                                >rendition:flow-scrolled-doc</property> and properties <xref linkend="refEPUBPackageVocab"/>
                            <literal role="rfc2119">may</literal> be specified locally on spine <markup
                                linkend="elemdef-spine-itemref">itemref</markup> elements, and will, in such cases, override
                            the <link linkend="property-flow-global">global value</link> for the given spine item.</para>
                    </section>
                </section>

                <section xml:id="layout-property-align-x-center">
                    <title>The <property>rendition:align-x-center</property> Property</title>

                    <para>When the <link xlink:href="http://www.idpf.org/epub/vocab/package/#align-x-center"
                                ><property>rendition:align-x-center</property> property</link>
                        <xref linkend="refEPUBPackageVocab"/> is set on a spine item, it indicates that the rendered content
                            <literal role="rfc2119">should</literal> be centered horizontally within the viewport or spread,
                        as applicable. This property does not affect the rendering of the spine item, only the placement of
                        the resulting content box.</para>

                    <para>For reflowable content, Reading Systems that support this property <literal role="rfc2119"
                            >must</literal> center each virtual page.</para>

                    <para>This version of this specification does not define a default rendering behavior when this property
                        is not supported or specified. Reading Systems <literal role="rfc2119">may</literal> render spine
                        items by their own design.</para>

                    <note>
                        <para>This property was developed primarily to handle "Naka-Tobira (中扉)" (sectional title pages), in
                            the absence of reliable centering control within the content rendering. As support for paged
                            media evolves in CSS, however, this property may become obsolete. Authors are encouraged to use
                            CSS solutions when effective.</para>
                    </note>
                </section>
            </section>

        </section>

        <section xml:id="sec-xhtml-nav">
            <title>EPUB Navigation Document</title>

            <section xml:id="sec-xhtml-nav-intro" conformance="informative">
                <title>Introduction</title>

                <para>The EPUB Navigation Document is a <link linkend="sec-epub-content-conformance-nav">required
                        component</link> of <olink targetdoc="spec" targetptr="gloss-epub-publication" type="epub-spec"/>s.
                    It provides the Author with a mechanism to include a human- and machine-readable global navigation layer
                    in the EPUB Publication, thereby ensuring increased usability and accessibility for the User. </para>

                <para>The EPUB Navigation Document is an adaptation of <olink targetdoc="spec"
                        targetptr="gloss-content-document-epub-xhtml" type="epub-spec"/> and is, <link
                        linkend="confreq-cd-nav-docprops-parent">by definition</link>, a valid XHTML Content Document
                    instance. All Content and Reading System conformance requirements that apply to XHTML Content Documents
                    also apply to the EPUB Navigation Document.</para>

                <para>The navigation features of this adaptation are expressed through specializations of the <xref
                        linkend="refHTML5"/>
                    <markup xlink:href="http://www.w3.org/TR/html5/Overview.html#the-nav-element">nav</markup> element. Each
                        <markup>nav</markup> element in an EPUB Navigation Document represents a data island — an embedded
                    source of specialized information within the general markup — from which Reading Systems can retrieve
                    navigational information. Unlike typical XML data islands, however, the information within the
                        <markup>nav</markup> element remains human readable as an <xref linkend="refHTML5"/> document.</para>

                <para>To facilitate machine readability, the content model of <markup>nav</markup> elements in EPUB
                    Navigation Documents is restricted relative to what is allowed in general XHTML Content Documents.</para>

                <para>Note that the navigation document is not exclusively for machine processing. Formulating the document
                    as an XHTML Content Document enables its reuse in the linear reading order of an EPUB Publication,
                    avoiding the creation of additional tables of contents (i.e., it can also be added to the <xref
                        linkend="elemdef-opf-spine"/>). The visual display of components defined in the navigation document
                    can be controlled using the <link linkend="sec-xhtml-nav-def-hidden">hidden</link> attribute, which has
                    no effect outside of spine rendering (i.e., hiding a component from rendering in the spine does not hide
                    it from Reading System presentation in a custom control).</para>

                <para>When designing a navigation document for such dual use, however, be aware that machine extraction of
                    the content can result in loss of formatting control. Scripting, styling and other HTML formatting can be
                    stripped by a Reading System as it generates a custom control, such as the table of contents, from the
                    markup. If such formatting and functionality is used, then the Navigation Document also needs to be
                    included in the linear reading order. Another design consideration is to to use <link
                        linkend="confreq-cd-scripted-spine">progressive enhancement</link> techniques for scripting and
                    styling of the navigation document, such that that the content will retain its integrity when rendered in
                    a non-browser context.</para>

                <note>
                    <para>The EPUB Navigation Document is identified in the <olink targetdoc="spec"
                            targetptr="gloss-package-document" type="epub-spec"/>
                        <olink targetdoc="spec" targetptr="gloss-manifest" type="epub-spec"/> through the <link
                            xlink:href="http://www.idpf.org/epub/vocab/package/#nav"><property>nav</property> property</link>
                        <xref linkend="refEPUBPackageVocab"/>.</para>
                </note>

                <note xml:id="note-ncx-cdoc">
                    <para>The EPUB Navigation Document supersedes the NCX document type as defined in <xref linkend="refOPF2"
                        />.</para>
                    <para>Information on how EPUB 3 Publications may include an NCX document for EPUB 2 Reading System
                        forwards compatibility purposes is available in <xref linkend="ncx-superseded"/>.</para>
                </note>

            </section>

            <section xml:id="sec-xhtml-nav-content-conf" xreflabel="EPUB Navigation Documents — Content Conformance">
                <title>Content Conformance</title>

                <para>A conformant <olink targetdoc="spec" targetptr="gloss-content-document-epub-nav" type="epub-spec"/>
                    <literal role="rfc2119">must</literal> meet all of the following criteria:</para>

                <variablelist role="conformance-list" xml:id="confreq-cd-nav">
                    <varlistentry xml:id="confreq-cd-nav-docprops">
                        <term>Document Properties</term>
                        <listitem>
                            <para xml:id="confreq-cd-nav-docprops-parent">It <literal role="rfc2119">must</literal> conform
                                to all content conformance constraints for <olink targetdoc="spec"
                                    targetptr="gloss-content-document-epub-xhtml" type="epub-spec"/>s as defined in <xref
                                    linkend="sec-xhtml-conf-content"/>.</para>
                            <para xml:id="confreq-cd-nav-docprops-schema">It <literal role="rfc2119">must</literal> conform
                                to all content conformance constraints specific for EPUB Navigation Documents expressed in
                                    <xref linkend="sec-xhtml-nav-def"/>.</para>
                            <para xml:id="confreq-cd-nav-docprops-spine">As a conforming XHTML Content Document, it <literal
                                    role="rfc2119">may</literal> be included in a <olink targetdoc="spec"
                                    targetptr="gloss-rendition" type="epub-spec"/>'s <olink targetdoc="spec"
                                    targetptr="gloss-spine" type="epub-spec"/>. </para>
                        </listitem>
                    </varlistentry>
                </variablelist>
            </section>

            <section xml:id="sec-xhtml-nav-rs-conf" xreflabel="EPUB Navigation Documents — Reading System Conformance">
                <title>Reading System Conformance</title>

                <para>A conformant <olink targetdoc="spec" targetptr="gloss-epub-reading-system" type="epub-spec"/>
                    <literal role="rfc2119">must</literal> meet all of the following criteria for processing <olink
                        targetdoc="spec" targetptr="gloss-content-document-epub-nav" type="epub-spec"/>s:</para>

                <itemizedlist role="conformance-list" xml:id="xhtml-nav-rs-confreqs">
                    <listitem>
                        <para xml:id="confreq-nav-access">When requested by a User, Reading Systems <literal role="rfc2119"
                                >must</literal> provide access to the links and link labels in <link
                                linkend="sec-xhtml-nav-def-types">the <markup>nav</markup> elements</link> of the EPUB
                            Navigation Document in a fashion that allows the User to activate the links provided. When a link
                            is activated, the Reading System <literal role="rfc2119">must</literal> relocate the
                            application's current reading position to the destination identified by that link.</para>
                    </listitem>
                    <listitem>
                        <para xml:id="confreq-nav-spine">Reading Systems <literal role="rfc2119">must</literal> honor the
                            above requirement irrespective of whether the EPUB Navigation Document provided in a <olink
                                targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/> is part of the <olink
                                targetdoc="spec" targetptr="gloss-spine" type="epub-spec"/>.</para>
                    </listitem>

                </itemizedlist>
            </section>

            <section xml:id="sec-xhtml-nav-def">
                <title>EPUB Navigation Document Definition</title>

                <section xml:id="sec-xhtml-nav-def-model">
                    <title>The <markup>nav</markup> Element: Restrictions</title>
                    <para>When a <markup>nav</markup> element carries the <markup><link
                                linkend="sec-xhtml-content-type-attribute">epub:type</link></markup> attribute in an <olink
                            targetdoc="spec" targetptr="gloss-content-document-epub-nav" type="epub-spec"/>, this
                        specification restricts the content model of the element and its descendants as follows:</para>

                    <itemizedlist role="conformance-list">
                        <listitem>
                            <para xml:id="confreq-nav-hd">Each <markup>nav</markup> element <literal role="rfc2119"
                                    >may</literal> contain an optional heading indicating the title of the navigation list.
                                The heading <literal role="rfc2119">must</literal> be an <link
                                    xlink:href="http://www.w3.org/TR/html5/dom.html#heading-content">HTML5 heading
                                    content</link> element.</para>
                        </listitem>
                        <listitem>
                            <para xml:id="confreq-nav-ol">The optional heading <literal role="rfc2119">must</literal> be
                                followed by a single <markup
                                    xlink:href="http://www.w3.org/TR/html5/Overview.html#the-ol-element">ol</markup> ordered
                                list; no other elements are permitted as direct children of the <markup>nav</markup> element.
                                This ordered list represents the primary level of content navigation.</para>
                        </listitem>
                        <listitem>
                            <para xml:id="confreq-nav-a">Each list item (<markup
                                    xlink:href="http://www.w3.org/TR/html5/Overview.html#the-li-element">li</markup>) of the
                                ordered list represents a primary heading, structure or other point of interest within the
                                EPUB Publication and <literal role="rfc2119">must</literal> contain either a child <markup
                                    xlink:href="http://www.w3.org/TR/html5/Overview.html#the-a-element">a</markup> element or
                                a child <markup xlink:href="http://www.w3.org/TR/html5/Overview.html#the-span-element"
                                    >span</markup> element. The <markup>a</markup> element describes the target within the
                                Content Document that the link points to. The <markup>span</markup> element serves as a
                                heading for breaking down lists into distinct groups (for example, a large list of
                                illustrations can be segmented into several lists, one for each chapter).</para>
                        </listitem>
                        <listitem>
                            <para xml:id="confreq-nav-a-cnt">Each child <markup>a</markup> or <markup>span</markup> element
                                of a list item <literal role="rfc2119">may</literal> contain any valid <link
                                    xlink:href="http://www.w3.org/TR/html5/Overview.html#phrasing-content-0">HTML5 phrasing
                                    content</link>, but <literal role="rfc2119">must</literal> provide a non zero-length text
                                label after concatenation of all child content and application of whitespace normalization
                                rules. Although non-textual descendant elements <literal role="rfc2119">may</literal> be
                                rendered directly to Users, text content included in <markup>title</markup> or
                                    <markup>alt</markup> attributes <literal role="rfc2119">must</literal> be used when
                                determining compliance with this requirement.</para>
                        </listitem>
                        <listitem xml:id="confreq-nav-a-title">
                            <para>If an <markup>a</markup> or <markup>span</markup> element contains instances of <link
                                    xlink:href="http://dev.w3.org/html5/spec/Overview.html#embedded-content-0">HTML5 embedded
                                    content</link> that do not provide intrinsic text alternatives, it <literal
                                    role="rfc2119">must</literal> also include a <markup>title</markup> attribute with an
                                alternate text rendering of the link label.</para>
                        </listitem>
                        <listitem>
                            <para xml:id="confreq-nav-a-href">The relative IRI reference provided in the
                                    <markup>href</markup> attribute of the <markup>a</markup> element <literal role="rfc2119"
                                    >must</literal> resolve to an <olink targetdoc="spec"
                                    targetptr="gloss-content-document-epub" type="epub-spec"/> or fragment therein.</para>
                        </listitem>
                        <listitem>
                            <para xml:id="confreq-nav-a-nest">The <markup>a</markup> element <literal role="rfc2119"
                                    >may</literal> optionally be followed by an <markup>ol</markup> ordered list representing
                                a subsidiary content level below that heading (e.g., all the subsection headings of a
                                section). The <markup>span</markup> element <literal role="rfc2119">must</literal> be
                                followed by an <markup>ol</markup> ordered list: it cannot be used in "leaf"
                                    <markup>li</markup> elements. Regardless of whether an <markup>a</markup> or
                                    <markup>span</markup> element precedes it, this sublist <literal role="rfc2119"
                                    >must</literal> adhere to all the content requirements defined in this section for
                                constructing the primary navigation list, and recursively (for each additional level of the
                                EPUB Publication's hierarchy represented in this manner).</para>
                        </listitem>
                        <listitem>
                            <para xml:id="confreq-nav-ol-style">The <markup>ol</markup> element represents an ordered list.
                                In the context of this specification, the default display style of list items <literal
                                    role="rfc2119">must</literal> be equivalent to CSS <property>list-style: none</property>
                                (Reading Systems with no CSS support <literal role="rfc2119">must not</literal> show list
                                item numbering). Authors <literal role="rfc2119">may</literal> specify alternative list item
                                styles using CSS, but these would obviously be ignored by Reading Systems that do not support
                                Cascading Style Sheets. </para>
                        </listitem>
                    </itemizedlist>

                    <para>IDPF specifications <literal role="rfc2119">may</literal> introduce further restrictions on the
                        content model defined above for <markup>nav</markup> elements in the EPUB Navigation Document.</para>

                    <informalexample>
                        <para>The following example shows a partial <property>lot</property> ("list of tables")
                                <markup>nav</markup> element, with <markup>span</markup> elements used as link-less headings
                            for grouping the sublists.</para>
                        <synopsis><xi:include href="./examples/contentdocs-nav/grouped-list.xml" parse="text"/></synopsis>
                    </informalexample>
                </section>

                <section xml:id="sec-xhtml-nav-def-types">
                    <title>The <markup>nav</markup> Element: Types</title>

                    <para>The <markup>nav</markup> elements defined in an EPUB Navigation Document are distinguished
                        semantically by the value of their <markup>epub:type</markup> attribute. By <link
                            linkend="sec-contentdocs-default-vocab">default</link>, values of <markup>epub:type</markup> are
                        drawn from the EPUB 3 Structural Semantics Vocabulary <xref linkend="refEPUBStructureVocab"/>, but
                        values drawn from other vocabularies are also allowed. Refer to <xref
                            linkend="sec-xhtml-content-type-attribute"/> for more information. </para>

                    <section xml:id="sec-xhtml-nav-def-types-toc">
                        <title>The <property>toc</property>
                            <markup>nav</markup> Element</title>

                        <para>The <property>toc</property>
                            <markup>nav</markup> element defines the primary navigational hierarchy of the <olink
                                targetdoc="spec" targetptr="gloss-epub-publication" type="epub-spec"/>. It conceptually
                            corresponds to a table of contents in a printed work (i.e., it provides navigation to the
                            structural sections of the EPUB Publication).</para>

                        <para>For usability and accessibility reasons, <olink targetdoc="spec" targetptr="gloss-author"
                                type="epub-spec"/>s <literal role="rfc2119">should</literal> provide a comprehensive table of
                            contents: the <property>toc</property>
                            <markup>nav</markup>
                            <literal role="rfc2119">should not</literal> exclude references based solely on their nesting
                            depth within the document hierarchy, as is often the case in print works (particularly in reduced
                            tables of contents).</para>

                        <para>In the case of <olink targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/>s that
                            exclusively reference XHTML Content Documents from their spines, the <property>toc</property>
                            <markup>nav</markup> will typically correspond to the aggregation of <link
                                xlink:href="http://www.w3.org/TR/html5/Overview.html#headings-and-sections">HTML5
                                outlines</link> of those documents (excluding any subtrees that do not contribute to the
                            primary outline).</para>

                        <para>The order of <markup>li</markup> elements contained within the <property>toc</property>
                            <markup>nav</markup> element <literal role="rfc2119">must</literal> match the order of the
                            targeted elements within each <link linkend="confreq-nav-a-href">targeted EPUB Content
                                Document</link>, and <literal role="rfc2119">must</literal> also follow the order of Content
                            Documents in the Rendition's <olink targetdoc="spec" targetptr="gloss-spine" type="epub-spec"
                            />.</para>

                        <para>The <property>toc</property>
                            <markup>nav</markup> element <literal role="rfc2119">must</literal> occur exactly once in EPUB
                            Navigation Documents.</para>

                        <note>
                            <para>The <property>toc</property>
                                <markup>nav</markup> element corresponds to the <markup>navMap</markup> element in the
                                superseded NCX <xref linkend="refOPF2"/>.</para>
                        </note>

                        <!--<note>
                            <para>When <olink targetdoc="spec" targetptr="gloss-content-document-epub-xhtml" type="epub-spec"/>s are used
                                in the Publication <olink targetdoc="spec" targetptr="gloss-spine" type="epub-spec"/>, authoring tools
                                <literal role="rfc2119">may</literal> utilize the <link
                                    xlink:href="http://www.w3.org/TR/html5/Overview.html#outlines"
                                    >HTML5 document outline algorithm</link> to generate the
                                    <literal>toc</literal>
                                <markup>nav</markup> element contents. Note, however, that when the spine
                                includes multiple Content Documents, the <literal>toc</literal>
                                <markup>nav</markup> element contains navigation information that spans
                                across multiple outlines (the full table of contents aggregates
                                outlines obtained from several XHTML Content Documents).</para>
                        </note>-->

                    </section>

                    <section xml:id="sec-xhtml-nav-def-types-pagelist">
                        <title>The <property>page-list</property>
                            <markup>nav</markup> Element</title>

                        <para>The <property>page-list</property>
                            <markup>nav</markup> element is a container for pagination information. It provides navigation to
                            positions in the content that correspond to the locations of page boundaries present in a print
                            source being represented by the EPUB Publication.</para>

                        <para>The <property>page-list</property>
                            <markup>nav</markup> element is <literal role="rfc2119">optional</literal> in EPUB Navigation
                            Documents and <literal role="rfc2119">must not</literal> occur more than once. </para>

                        <para> The order of <markup>li</markup> elements contained within a <property>page-list</property>
                            <markup>nav</markup> structure <literal role="rfc2119">must</literal> match the order of the
                            actual pages inside each <link linkend="confreq-nav-a-href">targeted EPUB Content Document</link>
                            and <literal role="rfc2119">must</literal> also follow the order of Content Documents in the
                                <olink targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/>'s <olink
                                targetdoc="spec" targetptr="gloss-spine" type="epub-spec"/>. </para>

                        <para>The <property>page-list</property>
                            <markup>nav</markup> element <literal role="rfc2119">should</literal> contain only a single
                                <markup>ol</markup> descendant (i.e., it <literal role="rfc2119">should</literal> be a flat
                            list, not a nested structure of navigation items). </para>

                        <note>
                            <para>The <property>page-list</property>
                                <markup>nav</markup> element corresponds to the <markup>pageList</markup> element in the
                                superseded NCX. <xref linkend="refOPF2"/></para>
                        </note>

                        <note>
                            <para>The <xref linkend="sec-opf-dcsource"/> element provides a means of identifying the source
                                publication to which the given pagination information applies.</para>
                        </note>
                    </section>

                    <section xml:id="sec-xhtml-nav-def-types-landmarks">
                        <title>The <property>landmarks</property>
                            <markup>nav</markup> Element</title>

                        <para>The <property>landmarks</property>
                            <markup>nav</markup> element identifies fundamental structural components of the EPUB Publication
                            in order to enable Reading Systems to provide the User efficient access to them.</para>

                        <para>The structural semantics of each link target within the <property>landmarks</property>
                            <markup>nav</markup> element is determined by the value of the <link
                                linkend="sec-xhtml-content-type-attribute">epub:type</link> attribute on the
                                <markup>a</markup> element descendants. The <markup>epub:type</markup> attribute is <literal
                                role="rfc2119">required</literal> on <markup>a</markup> element descendants of the
                                <property>landmarks</property>
                            <markup>nav</markup> element. </para>

                        <para xml:id="nav-landmarks-htu-extend">The <property>landmarks</property>
                            <markup>nav</markup> element extends the suggested <!-- TODO make olink --> HTML context of terms
                            from the <link linkend="refEPUBStructureVocab">EPUB Structural Semantics Vocabulary</link> to
                            include the <markup>a</markup> element. </para>

                        <informalexample>
                            <para>The following example shows a <property>landmarks</property>
                                <markup>nav</markup> element with structural semantics drawn from the <link
                                    linkend="refEPUBStructureVocab">EPUB Structural Semantics Vocabulary</link>.</para>
                            <synopsis><xi:include href="./examples/contentdocs-nav/landmarks.xml" parse="text"/></synopsis>
                        </informalexample>

                        <para>The <property>landmarks</property>
                            <markup>nav</markup> element is <literal role="rfc2119">optional</literal> in EPUB Navigation
                            Documents and <literal role="rfc2119">must not</literal> occur more than once. </para>

                        <note>
                            <para>The <property>landmarks</property>
                                <markup>nav</markup> element corresponds to the deprecated OPF <markup>guide</markup>
                                element. Refer to <xref linkend="sec-guide-elem"/> for more information. </para>
                        </note>
                    </section>

                    <section xml:id="sec-xhtml-nav-def-types-other">
                        <title>Other <markup>nav</markup> Elements</title>

                        <para>EPUB Navigation Documents optionally <literal role="rfc2119">may</literal> include one or more
                                <markup>nav</markup> elements in addition to the <property>toc</property>,
                                <property>page-list</property> and <property>landmarks</property>
                            <markup>nav</markup> elements defined above. Such additional <markup>nav</markup> elements
                                <literal role="rfc2119">should</literal> have an <markup>epub:type</markup> attribute to
                            provide a machine-readable semantic, and <literal role="rfc2119">must</literal> have a
                            human-readable heading as their first child.</para>

                        <para>This specification imposes no restrictions on the semantics of such additional
                                <markup>nav</markup> elements: they <literal role="rfc2119">may</literal> be used to
                            represent navigational semantics for any information domain, and they <literal role="rfc2119"
                                >may</literal> contain link targets with homogeneous or heterogeneous semantics.</para>

                    </section>
                </section>

                <section xml:id="sec-xhtml-nav-def-hidden">
                    <title>The <markup>hidden</markup> attribute</title>

                    <para>In some cases, <olink targetdoc="spec" targetptr="gloss-author" type="epub-spec"/>s may wish to
                        hide parts of the navigation data within the content flow (i.e., the Reading System's principal
                        rendering of the <olink targetdoc="spec" targetptr="gloss-spine" type="epub-spec"/> contents). A
                        typical example is the <link linkend="sec-xhtml-nav-def-types-pagelist">list of page breaks</link>,
                        which usually isn't rendered as part of the content flow but instead exposed to the <olink
                            targetdoc="spec" targetptr="gloss-user" type="epub-spec"/> separately in a dedicated navigation
                        user interface.</para>

                    <para> While the CSS <property>display</property> property can be used to control the visual rendering of
                        EPUB Navigation Documents in Reading Systems with <olink targetdoc="spec"
                            targetptr="gloss-viewport-css" type="epub-spec"/>s, not all Reading Systems provide such an
                        interface. To control rendering across all Reading Systems, authors <literal role="rfc2119"
                            >must</literal> use the <xref linkend="refHTML5"/>
                        <markup xlink:href="http://www.w3.org/TR/html5/Overview.html#the-hidden-attribute">hidden</markup>
                        attribute to indicate which (if any) portions of the navigation data are excluded from rendering in
                        the content flow. The <markup>hidden</markup> attribute has no effect on how navigation data is
                        rendered outside of the content flow (such as in dedicated navigation user interfaces provided by
                        Reading Systems).</para>

                    <informalexample>
                        <para>The following example shows a partial <property>page-list</property>
                            <markup>nav</markup> element. The presence of the <markup>hidden</markup> attribute on the root
                            indicates that the entire list is excluded from rendering in the content flow.</para>
                        <synopsis><xi:include href="./examples/contentdocs-nav/page-list.xml" parse="text"/></synopsis>
                    </informalexample>

                    <informalexample>
                        <para>The following example shows a partial <property>toc</property>
                            <markup>nav</markup> element where the <markup>hidden</markup> attribute is used to limit content
                            flow rendering to the two topmost hierarchical levels.</para>
                        <synopsis><xi:include href="./examples/contentdocs-nav/toc.xml" parse="text"/></synopsis>
                    </informalexample>

                </section>
            </section>
        </section>
    </chapter>

    <chapter xml:id="sec-contentdocs">
        <title>EPUB Content Documents</title>

        <section xml:id="sec-xhtml">
            <title>XHTML Content Documents</title>

            <para>This section defines a profile of <xref linkend="refHTML5"/> for creating XHTML Content Documents. An
                instance of an XML document that conforms to this profile is a <olink targetdoc="spec"
                    targetptr="gloss-core-media-type" type="epub-spec"/> and is referred to in this specification as an
                    <olink targetdoc="spec" targetptr="gloss-content-document-epub-xhtml" type="epub-spec"/>.</para>

            <para>Unless otherwise specified, this specification inherits all definitions of semantics, structure and
                processing behaviors <!--  of the elements and attributes in the W3C HTML5 vocabulary --> from the <xref
                    linkend="refHTML5"/> specification. </para>

            <caution xml:id="caution-html5">
                <para>The EPUB 3 XHTML Content Document definition references features in the W3C <xref linkend="refHTML5"/>
                    specification that are still works in progress and may change in incompatible ways. When utilizing such
                    features, authors should consider the inherent risks in terms of the potential impact on interoperability
                    and document longevity.</para>
            </caution>

            <section xml:id="sec-xhtml-conf-content" xreflabel="XHTML Content Documents — Content Conformance">
                <title>Content Conformance</title>
                <para>An <olink targetdoc="spec" targetptr="gloss-content-document-epub-xhtml" type="epub-spec"/>
                    <literal role="rfc2119">must</literal> meet all of the following criteria:</para>
                <variablelist role="conformance-list" xml:id="confreq-cd-xhtml">
                    <varlistentry xml:id="confreq-cd-xhtml-docprops">
                        <term>Document Properties</term>
                        <listitem>
                            <para xml:id="confreq-cd-xhtml-xml">
                                <xi:include href="./share/xml-defref.xml"/>
                            </para>
                            <!--
                            <para xml:id="confreq-cd-xhtml-docprops-xml">
                                <xi:include href="./share/xml-wellformed.xml"/>
                            </para>

                            <para xml:id="confreq-cd-xhtml-docprops-extmarkupdecl">
                                <xi:include href="./share/xml-extmarkupdecl.xml"/>
                            </para>

                            <para xml:id="confreq-cd-xhtml-docprops-xinc">
                                <xi:include href="./share/xml-xinc.xml"/>
                            </para>

                            <para xml:id="confreq-cd-xhtml-enc">
                                <xi:include href="./share/xml-enc.xml"/>
                            </para>
                            -->

                            <para xml:id="confreq-cd-xhtml-docprops-syntax">It <literal role="rfc2119">must</literal> be an
                                    <xref linkend="refHTML5"/> document that conforms to the <link
                                    xlink:href="http://www.w3.org/TR/html5/Overview.html#the-xhtml-syntax">XHTML
                                    syntax</link>.</para>

                            <para xml:id="confreq-cd-xhtml-docprops-html5">For all document constructs used that are defined
                                by <xref linkend="refHTML5"/>, it <literal role="rfc2119">must</literal> conform to the
                                conformance criteria defined for those constructs in that specification, unless explicitly
                                overridden in <xref linkend="sec-xhtml-deviations"/>.</para>

                            <para xml:id="confreq-cd-xhtml-docprops-schema">It <literal role="rfc2119">may</literal> include
                                extensions to the <xref linkend="refHTML5"/> grammar as defined in <xref
                                    linkend="sec-xhtml-extensions"/>, and <literal role="rfc2119">must</literal> conform to
                                all content conformance constraints defined therein. </para>
                        </listitem>
                    </varlistentry>
                    <varlistentry xml:id="confreq-cd-xhtml-fileprops">
                        <term>File Properties</term>
                        <listitem>
                            <para xml:id="confreq-cd-xhtml-fileprops-name">The XHTML Content Document filename <literal
                                    role="rfc2119">should</literal> use the file extension
                                <filename>.xhtml</filename>.</para>
                        </listitem>
                    </varlistentry>
                </variablelist>
                <note xml:id="note-cd-xhtml-refprops-pkg">
                    <!-- note similar statement for xhtml, svg and css-->
                    <para>All <olink targetdoc="spec" targetptr="gloss-publication-resource-cmt-or-foreign" type="epub-spec"
                            >Publication Resources</olink> referenced from an XHTML Content Document must conform to the
                        constraints for Publication Resources defined in <xref linkend="sec-epub-content-conf"/></para>
                </note>
            </section>

            <section xml:id="sec-xhtml-conf-rs" xreflabel="XHTML Content Documents — Reading System Conformance">
                <title>Reading System Conformance</title>

                <para>A conformant <olink targetdoc="spec" targetptr="gloss-epub-reading-system" type="epub-spec"/>
                    <literal role="rfc2119">must</literal> meet all of the following criteria for processing <olink
                        targetdoc="spec" targetptr="gloss-content-document-epub-xhtml" type="epub-spec">XHTML Content
                        Documents</olink>:</para>

                <itemizedlist role="conformance-list" xml:id="xhtml-rs-confreqs">
                    <listitem>
                        <!-- todo below: overridden really refers to the deviations and extensions sections-->
                        <para xml:id="confreq-xhtml-rs-behavior">Unless explicitly defined by this specification as
                            overridden, it <literal role="rfc2119">must</literal> process XHTML Content Documents using
                            semantics defined by the <xref linkend="refHTML5"/> specification and honor any applicable User
                            Agent conformance constraints expressed therein.</para>
                    </listitem>
                    <listitem>
                        <para xml:id="confreq-xhtml-rs-behavior-add">It <literal role="rfc2119">must</literal> meet all
                            Reading System conformance criteria defined in <xref linkend="sec-xhtml-extensions"/>.</para>
                    </listitem>
                    <listitem>
                        <para xml:id="confreq-xhtml-rs-behavior-restr">It <literal role="rfc2119">must</literal> recognize
                            and adapt behaviorally to the constraints defined in <xref linkend="sec-xhtml-deviations"
                            />.</para>
                    </listitem>
                    <listitem>
                        <para xml:id="confreq-xhtml-rs-scrpt">It <literal role="rfc2119">must</literal> meet the Reading
                            System conformance criteria defined in <xref linkend="sec-scripted-content-rs-reqs"/>.</para>
                    </listitem>
                    <listitem>
                        <para xml:id="confreq-xhtml-rs-css">It <literal role="rfc2119">must</literal> support visual
                            rendering of XHTML Content Documents as defined in <xref linkend="sec-css-rs-conf"/>.</para>
                    </listitem>
                    <listitem>
                        <para xml:id="confreq-xhtml-rs-a11y">It <literal role="rfc2119">should</literal> recognize embedded
                            ARIA markup and support exposure of any given ARIA roles, states and properties to platform
                            accessibility APIs <xref linkend="refARIA"/>. </para>
                    </listitem>
                </itemizedlist>
            </section>

            <section xml:id="sec-xhtml-extensions">
                <title>HTML5 Extensions</title>

                <para>This section defines EPUB 3 <olink targetdoc="spec" targetptr="gloss-content-document-epub-xhtml"
                        type="epub-spec"/> extensions to the underlying <xref linkend="refHTML5"/> document model.</para>

                <section xml:id="sec-xhtml-semantic-markup">
                    <title>Semantic Markup</title>

                    <section xml:id="sec-xhtml-semantic-inflection" xreflabel="XHTML Semantic Inflection">
                        <title>Semantic Inflection</title>

                        <section xml:id="sec-xhtml-semantic-inflection-intro" conformance="informative">
                            <title>Introduction</title>

                            <para>Semantic inflection is the process of attaching additional meaning about the specific
                                purpose and/or nature an element plays in an <olink targetdoc="spec"
                                    targetptr="gloss-content-document-epub-xhtml" type="epub-spec"/>. In the context of
                                    <olink targetdoc="spec" targetptr="gloss-epub-publication" type="epub-spec">EPUB
                                    Publications</olink>, the <markup><link linkend="attrdef-epub-type"
                                    >epub:type</link></markup> attribute is typically used to express domain-specific
                                semantics, with the inflection(s) it carries complementing the underlying <xref
                                    linkend="refHTML5"/> host vocabulary. The applied semantics always refine the meaning of
                                their containing elements, never override their nature (e.g., the attribute can be used to
                                indicate a <markup>section</markup> is a chapter in a work, but cannot be used to turn
                                    <markup>p</markup> elements into list items to avoid proper list structures).</para>

                            <para>Semantic metadata is not intended for human consumption; it instead provides a controlled
                                way for Reading Systems and other User Agents to learn more about the structure and content
                                of a document, providing them the opportunity to enhance the reading experience for Users. </para>

                            <para>This specification defines a method for semantic inflection using <emphasis>the attribute
                                    axis</emphasis>: instead of adding new XML elements to the XHTML Content Document
                                vocabulary, the <markup>epub:type</markup> attribute can be appended to existing elements to
                                inflect the desired semantics. A mechanism to identify external vocabularies that provide
                                controlled values for the attributes is also defined.</para>

                        </section>

                        <section xml:id="sec-xhtml-content-type-attribute">
                            <title>The <markup>epub:type</markup> Attribute</title>

                            <para>The <markup>epub:type</markup> attribute inflects semantics on the element on which it
                                appears. Its value is one or more space-separated terms stemming from external vocabularies
                                associated with the document instance, as defined in <xref
                                    linkend="sec-contentdocs-vocab-association"/>. </para>

                            <para>The inflected semantic <literal role="rfc2119">must</literal> express a subclass of the
                                semantic of the carrying element. In the case of semantically neutral elements (such as <xref
                                    linkend="refHTML5"/>
                                <markup xlink:href="http://www.w3.org/TR/html5/Overview.html#the-div-element">div</markup>
                                and <markup xlink:href="http://www.w3.org/TR/html5/Overview.html#the-span-element"
                                    >span</markup>), the inflected semantic <literal role="rfc2119">must not</literal> attach
                                a meaning that is already conveyed by an existing element (e.g., that a <markup>div</markup>
                                represents a paragraph or section). Reading Systems <literal role="rfc2119">must</literal>
                                <link linkend="confreq-rs-epubtype-prec">ignore inflected semantics</link> that conflict with
                                the carrying element.</para>

                            <para>As the <xref linkend="refHTML5"/>
                                <markup xlink:href="http://www.w3.org/TR/html5/Overview.html#the-head-element">head</markup>
                                element is a metadata container for a document, structural semantics expressed on this
                                element or any descendant of it have no meaning. Reading Systems <literal role="rfc2119"
                                    >must</literal> ignore such semantics.</para>

                            <note>
                                <para>The <markup>epub:type</markup> attribute is intended to be functionally equivalent to
                                    the W3C Role Attribute <xref linkend="refPFRoleAttribute"/>, but with restrictions as
                                    specified in <xref linkend="sec-contentdocs-vocab-association"/>. The IDPF's intent is to
                                    harmonize this attribute with W3C mechanisms for semantic inflection in a future major
                                    revision of the specification. </para>
                            </note>

                            <variablelist xreflabel="epub:type" role="elem-synopsis" xml:id="attrdef-epub-type">
                                <varlistentry>
                                    <term>Attribute Name</term>
                                    <listitem>
                                        <para>
                                            <markup>type</markup>
                                        </para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry>
                                    <term>Namespace</term>
                                    <listitem>
                                        <para>
                                            <uri>http://www.idpf.org/2007/ops</uri>
                                        </para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry>
                                    <term>Usage</term>
                                    <listitem>
                                        <para><link
                                                xlink:href="http://www.w3.org/TR/html5/single-page.html#global-attributes"
                                                >Global attribute</link>. <literal role="rfc2119">May</literal> be specified
                                            on all elements.</para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry>
                                    <term>Value</term>
                                    <listitem>
                                        <para>A space-separated list of <link linkend="sec-property-datatype">property</link>
                                            values, with restrictions as defined in <xref
                                                linkend="sec-contentdocs-vocab-association"/>.</para>
                                    </listitem>
                                </varlistentry>
                            </variablelist>

                        </section>

                        <section xml:id="sec-contentdocs-vocab-association" xreflabel="Vocabulary Association">
                            <title>Vocabulary Association</title>

                            <para>This specification adopts the vocabulary association mechanisms defined in <xref
                                    linkend="sec-metadata-assoc"/>, with the following modifications: </para>

                            <bridgehead xml:id="sec-contentdocs-default-vocab">Default Vocabulary</bridgehead>
                            <para>The default vocabulary for Content Documents is defined to be the <link
                                    linkend="refEPUBStructureVocab">EPUB 3 Structural Semantics Vocabulary</link>.</para>

                            <bridgehead xml:id="sec-contentdocs-reserved-vocabs">Reserved Prefixes</bridgehead>

                            <para>This specification reserves prefixes that Authors <literal role="rfc2119">may</literal> use
                                in the <markup>epub:type</markup> attribute in the normative document <link
                                    xlink:href="http://www.idpf.org/epub/vocab/structure/pfx">EPUB Content Documents Reserved
                                    Prefixes</link>.</para>

                            <bridgehead xml:id="sec-contentdocs-prefix-attr">The <markup>prefix</markup>
                                Attribute</bridgehead>
                            <para>The <markup>prefix</markup> attribute definition is unchanged, but the attribute is defined
                                to be in the namespace <uri>http://www.idpf.org/2007/ops</uri> when used in EPUB Content
                                Documents.</para>

                            <para>The <markup>prefix</markup> attribute is only valid on the <xref linkend="refHTML5"/> root
                                    <markup>html</markup> element.</para>

                            <bridgehead>Examples</bridgehead>
                            <informalexample xml:id="ex.epubtype.note">
                                <para>The following example shows the <markup>epub:type</markup> attribute used to inflect
                                    footnote and note reference semantics. The properties used are defined in the <link
                                        linkend="sec-contentdocs-default-vocab">default vocabulary</link>. </para>
                                <synopsis>
<xi:include href="./examples/contentdocs/epub-type-1.xml" parse="text"/></synopsis>
                            </informalexample>
                            <informalexample xml:id="ex.epubtype.gloss">
                                <para>The following example shows the <markup>epub:type</markup> attribute used to inflect
                                    glossary semantics on an HTML5 definition list. The property used is defined in the <link
                                        linkend="sec-contentdocs-default-vocab">default vocabulary</link>. </para>
                                <synopsis>
<xi:include href="./examples/contentdocs/epub-type-2.xml" parse="text"/></synopsis>
                            </informalexample>
                            <informalexample xml:id="ex.epubtype.pg">
                                <para>The following example shows the <markup>epub:type</markup> attribute used to inflect
                                    source publication pagebreak semantics. The property used is defined in the <link
                                        linkend="sec-contentdocs-default-vocab">default vocabulary</link>. (Note that the
                                        <xref linkend="sec-opf-dcsource"/> element provides a means of identifying the source
                                    publication to which the given pagination information applies.)</para>
                                <synopsis>
<xi:include href="./examples/contentdocs/epub-type-3.xml" parse="text"/></synopsis>
                            </informalexample>

                        </section>

                        <section xml:id="sec-contentdocs-semantic-inflection-processing-reqs">
                            <title>Processing Requirements</title>

                            <para>A Reading System <literal role="rfc2119">must</literal> process the
                                    <markup>epub:type</markup> attribute as follows:</para>

                            <itemizedlist role="conformance-list">
                                <listitem>
                                    <para xml:id="confreq-rs-epubtype-beh">It <literal role="rfc2119">may</literal> associate
                                        specialized behaviors with none, some or all of the terms defined in the <link
                                            linkend="sec-contentdocs-default-vocab">default vocabulary</link>.</para>
                                </listitem>
                                <listitem xml:id="confreq-rs-epubtype-oth">
                                    <para>It <literal role="rfc2119">may</literal> associate specialized behaviors with terms
                                        given in vocabularies other than the default.</para>
                                </listitem>
                                <listitem xml:id="confreq-rs-epubtype-ign">
                                    <para>It <literal role="rfc2119">must</literal> ignore terms that it does not
                                        recognize.</para>
                                </listitem>
                                <!--
                            <listitem>
                                <para>A Reading System <literal role="rfc2119">may</literal> support the dereferencing of unrecognized
                                    CURIEs occurring in the <markup>epub:type</markup> and
                                        <markup>rel</markup> attributes. If a Reading System
                                    successfully dereferences an unrecognized CURIE, it <literal role="rfc2119">may</literal>
                                    (depending on the information available in the referenced
                                    vocabulary property) employ adaptive behaviors in response to
                                    the change to the document structural semantics that results
                                    from the CURIE dereferencing.</para>
                            </listitem>                            
                            <listitem>
                                <para>If the attempt to dereference an unrecognized CURIE fails, or
                                    if the dereferencing of unrecognized CURIEs is not supported,
                                    then the Reading System <literal role="rfc2119">must</literal> ignore the given unrecognized CURIE
                                    and continue processing the <markup>epub:type</markup> or
                                        <markup>rel</markup> attribute.</para>
                            </listitem>
                            -->
                            </itemizedlist>
                            <para xml:id="confreq-rs-epubtype-prec">When Reading System behavior associated with a given
                                    <markup>epub:type</markup> value conflicts with behavior associated with the carrying
                                element, the behavior associated with the element <literal role="rfc2119">must</literal> be
                                given precedence.</para>
                        </section>

                    </section>

                    <section xml:id="sec-xhtml-semantic-enrichment" xreflabel="XHTML Semantic Enrichment">
                        <title>Semantic Enrichment</title>

                        <section xml:id="sec-xhtml-semantic-enrichment-intro" conformance="informative">
                            <title>Introduction</title>

                            <para>Unlike <link linkend="sec-xhtml-semantic-inflection">semantic inflection</link>, which is
                                about refining the structures within your markup, semantic enrichment enables the layering of
                                meaning into the content in order to facilitate machine processing.</para>

                            <para>The <xref linkend="refMicrodata"/> and <xref linkend="refRDFa"/> specifications both define
                                sets of attributes that can be used in <olink targetdoc="spec"
                                    targetptr="gloss-content-document-epub-xhtml" type="epub-spec">XHTML Content
                                    Documents</olink> to semantically enrich the content.</para>
                        </section>

                        <section xml:id="sec-xhtml-semantic-enrichment-content-conf">
                            <title>Content Conformance</title>

                            <para>A conformant <olink targetdoc="spec" targetptr="gloss-content-document-epub-xhtml"
                                    type="epub-spec"/>
                                <literal role="rfc2119">must</literal> meet all of the following criteria:</para>

                            <itemizedlist role="conformance-list" xml:id="xhtml-semantic-enrichment-confreqs">
                                <listitem>
                                    <para xml:id="confreq-xhtml-microdata">It <literal role="rfc2119">must</literal> allow
                                        the use of <xref linkend="refMicrodata"/> attributes as defined in that
                                        specification.</para>
                                </listitem>
                                <listitem>
                                    <para xml:id="confreq-xhtml-rdfa">It <literal role="rfc2119">must</literal> allow the use
                                        of <xref linkend="refRDFa"/> attributes as defined in <xref linkend="refHTMLRDFa"
                                        />.</para>
                                </listitem>
                            </itemizedlist>
                        </section>

                        <section xml:id="sec-xhtml-semantic-enrichment-processing-reqs">
                            <title>Processing Requirements</title>

                            <para>Reading Systems <literal role="rfc2119">may</literal> process <xref linkend="refMicrodata"
                                /> and <xref linkend="refRDFa"/> attributes as defined in their respective specifications,
                                but such support is <literal role="rfc2119">optional</literal>.</para>
                        </section>

                    </section>
                </section>

                <section xml:id="sec-xhtml-ssml-attrib">
                    <title>SSML Attributes</title>

                    <section xml:id="sec-cd-ssml-intro">
                        <title>Overview</title>

                        <para>The W3C Speech Synthesis Markup Language <xref linkend="refSSML"/> is a language used for
                            assisting <olink targetdoc="spec" targetptr="gloss-tts" type="epub-spec"/> engines in generating
                            synthetic speech. Although SSML is designed as a standalone document type, it also defines
                            semantics suitable for use within other host languages.</para>

                        <para>This specification recasts the <link
                                xlink:href="http://www.w3.org/TR/speech-synthesis11/#S3.1.10">SSML 1.1
                                    <markup>phoneme</markup> element</link> as two attributes — <markup>ssml:ph</markup> and
                                <markup>ssml:alphabet</markup> — and makes them available within EPUB XHTML Content
                            Documents.</para>

                        <para>Reading Systems with <olink targetdoc="spec" targetptr="gloss-tts" type="epub-spec"/>
                            capabilities <literal role="rfc2119">should</literal> support the SSML Attributes as defined
                            below.</para>

                        <xi:include href="./share/note-tts-features.xml"/>

                    </section>

                    <section xml:id="sec-cd-ssml-ph-attrib">
                        <title>The <markup>ssml:ph</markup> attribute</title>
                        <para>The <markup>ssml:ph</markup> attribute specifies a phonemic/phonetic pronunciation of the text
                            represented by the element to which the attribute is attached.</para>
                        <variablelist xreflabel="ssml:ph" role="elem-synopsis" xml:id="attrdef-ssml-ph">
                            <varlistentry>
                                <term>Attribute Name</term>
                                <listitem>
                                    <para>
                                        <markup>ph</markup>
                                    </para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>Namespace</term>
                                <listitem>
                                    <para>
                                        <uri>http://www.w3.org/2001/10/synthesis</uri>
                                    </para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>Usage</term>
                                <listitem>
                                    <para><link xlink:href="http://www.w3.org/TR/html5/single-page.html#global-attributes"
                                            >Global attribute</link>. May be specified on all elements with which a phonetic
                                        equivalent can logically be associated (e.g., elements that contain textual
                                        information).</para>
                                    <para>Must not be specified on a descendant of an element that already carries this
                                        attribute.</para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>Value</term>
                                <listitem>
                                    <para>A phonemic/phonetic expression, syntactically valid with respect to <link
                                            linkend="sec-cd-ssml-alphabet-attrib">the phonemic/phonetic alphabet being
                                            used</link>.</para>
                                </listitem>
                            </varlistentry>
                        </variablelist>
                        <para>This attribute inherits all the semantics of the <link linkend="refSSML">SSML 1.1</link>
                            <markup>phoneme</markup> element <markup
                                xlink:href="http://www.w3.org/TR/speech-synthesis11/#S3.1.10"> ph</markup> attribute, with
                            the following addition:</para>
                        <itemizedlist role="conformance-list">
                            <listitem>
                                <para xml:id="ssml-ph-concat"> When the <markup>ssml:ph</markup> attribute appears on an
                                    element that has text node descendants, the corresponding document text to which the
                                    pronunciation applies is the string that results from concatenating the descendant text
                                    nodes, in document order. The specified phonetic pronunciation <literal role="rfc2119"
                                        >must</literal> therefore logically match the element's textual data in its entirety
                                    (i.e., not just an isolated part of its content).</para>
                            </listitem>
                        </itemizedlist>
                        <note>
                            <para>Reading Systems that support the SSML Attributes and <link linkend="sec-pls">PLS
                                    Documents</link> must honor the defined <link linkend="confreq-pls-rs-casc">precedence
                                    rules</link> for these two constructs. </para>
                        </note>
                    </section>

                    <section xml:id="sec-cd-ssml-alphabet-attrib">
                        <title>The <markup>ssml:alphabet</markup> attribute</title>

                        <para>The <markup>ssml:alphabet</markup> attribute specifies which phonemic/phonetic pronunciation
                            alphabet is used in the value of the <markup><xref linkend="attrdef-ssml-ph"/></markup>
                            attribute.</para>

                        <variablelist xreflabel="ssml:alphabet" role="elem-synopsis" xml:id="attrdef-ssml-alphabet">
                            <varlistentry>
                                <term>Attribute Name</term>
                                <listitem>
                                    <para>
                                        <markup>alphabet</markup>
                                    </para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>Namespace</term>
                                <listitem>
                                    <para>
                                        <uri>http://www.w3.org/2001/10/synthesis</uri>
                                    </para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>Usage</term>
                                <listitem>
                                    <para><link xlink:href="http://www.w3.org/TR/html5/single-page.html#global-attributes"
                                            >Global attribute</link>. <literal role="rfc2119">May</literal> be specified on
                                        any element.</para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>Value</term>
                                <listitem>
                                    <para>The name of the pronunciation alphabet used in the value of <markup><xref
                                                linkend="attrdef-ssml-ph"/></markup> (inherited). </para>
                                </listitem>
                            </varlistentry>
                        </variablelist>

                        <para>This attribute inherits all the semantics of the <link linkend="refSSML">SSML 1.1</link>
                            <markup>phoneme</markup> element <markup
                                xlink:href="http://www.w3.org/TR/speech-synthesis11/#S3.1.10"> alphabet</markup> attribute,
                            with the following addition:</para>
                        <itemizedlist role="conformance-list">
                            <listitem>
                                <para xml:id="ssml-alphabet-inherit">The value of the <markup>ssml:alphabet</markup>
                                    attribute is inherited in the document tree. The pronunciation alphabet used in a given
                                        <markup>ssml:ph</markup> attribute value is determined by locating the first
                                    occurrence of the <markup>ssml:alphabet</markup> attribute starting with the element on
                                    which the <markup>ssml:ph</markup> attribute appears, followed by the nearest ancestor
                                    element.</para>
                            </listitem>
                        </itemizedlist>

                        <para>Reading Systems that support the <link linkend="sec-xhtml-ssml-attrib">SSML Attributes</link>
                            feature of this specification <literal role="rfc2119">should</literal> support the IPA alphabet
                                <xref linkend="refIPA"/>, as expressed by the value "<code role="value">ipa</code>".</para>
                    </section>

                </section>

                <section xml:id="sec-xhtml-content-switch">
                    <title>Content Switching</title>

                    <section xml:id="sec-xhtml-switch-intro" conformance="informative">
                        <title>Introduction</title>

                        <para>The <markup>switch</markup> element provides a simple mechanism through which <olink
                                targetdoc="spec" targetptr="gloss-author" type="epub-spec">Authors</olink> can tailor the
                            content displayed to Users, one that isn't dependent on the scripting capabilities of the <olink
                                targetdoc="spec" targetptr="gloss-epub-reading-system" type="epub-spec"/>.</para>

                        <para>Reading System developers may choose to support XML vocabularies and new HTML elements that are
                            not valid in <olink targetdoc="spec" targetptr="gloss-content-document-epub-xhtml"
                                type="epub-spec">XHTML Content Documents</olink>. The <markup>switch</markup> mechanism
                            encourages this type of development and experimentation, but at the same time provides Authors
                            who wish to take advantage of it the security of knowing that their content will still display on
                            any compliant Reading System (i.e., it maintains the baseline requirement that all XHTML Content
                            Documents be valid if none of the specialized markup is supported).</para>

                        <para>Content switching is not just about encouraging future development, however; it can also be
                            used to create <olink targetdoc="spec" targetptr="gloss-epub-publication" type="epub-spec">EPUB
                                Publications</olink> that maintain a level of compatibility with older Reading Systems unable
                            to handle the new features of EPUB 3. For example, instances of MathML, now a native type, could
                            be added using <markup>switch</markup> elements so that EPUB 2 Reading Systems could instead
                            provide fallback images or text.</para>
                    </section>

                    <section xml:id="sec-xhtml-switch-def">
                        <title>Definition</title>

                        <section xml:id="sec-xhtml-epub-switch">
                            <title>The <markup>epub:switch</markup> Element</title>

                            <para>The <markup>switch</markup> element allows an XML fragment to be conditionally inserted
                                into the content model of an XHTML Content Document.</para>

                            <variablelist xreflabel="epub:switch" role="elem-synopsis" xml:id="elemdef-switch">
                                <varlistentry>
                                    <term>Element name</term>
                                    <listitem>
                                        <para>
                                            <markup>switch</markup>
                                        </para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry>
                                    <term>Namespace</term>
                                    <listitem>
                                        <para>
                                            <uri>http://www.idpf.org/2007/ops</uri>
                                        </para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry>
                                    <term>Usage</term>
                                    <listitem>
                                        <para>In <link xlink:href="http://www.w3.org/TR/html5/Overview.html#flow-content-0"
                                                >Flow</link> and <link
                                                xlink:href="http://www.w3.org/TR/html5/Overview.html#phrasing-content-0"
                                                >Inline</link> content. Repeatable.</para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry>
                                    <term>Attributes</term>
                                    <listitem>
                                        <variablelist role="elem-synopsis-attlist">
                                            <varlistentry xml:id="attrdef-switch-id">
                                                <term>
                                                    <markup>id</markup>
                                                    <option>[optional]</option>
                                                </term>
                                                <listitem>
                                                    <xi:include href="./share/id-prose-para.xml"/>
                                                </listitem>
                                            </varlistentry>
                                        </variablelist>
                                    </listitem>
                                </varlistentry>
                                <varlistentry>
                                    <term>Content Model</term>
                                    <listitem>
                                        <para>In this order: <markup><link role="codelink" linkend="sec-xhtml-epub-case"
                                                    >case</link></markup>
                                            <option>[1 or more]</option>, <markup><link role="codelink"
                                                    linkend="sec-xhtml-epub-default">default</link></markup>
                                            <option>[exactly 1]</option>.</para>
                                    </listitem>
                                </varlistentry>
                            </variablelist>

                            <para>A Reading System <literal role="rfc2119">must</literal> individually process each
                                    <markup>switch</markup> element in a document to determine whether it can render any of
                                the child <markup><link linkend="elemdef-case">case</link></markup> elements (as determined
                                by the value of their <markup><link linkend="attrdef-case-required-namespace"
                                        >required-namespace</link></markup> attributes).</para>

                            <para>For each <markup>switch</markup> encountered, the Reading System <literal role="rfc2119"
                                    >should</literal> render the content of the first <markup>case</markup> it supports, but
                                is free to select from any of the available options. If the Reading System does not support
                                the markup contained in any of the child <markup>case</markup> elements, it <literal
                                    role="rfc2119">must</literal> render the contents of the <markup><link
                                        linkend="elemdef-default">default</link></markup> element.</para>

                            <para>The <xref linkend="refHTML5"/>
                                <markup xlink:href="http://www.w3.org/TR/html5/Overview.html#the-object-element"
                                    >object</markup> element <literal role="rfc2119">should</literal> be used to embed custom
                                (non-core) content types in XHTML Content Documents. Custom markup <literal role="rfc2119"
                                    >should</literal> be wrapped in a <markup>switch</markup> element only when the content
                                it represents is an integral part of the document and depends on the context of the document
                                to be properly processed.</para>

                            <para>The <markup>switch</markup> element is not intended to replace intrinsic fallback
                                mechanisms, such as the <xref linkend="refMathML"/>
                                <markup>alttext</markup> attribute and the <xref linkend="refSVG"/>
                                <markup>title</markup> and <markup>desc</markup> elements. Authors <literal role="rfc2119"
                                    >should</literal> always consider including intrinsic fallbacks, even when including a
                                    <markup>switch</markup> for Reading Systems with no support for the host grammar (e.g.,
                                to ensure accessibility).</para>

                            <bridgehead>Examples</bridgehead>

                            <informalexample>
                                <para>An example of ChemML markup inserted using the <markup>switch</markup> element.</para>
                                <synopsis><xi:include href="examples/contentdocs/switch-1.xml" parse="text"/></synopsis>
                            </informalexample>

                            <informalexample>
                                <para>An example of adding MathML markup for compliance with EPUB 2 Reading Systems.</para>
                                <synopsis><xi:include href="examples/contentdocs/switch-2.xml" parse="text"/></synopsis>
                            </informalexample>

                        </section>

                        <section xml:id="sec-xhtml-epub-case">
                            <title>The <markup>epub:case</markup> Element</title>

                            <para>The <markup>case</markup> element contains an instance of markup from an XML vocabulary.
                                The included markup <literal role="rfc2119">may</literal> be natively supported in XHTML
                                Content Documents (in the case of MathML and SVG), but such support is not a
                                requirement.</para>

                            <variablelist xreflabel="epub:case" role="elem-synopsis" xml:id="elemdef-case">
                                <varlistentry>
                                    <term>Element name</term>
                                    <listitem>
                                        <para>
                                            <markup>case</markup>
                                        </para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry>
                                    <term>Namespace</term>
                                    <listitem>
                                        <para>
                                            <uri>http://www.idpf.org/2007/ops</uri>
                                        </para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry>
                                    <term>Usage</term>
                                    <listitem>
                                        <para>Required first child of <markup><link linkend="elemdef-switch"
                                                >switch</link></markup>. Repeatable.</para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry>
                                    <term>Attributes</term>
                                    <listitem>
                                        <variablelist role="elem-synopsis-attlist">
                                            <varlistentry xml:id="attrdef-case-id">
                                                <term>
                                                    <markup>id</markup>
                                                    <option>[optional]</option>
                                                </term>
                                                <listitem>
                                                    <xi:include href="./share/id-prose-para.xml"/>
                                                </listitem>
                                            </varlistentry>
                                            <varlistentry xml:id="attrdef-case-required-namespace">
                                                <term>
                                                    <markup>required-namespace</markup>
                                                    <option>[required]</option>
                                                </term>
                                                <listitem>
                                                    <para>An extension identifier in URI form <xref linkend="refRFC2046"/>
                                                        that identifies the XML vocabulary or extension that the Reading
                                                        System <literal role="rfc2119">must</literal> support in order to
                                                        process the content of the <markup>case</markup> element. </para>
                                                </listitem>
                                            </varlistentry>
                                        </variablelist>
                                    </listitem>
                                </varlistentry>
                                <varlistentry>
                                    <term>Content Model</term>
                                    <listitem>
                                        <para>An XML fragment conforming to the markup vocabulary identified in the
                                                <markup>required-namespace</markup> attribute.</para>
                                    </listitem>
                                </varlistentry>
                            </variablelist>

                            <para>Each <markup>case</markup> element <literal role="rfc2119">must</literal> contain an
                                alternate representation of the same content. To ensure the best rendering of their content,
                                Authors <literal role="rfc2119">should</literal> order <markup>case</markup> elements by to
                                their optimal rendering format.</para>

                            <para>If the <markup>case</markup> element contains markup that is valid in an XHTML Content
                                Document (e.g., MathML), that content <literal role="rfc2119">must</literal> be valid at the
                                point where the <markup><link linkend="elemdef-switch">switch</link></markup> element has
                                been inserted (i.e., its addition <literal role="rfc2119">must not</literal> result in an
                                invalid document).</para>

                            <para>Foreign markup in a <markup>case</markup> element <literal role="rfc2119">must</literal> be
                                well formed, but does not have to be valid at its point of insertion. Authors <literal
                                    role="rfc2119">should</literal> ensure that any foreign markup matches the context in
                                which it is used (e.g., a block element should not be included in a <markup>switch</markup>
                                element inserted in an inline context).</para>

                            <note>
                                <para>The IDPF maintains an informative registry of common extension identifiers for use in
                                    the <markup>required-namespace</markup> attribute at <uri
                                        xlink:href="../../switch/switch-index.html">http://www.idpf.org/epub/switch/</uri>.</para>
                            </note>

                        </section>

                        <section xml:id="sec-xhtml-epub-default">
                            <title>The <markup>epub:default</markup> Element</title>

                            <para>The <markup>default</markup> element provides markup that is valid in any XHTML Content
                                Document for when a Reading System cannot render any of the <markup><link
                                        linkend="elemdef-case">case</link></markup> elements.</para>

                            <variablelist xreflabel="epub:default" role="elem-synopsis" xml:id="elemdef-default">
                                <varlistentry>
                                    <term>Element name</term>
                                    <listitem>
                                        <para>
                                            <markup>default</markup>
                                        </para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry>
                                    <term>Namespace</term>
                                    <listitem>
                                        <para>
                                            <uri>http://www.idpf.org/2007/ops</uri>
                                        </para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry>
                                    <term>Usage</term>
                                    <listitem>
                                        <para>Required last child of <markup><xref linkend="elemdef-switch"
                                            /></markup>.</para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry>
                                    <term>Attributes</term>
                                    <listitem>
                                        <variablelist role="elem-synopsis-attlist">
                                            <varlistentry xml:id="attrdef-default-id">
                                                <term>
                                                    <markup>id</markup>
                                                    <option>[optional]</option>
                                                </term>
                                                <listitem>
                                                    <xi:include href="./share/id-prose-para.xml"/>
                                                </listitem>
                                            </varlistentry>
                                        </variablelist>
                                    </listitem>
                                </varlistentry>
                                <varlistentry>
                                    <term>Content Model</term>
                                    <listitem>
                                        <para>An <xref linkend="refHTML5"/>-compliant markup fragment.</para>
                                    </listitem>
                                </varlistentry>
                            </variablelist>

                            <para>The <markup>default</markup> element acts as a fallback for the <markup><link
                                        linkend="elemdef-switch">switch</link></markup> and <literal role="rfc2119"
                                    >must</literal> include a representation of the content that is valid in XHTML Content
                                Documents.</para>

                            <para>The <markup>default</markup> element <literal role="rfc2119">must not</literal> include
                                content that would invalidate the document at the point where the <markup>switch</markup> has
                                been inserted: XHTML Content Documents <literal role="rfc2119">must</literal> be valid if all
                                the <markup>switch</markup> elements are replaced by their child <markup>default</markup>
                                elements.</para>

                        </section>
                    </section>

                    <section xml:id="sec-xhtml-switch-processing">
                        <title>Processing</title>

                        <para><olink targetdoc="spec" targetptr="gloss-epub-reading-system" type="epub-spec"/>s <literal
                                role="rfc2119">must</literal> support the <markup>switch</markup> element.</para>

                        <para>This specification does not require a specific rendering approach for <markup>switch</markup>
                            elements. A Reading System <literal role="rfc2119">may</literal> choose to apply CSS styling to
                            render each <markup>switch</markup>, for example, but <literal role="rfc2119">may</literal> use
                            any other approach as appropriate. All Reading Systems <literal role="rfc2119">must</literal>
                            present the content of only one <markup>case</markup> element or the <markup>default</markup>
                            element per <markup>switch</markup> for rendering, however.</para>

                        <para>The <markup>switch</markup> element <literal role="rfc2119">must</literal> be processed as
                            though all of its children but one have the HTML5 <markup
                                xlink:href="http://www.w3.org/TR/html5/Overview.html#the-hidden-attribute">hidden</markup>
                            attribute set (i.e., apply the same processing rules and requirements outlined for that attribute
                            to the content not to be rendered).</para>

                        <note>
                            <para>As the content that may be rendered depends on the capabilities of the User's Reading
                                System, linking can be guaranteed only to the <markup>switch</markup> element. Deep
                                referencing into the <markup>switch</markup> element is not recommended.</para>
                        </note>

                        <note>
                            <para>The occurrence of <markup>switch</markup> elements in <olink targetdoc="spec"
                                    targetptr="gloss-content-document-epub-xhtml" type="epub-spec"/> is indicated in the
                                    <olink targetdoc="spec" targetptr="gloss-package-document" type="epub-spec"/>
                                <olink targetdoc="spec" targetptr="gloss-manifest" type="epub-spec"/> through the <link
                                    xlink:href="http://www.idpf.org/epub/vocab/package/#switch"><property>switch</property>
                                    property</link>
                                <xref linkend="refEPUBPackageVocab"/>.</para>
                        </note>

                    </section>

                </section>

                <section xml:id="sec-xhtml-epub-trigger">
                    <title>The <markup>epub:trigger</markup> Element</title>
                    <para>The <markup>trigger</markup> element enables the creation of markup-defined user interfaces for
                        controlling multimedia objects, such as audio and video playback, in both scripted and non-scripted
                        contexts.</para>
                    <variablelist xreflabel="epub:trigger" role="elem-synopsis" xml:id="elemdef-epub-trigger">
                        <varlistentry>
                            <term>Element name</term>
                            <listitem>
                                <para>
                                    <markup>trigger</markup>
                                </para>
                            </listitem>
                        </varlistentry>
                        <varlistentry>
                            <term>Namespace</term>
                            <listitem>
                                <para>
                                    <uri>http://www.idpf.org/2007/ops</uri>
                                </para>
                            </listitem>
                        </varlistentry>
                        <varlistentry>
                            <term>Usage</term>
                            <listitem>
                                <para>As a child of <markup
                                        xlink:href="http://www.w3.org/TR/html5/single-page.html#the-head-element"
                                        >head</markup> and in <link
                                        xlink:href="http://www.w3.org/TR/html5/Overview.html#flow-content-0">Flow
                                        content</link>. Repeatable.</para>
                            </listitem>
                        </varlistentry>
                        <varlistentry>
                            <term>Attributes</term>
                            <listitem>
                                <variablelist role="elem-synopsis-attlist">
                                    <varlistentry xml:id="attrdef-trigger-id">
                                        <term>
                                            <markup>id</markup>
                                            <option>[optional]</option>
                                        </term>
                                        <listitem>
                                            <xi:include href="./share/id-prose-para.xml"/>
                                        </listitem>
                                    </varlistentry>
                                    <varlistentry xml:id="attrdef-trigger-action">
                                        <term>
                                            <markup>action</markup>
                                            <option>[required]</option>
                                        </term>
                                        <listitem>
                                            <para>The action to perform for this event.</para>
                                            <para>Allowed values: <code role="value">show</code> | <code role="value"
                                                    >hide</code> | <code role="value">play</code> | <code role="value"
                                                    >pause</code> | <code role="value">resume</code> | <code role="value"
                                                    >mute</code> | <code role="value">unmute</code>
                                            </para>
                                        </listitem>
                                    </varlistentry>
                                    <varlistentry xml:id="attrdef-trigger-ref">
                                        <term>
                                            <markup>ref</markup>
                                            <option>[required]</option>
                                        </term>
                                        <listitem>
                                            <para>An IDREF <xref linkend="refXML"/> that identifies the element that is the
                                                object of the action.</para>
                                        </listitem>
                                    </varlistentry>
                                    <varlistentry xml:id="attrdef-trigger-defaultAction">
                                        <term>
                                            <markup>ev:defaultAction</markup>
                                            <option>[optional]</option>
                                        </term>
                                        <listitem>
                                            <para>The applicable event for this trigger, as defined in <xref
                                                    linkend="refEVENTS"/>.</para>
                                        </listitem>
                                    </varlistentry>
                                    <varlistentry xml:id="attrdef-trigger-event">
                                        <term>
                                            <markup>ev:event</markup>
                                            <option>[required]</option>
                                        </term>
                                        <listitem>
                                            <para>The applicable event for this trigger, as defined in <xref
                                                    linkend="refEVENTS"/>.</para>
                                        </listitem>
                                    </varlistentry>
                                    <varlistentry xml:id="attrdef-trigger-observer">
                                        <term>
                                            <markup>ev:observer</markup>
                                            <option>[required]</option>
                                        </term>
                                        <listitem>
                                            <para>The source object for this trigger, as defined in <xref linkend="refEVENTS"
                                                />.</para>
                                        </listitem>
                                    </varlistentry>
                                    <varlistentry xml:id="attrdef-trigger-phase">
                                        <term>
                                            <markup>ev:phase</markup>
                                            <option>[optional]</option>
                                        </term>
                                        <listitem>
                                            <para>The applicable event for this trigger, as defined in <xref
                                                    linkend="refEVENTS"/>.</para>
                                        </listitem>
                                    </varlistentry>
                                    <varlistentry xml:id="attrdef-trigger-propagate">
                                        <term>
                                            <markup>ev:propagate</markup>
                                            <option>[optional]</option>
                                        </term>
                                        <listitem>
                                            <para>The applicable event for this trigger, as defined in <xref
                                                    linkend="refEVENTS"/>.</para>
                                        </listitem>
                                    </varlistentry>
                                </variablelist>
                            </listitem>
                        </varlistentry>
                        <varlistentry>
                            <term>Content Model</term>
                            <listitem>
                                <para>Empty.</para>
                            </listitem>
                        </varlistentry>
                    </variablelist>

                    <para>The <markup>trigger</markup> element associates an <markup>event</markup> from a specified source
                        object (<markup>observer</markup>) with a desired action to be performed with a specified target
                        object (<markup>ref</markup>).</para>

                    <para>The semantics of the defined <markup>action</markup> values are:</para>

                    <itemizedlist>
                        <listitem>
                            <para><code role="value">show</code> – set the element's DOM <code role="property"
                                    xlink:href="http://www.w3.org/TR/CSS21/visufx.html#propdef-visibility">visibility</code>
                                <xref linkend="refCSS21"/> property to visible.</para>
                        </listitem>
                        <listitem>
                            <para><code role="value">hide</code> – set the element's DOM <code role="property"
                                    xlink:href="http://www.w3.org/TR/CSS21/visufx.html#propdef-visibility">visibility</code>
                                <xref linkend="refCSS21"/> property to hidden.</para>
                        </listitem>
                        <listitem>
                            <para><code role="value">play</code> – play the associated resource from the beginning.</para>
                        </listitem>
                        <listitem>
                            <para><code role="value">pause</code> – pause playing.</para>
                        </listitem>
                        <listitem>
                            <para><code role="value">resume</code> – resume playing.</para>
                        </listitem>
                        <listitem>
                            <para><code role="value">mute</code> – mute sound.</para>
                        </listitem>
                        <listitem>
                            <para><code role="value">unmute</code> – unmute sound.</para>
                        </listitem>
                    </itemizedlist>

                    <para>Reading Systems that support the <xref linkend="refHTML5"/>
                        <markup>audio</markup> or <markup>video</markup> elements <literal role="rfc2119">must</literal>
                        support the <markup>epub:trigger</markup> element. The <code role="value">play</code>, <code
                            role="value">pause</code>, <code role="value">resume</code>, <code role="value">mute</code> and
                            <code role="value">unmute</code> actions can be applied to <markup>audio</markup> and
                            <markup>video</markup> elements only. The <code role="value">show</code> and <code role="value"
                            >hide</code> actions can be applied to any descendant of the <markup>body</markup>
                        element.</para>

                    <informalexample>
                        <para>Sample markup of a video player that uses <markup>trigger</markup> elements to control playback
                            and muting. The <markup>role</markup>, <markup>tabindex</markup> and
                                <markup>aria-controls</markup> attributes ensure the <markup>span</markup> elements are
                            accessible as buttons to keyboard users.</para>

                        <programlisting><xi:include href="examples/contentdocs/trigger.xml" parse="text"/></programlisting>
                    </informalexample>
                </section>

                <section xml:id="sec-xhtml-alternate-style-tags">
                    <title>Alternate Style Tags</title>
                    <para>In accordance with <xref linkend="refAlternateStyleTags"/> , the <markup>link</markup> element
                            <markup>class</markup> attribute <literal role="rfc2119">may</literal> include any of the
                        following values: <code role="value">horizontal</code>, <code role="value">vertical</code>, <code
                            role="value">day</code> and <code role="value">night</code>. These values inherit the semantics
                        defined by that specification for their use.</para>
                    <para>Reading Systems <literal role="rfc2119">should</literal> select and utilize such tagged style sets
                        as appropriate, and as described in that specification.</para>
                </section>

                <section xml:id="sec-xhtml-custom-attributes">
                    <title>Custom Attributes</title>

                    <para><olink targetdoc="spec" targetptr="gloss-epub-reading-system" type="epub-spec"/>s <literal
                            role="rfc2119">may</literal> introduce functionality not defined in this specification to enhance
                        the rendering of <olink targetdoc="spec" targetptr="gloss-epub-publication" type="epub-spec"/>s. To
                        facilitate this experimentation, vendors <literal role="rfc2119">may</literal> define custom
                        attributes for use in <olink targetdoc="spec" targetptr="gloss-content-document-epub-xhtml"
                            type="epub-spec"/>s.</para>

                    <para>Custom attributes <literal role="rfc2119">may</literal> be included on any element in an XHTML
                        Content Document provided such attributes are from a foreign namespace, which is defined as a
                        namespace <xref linkend="refXMLNamespaces"/> that does not map to either of the following
                        URIs:</para>

                    <itemizedlist>
                        <listitem>
                            <para><uri>http://www.w3.org/1999/xhtml</uri></para>
                        </listitem>
                        <listitem>
                            <para><uri>http://www.idpf.org/2007/ops</uri></para>
                        </listitem>
                    </itemizedlist>

                    <para>Custom attributes, and the behaviors associated with them, <literal role="rfc2119">must
                            not</literal> alter the integrity of an EPUB Publication. The content <literal role="rfc2119"
                            >must</literal> remain consumable by a User without any information loss or other significant
                        deterioration, regardless of the Reading System it is rendered on.</para>

                    <note>
                        <para>To facilitate interoperability of custom attributes across Reading Systems, vendors are
                            strongly encouraged to document any extensions they implement at <uri
                                xlink:href="http://www.idpf.org/epub/extensions/attributes"
                                >http://www.idpf.org/epub/extensions/attributes</uri>.</para>
                    </note>
                </section>

                <section xml:id="sec-xhtml-aria-describedat">
                    <title>The <markup>aria-describedat</markup> Attribute</title>

                    <para>The <markup>aria-describedat</markup> attribute from <xref linkend="refARIA11"/>
                        <literal role="rfc2119">may</literal> be specified on all elements in <olink targetdoc="spec"
                            targetptr="gloss-content-document-epub-xhtml" type="epub-spec"/>s, using the syntax and semantics
                        defined in that specification. This attribute <literal role="rfc2119">may</literal> be used to
                        reference descriptions outside the <olink targetdoc="spec" targetptr="gloss-container"
                            type="epub-spec"/> (see <xref linkend="sec-resource-locations"/>).</para>

                    <para>Reading System support for this attribute is <literal role="rfc2119">optional</literal>.</para>

                    <note>
                        <para>EPUB 3 does not support the full ARIA 1.1 specification at this time.</para>
                    </note>
                </section>

            </section>

            <section xml:id="sec-xhtml-deviations">
                <title>HTML5 Deviations and Constraints</title>

                <para>This section defines deviations from, and constraints on, the underlying <xref linkend="refHTML5"/>
                    document model applicable to EPUB 3 <olink targetdoc="spec" targetptr="gloss-content-document-epub-xhtml"
                        type="epub-spec"/>s.</para>

                <section xml:id="sec-xhtml-mathml">
                    <title>Embedded MathML</title>

                    <section xml:id="sec-xhtml-mathml-intro" conformance="informative">
                        <title>Introduction</title>

                        <para>XHTML Content Documents support embedded <xref linkend="refMathML"/> but limit its usage to a
                            restricted subset of the full MathML markup language.</para>

                        <para>This subset is designed to ease the implementation burden on Reading Systems and to promote
                            accessibility, while retaining compatibility with <xref linkend="refHTML5"/> User Agents. </para>

                        <note>
                            <para>The <link xlink:href="http://www.idpf.org/epub/vocab/package/#mathml"
                                        ><property>mathml</property> property</link>
                                <xref linkend="refEPUBPackageVocab"/> of the <olink targetdoc="spec"
                                    targetptr="gloss-manifest" type="epub-spec"/>
                                <markup>item</markup> element indicates that an XHTML Content Document contains embedded
                                MathML.</para>
                        </note>

                    </section>

                    <section xml:id="sec-xhtml-mathml-conf-content" xreflabel="Embedded MathML — Content Conformance">
                        <title>Content Conformance</title>

                        <para>Any occurrence of MathML markup in XHTML Content Documents <literal role="rfc2119"
                                >must</literal> conform to the constraints expressed in the MathML specification <xref
                                linkend="refMathML"/>, with the following additional restrictions:</para>

                        <variablelist role="conformance-list">
                            <varlistentry xml:id="math-pres">
                                <term>Presentation MathML</term>
                                <listitem>
                                    <para xml:id="confreq-mathml-pres">The <markup>m:math</markup> element <literal
                                            role="rfc2119">must</literal> contain only <link
                                            xlink:href="http://www.w3.org/TR/MathML/chapter3.html">Presentation
                                        MathML</link>, with the exception of the <markup>m:annotation-xml</markup> element as
                                        defined below.</para>
                                </listitem>
                            </varlistentry>
                            <varlistentry xml:id="math-cont">
                                <term>Content MathML</term>
                                <listitem>
                                    <para xml:id="confreq-mathml-annot-cont"><link
                                            xlink:href="http://www.w3.org/TR/MathML/chapter4.html">Content MathML</link>
                                        <literal role="rfc2119">may</literal> be included within MathML markup in XHTML
                                        Content Documents, and, when present, <literal role="rfc2119">must</literal> occur
                                        within an <markup>m:annotation-xml</markup> child element of an
                                            <markup>m:semantics</markup> element.</para>
                                    <para xml:id="confreq-mathml-annot-cont-attrs">When Content MathML is included as per the
                                        previous condition, the given <markup>m:annotation-xml</markup> element's
                                            <markup>encoding</markup> attribute <literal role="rfc2119">must</literal> be set
                                        to either of the functionally-equivalent values <code role="value"
                                            >MathML-Content</code> or <code role="value"
                                            >application/mathml-content+xml</code>, and its <markup>name</markup> attribute
                                            <literal role="rfc2119">must</literal> be set to <code role="value"
                                            >contentequiv</code>. </para>
                                </listitem>
                            </varlistentry>
                            <varlistentry xml:id="math-deprecated">
                                <term>Deprecated MathML</term>
                                <listitem>
                                    <para xml:id="confreq-mathml-deprecated">Elements and attributes marked as deprecated in
                                            <xref linkend="refMathML"/>
                                        <literal role="rfc2119">must not</literal> be included within MathML markup in XHTML
                                        Content Documents.</para>
                                </listitem>
                            </varlistentry>
                            <varlistentry xml:id="math-xhtml">
                                <term>XHTML Content Document fragments</term>
                                <listitem>
                                    <para xml:id="confreq-mathml-annot-xht">XHTML Content Document fragments <literal
                                            role="rfc2119">may</literal> be included within MathML markup in XHTML Content
                                        Documents, and, when present, <literal role="rfc2119">must</literal> occur within an
                                            <markup>m:annotation-xml</markup> child element of an
                                            <markup>m:semantics</markup> element.</para>
                                    <para xml:id="confreq-mathml-annot-xht-attrs">When an XHTML Content Document fragment is
                                        included as per the above paragraph, the given <markup>m:annotation-xml</markup>
                                        element's <markup>encoding</markup> attribute <literal role="rfc2119">must</literal>
                                        be set to <code role="value">application/xhtml+xml</code> and its
                                            <markup>name</markup> attribute <literal role="rfc2119">must</literal> be set to
                                            <code role="value">alternate-representation</code>.</para>
                                    <para xml:id="confreq-mathml-annot-xht-math">Any included XHTML Content Document
                                        fragments <literal role="rfc2119">must not</literal> themselves contain MathML
                                        markup.</para>
                                    <para xml:id="confreq-mathml-annot-xht-model">Any included XHTML Content Document
                                        fragments <literal role="rfc2119">must</literal> conform to the content model in
                                        which the ancestor <markup>m:math</markup> element occurs, such that if the
                                            <markup>m:math</markup> element is replaced by the given XHTML Content Document
                                        fragment the document remains valid.</para>
                                </listitem>
                            </varlistentry>
                            <varlistentry xml:id="math-alt">
                                <term>Alternative Content</term>
                                <listitem>
                                    <para xml:id="confreq-mathml-alt">Alternative content <literal role="rfc2119"
                                            >should</literal> be included, and, when present, <literal role="rfc2119"
                                            >must</literal> be represented as defined in <xref linkend="sec-xhtml-mathml-alt"
                                        />.</para>
                                </listitem>
                            </varlistentry>
                        </variablelist>

                    </section>


                    <section xml:id="sec-xhtml-mathml-rs-conf" xreflabel="Embedded MathML — Reading System Conformance">
                        <title>Reading System Conformance</title>

                        <para>A conformant <olink targetdoc="spec" targetptr="gloss-epub-reading-system" type="epub-spec"/>
                            <literal role="rfc2119">must</literal> meet all of the following criteria for processing MathML
                            embedded in XHTML Content Documents:</para>

                        <itemizedlist role="conformance-list" xml:id="mathml-rs-confreqs">
                            <listitem>
                                <para xml:id="confreq-mathml-rs-behavior">It <literal role="rfc2119">must</literal> support
                                    processing of <link xlink:href="http://www.w3.org/TR/MathML/chapter3.html">Presentation
                                        MathML</link>, and <literal role="rfc2119">may</literal> support processing of <link
                                        xlink:href="http://www.w3.org/TR/MathML/chapter4.html">Content MathML</link>, using
                                    semantics defined by the MathML 3.0 specification <xref linkend="refMathML"/>.</para>
                            </listitem>
                            <listitem>
                                <para xml:id="confreq-mathml-rs-render">If it has a <olink targetdoc="spec"
                                        targetptr="gloss-viewport" type="epub-spec"/>, it <literal role="rfc2119"
                                        >must</literal> support visual rendering of Presentation MathML.</para>
                            </listitem>
                            <listitem>
                                <para xml:id="confreq-mathml-rs-alt-text">When producing <link linkend="sec-xhtml-mathml-alt"
                                        >alternative textual content</link> for MathML markup, it <literal role="rfc2119"
                                        >should</literal> be able to dynamically generate such content from the given <link
                                        linkend="confreq-mathml-pres">Presentation MathML</link>, and if not, <literal
                                        role="rfc2119">must</literal> give preference to <link linkend="math-xhtml">XHTML
                                        Content Document fragments</link> followed by the <markup>alttext</markup> attribute
                                    on the <markup>m:math</markup> element.</para>
                            </listitem>
                            <listitem>
                                <para xml:id="confreq-rs-mathml-prop">It <literal role="rfc2119">must</literal> regard the
                                        <link xlink:href="http://www.idpf.org/epub/vocab/package/#mathml"
                                            ><property>mathml</property> property</link>
                                    <xref linkend="refEPUBPackageVocab"/> of the <olink targetdoc="spec"
                                        targetptr="gloss-package-document" type="epub-spec"/>
                                    <olink targetdoc="spec" targetptr="gloss-manifest" type="epub-spec"/>
                                    <markup>item</markup> element as the authoritative definition of whether an XHTML Content
                                    Document includes embedded MathML.</para>
                            </listitem>

                        </itemizedlist>
                    </section>

                    <section xml:id="sec-xhtml-mathml-alt">
                        <title>Alternative Content</title>

                        <para>Reading Systems <literal role="rfc2119">should</literal> be able to generate any necessary
                            alternative textual rendering dynamically using the given <link linkend="confreq-mathml-pres"
                                >Presentation MathML</link> markup (e.g., as output to <olink targetdoc="spec"
                                targetptr="gloss-tts" type="epub-spec"/> engines). To support Reading Systems that are not so
                            capable, alternative textual content <literal role="rfc2119">should</literal> be included with
                            each occurrence of the <markup>m:math</markup> element in XHTML Content Documents.</para>

                        <para>The <markup>alttext</markup> attribute on the <markup>m:math</markup> element <literal
                                role="rfc2119">should</literal> be used for this purpose primarily when shorter alternative
                            text runs are sufficient. When more extensive alternative text is required, <link
                                linkend="math-xhtml">XHTML Content Document fragments</link>
                            <literal role="rfc2119">should</literal> be used. (Note that Reading Systems query these two
                            alternative text locations using a defined <link linkend="confreq-mathml-rs-alt-text">preference
                                order</link>.) </para>

                        <para>For Reading System forward compatibility purposes, fallback images <literal role="rfc2119"
                                >may</literal> be provided using the <markup>altimg</markup> attribute on the
                                <markup>m:math</markup> element. It is <literal role="rfc2119">recommended</literal> that the
                            dimension and alignment attributes (<markup>altimg-width</markup>, <markup>altimg-height</markup>
                            and <markup>altimg-valign</markup>) be used in conjunction with the <markup>altimg</markup>
                            attribute.</para>

                        <note xml:id="note-mathml-altimg-refprops-pkg">
                            <!-- note similar statement for xhtml, svg and css and mathml alternative content -->
                            <para>All referenced <olink targetdoc="spec"
                                    targetptr="gloss-publication-resource-cmt-or-foreign" type="epub-spec"/>s must conform to
                                the constraints for Publication Resources defined in <xref linkend="sec-epub-content-conf"
                                />.</para>
                        </note>
                    </section>

                </section>

                <section xml:id="sec-xhtml-svg">
                    <title>Embedded SVG</title>
                    <!-- http://www.w3.org/TR/html5/the-map-element.html#svg-0 -->

                    <para><olink targetdoc="spec" targetptr="gloss-content-document-epub-xhtml" type="epub-spec"/>s support
                        the embedding of <link xlink:href="http://www.w3.org/TR/SVG/intro.html#TermSVGDocumentFragment">SVG
                            1.1 document fragments</link>
                        <emphasis>by reference</emphasis> (embedding via reference, for example, from an <markup>img</markup>
                        or <markup>object</markup> element) and <emphasis>by inclusion</emphasis> (embedding via direct
                        inclusion of the <markup>svg:svg</markup> element in the XHTML Content Document) <xref
                            linkend="refSVG"/>.</para>

                    <para>The content conformance constraints for SVG embedded in XHTML Content Documents are the same as
                        defined for <olink targetdoc="spec" targetptr="gloss-content-document-epub-svg" type="epub-spec"/>s
                        in <xref linkend="sec-svg-restrictions"/>.</para>

                    <para>Reading Systems <literal role="rfc2119">must</literal> process SVG embedded in XHTML Content
                        Documents as defined in <xref linkend="sec-svg-rs-conf"/>.</para>

                    <note>
                        <para>The <link xlink:href="http://www.idpf.org/epub/vocab/package/#svg"><property>svg</property>
                                property</link>
                            <xref linkend="refEPUBPackageVocab"/> of the <olink targetdoc="spec" targetptr="gloss-manifest"
                                type="epub-spec"/>
                            <markup>item</markup> element indicates that an XHTML Content Document contains embedded
                            SVG.</para>
                    </note>

                    <!--
                    <note>
                        <para>This section defines conformance requirements for SVG embedded in
                            XHTML Content Documents. Refer to <xref linkend="sec-svg"/> for
                            conformance requirements for SVG as an EPUB Content Document.</para>
                    </note>
                    -->

                    <section xml:id="sec-xhtml-svg-css">
                        <title>Embedded SVG and CSS</title>

                        <para xml:id="confreq-svg-rs-css-embed-ref">For the purposes of styling SVG embedded in XHTML Content
                            Documents <emphasis>by reference</emphasis>, Reading Systems <literal role="rfc2119">must
                                not</literal> apply CSS style rules of the containing document to the referenced SVG
                            document.</para>

                        <para xml:id="confreq-svg-rs-css-embed-inc">For the purposes of styling SVG embedded in XHTML Content
                            Documents <emphasis>by inclusion</emphasis>, Reading Systems <literal role="rfc2119"
                                >must</literal> apply applicable CSS rules of the containing document to the included SVG
                            elements.</para>

                        <note>
                            <para>SVG included <emphasis>by reference</emphasis> is processed as a separate document, and may
                                include its own CSS style rules just like an <olink targetdoc="spec"
                                    targetptr="gloss-content-document-epub-svg" type="epub-spec"/> would. Note that this is
                                consistent with situations where an <xref linkend="refHTML5"/>
                                <markup xlink:href="http://www.w3.org/TR/html5/Overview.html#the-object-element"
                                    >object</markup> element references an external <xref linkend="refHTML5"/>
                                element.</para>
                        </note>

                    </section>

                </section>

                <section xml:id="sec-xhtml-deviations-unicode">
                    <title>Unicode Restrictions</title>

                    <para>This section lists restrictions on the Unicode character repertoire.</para>

                    <variablelist>
                        <varlistentry>
                            <term>Private Use Characters and Embedded Fonts</term>
                            <listitem>
                                <para xml:id="confreq-xhtml-unicode-pua">Any included characters that map to a code point
                                    within one of the Private Use Area (PUA) ranges as defined in <xref linkend="refUnicode5"/>
                                    <literal role="rfc2119">must</literal> occur within a string that is styled or attributed
                                    in a manner that includes a reference to an <link linkend="sec-css-fonts">embedded
                                        font</link> that contains an appropriate glyph for that code point.</para>
                            </listitem>
                        </varlistentry>
                    </variablelist>
                </section>

                <section xml:id="sec-xhtml-deviations-discouraged">
                    <title>Discouraged Constructs</title>
                    <variablelist role="conformance-list">
                        <varlistentry>
                            <term>The <markup>rp</markup> Element</term>
                            <listitem>
                                <para xml:id="confreq-xhtml-vocab-rp">The <xref linkend="refHTML5"/>
                                    <markup xlink:href="http://www.w3.org/TR/html5/Overview.html#the-rp-element">rp</markup>
                                    element is intended to provide a fallback — an optional parenthesis display around
                                        <markup>ruby</markup> markup — for older version Reading Systems that do not
                                    recognize ruby markup. As EPUB 3 Reading Systems are ruby-aware, and can provide
                                    fallbacks, the use of <markup>rp</markup> elements in Content Documents is
                                    discouraged.</para>
                            </listitem>
                        </varlistentry>
                        <varlistentry>
                            <term>The <markup>embed</markup> Element</term>
                            <listitem>
                                <para xml:id="confreq-xhtml-vocab-embed">Since the <xref linkend="refHTML5"/>
                                    <markup xlink:href="http://www.w3.org/TR/html5/Overview.html#the-embed-element"
                                        >embed</markup> element does not provide intrinsic facilities to provide <link
                                        linkend="confreq-rs-scripted-flbk">fallbacks</link> for Reading Systems that do not
                                    support scripting, its use is discouraged when the resource referenced has scripting
                                    components. Authors <literal role="rfc2119">should</literal> use the
                                        <markup>object</markup> element instead.</para>
                            </listitem>
                        </varlistentry>
                    </variablelist>
                </section>

                <section xml:id="sec-xhtml-deviations-special">
                    <title>Special Considerations</title>

                    <section xml:id="sec-xhtml-deviations-special-body">
                        <title>The <markup>body</markup> element</title>

                        <para>It is assumed, in formatting, that the default rendering for the <xref linkend="refHTML5"/>
                            <markup xlink:href="http://www.w3.org/TR/html5/Overview.html#the-body-element">body</markup>
                            element is consistent with the <xref linkend="refCSS21"/>
                            <property>page-break-before</property> property having been set to <code role="value"
                                >always</code>, but this default <literal role="rfc2119">may</literal> be overridden by an
                            appropriate style sheet declaration.</para>
                    </section>
                </section>

            </section>

        </section>

        <section xml:id="sec-svg">
            <title>SVG Content Documents</title>
            <section xml:id="sec-svg-intro" conformance="informative">
                <title>Introduction</title>

                <para>The Scalable Vector Graphics (SVG) 1.1 (Second Edition) specification <xref linkend="refSVG"/> defines
                    a format for representing final-form vector graphics and text.</para>

                <para>Although an EPUB Publication typically uses <link linkend="sec-xhtml">XHTML Content Documents</link> as
                    the <olink targetdoc="spec" targetptr="gloss-content-document-top-level" type="epub-spec"
                        >top-level</olink> document type, the use of <olink targetdoc="spec"
                        targetptr="gloss-content-document-epub-svg" type="epub-spec"/>s is also permitted. SVGs are typically
                    only used in certain special circumstances, such as when final-form page images are the only suitable
                    representation of the content (as may be the case, for example, in the context of manga or comic books). </para>

                <para>This section defines a profile for <xref linkend="refSVG"/> documents. An instance of an XML document
                    that conforms to this profile is a <olink targetdoc="spec" targetptr="gloss-core-media-type"
                        type="epub-spec"/> and is referred to in this specification as an <olink targetdoc="spec"
                        targetptr="gloss-content-document-epub-svg" type="epub-spec"/>.</para>

                <note>
                    <para>This section defines conformance requirements for <olink targetdoc="spec"
                            targetptr="gloss-content-document-epub-svg" type="epub-spec"/>s. Refer to <xref
                            linkend="sec-xhtml-svg"/> for conformance requirements for SVG embedded in XHTML Content
                        Documents.</para>
                </note>

            </section>
            <section xml:id="sec-svg-content-conf" xreflabel="SVG Content Documents — Content Conformance">
                <title>Content Conformance</title>
                <variablelist role="conformance-list">
                    <para>An <olink targetdoc="spec" targetptr="gloss-content-document-epub-svg" type="epub-spec"/>
                        <literal role="rfc2119">must</literal> meet all of the following criteria:</para>
                    <varlistentry xml:id="confreq-svg-docprops">
                        <term>Document Properties</term>
                        <listitem role="conformance-item">
                            <para xml:id="confreq-cd-svg-xml">
                                <xi:include href="./share/xml-defref.xml"/>
                            </para>
                            <para xml:id="confreq-cd-svg-docprops-schema">It <literal role="rfc2119">must</literal> be an
                                    <link xlink:href="http://www.w3.org/TR/SVG/intro.html#TermSVGDocumentFragment">SVG 1.1
                                    document fragment</link> valid to the constructs defined in that specification, and
                                conform to all content conformance constraints expressed in <xref
                                    linkend="sec-svg-restrictions"/>.</para>
                            <para xml:id="confreq-cd-svg-accessibility">It <literal role="rfc2119">should</literal> adhere to
                                the accessibility guidelines given in <xref linkend="refSVGAccess"/>. </para>
                        </listitem>
                    </varlistentry>
                    <varlistentry xml:id="confreq-svg-fileprops">
                        <term>File Properties</term>
                        <listitem>
                            <para xml:id="confreq-svg-fileprops-name">The SVG Content Document filename <literal
                                    role="rfc2119">should</literal> use the file extension <filename>.svg</filename>.</para>
                        </listitem>
                    </varlistentry>
                </variablelist>
                <note xml:id="note-cd-svg-refprops-pkg">
                    <!-- note similar statement for xhtml, svg and css-->
                    <para>All <olink targetdoc="spec" targetptr="gloss-publication-resource-cmt-or-foreign" type="epub-spec"
                        />s referenced from an SVG Content Document must conform to the constraints for Publication Resources
                        defined in <xref linkend="sec-epub-content-conf"/></para>
                </note>
            </section>
            <section xml:id="sec-svg-restrictions">
                <title>Restrictions on SVG 1.1</title>

                <para>This specification restricts the content model of <olink targetdoc="spec"
                        targetptr="gloss-content-document-epub-svg" type="epub-spec"/>s and <link linkend="sec-xhtml-svg">SVG
                        embedded in XHTML Content Documents</link> as follows:</para>

                <itemizedlist role="conformance-list" xml:id="sec-svg-restrictions-list">
                    <listitem>
                        <para xml:id="confreq-svg-anim">The <xref linkend="refSVG"/>
                            <link xlink:href="http://www.w3.org/TR/SVG/animate.html#AnimationElements">Animation
                                Elements</link> and <link xlink:href="http://www.w3.org/TR/SVG/script.html#AnimationEvents"
                                >Animation event attributes</link>
                            <literal role="rfc2119">must not</literal> occur. </para>
                    </listitem>
                    <listitem>
                        <para xml:id="confreq-svg-foreignObject">The <xref linkend="refSVG"/>
                            <markup xlink:href="http://www.w3.org/TR/SVG11/extend.html#ForeignObjectElement"
                                >svg:foreignObject</markup> element <literal role="rfc2119">must</literal> contain either
                                <xref linkend="refHTML5"/>
                            <link xlink:href="http://www.w3.org/TR/html5/single-page.html#flow-content">flow content</link>
                            or exactly one <xref linkend="refHTML5"/>
                            <link xlink:href=""><markup>body</markup> element</link>. This content <literal role="rfc2119"
                                >must</literal> represent a valid document fragment of the XHTML Content Document model
                            defined in <xref linkend="sec-xhtml-conf-content"/>. The <markup>svg:foreignObject</markup>
                            element's <markup>requiredExtensions</markup> attribute, if given, <literal role="rfc2119"
                                >must</literal> be set to <uri>http://www.idpf.org/2007/ops</uri>.</para>
                    </listitem>
                    <listitem>
                        <para xml:id="confreq-svg-title">The <xref linkend="refSVG"/>
                            <markup xlink:href="http://www.w3.org/TR/SVG11/struct.html#TitleElement">svg:title</markup>
                            element <literal role="rfc2119">must</literal> contain only valid XHTML Content Document Phrasing
                            content.</para>
                    </listitem>
                    <!-- <listitem>
                        <para xml:id="confreq-svg-dim">It <literal role="rfc2119">should</literal> include the <markup><link
                                    xlink:href="http://www.w3.org/TR/SVG/struct.html#SVGElementWidthAttribute"
                                    >width</link></code> and <markup><link
                                    xlink:href="http://www.w3.org/TR/SVG/struct.html#SVGElementHeightAttribute"
                                    >height</link></code> attributes on the <markup>svg:svg</markup>
                            element.</para>
                    </listitem> -->
                </itemizedlist>

            </section>
            <section xml:id="sec-svg-rs-conf" xreflabel="SVG Content Documents — Reading System Conformance">
                <title>Reading System Conformance</title>

                <para>A conformant <olink targetdoc="spec" targetptr="gloss-epub-reading-system" type="epub-spec"/>
                    <literal role="rfc2119">must</literal> meet all of the following criteria for processing SVG Content
                    Documents and SVG <link linkend="sec-xhtml-svg">embedded in XHTML Content Documents</link>:</para>

                <itemizedlist role="conformance-list" xml:id="svg-rs-confreqs">
                    <!--
                    <listitem>
                        <para xml:id="confreq-svg-rs-behavior">It <literal role="rfc2119">must</literal> support processing of SVG
                            using semantics defined by the SVG 1.1 specification <xref
                                linkend="refSVG"/>.</para>
                    </listitem>
                    -->
                    <listitem>
                        <para xml:id="confreq-svg-rs-behavior">It <literal role="rfc2119">must</literal> support the language
                            features of SVG that correspond to the feature string
                                <uri>http://www.w3.org/TR/SVG11/feature#SVG-dynamic</uri> minus the
                                <uri>http://www.w3.org/TR/SVG11/feature#Animation</uri> and
                                <uri>http://www.w3.org/TR/SVG11/feature#AnimationEventsAttribute</uri> features (see <link
                                xlink:href="http://www.w3.org/TR/SVG/feature.html">Feature strings</link>) <xref
                                linkend="refSVG"/>.</para>
                    </listitem>
                    <listitem>
                        <para xml:id="confreq-svg-rs-scrpt">It <literal role="rfc2119">must</literal> meet the Reading System
                            conformance criteria defined in <xref linkend="sec-scripted-content-rs-reqs"/>.</para>
                    </listitem>
                    <listitem>
                        <para xml:id="confreq-svg-rs-css">If it has an <olink targetdoc="spec" targetptr="gloss-viewport-svg"
                                type="epub-spec"/>, it <literal role="rfc2119">must</literal> support the visual rendering of
                            SVG using CSS as defined in <link xlink:href="http://www.w3.org/TR/SVG11/styling.html">Section
                                6</link> of <xref linkend="refSVG"/>, and it <literal role="rfc2119">should</literal> support
                            all properties defined in <link xlink:href="http://www.w3.org/TR/SVG11/propidx.html">Appendix
                                N</link> of that specification. In the case of embedded SVG, it <literal role="rfc2119"
                                >must</literal> also conform to the constraints defined in <xref linkend="sec-xhtml-svg-css"
                            />.</para>
                    </listitem>
                    <listitem>
                        <para xml:id="confreq-svg-rs-text">It <literal role="rfc2119">should</literal> support User selection
                            and searching of text within SVG elements.</para>
                    </listitem>
                    <!-- not needed as we changed confreq-svg-rs-behavior
                    <listitem>
                        <para xml:id="confreq-svg-rs-links">It <literal role="rfc2119">must</literal> recognize SVG links (i.e., the
                                <markup>svg:a</markup> element), and if it supports exposing links to
                            Users for activation, then these links <literal role="rfc2119">must</literal> be exposed. </para>
                    </listitem>
                    -->
                    <listitem>
                        <para xml:id="confreq-svg-rs-reqdExt">It <literal role="rfc2119">must</literal> recognize the value
                                <uri>http://www.idpf.org/2007/ops</uri> of the <markup>requiredExtensions</markup> attribute
                            when appearing on the <markup>svg:switch</markup> and <markup>svg:foreignObject</markup> elements
                            as representing the occurrence of XHTML Content Document fragments.</para>
                    </listitem>
                    <listitem>
                        <para xml:id="confreq-rs-svg-prop">It <literal role="rfc2119">must</literal> regard the <link
                                xlink:href="http://www.idpf.org/epub/vocab/package/#svg"><property>svg</property>
                                property</link>
                            <xref linkend="refEPUBPackageVocab"/> of the <olink targetdoc="spec"
                                targetptr="gloss-package-document" type="epub-spec"/>
                            <olink targetdoc="spec" targetptr="gloss-manifest" type="epub-spec"/>
                            <markup>item</markup> element as the authoritative definition of whether an EPUB XHTML Content
                            Document includes embedded SVG.</para>
                    </listitem>
                </itemizedlist>
            </section>
            <section xml:id="sec-svg-semantic-inflection" xreflabel="SVG Semantic Inflection">
                <title>Semantic Inflection</title>

                <para>The synatx and semantics defined in <xref linkend="sec-xhtml-semantic-inflection"/> are inherited for
                    use of the <link linkend="attrdef-epub-type"><markup>epub:type</markup></link> and <link
                        linkend="sec-contentdocs-prefix-attr"><markup>epub:prefix</markup></link> attributes in <olink
                        targetdoc="spec" targetptr="gloss-content-document-epub-svg" type="epub-spec"/>s.</para>

                <para>The use of the <markup>epub:prefix</markup> attribute is valid on the root <markup>svg</markup> element
                    in SVG Content Documents. Prefixes used in <link linkend="sec-xhtml-svg">embedded SVG</link> must be
                    declared on the <xref linkend="refHTML5"/> root <markup>html</markup> element, as defined in <xref
                        linkend="sec-xhtml-semantic-inflection"/>.</para>
            </section>
        </section>

        <section xml:id="sec-scripted-content">
            <title>Scripting</title>

            <para><olink targetdoc="spec" targetptr="gloss-content-document-epub" type="epub-spec"/>s <literal role="rfc2119"
                    >may</literal> contain scripting using the facilities defined for this in the respective underlying
                specifications (<xref linkend="refHTML5"/> and <xref linkend="refSVG"/>). When an EPUB Content Document
                contains scripting, it is referred to in this specification as a <olink targetdoc="spec"
                    targetptr="gloss-content-document-epub-scripted" type="epub-spec"/>. This label also applies to <olink
                    targetdoc="spec" targetptr="gloss-content-document-epub-xhtml" type="epub-spec"/>s when they contain
                instances of <link xlink:href="http://www.w3.org/TR/html5/Overview.html#forms">HTML5 forms</link>.</para>

            <section xml:id="sec-scripted-context">
                <title>Scripting Contexts</title>

                <para xml:id="sec-scripted-content-models">This specification defines two contexts in which scripts <literal
                        role="rfc2119">may</literal> appear:</para>

                <variablelist>
                    <varlistentry xml:id="sec-scripted-content-type-spine-level" xreflabel="spine-level">
                        <term>spine-level</term>
                        <listitem>
                            <para>An instance of the <xref linkend="refHTML5"/>
                                <markup xlink:href="http://www.w3.org/TR/html5/Overview.html#the-script-element"
                                    >script</markup> element included in a <olink targetdoc="spec"
                                    targetptr="gloss-content-document-top-level" type="epub-spec"/>.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry xml:id="sec-scripted-content-type-container-constrained" xreflabel="container-constrained">
                        <term>container-constrained</term>
                        <listitem>
                            <para>An instance of the <xref linkend="refHTML5"/>
                                <markup>script</markup> element included in an <olink targetdoc="spec"
                                    targetptr="gloss-content-document-epub" type="epub-spec"/> that is embedded in a parent
                                Content Document using one of the <xref linkend="refHTML5"/>
                                <markup xlink:href="http://www.w3.org/TR/html5/Overview.html#the-object-element"
                                    >object</markup>, <markup
                                    xlink:href="http://www.w3.org/TR/html5/Overview.html#the-iframe-element">iframe</markup>
                                or <markup xlink:href="http://www.w3.org/TR/html5/Overview.html#the-embed-element"
                                    >embed</markup> elements.</para>
                        </listitem>
                    </varlistentry>
                </variablelist>

                <para>In both of the above-defined contexts, whether the JavaScript code is embedded directly in the
                        <markup>script</markup> element or referenced via its <markup>src</markup> attribute makes no
                    difference to the executing context.</para>

                <para>Which context a script is used in determines the rights and restrictions that a Reading System may
                    place on it. Refer to <link linkend="sec-scripted-content-content-reqs">Content Conformance</link> and
                        <link linkend="sec-scripted-content-rs-reqs">Reading System Conformance</link> for some specific
                    requirements that must be adhered to (not all Reading Systems may provide the same scripting
                    functionality).</para>

                <bridgehead>Example</bridgehead>

                <para>Consider the following example Package Document:</para>

                <informalexample>
                    <synopsis><xi:include href="examples/contentdocs/scriptcontext-01.xml" parse="text"/></synopsis>
                </informalexample>

                <para>and the following file <filename>scripted01.xhtml</filename>:</para>

                <informalexample>
                    <synopsis><xi:include href="examples/contentdocs/scriptcontext-02.xml" parse="text"/></synopsis>
                </informalexample>

                <para>and the following file <filename>scripted02.xhtml</filename>:</para>

                <informalexample>
                    <synopsis><xi:include href="examples/contentdocs/scriptcontext-03.xml" parse="text"/></synopsis>
                </informalexample>

                <para>From these examples, it is true that:</para>

                <itemizedlist>
                    <listitem>
                        <para>the code in the <markup>script</markup> element in the <markup>head</markup> in
                                <filename>scripted01.xhtml</filename> is a spine-level script because the document is
                            referenced from the spine;</para>
                    </listitem>
                    <listitem>
                        <para>the code in the <markup>script</markup> element in <filename>scripted02.xhtml</filename> is a
                            container-constrained script because the HTML file it occurs in is included in
                                <filename>scripted01.xhtml</filename> via the <markup>iframe</markup> element.</para>
                    </listitem>
                </itemizedlist>

            </section>

            <section xml:id="sec-scripted-content-content-reqs" xreflabel="Scripted Content Documents — Content Conformance">
                <title>Content Conformance</title>

                <variablelist role="conformance-list">
                    <varlistentry>
                        <term>Container-constrained scripts</term>
                        <listitem>
                            <para xml:id="confreq-cd-scripted-container">A container-constrained script <literal
                                    role="rfc2119">must not</literal> contain instructions for modifying the DOM of the
                                parent Content Document or other contents in the EPUB Publication, and <literal
                                    role="rfc2119">must not</literal> contain instructions for manipulating the size of its
                                containing rectangle.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Spine-level scripts</term>
                        <listitem>
                            <para xml:id="confreq-cd-scripted-spine">EPUB Content Documents that include <xref
                                    linkend="sec-scripted-content-type-spine-level"/> scripting <literal role="rfc2119"
                                    >must</literal> utilize the <emphasis>progressive enhancement technique</emphasis>, which
                                for the purposes of this specification has the following definition: when the document is
                                rendered by a Reading System without scripting support or with scripting support disabled,
                                the <olink targetdoc="spec" targetptr="gloss-content-document-top-level" type="epub-spec"
                                    >top-level document content</olink>
                                <literal role="rfc2119">must</literal> retain its integrity, remaining consumable by the User
                                without any information loss or other significant deterioration.</para>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Accessibility</term>
                        <listitem>
                            <para xml:id="confreq-cd-scripted-a11y">EPUB Content Documents that include scripting — using any
                                    <link linkend="sec-scripted-content-models">inclusion model</link> — <literal
                                    role="rfc2119">should</literal> employ relevant accessibility techniques to ensure that
                                the content remains consumable by all Users. <xref linkend="refARIA"/>
                                <xref linkend="refWCAG20"/>
                            </para>
                        </listitem>
                    </varlistentry>
                    <varlistentry xml:id="confreq-cd-scripted-flbk" xreflabel="Fallbacks for Scripted Content Documents">
                        <term>Fallbacks</term>
                        <listitem>
                            <!--
                            <para xml:id="confreq-cd-scripted-flbk-canvas">EPUB Content Documents
                                that include the HTML <markup>canvas</markup> element for scripting
                                purposes <literal role="rfc2119">should</literal> include non-scripted fallback content using the
                                intrinsic model for fallback as defined by <markup>canvas</markup>
                                <xref linkend="refHTML5"/>.</para>
                            <para xml:id="confreq-cd-scripted-flbk-object">EPUB Content Documents
                                that include the HTML <markup>object</markup> element for scripting
                                purposes <literal role="rfc2119">should</literal> include non-scripted fallback content using the
                                intrinsic model for fallback as defined by <markup>object</markup>
                                <xref linkend="refHTML5"/>.</para> -->
                            <para xml:id="confreq-cd-scripted-fallback">EPUB Content Documents that include scripting — using
                                any <link linkend="sec-scripted-content-models">inclusion model</link> — <literal
                                    role="rfc2119">may</literal> provide fallbacks for such content, either by using
                                intrinsic fallback mechanisms (such as those available for the <xref linkend="refHTML5"/>
                                <markup xlink:href="http://www.w3.org/TR/html5/Overview.html#the-object-element"
                                    >object</markup> and <markup
                                    xlink:href="http://www.w3.org/TR/html5/Overview.html#the-canvas-element">canvas</markup>
                                elements) or, when an intrinsic fallback is not applicable, by using a <link
                                    linkend="sec-fallback-processing-flow-manifest">manifest-level</link> fallback.</para>
                        </listitem>
                    </varlistentry>
                </variablelist>
                <note>
                    <para>The <link xlink:href="http://www.idpf.org/epub/vocab/package/#scripted"
                                ><property>scripted</property> property</link>
                        <xref linkend="refEPUBPackageVocab"/> of the <olink targetdoc="spec" targetptr="gloss-manifest"
                            type="epub-spec"/>
                        <markup>item</markup> element indicates that an EPUB Content Document is a <olink targetdoc="spec"
                            targetptr="gloss-content-document-epub-scripted" type="epub-spec"/>.</para>
                </note>
                <!-- TODO handler note -->
            </section>

            <section xml:id="sec-scripted-content-rs-reqs"
                xreflabel="Scripted Content Documents — Reading System Conformance">
                <title>Reading System Conformance</title>

                <para><olink targetdoc="spec" targetptr="gloss-epub-reading-system" type="epub-spec"/> support for scripting
                    is <literal role="rfc2119">optional</literal>. A Reading System that supports scripting <literal
                        role="rfc2119">must</literal> meet the following criteria:</para>

                <itemizedlist role="conformance-list">
                    <listitem>
                        <para xml:id="confreq-rs-scripted-support">It <literal role="rfc2119">must</literal> support <xref
                                linkend="sec-scripted-content-type-container-constrained"/> scripting and <literal
                                role="rfc2119">may</literal> support <xref linkend="sec-scripted-content-type-spine-level"/>
                            scripting.</para>
                    </listitem>
                    <listitem>
                        <para xml:id="confreq-rs-scripted-ua">It <literal role="rfc2119">may</literal> render <olink
                                targetdoc="spec" targetptr="gloss-content-document-epub-scripted" type="epub-spec"/>s as an
                            interactive, scripted User Agent according to <xref linkend="refHTML5"/>.</para>
                    </listitem>
                    <listitem>
                        <para xml:id="confreq-rs-scripted-container">It <literal role="rfc2119">must not</literal> allow a
                            container-constrained script to modify the DOM of the parent Content Document or other contents
                            in the EPUB Publication, and <literal role="rfc2119">must not</literal> allow it to manipulate
                            the size of its containing rectangle. (Note: Even if a script is not container-constrained, the
                            Reading System <literal role="rfc2119">may</literal> impose restrictions on modifications (see
                            also the <link linkend="feature-dom-manipulation">dom-manipulation feature</link>).)</para>
                    </listitem>
                    <listitem>
                        <para xml:id="confreq-rs-scripted-limit">It <literal role="rfc2119">may</literal> place additional
                            limitations on the capabilities provided to scripts during execution (e.g., limiting
                            networking).</para>
                    </listitem>
                    <listitem>
                        <para xml:id="confreq-rs-scripted-readingsystem-object">It <literal role="rfc2119">must</literal>
                            implement the JavaScript <markup>navigator</markup> extension object
                                <markup>epubReadingSystem</markup> defined in <xref linkend="app-epubReadingSystem"/>. It
                            also <literal role="rfc2119">must</literal> support the <markup>dom-manipulation</markup> and
                                <markup>layout-change</markup> features defined in <xref
                                linkend="app-ers-hasFeature-features"/> in container-constrained scripting contexts.</para>
                    </listitem>
                    <listitem>
                        <para xml:id="confreq-rs-scripted-prop">It <literal role="rfc2119">must</literal> regard the <link
                                xlink:href="http://www.idpf.org/epub/vocab/package/#scripted">
                                <property>scripted</property> property</link>
                            <xref linkend="refEPUBPackageVocab"/> of the <olink targetdoc="spec"
                                targetptr="gloss-package-document" type="epub-spec"/>
                            <olink targetdoc="spec" targetptr="gloss-manifest" type="epub-spec"/>
                            <markup>item</markup> element as the authoritative definition of whether an EPUB Content Document
                            includes scripting.</para>
                    </listitem>
                </itemizedlist>

                <para>A Reading System that does not support scripting <literal role="rfc2119">must</literal> meet the
                    following criteria:</para>

                <itemizedlist role="conformance-list">
                    <listitem>
                        <para xml:id="confreq-rs-scripted-flbk">It <literal role="rfc2119">must</literal> process fallbacks
                            for scripted content as defined in <xref linkend="confreq-cd-scripted-flbk"/>.</para>
                    </listitem>
                </itemizedlist>

                <note>
                    <para>Reading Systems may render Scripted Content Documents in a manner that disables other EPUB
                        capabilities and/or provides a different rendering and User experience (e.g., by disabling
                        pagination).</para>

                    <para>Authors choosing to restrict the usage of scripting to the <xref
                            linkend="sec-scripted-content-type-container-constrained"/> model will ensure a more consistent
                        User experience between scripted and non-scripted content (e.g., consistent pagination
                        behavior).</para>

                    <para>Authors should use declarative techniques whenever practical to increase the interoperability,
                        longevity and accessibility of their EPUB Publications, and avoid the inclusion of scripting whenever
                        practical.</para>
                </note>
            </section>

            <section xml:id="sec-scripted-content-security" conformance="informative">
                <title>Security Considerations</title>

                <para>All EPUB <olink targetdoc="spec" targetptr="gloss-author" type="epub-spec"/>s and Reading System
                    developers need to be aware of the security issues that arise when scripted content is executed by a
                    Reading System. As the underlying scripting model employed by Reading Systems and browsers is the same,
                    the same kinds of issues encountered in Web contexts must be taken into consideration.</para>

                <para>Each Reading System should establish if the scripts in a particular document are to be trusted or not.
                    It is recommended that all scripts be treated as untrusted (and potentially malicious), and that all
                    vectors of attack be examined and protected against. In particular, the following should be
                    considered:</para>

                <itemizedlist>
                    <listitem>
                        <para>an attack against the runtime environment (e.g., stealing files from a <olink targetdoc="spec"
                                targetptr="gloss-user" type="epub-spec"/>'s hard drive);</para>
                    </listitem>
                    <listitem>
                        <para>an attack against the Reading System itself (e.g., stealing a list of a User's books or causing
                            unexpected behavior);</para>
                    </listitem>
                    <listitem>
                        <para>an attack of one Content Document against another (e.g., stealing data that originated in a
                            different document);</para>
                    </listitem>
                    <listitem>
                        <para>an attack of an unencrypted script against an encrypted portion of a document (e.g., an
                            injected malicious script extracting protected content);</para>
                    </listitem>
                    <listitem>
                        <para>an attack against the local network (e.g., stealing data from a server behind a
                            firewall).</para>
                    </listitem>
                </itemizedlist>

                <para>The following recommendations are provided as a guide to handling untrusted scripts:</para>

                <itemizedlist>
                    <listitem>
                        <para>Reading Systems should behave as if a unique domain were allocated to each Content Document, as
                            browser-based security relies heavily on document URLs and domains. Adopting this approach will
                            isolate documents from each other and from other Internet domains, thereby limiting access to
                            external URLs, cookies, DOM storage, etc.</para>
                        <para>Reading Systems that enable scripting and network access should also consider including methods
                            to notify the user that network activity is occurring and/or that allow them to disable
                            it.</para>
                        <note>
                            <para>In practice, Reading Systems may share domains across documents, but they still should
                                maintain isolation between documents.</para>
                            <para>If parts of a document are encrypted and parts are not, or if different encryption keys are
                                used for different parts of the document, a unique per-document domain might not provide
                                sufficient protection.</para>
                        </note>
                    </listitem>
                    <listitem>
                        <para>If a Reading System allows persistent data to be stored, that data should be treated as
                            sensitive. Scripts may save persistent data through cookies and DOM storage, but Reading Systems
                            may block such attempts. Reading Systems that do allow data to be stored must ensure that it is
                            not made available to other unrelated documents (e.g., ones that could have been spoofed). In
                            particular, checking for a matching document identifier (or similar metadata) is not a valid
                            method to control access to persistent data.</para>
                        <para>Reading Systems that allow local storage should also provide methods for Users to inspect,
                            disable, or delete that data. The data should be destroyed if the corresponding EPUB Publication
                            is deleted.</para>
                    </listitem>
                </itemizedlist>

                <para>Note that compliance with these recommendations does not guarantee protection from the possible attacks
                    listed above; developers must examine each potential vulnerability within the context of their Reading
                    System.</para>
            </section>

            <section xml:id="sec-scripted-content-events" conformance="informative">
                <title>Event Model Considerations</title>

                <para>Reading Systems should follow the DOM Event model as per <xref linkend="refHTML5"/> and pass UI events
                    to the scripting environment before performing any default action associated with these events. Reading
                    System implementers should ensure that scripts cannot disable critical functionality (such as navigation)
                    to constrain the extent to which a <link linkend="sec-scripted-content-events">potentially
                        malicious</link> script could impact their Reading Systems. As a result, although the scripting
                    environment should be able to cancel the default action of any event, some events either might not be
                    passed through or might not be cancelable.</para>

                <para><olink targetdoc="spec" targetptr="gloss-author" type="epub-spec"/>s should take into account the wide
                    variety of possible Reading System implementations when adding scripting functionality to their EPUB
                    Publications (e.g., not all devices have physical keyboard, and in many cases a soft keyboard is only
                    activated only for text input elements). Consequently, relying on keyboard events alone is not
                    recommended; alternative ways to trigger the desired action should always be provided.</para>

            </section>

        </section>

        <section xml:id="sec-css">
            <title>Styling</title>

            <para>This section defines a profile for Cascading Style Sheets (CSS) intended to be used for styling of <olink
                    targetdoc="spec" targetptr="gloss-content-document-epub-xhtml" type="epub-spec"/>s. An instance of a CSS
                Style Sheet that conforms to this profile is a <olink targetdoc="spec" targetptr="gloss-core-media-type"
                    type="epub-spec"/> and is referred to in this specification as an <olink targetdoc="spec"
                    targetptr="gloss-stylesheet" type="epub-spec">EPUB Style Sheet</olink>.</para>

            <caution xml:id="caution-css">
                <para>The EPUB 3 CSS Profile references CSS specifications that are still works in progress and may change in
                    incompatible ways. When utilizing features from such specifications, authors should consider the inherent
                    risks in terms of the potential impact on interoperability and document longevity.</para>
            </caution>

            <note xml:id="note-css-unprefixed-authoring">
                <para>The EPUB 3 CSS Profile employs the usage of the <property>-epub-</property>
                    <link xlink:href="http://www.w3.org/TR/CSS21/syndata.html#vendor-keywords">prefix</link> for a number of
                    CSS3 <!-- keywords and --> property names, as detailed below. As the CSS3 modules that define these
                    properties mature and stabilize, EPUB authoring guidelines may encourage authors to also include
                    unprefixed equivalents of these properties in EPUB 3 Style Sheets.</para>
            </note>

            <section xml:id="sec-css-content-conf" xreflabel="EPUB Style Sheets — Content Conformance">
                <title>Content Conformance</title>

                <para>A conformant <olink targetdoc="spec" targetptr="gloss-stylesheet" type="epub-spec"/>
                    <literal role="rfc2119">must</literal> meet all of the following criteria:</para>

                <itemizedlist role="conformance-list">
                    <listitem xml:id="confreq-content-css-support">
                        <para>It <literal role="rfc2119">must</literal> adhere to all content restrictions given in <xref
                                linkend="sec-css-profile"/>.</para>
                    </listitem>
                    <listitem xml:id="confreq-content-css-unsupport">
                        <para>It <literal role="rfc2119">may</literal> include constructs not explicitly identified in the
                            EPUB 3 CSS Profile, but <literal role="rfc2119">should</literal> be authored so that rendering
                            fidelity does not depend on such additional constructs.</para>
                    </listitem>
                    <listitem xml:id="confreq-content-css-encoding">
                        <para>It <literal role="rfc2119">must</literal> be UTF-8 or UTF-16 encoded.</para>
                    </listitem>
                </itemizedlist>

                <note xml:id="note-css-refprops-pkg">
                    <!-- note similar statement for xhtml, svg and css-->
                    <para>All <olink targetdoc="spec" targetptr="gloss-publication-resource-cmt-or-foreign" type="epub-spec"
                        />s referenced from a CSS Style Sheet must conform to the constraints for Publication Resources
                        defined in <xref linkend="sec-epub-content-conf"/></para>
                </note>

            </section>

            <section xml:id="sec-css-rs-conf" xreflabel="EPUB Style Sheets — Reading System Conformance">
                <title>Reading System Conformance</title>

                <itemizedlist role="conformance-list">
                    <listitem xml:id="confreq-rs-css-support">
                        <para>Reading Systems with a <olink targetdoc="spec" targetptr="gloss-viewport-css" type="epub-spec"/>
                            <literal role="rfc2119">should</literal> support — render as defined by the corresponding
                            specification in the Viewport — all CSS constructs included in this profile unless detailed
                            otherwise in <xref linkend="sec-css-profile"/>.</para>
                    </listitem>
                    <listitem>
                        <para xml:id="confreq-rs-css-unsupport">Reading Systems <literal role="rfc2119">may</literal> support
                            additional CSS constructs not explicitly identified in the EPUB 3 CSS Profile, and <literal
                                role="rfc2119">must</literal> handle any unsupported constructs as <link
                                xlink:href="http://www.w3.org/TR/CSS21/conform.html#ignore">defined</link> in <xref
                                linkend="refCSS21"/>. </para>
                    </listitem>
                </itemizedlist>
                <note xml:id="note-rs-css-support">
                    <para>Reading Systems have varying capabilities with regards to CSS rendering support, so may ignore some
                        or all style information of an EPUB Style Sheet.</para>
                    <para>In addition, even when a Reading System does have a <olink targetdoc="spec"
                            targetptr="gloss-viewport-css" type="epub-spec"/>, it is likely to render content in a manner
                        that differs from typical HTML5 User Agents (e.g., paginating content rather than providing a
                        infinitely scrolling surface). </para>
                </note>
            </section>

            <section xml:id="sec-css-profile">
                <title>EPUB 3 CSS Profile</title>

                <section xml:id="sec-css-2.1">
                    <title>CSS 2.1</title>

                    <para>The style baseline of the EPUB 3 CSS Profile is Cascading Style Sheets Level 2 Revision 1 <xref
                            linkend="refCSS21"/>. The profile includes all style sheet constructs normatively defined in
                            <xref linkend="refCSS21"/>, with the following exceptions:</para>

                    <itemizedlist>
                        <listitem>
                            <para>The <code role="value">absolute</code> value of the <property>position</property> property
                                    <literal role="rfc2119">should</literal> be used only with XHTML Content Documents whose
                                    <link linkend="fxl-property-layout">rendition:layout property</link> has been set to
                                    <property>pre-paginated</property>.</para>
                        </listitem>
                        <listitem>
                            <para>The <code role="value">fixed</code> value of the <property>position</property> property is
                                not part of the EPUB 3 CSS Profile. To avoid potential rendering and interoperability issues,
                                it <literal role="rfc2119">should not</literal> be included in an EPUB Style Sheet.</para>
                        </listitem>
                        <listitem>
                            <para>The <property>direction</property> and <property>unicode-bidi</property> properties
                                    <literal role="rfc2119">must not</literal> be included in an EPUB Style Sheet. Authors
                                    <literal role="rfc2119">should</literal> use appropriate <xref linkend="refHTML5"/>
                                markup to express directionality information instead. </para>
                        </listitem>
                    </itemizedlist>

                    <para>Reading Systems that have a <olink targetdoc="spec" targetptr="gloss-viewport-css" type="epub-spec"/>
                        <literal role="rfc2119">must</literal> support the <property>font-family</property> property.</para>
                </section>
                <section xml:id="sec-css-2.0-list-style-type">
                    <title>CSS 2.0</title>
                    <para>The EPUB 3 CSS Profile includes the following values for the <property>list-style-type</property>
                        property as <link xlink:href="http://www.w3.org/TR/2008/REC-CSS2-20080411/generate.html#lists"
                            >defined in</link>
                        <xref linkend="refCSS20"/>:</para>
                    <itemizedlist>
                        <listitem>
                            <para>
                                <code role="value">cjk-ideographic</code>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                <code role="value">hebrew</code>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                <code role="value">hiragana</code>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                <code role="value">hiragana-iroha</code>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                <code role="value">katakana</code>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                <code role="value">katakana-iroha</code>
                            </para>
                        </listitem>
                    </itemizedlist>
                    <!--
                <para>Additional details on these list styles can be found in <xref
                        linkend="refCSS3Lists"/>. <remark role="todo">The definitions in CSS3 Lists
                        are incorrect, so remove this paragraph if an updated WD has not yet been
                        published.</remark>
                </para>
                -->
                </section>
                <section xml:id="sec-css-voice-characteristics">
                    <title>CSS 3.0 Speech</title>
                    <!-- TODO note the difference in inclusion <para>The EPUB 3 CSS Profile includes all features defined in the CSS 3.0 Speech
                    Module <xref linkend="refCSS3Speech"/>. Reading Systems with <olink targetdoc="spec" targetptr="gloss-tts" type="epub-spec"/> capabilities <literal role="rfc2119">should</literal> support the following
                        properties:</para> -->
                    <para>The EPUB 3 CSS Profile includes <property>-epub-</property> prefixed versions of the following
                        properties from the CSS3 Speech Module <xref linkend="refCSS3Speech"/> using syntax as defined in
                            <xref linkend="refCSS3Speech-dated"/> and semantics as defined in <xref linkend="refCSS3Speech"
                        />:</para>
                    <itemizedlist>
                        <listitem>
                            <para>
                                <property>-epub-cue</property>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                <property>-epub-pause</property>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                <property>-epub-rest</property>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                <property>-epub-speak</property>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                <property>-epub-speak-as</property>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                <property>-epub-voice-family</property>
                            </para>
                        </listitem>
                    </itemizedlist>
                    <xi:include href="./share/note-tts-features.xml"/>
                </section>
                <section xml:id="sec-css-fonts">
                    <title>CSS Fonts Level 3</title>
                    <!-- jdaggett, editor of CSS3 Fonts, believes the below-referenced @font-face portion of
                 CSS3 Fonts to be stable. Other parts of the CSS3 Fonts spec are not yet stable.
                 2011-01-11 -->

                    <para>The EPUB 3 CSS Profile includes <property>@font-face</property> rules and descriptors as defined in
                        the CSS Fonts Module Level 3 <xref linkend="refCSS3FontsModule"/> specification, using syntax as
                        defined in <xref linkend="refCSS3FontsModule-dated"/> and semantics as defined in <xref
                            linkend="refCSS3FontsModule"/>. </para>

                    <para xml:id="confreq-rs-embedded-font-types">Reading Systems with a <olink targetdoc="spec"
                            targetptr="gloss-viewport-css" type="epub-spec"/>
                        <literal role="rfc2119">must</literal> support OpenType <xref linkend="refOpenType"/> and WOFF <xref
                            linkend="refWOFF"/> fonts embedded using the <property>@font-face</property> rule.</para>

                    <note>
                        <para>Refer to <xref linkend="confreq-resources-font-fallback"/> for font fallback processing
                            requirements. </para>
                    </note>

                    <para>In addition, Reading Systems <literal role="rfc2119">must</literal> support at least the following
                            <property>@font-face</property> font descriptors. <!-- using
                        <literal>-epub-</literal> prefixed property names,
                        syntax as defined in <xref
                        linkend="refCSS3FontsModule-dated"/> and semantics -->
                        <!-- as
                    defined in <xref linkend="refCSS3FontsModule-dated"/>.--></para>

                    <itemizedlist>
                        <!-- Got rid of font-size, as instructred by John Daggett. -->
                        <!-- Got rid of font-variant, as instructed by John Daggett.  -->
                        <listitem>
                            <para>
                                <property><!--epub-->font-family</property>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                <property><!--epub-->font-style</property>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                <property><!--epub-->font-weight</property>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                <property><!--epub-->src</property>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                <property><!--epub-->unicode-range</property>
                            </para>
                        </listitem>
                    </itemizedlist>

                    <para>For forwards compatibility with EPUB 2 Reading Systems that do not support <property
                            linkend="sec-css-fonts">@font-face</property> rules, authors <literal role="rfc2119"
                            >should</literal> reference a generic font using the <property>font-family</property>
                        property.</para>

                    <note>
                        <para>Refer to <olink targetdoc="ocf" targetptr="resource-obfuscation" type="epub-spec"/> for Reading
                            System font obfuscation requirements. </para>
                    </note>

                </section>
                <section xml:id="sec-css-text">
                    <title>CSS Text Level 3</title>

                    <para>The EPUB 3 CSS Profile includes <property>-epub-</property> prefixed versions of the following
                        properties from the CSS Text Level 3 <xref linkend="refCSS3Text"/> specification using syntax as
                        defined in <xref linkend="refCSS3Text-dated"/> and semantics as defined in <xref
                            linkend="refCSS3Text"/>.</para>

                    <itemizedlist>
                        <listitem>
                            <para>
                                <property>-epub-hyphens</property>* </para>
                        </listitem>
                        <listitem>
                            <para>
                                <property>-epub-line-break</property>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                <property>-epub-text-align-last</property>
                            </para>
                        </listitem>
                        <!-- <listitem>
                        <para>
                            <property>-epub-text-transform</property>
                        </para>
                    </listitem> -->
                        <listitem>
                            <para>
                                <property>-epub-word-break</property>
                            </para>
                        </listitem>
                    </itemizedlist>

                    <para>* The <property>-epub-hyphens</property> property does not include support for the value <code
                            role="value">all</code>.</para>

                    <para xml:id="css-propdef-text-transform">In addition, the EPUB 3 CSS Profile includes the unprefixed
                            <property>text-transform</property> property from CSS Text Level 3 using semantics as defined in
                            <xref linkend="refCSS3Text"/> and syntax as defined in <xref linkend="refCSS3Text-dated"/>, with
                        the exception that the <code role="value">fullwidth</code> and <code role="value"
                            >fullsize-kana</code> values are prefixed in the EPUB 3 CSS Profile (<code role="value"
                            >-epub-fullwidth</code> and <code role="value">-epub-fullsize-kana</code>, respectively). </para>

                    <para>Note that the CSS Text Level 3 module has dropped support for the <code role="value"
                            >fullsize-kana</code> value since the EPUB 3.0 revision. The EPUB CSS 3 Profile retains this
                        value, but now defines its semantics as below:</para>

                    <variablelist>
                        <varlistentry>
                            <term><code role="value">-epub-fullsize-kana</code></term>
                            <listitem>
                                <para>This value represents a mapping of HIRAGANA or KATAKANA characters as shown in <xref
                                        linkend="fullsize-kana-char-mapping"/>. This value is typically used for Japanese
                                    ruby annotation text.</para>
                            </listitem>
                        </varlistentry>
                    </variablelist>

                </section>
                <section xml:id="sec-css-text-decoration">
                    <title>CSS Text Decoration Level 3</title>

                    <para>The EPUB 3 CSS Profile includes <property>-epub-</property> prefixed versions of the following
                        properties from the CSS Text Decoration Level 3 <xref linkend="refCSS3TextDecoration"/> specification
                        using syntax as defined in <xref linkend="refCSS3TextDecoration-dated"/> and semantics as defined in
                            <xref linkend="refCSS3TextDecoration"/>.</para>

                    <itemizedlist>
                        <listitem>
                            <para>
                                <property>-epub-text-emphasis</property>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                <property>-epub-text-emphasis-color</property>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                <property>-epub-text-emphasis-position</property>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                <property>-epub-text-emphasis-style</property>
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                <property>-epub-text-underline-position</property>
                            </para>
                        </listitem>
                    </itemizedlist>
                </section>
                <section xml:id="sec-css-writing-modes">
                    <title>CSS Writing Modes</title>
                    <para>With exceptions for the <property>direction</property> and <property>unicode-bidi</property>
                        properties <link linkend="css-writing-modes-excl">as noted below</link>, the EPUB 3 CSS Profile
                        includes all of the features defined in the CSS Writing Modes Module Level 3 <xref
                            linkend="refCSS3WritingModesModule"/> specification using <property>-epub-</property> prefixed
                        property names, syntax as defined in <xref linkend="refCSS3WritingModesModule-dated"/> and semantics
                        as defined in <xref linkend="refCSS3WritingModesModule"/>. Furthermore, as specified in <xref
                            linkend="refCSS3WritingModesModule-new-dated"/>, both "<code role="value">sideways</code>" and
                            "<code role="value">mixed</code>" are permitted as values of the
                            <property>-epub-text-orientation</property> property. The values "<code role="value"
                            >vertical-right</code>", "<code role="value">rotate-right</code>", "<code role="value"
                            >rotate-left</code>", "<code role="value">rotate-normal</code>" and "<code role="value"
                            >auto</code>" of this property are deprecated.</para>

                    <note>
                        <para>The semantics of "<code role="value">vertical-right</code>", "<code role="value"
                                >rotate-right</code>", "<code role="value">rotate-left</code>", "<code role="value"
                                >rotate-normal</code>", and "<code role="value">auto</code>" is the same as that of "<code
                                role="value">mixed</code>", "<code role="value">sideways-right</code>", "<code role="value"
                                >sideways-left</code>", "<code role="value">sideways</code>" and "<code role="value"
                                >use-glyph-orientation</code>" in <xref linkend="refCSS3WritingModesModule"/>,
                            respectively.</para>
                    </note>

                    <para>The <property>-epub-text-combine</property> property is deprecated, and the
                            <property>-epub-text-combine-horizontal</property> property from <xref
                            linkend="refCSS3WritingModesModule-new-dated"/> added.</para>

                    <note>
                        <para>The <property>-epub-text-combine</property> property's values can be mapped to
                                <property>-epub-text-combine-horizontal</property> as follows: '<code role="value"
                                >none</code>' to '<code role="value">none</code>' and '<code role="value">horizontal</code>'
                            to '<code role="value">all</code>'. The syntax '<code role="value">horizontal</code> &lt;number>'
                            is treated as an error.</para>
                    </note>

                    <para xml:id="css-writing-modes-excl">The <property>direction</property> and
                            <property>unicode-bidi</property> properties from <xref linkend="refCSS3WritingModesModule"/> are
                        not included in the EPUB 3 CSS Profile. Authors <literal role="rfc2119">should</literal> use
                        appropriate <xref linkend="refHTML5"/> markup to express directionality information instead.</para>
                </section>
                <section xml:id="sec-css-selectors">
                    <title>Selectors</title>
                    <para>The EPUB 3 CSS Profile includes support for the Selectors Level 3 <xref linkend="refSelectors"/>
                        specification.</para>
                </section>
                <section xml:id="sec-css-media-queries">
                    <!-- CR as of July 2010 -->
                    <title>Media Queries</title>
                    <para>The EPUB 3 CSS Profile includes <property>@media</property>
                        <!-- As instructed by Fantasai, @import is added. --> and <property>@import</property> rules with
                        media queries as defined in the Media Queries <xref linkend="refMediaQueries"/> specification.</para>
                </section>
                <section xml:id="sec-css-namespaces">
                    <!-- CR as of May 2008 -->
                    <title>CSS Namespaces</title>

                    <para>The EPUB 3 CSS Profile includes the <property>@namespace</property> rule defined in <xref
                            linkend="refCSSNamespacesModule"/> for declaring the default namespace for a style sheet and for
                        binding prefixes to namespaces.</para>
                </section>
                <section xml:id="sec-css-multi-column">
                    <!-- CR as of April 2011 -->
                    <title>CSS Multi-Column Layout</title>
                    <para>The EPUB 3 CSS Profile includes all of the features defined in the CSS Multi-column Layout Module
                            <xref linkend="refCSS3Multicol"/> specification with the exception of the
                            <property>column-span</property> property. </para>
                    <caution>
                        <para>Authors should not rely on column behavior in overflow conditions as this behavior is unstable
                            and may change.</para>
                    </caution>
                    <caution>
                        <para>Pagination algorithms are not fully defined in CSS. Authors should therefore expect exact
                            pagination points to vary from Reading System to Reading System.</para>
                    </caution>
                    <para>Reading Systems <literal role="rfc2119">must</literal> treat the
                            <property>oeb-column-number</property> property as an alias for the
                            <property>column-count</property> property. The use of the <property>oeb-column-number</property>
                        property in EPUB Style Sheets is deprecated; this conformance requirement may be removed in the next
                        major version of EPUB.</para>
                </section>
                <section xml:id="sec-css-ruby-position">
                    <title>Ruby Positioning</title>
                    <!-- both syntax and semantics locally defined -->
                    <para>The EPUB 3 CSS Profile includes the <property>-epub-ruby-position</property> property as defined
                        below:</para>

                    <informaltable xml:id="tbl-rubyposition">
                        <thead>
                            <tr>
                                <td>Name:</td>
                                <td>-epub-ruby-position</td>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Value:</td>
                                <td><code role="value">over</code> | <code role="value">under</code> | <code role="value"
                                        >inter-character</code>
                                </td>
                            </tr>
                            <tr>
                                <td>Initial:</td>
                                <td>over</td>
                            </tr>
                            <tr>
                                <td>Applies to:</td>
                                <td>ruby text elements</td>
                            </tr>
                            <tr>
                                <td>Inherited:</td>
                                <td>yes</td>
                            </tr>
                            <tr>
                                <td>Percentages:</td>
                                <td>N/A</td>
                            </tr>
                            <tr>
                                <td>Media:</td>
                                <td>visual</td>
                            </tr>
                            <tr>
                                <td>Computed value:</td>
                                <td>as specified</td>
                            </tr>
                        </tbody>
                    </informaltable>

                    <para>This property controls the placement of ruby text with respect to its base text. Values have the
                        following meanings:</para>

                    <variablelist>
                        <varlistentry>
                            <term>
                                <code role="value">over</code>
                            </term>
                            <listitem>
                                <para>Ruby text is positioned on the <link
                                        xlink:href="http://www.w3.org/TR/css3-writing-modes/#over">over</link> side of the
                                    ruby base.</para>
                            </listitem>
                        </varlistentry>
                        <varlistentry>
                            <term>
                                <code role="value">under</code>
                            </term>
                            <listitem>
                                <para>Ruby text is positioned on the <link
                                        xlink:href="http://www.w3.org/TR/css3-writing-modes/#under">under</link> side of the
                                    ruby base.</para>
                            </listitem>
                        </varlistentry>
                        <varlistentry>
                            <term>
                                <code role="value">inter-character</code>
                            </term>
                            <listitem>
                                <para>Ruby text is positioned on the right side of the base text. (This value is typically
                                    used for Zhuyin Fuhao (Bopomofo) ruby.)</para>
                            </listitem>
                        </varlistentry>
                    </variablelist>

                    <note>
                        <para>The <property>-epub-ruby-position</property> property will become an alias for the
                                <property>ruby-position</property> property in the CSS Ruby Module <xref
                                linkend="refCSS3Ruby"/>.</para>
                    </note>
                </section>
                <section xml:id="sec-css-oeb-head-foot">
                    <title>Display Property Values <property>oeb-page-head</property> and <property>oeb-page-foot</property>
                        [DEPRECATED]</title>

                    <para>The <property>oeb-page-head</property> and <code>oeb-page-foot</code> values are deprecated and
                        expected to be removed or replaced in a future version of EPUB.</para>

                    <para>Authors <literal role="rfc2119">may</literal> continue to include these values in EPUB Style Sheets
                        to define running headers and footers. Refer to the <link
                            xlink:href="../../30/spec/epub-contentdocs.html#sec-css-oeb-head-foot"
                            xlink:title="oeb-page-head and oeb-page-foot definitions in EPUB 3.0">oeb-page-head oeb-page-foot
                            definitions</link> in <xref linkend="refContentDocs30"/> for more information.</para>

                </section>
            </section>

        </section>

        <section xml:id="sec-fixed-layouts">
            <title>Fixed-Layouts</title>

            <section xml:id="sec-fxl-overview" conformance="informative">
                <title>Introduction</title>

                <para>This section defines rules for the expression and interpretation of dimensional properties of <olink
                        targetdoc="spec" targetptr="gloss-content-document-epub" type="epub-spec"/>s marked as
                        <property>pre-paginated</property> in the <olink targetdoc="spec" targetptr="gloss-package-document"
                        type="epub-spec"/>.</para>

                <para>This specification does not define how the the <link
                        xlink:href="http://www.w3.org/TR/CSS2/visudet.html#containing-block-details">initial containing
                        block</link>, will be placed within the Reading System content display area.</para>

                <note>
                    <para>Refer to <xref linkend="sec-package-metadata-fxl"/> for information on how to designate that a
                            <olink targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/>, or its individual spine
                        items, are to be rendered in a pre-paginated manner (i.e., with fixed width and height
                        dimensions).</para>
                </note>
            </section>

            <section xml:id="sec-fxl-rs-conf" xreflabel="Fixed Layouts — Reading System Conformance">
                <title>Reading System Conformance</title>

                <para>A conformant <olink targetdoc="spec" targetptr="gloss-epub-reading-system" type="epub-spec"/>
                    <literal role="rfc2119">must</literal> meet all of the following criteria for processing <olink
                        targetdoc="spec" targetptr="gloss-fixed-layout-document" type="epub-spec"/>s:</para>

                <itemizedlist role="conformance-list" xml:id="image-rs-confreqs">
                    <listitem>
                        <para xml:id="confreq-fxl-rs-viewport">It <literal role="rfc2119">should</literal> allocate the full
                            content rendering area for the document.</para>
                    </listitem>
                    <listitem>
                        <para xml:id="confreq-fxl-rs-xhtml">It <literal role="rfc2119">must</literal> use the dimensions
                            expressed in the <property>viewport</property>
                            <markup>meta</markup> tag to render <olink targetdoc="spec"
                                targetptr="gloss-content-document-epub-xhtml" type="epub-spec"/>s, but <literal
                                role="rfc2119">may</literal> obtain these dimensions from the package <xref
                                linkend="fxl-property-viewport"/>.</para>
                    </listitem>
                    <listitem>
                        <para xml:id="confreq-fxl-rs-svg">It <literal role="rfc2119">must</literal> use the dimensions
                            expressed in the <markup>viewBox</markup> attribute to render <olink targetdoc="spec"
                                targetptr="gloss-content-document-epub-svg" type="epub-spec"/>s, but <literal role="rfc2119"
                                >may</literal> obtain these dimensions from the package <xref linkend="fxl-property-viewport"
                            />.</para>
                    </listitem>
                    <listitem>
                        <para xml:id="confreq-fxl-rs-content-precedence">It <literal role="rfc2119">must</literal> use the
                            dimensions expressed in the content in the case of discrepancies with the package <xref
                                linkend="fxl-property-viewport"/>.</para>
                    </listitem>
                </itemizedlist>
            </section>

            <section xml:id="sec-package-metadata-fxl">
                <title>Fixed-Layout Properties</title>

                <section xml:id="fxl-overview" conformance="informative">
                    <title>Overview</title>
                    <para>EPUB documents, unlike print books or PDF files, are designed to change. The content flows, or
                        reflows, to fit the screen and to fit the needs of the <olink targetdoc="spec" targetptr="gloss-user"
                            type="epub-spec"/>. As noted in <olink type="epub-spec" targetdoc="overview"
                            targetptr="sec-rendering"/>
                        <quote>content presentation should adapt to the <olink targetdoc="spec" targetptr="gloss-user"
                                type="epub-spec"/> rather than the User having to adapt to a particular representation of
                            content.</quote></para>
                    <para>But this principle doesn’t work for all types of documents. Sometimes content and design are so
                        intertwined they cannot be separated. Any change in appearance risks changing the meaning, or losing
                        all meaning. <olink targetdoc="spec" targetptr="gloss-fixed-layout-document" type="epub-spec"
                            >Fixed-Layout Documents</olink> give <olink targetdoc="spec" targetptr="gloss-author"
                            type="epub-spec">Authors</olink> greater control over presentation when a reflowable EPUB is not
                        suitable for the content.</para>
                    <para>This section defines a set of metadata properties to allow declarative expression of intended
                        rendering behaviors of Fixed-Layout Documents in the context of EPUB 3.</para>
                    <note xml:id="note-mechanisms">
                        <para>EPUB 3 affords multiple mechanisms for representing fixed-layout content. When fixed-layout
                            content is necessary, the Author's choice of mechanism will depend on many factors including
                            desired degree of precision, file size, accessibility, etc. This section does not attempt to
                            dictate the Author's choice of mechanism.</para>
                    </note>
                </section>

                <section xml:id="fxl-property-layout">
                    <title>The <property>rendition:layout</property> Property</title>

                    <section xml:id="fxl-property-layout-usage">
                        <title>Usage</title>

                        <para xml:id="property-layout-global">When the <link
                                xlink:href="http://www.idpf.org/epub/vocab/package/#"><property>rendition:layout</property>
                                property</link>
                            <xref linkend="refEPUBPackageVocab"/> is specified on a <markup>meta</markup> element, it
                            indicates that the paginated or reflowable layout style applies globally for the <olink
                                targetdoc="spec" targetptr="gloss-epub-publication" type="epub-spec"/> (i.e., for all spine
                            items). </para>

                        <para>The default value <code role="value">reflowable</code>
                            <literal role="rfc2119">must</literal> be assumed by <olink targetdoc="spec"
                                targetptr="gloss-epub-reading-system" type="epub-spec">EPUB Reading Systems</olink> as the
                            global value if no <markup>meta</markup> element carrying this property occurs in the <markup
                                linkend="elemdef-opf-metadata">metadata</markup> section.</para>

                        <para>When the <property>rendition:layout</property> property is set to <code role="value"
                                >pre-paginated</code>, Reading Systems <literal role="rfc2119">must not</literal> include
                            space between the adjacent content slots when rendering <olink targetdoc="spec"
                                targetptr="gloss-synthetic-spread" type="epub-spec">Synthetic Spreads</olink>.</para>

                        <para>When the property is set to <code role="value">pre-paginated</code> for a spine item, its
                            content dimensions <literal role="rfc2119">must</literal> be set as defined in <xref
                                linkend="sec-fixed-layouts"/>.</para>

                        <note>
                            <para>Refer to <xref linkend="fxl-property-viewport"/> for how to additionally declare the
                                dimensions within the package metadata to facilitate Reading System optimization of the
                                rendering.</para>
                        </note>
                    </section>

                    <section xml:id="fxl-property-layout-values">
                        <title>Allowed values</title>

                        <para>The following values are defined for use with the <property>rendition:layout</property>
                            property:</para>

                        <variablelist>
                            <varlistentry>
                                <term xml:id="def-layout-reflowable">reflowable</term>
                                <listitem>
                                    <para>The given Rendition is not pre-paginated. Reading Systems <literal role="rfc2119"
                                            >may</literal> apply dynamic pagination when rendering.</para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term xml:id="def-layout-pre-paginated">pre-paginated</term>
                                <listitem>
                                    <para>The given Rendition is pre-paginated. Reading Systems <literal role="rfc2119"
                                            >must</literal> produce exactly one page per spine <markup
                                            linkend="elemdef-spine-itemref">itemref</markup> when rendering.</para>
                                </listitem>
                            </varlistentry>
                        </variablelist>

                        <note xml:id="uaag">
                            <para>Reading Systems typically restrict or deny the application of User or <olink
                                    targetdoc="spec" targetptr="gloss-user-agent" type="epub-spec"/> style sheets to
                                pre-paginated documents, since, as a result of intrinsic properties of such documents,
                                dynamic style changes are highly likely to have unintended consequences. Authors should take
                                into account the negative impact on usability and accessibility that these restrictions have
                                when choosing to use pre-paginated instead of reflowable content. Refer to <link
                                    xlink:href="http://www.w3.org/TR/UAAG20/#gl-text-config">Guideline 1.4 - Provide text
                                    configuration</link>
                                <xref linkend="refUAAG10"/> for related information.</para>
                        </note>

                        <bridgehead>Examples</bridgehead>

                        <informalexample xml:id="fxl-ex1">
                            <para>The following example demonstrates fully fixed-layout content, using <xref
                                    linkend="refMediaQueries"/> to apply different style sheets for three different device
                                categories.</para>
                            <bridgehead>Package Document</bridgehead>
                            <synopsis><xi:include href="./examples/publications/fxl-01a.xml" parse="text"/></synopsis>
                            <bridgehead>XHTML</bridgehead>
                            <synopsis><xi:include href="./examples/publications/fxl-01b.xml" parse="text"/></synopsis>
                            <para>Note that the Media Queries only affect the style sheet applied to the document. The size
                                of the content area set in the <property>viewport</property>
                                <markup>meta</markup> tag is static.</para>
                        </informalexample>
                    </section>

                    <section xml:id="fxl-property-layout-overrides">
                        <title>Spine Overrides</title>

                        <para xml:id="property-layout-local">The <property
                                xlink:href="http://www.idpf.org/epub/vocab/package/#layout-pre-paginated"
                                >rendition:layout-pre-paginated</property> and <property
                                xlink:href="http://www.idpf.org/epub/vocab/package/#layout-reflowable"
                                >rendition:layout-reflowable</property> properties <xref linkend="refEPUBPackageVocab"/>
                            <literal role="rfc2119">may</literal> be specified locally on spine <markup
                                linkend="elemdef-spine-itemref">itemref</markup> elements, and will, in such cases, override
                            the <link linkend="property-layout-global">global value</link> for the given spine item.</para>
                    </section>
                </section>

                <section xml:id="fxl-property-orientation">
                    <title>The <property>rendition:orientation</property> property</title>

                    <section xml:id="fxl-property-orientation-usage">
                        <title>Usage</title>

                        <para xml:id="property-orientation-global">When the <link
                                xlink:href="http://www.idpf.org/epub/vocab/package/#orientation"
                                    ><property>rendition:orientation</property> property</link>
                            <xref linkend="refEPUBPackageVocab"/> is specified on a <markup>meta</markup> element, it
                            indicates that the intended orientation applies globally for the given Rendition (i.e., for all
                            spine items). </para>

                        <para>The default value <code role="value">auto</code>
                            <literal role="rfc2119">must</literal> be assumed by Reading Systems as the global value if no
                                <markup>meta</markup> element carrying this property occurs in the <markup>metadata</markup>
                            section.</para>
                    </section>

                    <section xml:id="fxl-property-orientation-values">
                        <title>Allowed values</title>

                        <para>The following values are defined for use with the <property>rendition:orientation</property>
                            property:</para>

                        <variablelist>
                            <varlistentry>
                                <term>landscape</term>
                                <listitem>
                                    <para>The given Rendition is intended for landscape rendering. </para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>portrait</term>
                                <listitem>
                                    <para> The given Rendition is intended for portrait rendering. </para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>auto</term>
                                <listitem>
                                    <para> The given Rendition is not orientation constrained. </para>
                                </listitem>
                            </varlistentry>
                        </variablelist>

                        <para>Reading Systems that support multiple orientations <literal role="rfc2119">should</literal>
                            convey the intended orientation to the user, unless the given value is <code role="value"
                                >auto</code>. The means by which the intent is conveyed is implementation-specific.</para>

                        <bridgehead>Examples</bridgehead>

                        <informalexample xml:id="fxl-ex2">
                            <para>The following example demonstrates fully fixed-layout content intended to be rendered
                                without synthetic spreads, and locked to landscape orientation.</para>
                            <synopsis><xi:include href="./examples/publications/fxl-02a.xml" parse="text"/></synopsis>
                        </informalexample>
                    </section>

                    <section xml:id="fxl-property-orientation-overrides">
                        <title>Spine Overrides</title>

                        <para xml:id="property-orientation-local">The <property
                                xlink:href="http://www.idpf.org/epub/vocab/package/#orientation-landscape"
                                >rendition:orientation-landscape</property>, <property
                                xlink:href="http://www.idpf.org/epub/vocab/package/#orientation-portrait"
                                >rendition:orientation-portrait</property> and <property
                                xlink:href="http://www.idpf.org/epub/vocab/package/#orientation-auto"
                                >rendition:orientation-auto</property> properties <xref linkend="refEPUBPackageVocab"/>
                            <literal role="rfc2119">may</literal> be specified locally on spine <markup
                                linkend="elemdef-spine-itemref">itemref</markup> elements, and will, in such cases, override
                            the <link linkend="property-orientation-global">global value</link> for the given spine
                            item.</para>
                    </section>
                </section>

                <section xml:id="fxl-property-spread">
                    <title>The <property>rendition:spread</property> Property</title>

                    <section xml:id="fxl-property-spread-usage">
                        <title>Usage</title>

                        <para xml:id="property-spread-global">When the <property>rendition:spread</property> property is
                            specified on a <markup>meta</markup> element, it indicates that the intended <olink
                                targetdoc="spec" targetptr="gloss-synthetic-spread" type="epub-spec"/> behavior applies
                            globally for the given Rendition (i.e., for all spine items).</para>

                        <para>The default value <code role="value">auto</code>
                            <literal role="rfc2119">must</literal> be assumed by Reading Systems as the global value if no
                                <markup>meta</markup> element carrying this property occurs in the <markup>metadata</markup>
                            section.</para>
                    </section>

                    <section xml:id="fxl-property-spread-values">
                        <title>Allowed values</title>

                        <para>The following values are defined for use with the <property>rendition:spread</property>
                            property:</para>

                        <variablelist>
                            <varlistentry>
                                <term>none</term>
                                <listitem>
                                    <para>Reading Systems <literal role="rfc2119">must not</literal> incorporate spine items
                                        in a Synthetic Spread. </para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>landscape</term>
                                <listitem>
                                    <para> Reading Systems <literal role="rfc2119">should</literal> render a Synthetic Spread
                                        for spine items only when the device is in landscape orientation. </para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>portrait</term>
                                <listitem>
                                    <para>Reading Systems <literal role="rfc2119">should</literal> render a Synthetic Spread
                                        for spine items only when the device is in portrait orientation.</para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>both</term>
                                <listitem>
                                    <para>Reading Systems <literal role="rfc2119">should</literal> render a Synthetic Spread
                                        regardless of device orientation.</para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>auto</term>
                                <listitem>
                                    <para>No explicit Synthetic Spread behavior is defined. Reading Systems <literal
                                            role="rfc2119">may</literal> use Synthetic Spreads in specific or all device
                                        orientations as part of a display area utilization optimization process.</para>
                                </listitem>
                            </varlistentry>
                        </variablelist>

                        <note>
                            <para>When Synthetic Spreads are used in the context of XHTML and SVG Content Documents, the
                                dimensions given via the <link linkend="sec-fxl-icb-xhtml">viewport meta element</link> and
                                    <link linkend="sec-fxl-icb-svg">viewBox attribute</link> represents the size of one page
                                in the spread, respectively.</para>
                        </note>

                        <note>
                            <para>Refer to <xref linkend="sec-spine-elem"/> for information about declaration of global flow
                                directionality using the <markup>page-progression-direction</markup> attribute and that of
                                local page-progression-direction within content documents. </para>
                        </note>

                        <bridgehead>Examples</bridgehead>

                        <informalexample xml:id="fxl-ex3">
                            <para>The following example demonstrates fully fixed-layout content intended to be rendered using
                                synthetic spreads in landscape orientation, and with no spreads in portrait
                                orientation.</para>
                            <synopsis><xi:include href="./examples/publications/fxl-03a.xml" parse="text"/></synopsis>
                        </informalexample>

                        <informalexample xml:id="fxl-ex4">
                            <para>The following example demonstrates reflowable content with a single fixed-layout title
                                page, where the fixed-layout page is intended for right-hand spread slot if the device
                                renders Synthetic Spreads.</para>
                            <synopsis><xi:include href="./examples/publications/fxl-04a.xml" parse="text"/></synopsis>
                        </informalexample>
                    </section>

                    <section xml:id="fxl-property-spread-overrides">
                        <title>Spine Overrides</title>

                        <para xml:id="property-spread-local">The <property
                                xlink:href="http://www.idpf.org/epub/vocab/package/#spread-landscape"
                                >rendition:spread-landscape</property>, <property
                                xlink:href="http://www.idpf.org/epub/vocab/package/#spread-portrait"
                                >rendition:spread-portrait</property>, <property
                                xlink:href="http://www.idpf.org/epub/vocab/package/#spread-both"
                                >rendition:spread-both</property>, <property
                                xlink:href="http://www.idpf.org/epub/vocab/package/#spread-auto"
                                >rendition:spread-auto</property> and <property
                                xlink:href="http://www.idpf.org/epub/vocab/package/#spread-none"
                                >rendition:spread-none</property> properties <xref linkend="refEPUBPackageVocab"/>
                            <literal role="rfc2119">may</literal> be specified locally on spine <markup
                                linkend="elemdef-spine-itemref">itemref</markup> elements, and will, in such cases, override
                            the <link linkend="property-spread-global">global value</link> for the given spine item.</para>
                    </section>
                </section>

                <section xml:id="fxl-properties-page-spread">
                    <title>The <property>page-spread-*</property> Properties</title>

                    <para>When a Reading System renders a <olink targetdoc="spec" targetptr="gloss-synthetic-spread"
                            type="epub-spec"/>, the default behavior is to populate the spread by rendering the next <olink
                            targetdoc="spec" targetptr="gloss-content-document-epub" type="epub-spec"/> in the next available
                        unpopulated viewport, where the next available viewport is determined by the given <link
                            linkend="sec-spine-elem">page progression direction</link> or by local declarations within
                        Content Documents. By providing one of the <property
                            xlink:href="http://www.idpf.org/epub/vocab/package/#page-spread-left"
                        >page-spread-left</property>, <property
                            xlink:href="http://www.idpf.org/epub/vocab/package/#page-spread-right"
                            >page-spread-right</property> or <property
                            xlink:href="http://www.idpf.org/epub/vocab/package/#page-spread-left"
                            >rendition:page-spread-center</property> properties <xref linkend="refEPUBPackageVocab"/> on a
                        spine <markup>itemref</markup> element, an Author <literal role="rfc2119">may</literal> override this
                        automatic population behavior by forcing that document to be placed in a particular viewport. </para>

                    <para>The <property>page-spread-left</property> property indicates that the given spine item <literal
                            role="rfc2119">should</literal> be rendered in the left-hand slot in the spread, and
                            <property>page-spread-right</property> that it <literal role="rfc2119">should</literal> be
                        rendered in the right-hand slot. The <property>rendition:page-spread-center</property> property
                        indicates that the synthetic spread mode <literal role="rfc2119">should</literal> be overridden and a
                        single viewport rendered and positioned at the center of the screen.</para>

                    <para>The <property>page-spread-left</property>, <property>page-spread-right</property> and
                            <property>rendition:page-spread-center</property> properties apply to both pre-paginated and
                        reflowable content, and they only apply when the Reading System is creating Synthetic Spreads.</para>

                    <para>The <property>page-spread-*</property> properties take precedence over whatever value of the <xref
                            linkend="refCSS21"/>
                        <property>page-break-before</property> property has been set for an <olink targetdoc="spec"
                            targetptr="gloss-content-document-epub-xhtml" type="epub-spec"/>.</para>

                    <note>
                        <para>The presence of <property>rendition:page-spread-center</property> does not change the viewport
                            dimensions. In particular, it does not indicate that a viewport with the size of the whole spread
                            should be created. This is important so that the scale factor stays consistent between regular
                            and center-spread pages.</para>
                    </note>

                    <para>When a <link linkend="def-layout-reflowable">reflowable</link> spine item follows a <link
                            linkend="def-layout-pre-paginated">pre-paginated</link> one, the reflowable one <literal
                            role="rfc2119">should</literal> start on the next page (as defined by the <link
                            linkend="attrdef-spine-page-progression-direction"
                            ><markup>page-progression-direction</markup></link>) when it lacks a
                            <property>page-spread-*</property> property value. If the reflowable spine item has a
                            <property>page-spread-*</property> specification, it <literal role="rfc2119">must</literal> be
                        honored (e.g., by inserting a blank page).</para>

                    <para>Similarly, when a pre-paginated spine item follows a reflowable one, the pre-paginated one <literal
                            role="rfc2119">should</literal> start on the next page (as defined by the
                            <markup>page-progression-direction</markup>) when it lacks a <property>page-spread-*</property>
                        property value. If the pre-paginated spine item has a <property>page-spread-*</property>
                        specification, it <literal role="rfc2119">must</literal> be honored (e.g., by inserting a blank
                        page).</para>

                    <bridgehead>Examples</bridgehead>

                    <informalexample xml:id="fxl-ex5">
                        <para>The following example demonstrates reflowable content with a two-page fixed-layout center plate
                            that is intended to be rendered using synthetic spreads in any device orientation.</para>
                        <synopsis><xi:include href="./examples/publications/fxl-05a.xml" parse="text"/></synopsis>
                        <para>Note that the author has left spread behavior for the other (reflowable) parts of the <olink
                                targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/> undefined, since the global
                            value of <property>rendition:spread</property> is initialized to <code role="value">auto</code>
                            by default.</para>
                    </informalexample>

                    <informalexample xml:id="fxl-ex6">
                        <para>The following example demonstrates fixed-layout content, where synthetic spreads, when used,
                            must be disabled for a center plate.</para>
                        <synopsis><xi:include href="./examples/publications/fxl-06a.xml" parse="text"/></synopsis>
                        <para>Note that the <property>rendition:spread</property> declaration <code role="value">none</code>
                            expression is not needed on the center plate item, as the
                                <property>rendition:page-spread-center</property> property already specifies semantics that
                            dictates that synthetic spreads be disabled.</para>
                    </informalexample>
                </section>

                <section xml:id="fxl-property-viewport" xreflabel="rendition:viewport property">
                    <title>The <property>rendition:viewport</property> Property</title>

                    <para>The <link xlink:href="http://www.idpf.org/epub/vocab/package/#viewport"
                                ><property>rendition:viewport</property> property</link>
                        <xref linkend="refEPUBPackageVocab"/> allows Authors to express the CSS initial containing block
                        (ICB) <xref linkend="refCSS21"/> for XHTML and SVG Content Documents whose <link
                            xlink:href="http://www.idpf.org/epub/vocab/package/#layout"><property>rendition:layout</property>
                            property</link>
                        <xref linkend="refEPUBPackageVocab"/> has been set to <code role="value">pre-paginated</code>.</para>

                    <para>The value of the property <literal role="rfc2119">must</literal> be of the form:</para>

                    <informalexample>
                        <programlisting>width=x, height=y</programlisting>
                    </informalexample>

                    <para>where <code role="var">x</code> and <code role="var">y</code>
                        <literal role="rfc2119">must</literal> be the height and width of the ICB in CSS pixels <xref
                            linkend="refCSS21"/>, respectively. The order in which the values are expressed is not
                        significant.</para>

                    <para>The <property>rendition:viewport</property> property does not replace the required ICB expression
                        mechanisms defined in <xref linkend="sec-fixed-layouts"/>; the property serves as a complement to
                        facilitate Reading System optimization of the rendering. The dimensions expressed in the content and
                        the dimensions expressed in the package metadata <literal role="rfc2119">must</literal> match.</para>

                    <para xml:id="property-viewport-global">When the <property>rendition:viewport</property> property is
                        specified on a <markup>meta</markup> element without a <markup linkend="attrdef-meta-refines"
                            >refines</markup> attribute, it defines the ICB globally for the <olink targetdoc="spec"
                            targetptr="gloss-epub-publication" type="epub-spec"/> (i.e., for all pre-paginated XHTML and SVG
                        Content Documents).</para>

                    <para xml:id="fxl-property-viewport-local">When the <property>rendition:viewport</property> property is
                        specified on a <markup>meta</markup> element with a <markup>refines</markup> attribute, it indicates
                        the content dimensions apply only to the referenced XHTML or SVG Content Document, overriding the
                        global value (if set). The <markup>refines</markup> attribute <literal role="rfc2119">must</literal>
                        reference the spine <markup linkend="elemdef-spine-itemref">itemref</markup> that references the
                        XHTML or SVG Content Document when this property has been set; it <literal role="rfc2119">must
                            not</literal> reference manifest <markup>item</markup> elements directly.</para>

                    <para>Reading Systems <literal role="rfc2119">must</literal> ignore this property when it is applied to
                        spine items whose <property>rendition:layout</property> property has not been set to <code
                            role="value">pre-paginated</code>. Reading Systems <literal role="rfc2119">must</literal> also
                        ignore this property on spine items that are not XHTML or SVG Content Documents.</para>

                    <bridgehead>Examples</bridgehead>

                    <informalexample xml:id="property-viewport-ex1">
                        <para>The following example demonstrates how to set the dimensions for all spine items, overriding
                            only a cover.</para>
                        <synopsis><xi:include href="./examples/publications/viewport-01.xml" parse="text"/></synopsis>
                    </informalexample>
                </section>
            </section>

            <section xml:id="sec-fxl-synthetic-spreads">
                <title>Viewport Rendering</title>

                <para>When rendering Fixed-Layout Documents, the default intent is that the content rendering area <literal
                        role="rfc2119">should</literal> occupy as much of the available application screen area as possible.
                    Reading Systems <literal role="rfc2119">should not</literal> inject additional content such as border,
                    margins, headers or footers into the viewport or the application area surrounding the viewport.</para>

                <note>
                    <para>The exposure of Reading System control widgets to the <olink targetdoc="spec"
                            targetptr="gloss-user" type="epub-spec"/> is implementation-specific and not included in the
                        above behavioral expectations.</para>
                </note>
            </section>

            <section xml:id="sec-fxl-xhtml-svg-dimensions">
                <title>Content Dimensions for XHTML and SVG</title>

                <para>Each <olink targetdoc="spec" targetptr="gloss-content-document-epub" type="epub-spec"/> referenced from
                    a spine item that has the <property>pre-paginated</property> value set <literal role="rfc2119"
                        >must</literal> contain the <property role="html">viewport</property> (for XHTML) or
                        <markup>viewBox</markup> (for SVG) dimension expressions as defined below, regardless of whether the
                    value is set via the global <link linkend="fxl-property-layout">rendition:layout property</link> for the
                        <olink targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/> or on a <link
                        linkend="fxl-property-layout-overrides">spine-level override</link>.</para>

                <para>For both XHTML and SVG Content Documents, the dimension expressions define the CSS initial containing
                    block (ICB) expressed in CSS Pixels <xref linkend="refCSS21"/>.</para>

                <section xml:id="sec-fxl-icb-xhtml">
                    <title>Expressing ICB Dimensions in XHTML</title>

                    <para>For XHTML Content Documents, the ICB dimensions <literal role="rfc2119">must</literal> be expressed
                        in a <property>viewport</property>
                        <markup>meta</markup> tag using the syntax defined in <xref linkend="refMetaTags"/>. In this version
                        of this specification, only the width and height expressions <literal role="rfc2119">must</literal>
                        be recognized by Reading Systems.</para>

                    <informalexample>
                        <para>The following example shows a <property role="html">viewport</property>
                            <markup>meta</markup> tag.</para>
                        <synopsis>
<xi:include href="./examples/contentdocs/fxl-xhtml-01.xml" parse="text"/></synopsis>
                    </informalexample>

                    <para>Reading Systems <literal role="rfc2119">must</literal> clip XHTML content to the ICB dimensions
                        declared in the <property role="html">viewport</property>
                        <markup>meta</markup> tag; content positioned outside of the initial containing block will not be
                        visible. When the ICB aspect ratio does not match the aspect ratio of the Reading System content
                        display area, Reading Systems <literal role="rfc2119">may</literal> position the ICB inside the area
                        to accommodate the user interface; in other words, added letter-boxing space <literal role="rfc2119"
                            >may</literal> appear on either side (or both) of the content.</para>
                </section>

                <section xml:id="sec-fxl-icb-svg">
                    <title>Expressing ICB Dimensions in SVG</title>

                    <para>For SVG Content Documents, the ICB dimensions <literal role="rfc2119">must</literal> be expressed
                        using the <code xlink:href="http://www.w3.org/TR/SVG/coords.html#ViewBoxAttribute">viewBox</code>
                        attribute <xref linkend="refSVG"/>.</para>

                    <informalexample>
                        <para>The following example shows a <markup>viewBox</markup> attribute declaration.</para>
                        <synopsis>
<xi:include href="./examples/contentdocs/fxl-svg-01.xml" parse="text"/></synopsis>
                    </informalexample>
                </section>
            </section>
        </section>
    </chapter>

    <chapter xml:id="sec-pls">
        <title>PLS Documents</title>

        <section xml:id="sec-pls-overview" conformance="informative">
            <title>Overview</title>

            <para>The W3C Pronunciation Lexicon Specification <xref linkend="refPLS"/> defines syntax and semantics for
                XML-based pronunciation lexicons to be used by Automatic Speech Recognition and <olink targetdoc="spec"
                    targetptr="gloss-tts" type="epub-spec"/> engines.</para>

            <para>The following sections define conformance criteria for PLS documents when included in <olink
                    targetdoc="spec" targetptr="gloss-epub-publication" type="epub-spec"/>s, and rules for associating PLS
                Documents with <olink targetdoc="spec" targetptr="gloss-content-document-epub-xhtml" type="epub-spec"/>s. </para>

            <xi:include href="./share/note-tts-features.xml"/>

        </section>

        <section xml:id="sec-pls-conf-pub">
            <title>EPUB Publication Conformance</title>

            <para>A conformant <olink targetdoc="spec" targetptr="gloss-rendition" type="epub-spec"/> of an <olink
                    targetdoc="spec" targetptr="gloss-epub-publication" type="epub-spec"/>
                <literal role="rfc2119">must</literal> meet all of the following criteria for inclusion of PLS
                Documents:</para>

            <itemizedlist role="conformance-list">
                <listitem>
                    <para xml:id="confreq-cd-pls-xht">PLS Documents <literal role="rfc2119">may</literal> be associated with
                            <olink targetdoc="spec" targetptr="gloss-content-document-epub-xhtml" type="epub-spec"/>s. Each
                        XHTML Content Document <literal role="rfc2119">may</literal> contain zero or more PLS Document
                        associations. </para>
                </listitem>
                <listitem>
                    <para xml:id="confreq-cd-pls-assoc">PLS Documents <literal role="rfc2119">must</literal> be associated
                        with the <olink targetdoc="spec" targetptr="gloss-content-document-epub-xhtml" type="epub-spec"/> to
                        which it applies using the <xref linkend="refHTML5"/>
                        <markup xlink:href="http://www.w3.org/TR/html5/Overview.html#the-link-element">link</markup> element
                        with its <markup>rel</markup> attribute set to <property role="html">pronunciation</property> and its
                            <markup>type</markup> attribute set to the <link linkend="cmt-pls">PLS media type</link> (<code
                            role="media-type">application/pls+xml</code>).</para>
                    <para xml:id="confreq-cd-pls-assoc-lang">The <markup>link</markup> element <markup>hreflang</markup>
                        attribute <literal role="rfc2119">should</literal> be specified on each PLS <markup>link</markup>,
                        and its value <literal role="rfc2119">must</literal> match <link
                            xlink:href="http://www.w3.org/TR/pronunciation-lexicon/#S4.1">the language for which the
                            pronunciation lexicon is relevant</link>
                        <xref linkend="refPLS"/> when specified.</para>
                </listitem>
                <listitem>
                    <para xml:id="confreq-pls-pub-cont">PLS Documents <literal role="rfc2119">must</literal> meet the content
                        conformance criteria defined in <xref linkend="sec-pls-conf-content"/>.</para>
                </listitem>
                <listitem>
                    <para xml:id="confreq-pls-pub-manif">PLS Documents <literal role="rfc2119">must</literal> be represented
                        and located as defined in <xref linkend="sec-epub-content-conf"/>.</para>
                </listitem>
            </itemizedlist>

            <bridgehead>Examples</bridgehead>
            <informalexample>
                <para>The following example shows two PLS Documents (one for Chinese and one for Mongolian) associated with
                    an XHTML Content Document.</para>
                <synopsis>
<xi:include href="./examples/contentdocs/pls-assoc-1.xml" parse="text"/></synopsis>
            </informalexample>

        </section>

        <section xml:id="sec-pls-conf-content" xreflabel="PLS Documents — Content Conformance">
            <title>Content Conformance</title>

            <para>To be considered a <olink targetdoc="spec" targetptr="gloss-publication-resource-cmt" type="epub-spec"/>, a
                PLS Document <literal role="rfc2119">must</literal> meet all of the following criteria:</para>

            <variablelist role="conformance-list" xml:id="confreq-cd-pls">
                <varlistentry xml:id="confreq-cd-pls-docprops">
                    <term>Document Properties</term>
                    <listitem>
                        <para xml:id="confreq-cd-pls-xml">
                            <xi:include href="./share/xml-defref.xml"/>
                        </para>
                        <para xml:id="confreq-cd-pls-docprops-schema">It <literal role="rfc2119">must</literal> be valid to
                            the RELAX NG schema for PLS documents available at the URI <uri
                                xlink:href="http://www.w3.org/TR/pronunciation-lexicon/pls.rng"
                                >http://www.w3.org/TR/pronunciation-lexicon/pls.rng</uri>
                            <xref linkend="refPLS"/>. </para>
                    </listitem>
                </varlistentry>
                <varlistentry xml:id="confreq-cd-pls-fileprops">
                    <term>File Properties</term>
                    <listitem>
                        <para xml:id="confreq-cd-pls-fileprops-name">The PLS Document filename <literal role="rfc2119"
                                >should</literal> use the file extension <filename>.pls</filename>.</para>
                    </listitem>
                </varlistentry>
            </variablelist>

        </section>

        <section xml:id="sec-pls-conf-rs" xreflabel="PLS Documents — Reading System Conformance">
            <title>Reading System Conformance</title>

            <para>A conformant <olink targetdoc="spec" targetptr="gloss-epub-reading-system" type="epub-spec"/>
                <literal role="rfc2119">must</literal> meet all of the following criteria for processing PLS
                Documents:</para>

            <itemizedlist role="conformance-list" xml:id="pls-rs-confreqs">
                <listitem>
                    <para xml:id="confreq-pls-rs-sptts">Reading Systems with <olink targetdoc="spec" targetptr="gloss-tts"
                            type="epub-spec"/> capabilities <literal role="rfc2119">should</literal> support PLS.</para>
                    <para xml:id="confreq-pls-rs-proc">Reading Systems that support PLS <literal role="rfc2119"
                            >must</literal> process PLS documents as defined in <xref linkend="refPLS"/>.</para>
                    <para xml:id="confreq-pls-rs-scope">Reading Systems that support PLS <literal role="rfc2119"
                            >must</literal> apply the supplied pronunciation instructions to all text nodes in the current
                        XHTML Content Document whose <link
                            xlink:href="http://www.w3.org/TR/html5/Overview.html#the-lang-and-xml:lang-attributes"
                            >language</link>
                        <xref linkend="refHTML5"/> matches <link
                            xlink:href="http://www.w3.org/TR/pronunciation-lexicon/#S4.1">the language for which the
                            pronunciation lexicon is relevant</link>
                        <xref linkend="refPLS"/>. The algorithm for matching language tags is defined in <link
                            linkend="refRFC5646">BCP47</link>.</para>
                    <para xml:id="confreq-pls-rs-multi"> When a pronunciation rule is specified more than once for a given
                        string target in a given language, the last occurrence of the rule takes precedence, in such a way
                        that any previously-defined pronunciation rule gets overridden. </para>
                    <para xml:id="confreq-pls-rs-casc">Reading Systems that support PLS and the <link
                            linkend="sec-xhtml-ssml-attrib">SSML Attributes</link>
                        <literal role="rfc2119">must</literal> let any pronunciation instructions provided via the <markup
                            linkend="sec-cd-ssml-ph-attrib">ssml:ph</markup> attribute take precedence in cases where a
                            <markup>pls:grapheme</markup> matches a text node of an element that carries the
                            <markup>ssml:ph</markup> attribute.</para>
                </listitem>
            </itemizedlist>
        </section>

    </chapter>

    <appendix xml:id="app-epubReadingSystem">
        <title>JavaScript epubReadingSystem Object</title>

        <section xml:id="app-ers-syntax">
            <title>Syntax</title>

            <para role="syntax"><emphasis>ReadingSystem</emphasis> = navigator.epubReadingSystem;</para>

        </section>

        <section xml:id="app-ers-desc">
            <title>Description</title>

            <para>The <markup>epubReadingSystem</markup> object provides an interface through which a <olink targetdoc="spec"
                    targetptr="gloss-content-document-epub-scripted" type="epub-spec"/> can query information about a <olink
                    targetdoc="spec" targetptr="gloss-user" type="epub-spec"/>'s <olink targetdoc="spec"
                    targetptr="gloss-epub-reading-system" type="epub-spec">Reading System</olink>.</para>

            <para>The object exposes a number of <link linkend="app-ers-properties">properties</link>, about the Reading
                System, such as its name and version, and provides the <link linkend="app-ers-hasFeature">hasFeature</link>
                method which can be invoked to determine the features it supports.</para>

            <informalexample>
                <para>Example JavaScript function that displays the name of the current Reading System.</para>
                <synopsis>alert("Reading System name: " + navigator.epubReadingSystem.name);</synopsis>
            </informalexample>
        </section>

        <section xml:id="app-ers-properties">
            <title>Properties</title>

            <para>The following properties <literal role="rfc2119">must</literal> be made available for retrieving
                information about the Reading System.</para>

            <table xml:id="tbl-epubReadingSystem-properties">
                <caption>Required epubReadingSystem properties</caption>
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><property role="js">name</property></td>
                        <td>Returns a <code role="datatype">String</code> value representing the name of the Reading System
                            (e.g., "<code role="value">iBooks</code>", "<code role="value">Kindle</code>").</td>
                    </tr>
                    <tr>
                        <td><property role="js">version</property></td>
                        <td>Returns a <code role="datatype">String</code> value representing the version of the Reading
                            System (e.g., "<code role="value">1.0</code>", "<code role="value">2.1.1</code>").</td>
                    </tr>
                    <tr>
                        <td><property role="js">layoutStyle</property></td>
                        <td><para>Returns a <code role="datatype">String</code> value representing the style of layout for
                                the content.</para>
                            <para>A Reading System will typically return one of the values "<code role="value"
                                    >paginated</code>" or "<code role="value">scrolling</code>", but <literal role="rfc2119"
                                    >may</literal> define values for any additional layout formats it supports.</para></td>
                    </tr>
                </tbody>
            </table>
        </section>


        <section xml:id="app-ers-methods">
            <title>Methods</title>

            <section xml:id="app-ers-hasFeature">
                <title>hasFeature</title>

                <section xml:id="app-ers-hasFeature-syntax">
                    <title>Syntax</title>

                    <para role="syntax">hasFeature(feature[, version])</para>
                </section>

                <section xml:id="app-ers-hasFeature-desc">
                    <title>Description</title>
                    <para>For recognized features, the <markup>hasFeature</markup> method returns a boolean value indicating
                        whether any version is supported.</para>
                    <para>If the optional <markup>version</markup> parameter is included, the return value indicates support
                        only for the specified version.</para>
                    <para>The method returns <code role="value">undefined</code> if the feature is not recognized by the
                        Reading System.</para>

                    <informalexample>
                        <para>Example JavaScript function that displays whether the current Reading System supports scripted
                            manipulation of the DOM.</para>
                        <synopsis>var feature = "dom-manipulation";

var conformTest = navigator.epubReadingSystem.hasFeature(feature);

alert("Feature " + feature + " supported?: " + conformTest);</synopsis>
                    </informalexample>
                </section>

                <section xml:id="app-ers-hasFeature-features">
                    <title>Features</title>

                    <para>The following table details the features that <literal role="rfc2119">must</literal> be recognized
                        by all Reading Systems that support scripting (<link linkend="sec-scripted-context"
                            >spine-level</link> or <link linkend="sec-scripted-context">container-constrained</link>).
                        Reading Systems <literal role="rfc2119">may</literal> support some or all of these features (refer to
                            <xref linkend="sec-scripted-content-rs-reqs"/> for more information).</para>

                    <para>Feature names are case-insensitive.</para>

                    <table xml:id="tbl-epubReadingSystem-features">
                        <caption>Required epubReadingSystem features</caption>
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td xml:id="feature-dom-manipulation"><code role="value">dom-manipulation</code></td>
                                <td>Scripts <literal role="rfc2119">may</literal> make structural changes to the document’s
                                    DOM (applies to spine-level scripting only).</td>
                            </tr>
                            <tr>
                                <td xml:id="feature-layout-changes"><code role="value">layout-changes</code></td>
                                <td>Scripts <literal role="rfc2119">may</literal> modify attributes and CSS styles that
                                    affect content layout (applies to spine-level scripting only).</td>
                            </tr>
                            <tr>
                                <td xml:id="feature-touch-events"><code role="value">touch-events</code></td>
                                <td>The device supports touch events and the Reading System passes touch events to the
                                    content.</td>
                            </tr>
                            <tr>
                                <td xml:id="feature-mouse-events"><code role="value">mouse-events</code></td>
                                <td>The device supports mouse events and the Reading System passes mouse events to the
                                    content.</td>
                            </tr>
                            <tr>
                                <td xml:id="feature-keyboard-events"><code role="value">keyboard-events</code></td>
                                <td>The device supports keyboard events and the Reading System passes keyboard events to the
                                    content.</td>
                            </tr>
                            <tr>
                                <td xml:id="feature-spine-scripting"><code role="value">spine-scripting</code></td>
                                <td>Spine-level scripting is supported.</td>
                            </tr>
                        </tbody>
                    </table>

                    <para>If a Reading System supports a feature defined in this section, it <literal role="rfc2119"
                            >must</literal> return a <code role="value">true</code> value both when queried without the
                        version parameter set and when that parameter is set to the value "<code role="value">1.0</code>".
                        Otherwise, it <literal role="rfc2119">must</literal> return <code role="value">false</code>. Reading
                        System developers <literal role="rfc2119">should not</literal> change the version number of these
                        features independently of this specification.</para>

                    <para>Additional features <literal role="rfc2119">may</literal> be added by Reading System developers,
                        but future versions of this specification <literal role="rfc2119">may</literal> append to this list
                        in ways that <literal role="rfc2119">may</literal> conflict or be incompatible with any such custom
                        additions.</para>
                </section>
            </section>
        </section>
    </appendix>

    <appendix xml:id="fullsize-kana-char-mapping" conformance="informative">
        <title><code role="value">-epub-fullsize-kana</code> Character Mapping Reference</title>

        <para>The following table provides character mappings for the <code role="value">-epub-fullsize-kana</code> value of
            the <link linkend="css-propdef-text-transform"><property>text-transform</property> property</link>.</para>

        <informaltable xml:id="tbl-kanamapping">
            <tr>
                <th>From</th>
                <th>From Character</th>
                <th>From Name</th>
                <th>To</th>
                <th>To Character</th>
                <th>To Name</th>
            </tr>
            <tr>
                <td>03041</td>
                <td class="center">&#12353;</td>
                <td>HIRAGANA LETTER SMALL A</td>
                <td>03042</td>
                <td class="center">&#12354;</td>
                <td>HIRAGANA LETTER A</td>
            </tr>
            <tr>
                <td>03043</td>
                <td class="center">&#12355;</td>
                <td>HIRAGANA LETTER SMALL I</td>
                <td>03044</td>
                <td class="center">&#12356;</td>
                <td>HIRAGANA LETTER I</td>
            </tr>
            <tr>
                <td>03045</td>
                <td class="center">&#12357;</td>
                <td>HIRAGANA LETTER SMALL U</td>
                <td>03046</td>
                <td class="center">&#12358;</td>
                <td>HIRAGANA LETTER U</td>
            </tr>
            <tr>
                <td>03047</td>
                <td class="center">&#12359;</td>
                <td>HIRAGANA LETTER SMALL E</td>
                <td>03048</td>
                <td class="center">&#12360;</td>
                <td>HIRAGANA LETTER E</td>
            </tr>
            <tr>
                <td>03049</td>
                <td class="center">&#12361;</td>
                <td>HIRAGANA LETTER SMALL O</td>
                <td>0304A</td>
                <td class="center">&#12362;</td>
                <td>HIRAGANA LETTER O</td>
            </tr>
            <tr>
                <td>03063</td>
                <td class="center">&#12387;</td>
                <td>HIRAGANA LETTER SMALL TU</td>
                <td>03064</td>
                <td class="center">&#12388;</td>
                <td>HIRAGANA LETTER TU</td>
            </tr>
            <tr>
                <td>03083</td>
                <td class="center">&#12419;</td>
                <td>HIRAGANA LETTER SMALL YA</td>
                <td>03084</td>
                <td class="center">&#12420;</td>
                <td>HIRAGANA LETTER YA</td>
            </tr>
            <tr>
                <td>03085</td>
                <td class="center">&#12421;</td>
                <td>HIRAGANA LETTER SMALL YU</td>
                <td>03086</td>
                <td class="center">&#12422;</td>
                <td>HIRAGANA LETTER YU</td>
            </tr>
            <tr>
                <td>03087</td>
                <td class="center">&#12423;</td>
                <td>HIRAGANA LETTER SMALL YO</td>
                <td>03088</td>
                <td class="center">&#12424;</td>
                <td>HIRAGANA LETTER YO</td>
            </tr>
            <tr>
                <td>0308E</td>
                <td class="center">&#12430;</td>
                <td>HIRAGANA LETTER SMALL WA</td>
                <td>0308F</td>
                <td class="center">&#12431;</td>
                <td>HIRAGANA LETTER WA</td>
            </tr>
            <tr>
                <td>03095</td>
                <td class="center">&#12437;</td>
                <td>HIRAGANA LETTER SMALL KA</td>
                <td>0304B</td>
                <td class="center">&#12363;</td>
                <td>HIRAGANA LETTER KA</td>
            </tr>
            <tr>
                <td>03096</td>
                <td class="center">&#12438;</td>
                <td>HIRAGANA LETTER SMALL KE</td>
                <td>03051</td>
                <td class="center">&#12369;</td>
                <td>HIRAGANA LETTER KE</td>
            </tr>
            <tr>
                <td>030A1</td>
                <td class="center">&#12449;</td>
                <td>KATAKANA LETTER SMALL A</td>
                <td>030A2</td>
                <td class="center">&#12450;</td>
                <td>KATAKANA LETTER A</td>
            </tr>
            <tr>
                <td>030A3</td>
                <td class="center">&#12451;</td>
                <td>KATAKANA LETTER SMALL I</td>
                <td>030A4</td>
                <td class="center">&#12452;</td>
                <td>KATAKANA LETTER I</td>
            </tr>
            <tr>
                <td>030A5</td>
                <td class="center">&#12453;</td>
                <td>KATAKANA LETTER SMALL U</td>
                <td>030A6</td>
                <td class="center">&#12454;</td>
                <td>KATAKANA LETTER U</td>
            </tr>
            <tr>
                <td>030A7</td>
                <td class="center">&#12455;</td>
                <td>KATAKANA LETTER SMALL E</td>
                <td>030A8</td>
                <td class="center">&#12456;</td>
                <td>KATAKANA LETTER E</td>
            </tr>
            <tr>
                <td>030A9</td>
                <td class="center">&#12457;</td>
                <td>KATAKANA LETTER SMALL O</td>
                <td>030AA</td>
                <td class="center">&#12458;</td>
                <td>KATAKANA LETTER O</td>
            </tr>
            <tr>
                <td>030C3</td>
                <td class="center">&#12483;</td>
                <td>KATAKANA LETTER SMALL TU</td>
                <td>030C4</td>
                <td class="center">&#12484;</td>
                <td>KATAKANA LETTER TU</td>
            </tr>
            <tr>
                <td>030E3</td>
                <td class="center">&#12515;</td>
                <td>KATAKANA LETTER SMALL YA</td>
                <td>030E4</td>
                <td class="center">&#12516;</td>
                <td>KATAKANA LETTER YA</td>
            </tr>
            <tr>
                <td>030E5</td>
                <td class="center">&#12517;</td>
                <td>KATAKANA LETTER SMALL YU</td>
                <td>030E6</td>
                <td class="center">&#12518;</td>
                <td>KATAKANA LETTER YU</td>
            </tr>
            <tr>
                <td>030E7</td>
                <td class="center">&#12519;</td>
                <td>KATAKANA LETTER SMALL YO</td>
                <td>030E8</td>
                <td class="center">&#12520;</td>
                <td>KATAKANA LETTER YO</td>
            </tr>
            <tr>
                <td>030EE</td>
                <td class="center">&#12526;</td>
                <td>KATAKANA LETTER SMALL WA</td>
                <td>030EF</td>
                <td class="center">&#12527;</td>
                <td>KATAKANA LETTER WA</td>
            </tr>
            <tr>
                <td>030F5</td>
                <td class="center">&#12533;</td>
                <td>KATAKANA LETTER SMALL KA</td>
                <td>030AB</td>
                <td class="center">&#12459;</td>
                <td>KATAKANA LETTER KA</td>
            </tr>
            <tr>
                <td>030F6</td>
                <td class="center">&#12534;</td>
                <td>KATAKANA LETTER SMALL KE</td>
                <td>030B1</td>
                <td class="center">&#12465;</td>
                <td>KATAKANA LETTER KE</td>
            </tr>
            <tr>
                <td>031F0</td>
                <td class="center">&#12784;</td>
                <td>KATAKANA LETTER SMALL KU</td>
                <td>030AF</td>
                <td class="center">&#12463;</td>
                <td>KATAKANA LETTER KU</td>
            </tr>
            <tr>
                <td>031F1</td>
                <td class="center">&#12785;</td>
                <td>KATAKANA LETTER SMALL SI</td>
                <td>030B7</td>
                <td class="center">&#12471;</td>
                <td>KATAKANA LETTER SI</td>
            </tr>
            <tr>
                <td>031F2</td>
                <td class="center">&#12786;</td>
                <td>KATAKANA LETTER SMALL SU</td>
                <td>030B9</td>
                <td class="center">&#12473;</td>
                <td>KATAKANA LETTER SU</td>
            </tr>
            <tr>
                <td>031F3</td>
                <td class="center">&#12787;</td>
                <td>KATAKANA LETTER SMALL TO</td>
                <td>030C8</td>
                <td class="center">&#12488;</td>
                <td>KATAKANA LETTER TO</td>
            </tr>
            <tr>
                <td>031F4</td>
                <td class="center">&#12788;</td>
                <td>KATAKANA LETTER SMALL NU</td>
                <td>030CC</td>
                <td class="center">&#12492;</td>
                <td>KATAKANA LETTER NU</td>
            </tr>
            <tr>
                <td>031F5</td>
                <td class="center">&#12789;</td>
                <td>KATAKANA LETTER SMALL HA</td>
                <td>030CF</td>
                <td class="center">&#12495;</td>
                <td>KATAKANA LETTER HA</td>
            </tr>
            <tr>
                <td>031F6</td>
                <td class="center">&#12790;</td>
                <td>KATAKANA LETTER SMALL HI</td>
                <td>030D2</td>
                <td class="center">&#12498;</td>
                <td>KATAKANA LETTER HI</td>
            </tr>
            <tr>
                <td>031F7</td>
                <td class="center">&#12791;</td>
                <td>KATAKANA LETTER SMALL HU</td>
                <td>030D5</td>
                <td class="center">&#12501;</td>
                <td>KATAKANA LETTER HU</td>
            </tr>
            <tr>
                <td>031F8</td>
                <td class="center">&#12792;</td>
                <td>KATAKANA LETTER SMALL HE</td>
                <td>030D8</td>
                <td class="center">&#12504;</td>
                <td>KATAKANA LETTER HE</td>
            </tr>
            <tr>
                <td>031F9</td>
                <td class="center">&#12793;</td>
                <td>KATAKANA LETTER SMALL HO</td>
                <td>030DB</td>
                <td class="center">&#12507;</td>
                <td>KATAKANA LETTER HO</td>
            </tr>
            <tr>
                <td>031FA</td>
                <td class="center">&#12794;</td>
                <td>KATAKANA LETTER SMALL MU</td>
                <td>030E0</td>
                <td class="center">&#12512;</td>
                <td>KATAKANA LETTER MU</td>
            </tr>
            <tr>
                <td>031FB</td>
                <td class="center">&#12795;</td>
                <td>KATAKANA LETTER SMALL RA</td>
                <td>030E9</td>
                <td class="center">&#12521;</td>
                <td>KATAKANA LETTER RA</td>
            </tr>
            <tr>
                <td>031FC</td>
                <td class="center">&#12796;</td>
                <td>KATAKANA LETTER SMALL RI</td>
                <td>030EA</td>
                <td class="center">&#12522;</td>
                <td>KATAKANA LETTER RI</td>
            </tr>
            <tr>
                <td>031FD</td>
                <td class="center">&#12797;</td>
                <td>KATAKANA LETTER SMALL RU</td>
                <td>030EB</td>
                <td class="center">&#12523;</td>
                <td>KATAKANA LETTER RU</td>
            </tr>
            <tr>
                <td>031FE</td>
                <td class="center">&#12798;</td>
                <td>KATAKANA LETTER SMALL RE</td>
                <td>030EC</td>
                <td class="center">&#12524;</td>
                <td>KATAKANA LETTER RE</td>
            </tr>
            <tr>
                <td>031FF</td>
                <td class="center">&#12799;</td>
                <td>KATAKANA LETTER SMALL RO</td>
                <td>030ED</td>
                <td class="center">&#12525;</td>
                <td>KATAKANA LETTER RO</td>
            </tr>
            <tr>
                <td>0FF67</td>
                <td class="center">&#65383;</td>
                <td>HALFWIDTH KATAKANA LETTER SMALL A</td>
                <td>0FF71</td>
                <td class="center">&#65393;</td>
                <td>HALFWIDTH KATAKANA LETTER A</td>
            </tr>
            <tr>
                <td>0FF68</td>
                <td class="center">&#65384;</td>
                <td>HALFWIDTH KATAKANA LETTER SMALL I</td>
                <td>0FF72</td>
                <td class="center">&#65394;</td>
                <td>HALFWIDTH KATAKANA LETTER I</td>
            </tr>
            <tr>
                <td>0FF69</td>
                <td class="center">&#65385;</td>
                <td>HALFWIDTH KATAKANA LETTER SMALL U</td>
                <td>0FF73</td>
                <td class="center">&#65395;</td>
                <td>HALFWIDTH KATAKANA LETTER U</td>
            </tr>
            <tr>
                <td>0FF6A</td>
                <td class="center">&#65386;</td>
                <td>HALFWIDTH KATAKANA LETTER SMALL E</td>
                <td>0FF74</td>
                <td class="center">&#65396;</td>
                <td>HALFWIDTH KATAKANA LETTER E</td>
            </tr>
            <tr>
                <td>0FF6B</td>
                <td class="center">&#65387;</td>
                <td>HALFWIDTH KATAKANA LETTER SMALL O</td>
                <td>0FF75</td>
                <td class="center">&#65397;</td>
                <td>HALFWIDTH KATAKANA LETTER O</td>
            </tr>
            <tr>
                <td>0FF6C</td>
                <td class="center">&#65388;</td>
                <td>HALFWIDTH KATAKANA LETTER SMALL YA</td>
                <td>0FF94</td>
                <td class="center">&#65428;</td>
                <td>HALFWIDTH KATAKANA LETTER YA</td>
            </tr>
            <tr>
                <td>0FF6D</td>
                <td class="center">&#65389;</td>
                <td>HALFWIDTH KATAKANA LETTER SMALL YU</td>
                <td>0FF95</td>
                <td class="center">&#65429;</td>
                <td>HALFWIDTH KATAKANA LETTER YU</td>
            </tr>
            <tr>
                <td>0FF6E</td>
                <td class="center">&#65390;</td>
                <td>HALFWIDTH KATAKANA LETTER SMALL YO</td>
                <td>0FF96</td>
                <td class="center">&#65430;</td>
                <td>HALFWIDTH KATAKANA LETTER YO</td>
            </tr>
            <tr>
                <td>0FF6F</td>
                <td class="center">&#65391;</td>
                <td>HALFWIDTH KATAKANA LETTER SMALL TU</td>
                <td>0FF82</td>
                <td class="center">&#65410;</td>
                <td>HALFWIDTH KATAKANA LETTER TU</td>
            </tr>
        </informaltable>

    </appendix>

    <appendix xml:id="app-schemas">
        <title>Schemas</title>
        <section xml:id="app-package-schema">
            <title>Package Document Schema</title>
            <para>The schema for Package Documents is available at <link xlink:href="http://www.idpf.org/epub/31/schema/package-30.nvdl"
                    >http://www.idpf.org/epub/31/schema/package-30.nvdl</link>.</para>
            <para>Validation using this schema requires a processor that supports <xref linkend="refNVDL"/>, <xref
                    linkend="refRelaxNG"/>, <xref linkend="refISOSchematron"/> and <xref linkend="refXSDDatatypes"/>.</para>
            <note>
                <para>The NVDL schema layer can be substituted by a multi-pass validation using the embedded RELAX NG and ISO
                    Schematron schemas alone.</para>
            </note>
        </section>
    </appendix>

    <appendix xml:id="app-media-type-reg">
        <title>Media Type Registrations</title>

        <section xml:id="app-media-type-app-oebps-package" conformance="informative">
            <title>The <code role="media-type">application/oebps-package+xml</code> Media Type</title>
            <para>This appendix registers the media type <code role="media-type">application/oebps-package+xml</code> for the
                EPUB Package Document. This registration supersedes <xref linkend="refRFC4839"/>.</para>

            <para>The Package Document is an XML file that describes a Rendition of an EPUB Publication. It identifies the
                resources in the Rendition and provides metadata information. The Package Document and its related standards
                are maintained and defined by the International Digital Publishing Forum (IDPF).</para>

            <variablelist>
                <varlistentry>
                    <term>MIME media type name:</term>
                    <listitem>
                        <para><code role="media-type">application</code></para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>MIME subtype name:</term>
                    <listitem>
                        <para><code role="media-type">oebps-package+xml</code></para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Required parameters:</term>
                    <listitem>
                        <para>None.</para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Optional parameters:</term>
                    <listitem>
                        <para>None.</para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Encoding considerations:</term>
                    <listitem>
                        <para>Package Documents are UTF-8 or UTF-16 encoded XML.</para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Security considerations:</term>
                    <listitem>
                        <para>Package Documents contain well-formed XML conforming to the XML 1.0 specification.</para>

                        <para>Clearly, it is possible to author malicious files which, for example, contain malformed data.
                            Most XML parsers protect themselves from such attacks by rigorously enforcing conformance.</para>

                        <para>All processors that read Package Documents should rigorously check the size and validity of
                            data retrieved.</para>

                        <para>There is no current provision in the EPUB Publications 3.0 standard for encryption, signing, or
                            authentication within the Package Document format.</para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Interoperability considerations:</term>
                    <listitem>
                        <para>None.</para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Published specification:</term>
                    <listitem>
                        <para>This media type registration is for the EPUB Package Document, as described by the EPUB
                            Publications 3.0 specification located at <link
                                xlink:href="http://www.idpf.org/epub/30/spec/epub30-publications.html"
                                >http://www.idpf.org/epub/30/spec/epub30-publications.html</link>.</para>
                        <para>The EPUB Publications 3.0 specification supersedes the Open Packaging Format 2.0.1
                            specification, which is located at <link
                                xlink:href="http://www.idpf.org/epub/20/spec/OPF_2.0.1_draft.htm"
                                >http://www.idpf.org/epub/20/spec/OPF_2.0.1_draft.htm</link> and which also uses the <code
                                role="media-type">application/oepbs-package+xml</code> media type.</para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Applications which use this media type:</term>
                    <listitem>
                        <para>This media type is in wide use for the distribution of ebooks in the EPUB format. The following
                            list of applications is not exhaustive.</para>
                        <itemizedlist>
                            <listitem>
                                <para>Adobe Digital Editions</para>
                            </listitem>
                            <listitem>
                                <para>Aldiko</para>
                            </listitem>
                            <listitem>
                                <para>Azardi</para>
                            </listitem>
                            <listitem>
                                <para>Apple iBooks</para>
                            </listitem>
                            <listitem>
                                <para>Barnes &amp; Noble Nook</para>
                            </listitem>
                            <listitem>
                                <para>Calibre</para>
                            </listitem>
                            <listitem>
                                <para>Google Books</para>
                            </listitem>
                            <listitem>
                                <para>Ibis Reader</para>
                            </listitem>
                            <listitem>
                                <para>MobiPocket reader</para>
                            </listitem>
                            <listitem>
                                <para>Sony Reader</para>
                            </listitem>
                            <listitem>
                                <para>Stanza</para>
                            </listitem>
                        </itemizedlist>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Additional information:</term>
                    <listitem>
                        <variablelist>
                            <varlistentry>
                                <term>Magic number(s):</term>
                                <listitem>
                                    <para>none</para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>File extension(s):</term>
                                <listitem>
                                    <para><filename>.opf</filename></para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>Macintosh File Type Code(s):</term>
                                <listitem>
                                    <para>TEXT</para>
                                </listitem>
                            </varlistentry>
                            <varlistentry>
                                <term>Fragment Identifiers:</term>
                                <listitem>
                                    <para>The IDPF maintains a registry of linking schemes at <uri
                                            xlink:href="http://www.idpf.org/epub/linking/"
                                            >http://www.idpf.org/epub/linking/</uri>. Some of these schemes define custom
                                        fragment identifiers that resolve to <code role="media-type"
                                            >application/oebps-package+xml</code> documents.</para>
                                </listitem>
                            </varlistentry>
                        </variablelist>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Person &amp; email address to contact for further information:</term>
                    <listitem>
                        <para>William McCoy, <link xlink:href="mailto:bmccoy@idpf.org">bmccoy@idpf.org</link></para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Intended usage:</term>
                    <listitem>
                        <para>COMMON</para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Author/Change controller:</term>
                    <listitem>
                        <para>International Digital Publishing Forum (<link xlink:href="http://www.idpf.org"
                                >http://www.idpf.org</link>)</para>
                    </listitem>
                </varlistentry>
            </variablelist>
        </section>
    </appendix>

    <xi:include href="./share/contributors.xml"/>

    <xi:include href="./share/references.xml"/>
</book>
