<?xml version="1.0" encoding="UTF-8"?>
<?xml-model href="../../util/docbook/schema/docbookspec.rng" type="application/xml" schematypens="http://relaxng.org/ns/structure/1.0"?>
<?xml-model href="../../util/docbook/schema/docbookspec.sch" type="application/xml" schematypens="http://purl.oclc.org/dsdl/schematron"?>
<?xml-model href="../../util/docbook/schema/docbook.sch" type="application/xml" schematypens="http://purl.oclc.org/dsdl/schematron"?>
<book xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"
    xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:epub="http://www.idpf.org/2011/epub" version="5.1" xml:lang="en">
    <title>EPUB 3.1</title>
    <info>
        <releaseinfo>Editor's Draft</releaseinfo>
        <pubdate>1 August 2016</pubdate>
        <printhistory>
            <formalpara>
                <title>This version</title>
                <para><link xlink:href="http://www.idpf.org/epub/31/spec/epub-spec-20160801.html"/></para>
            </formalpara>
            <formalpara>
                <title>Latest version</title>
                <para><link xlink:href="http://www.idpf.org/epub3/latest"/></para>
            </formalpara>
            <formalpara>
                <title>Previous version</title>
                <para><link xlink:href="http://www.idpf.org/epub/31/spec/epub-spec-20160426.html"/></para>
            </formalpara>
            <formalpara>
                <title>Previous recommendation</title>
                <para><link xlink:href="http://www.idpf.org/epub/301/spec/epub-publications-20140626.html"/></para>
            </formalpara>
        </printhistory>
        <releaseinfo role="issues"><link
                xlink:href="https://github.com/IDPF/epub-revision/issues?q=milestone%3A%22EPUB+3.1%22+is%3Aclosed+label%3ASpec-EPUB31"
                >Issues addressed in this revision</link></releaseinfo>
        <releaseinfo role="errata"><link xlink:href="./epub-spec-errata/">Errata</link></releaseinfo>
        <releaseinfo role="history"><link
                xlink:href="https://github.com/IDPF/epub-revision/commits/master/src/spec/epub-spec.xml">Changes to this
                document</link></releaseinfo>
        <releaseinfo role="formats">The complete EPUB 3.1 specification is also available for download as an EPUB <link
                xlink:href="http://www.idpf.org/epub/31/docs/epub31-v30-20160801.epub">3.0</link> and <link
                xlink:href="http://www.idpf.org/epub/31/docs/epub31-v31-20160801.epub">3.1</link> Publication.</releaseinfo>
        <xi:include href="./share/copyright.xml"/>
        <xi:include href="./share/legalnotice.xml"/>
        <authorgroup role="current">
            <editor>
                <personname>Markus Gylling</personname>
                <affiliation>
                    <org>
                        <orgname>International Digital Publishing Forum (IDPF)</orgname>
                    </org>
                </affiliation>
            </editor>
            <editor>
                <personname>Tzviya Siegman</personname>
                <affiliation>
                    <org>
                        <orgname>John Wiley &amp; Sons</orgname>
                    </org>
                </affiliation>
            </editor>
            <editor>
                <personname>Matt Garrish</personname>
                <affiliation>
                    <org>
                        <orgname>Invited Expert</orgname>
                    </org>
                </affiliation>
            </editor>
        </authorgroup>
        <abstract>
            <para>EPUB 3.1 is an interchange and delivery format for digital publications based on XML and Web
                Standards.</para>
        </abstract>
    </info>

    <xi:include href="share/status.xml"/>

    <chapter xml:id="sec-overview">
        <title>Overview</title>

        <section xml:id="sec-purpose-scope" conformance="informative">
            <title>Purpose and Scope</title>

            <para>This specification, EPUB 3.1, defines a distribution and interchange format standard for digital
                publications and documents. EPUB® defines a means of representing, packaging and encoding structured and
                semantically enhanced Web content — including HTML, CSS, SVG and other resources — for distribution in a
                single-file container.</para>

            <para>EPUB has been widely adopted as the format for digital books (eBooks), and EPUB 3.1 significantly increase
                the format's capabilities in order to better support a wider range of publication requirements, including
                complex layouts, rich media and interactivity, and global typography features. The expectation is that the
                EPUB 3.1 format will be utilized for a broad range of content, including books, magazines and educational,
                professional and scientific publications.</para>

            <para>EPUB 3.1 is modular in nature: it consists of a family of specifications that define the core features and
                functionality of the standard. This specification represents the primary entry point to standard, but the
                specifications listed in <xref linkend="sec-epub-specs"/> are all a part of EPUB 3.1. An <link
                    linkend="index">index to key concepts and definitions</link> defined across these specifications is
                provided at the end of this specification.</para>

            <para>The informative <xref linkend="refEPUB3Overview"/> provides a general introduction to EPUB 3.1. A list of
                technical changes from EPUB 3.0.1, the previous version of the standard, is also available in the informative
                    <xref linkend="refEPUB3Changes"/>.</para>
        </section>

        <section xml:id="sec-terminology">
            <title>Terminology</title>
            <para>The following terms are specific to EPUB 3.1. They are capitalized wherever used.</para>
            <para>Only the first instance of a term in a section is linked to its definition.</para>
            <xi:include href="./share/glossary.xml"/>
        </section>

        <xi:include href="./share/typography.xml"/>

        <xi:include href="./share/conformancestatements.xml"/>
    </chapter>

    <chapter xml:id="sec-epub-org">
        <title>Organization</title>

        <section xml:id="sec-epub-specs">
            <title>Specifications</title>

            <para>The EPUB 3.1 standard is modular in nature, with core features and functionality defined across a family of
                sub-specifications.</para>

            <para>This specification represents the top-most specification in the family. It includes the conformance
                requirements for both <link linkend="gloss-epub-publication">EPUB Publications</link>, the product of the
                standard, and <link linkend="gloss-epub-reading-system">EPUB Reading Systems</link>, the applications that
                consume EPUB Publications and present their content to <link linkend="gloss-user">Users</link> (see <xref
                    linkend="sec-epub-pub-conf"/> and <xref linkend="sec-epub-rs-conf"/>, respectively).</para>

            <para>The other specifications that comprise EPUB 3.1 are as follows:</para>

            <itemizedlist>
                <listitem>
                    <para><link xlink:href="epub-packages.html">EPUB Packages 3.1</link>
                        <xref linkend="refPackages3"/>, which defines the requirements for each <olink targetdoc="spec"
                            targetptr="gloss-rendition" type="epub-spec"/> of the content.</para>
                </listitem>
                <listitem>
                    <para><link xlink:href="epub-contentdocs.html">EPUB Content Documents 3.1</link>
                        <xref linkend="refContentDocs3"/>, which defines profiles of XHTML, SVG and CSS for use in the
                        context of EPUB Publications.</para>
                </listitem>
                <listitem>
                    <para><link xlink:href="epub-mediaoverlays.html">EPUB Media Overlays 3.1</link>
                        <xref linkend="refOverlays3"/>, which defines a format and a processing model for synchronization of
                        text and audio.</para>
                </listitem>
                <listitem>
                    <para><link xlink:href="epub-ocf.html">EPUB Open Container Format (OCF) 3.1</link>
                        <xref linkend="refOCF3"/>, which defines a file format and processing model for encapsulating a set
                        of related resources into a single-file (ZIP) <xref linkend="gloss-container"/>.</para>
                </listitem>
                <!-- <listitem>
                    <para><link xlink:href="../../linking/cfi/epub-cfi.html">EPUB Canonical Fragment Identifiers</link>
                        <xref linkend="refEPUBCFI"/>, which defines a standardized method for referencing arbitrary content
                        within an EPUB Publication through the use of fragment identifiers.</para>
                </listitem> -->
                <listitem>
                    <para><link xlink:href="http://www.idpf.org/epub/latest/accessibility">EPUB Accessibility</link>
                        <xref linkend="refA11Y"/>, which defines accessibility conformance and discovery metadata
                        requirements for EPUB Publications.</para>
                </listitem>
                <listitem>
                    <para><link xlink:href="../../altss-tags/altss-tags.html">Alternate Style Tags</link>
                        <xref linkend="refAlternateStyleTags"/>, which defines a pattern for tagging alternate style sheets
                        using microformats.</para>
                </listitem>
            </itemizedlist>

            <para>These specifications represent the formal list recognized as belonging to EPUB 3.1, and that contain
                functionality referenced as part of the standard, but new functionality is also added periodically through
                the development of extension specifications.</para>

            <para>Features and functionality defined outside of core revisions to the standard, while not formally recognized
                in this specification, are nonetheless available for use by <link linkend="gloss-author">Authors</link> and
                developers once they are recognized as <link
                    xlink:href="http://idpf.org/about_us/corp_docs/policies_and_procedures">Recommended
                Specifications</link>.</para>

            <note>
                <para>A list of current and recently-completed activities is maintained at <link
                        xlink:href="http://www.idpf.org/ongoing">http://www.idpf.org/ongoing</link>.</para>
            </note>
        </section>

        <section xml:id="sec-epub-roadmap" conformance="informative">
            <title>Road Map</title>

            <para>This section looks at the organization of the EPUB specifications through the central product they define:
                the <xref linkend="gloss-epub-publication"/>.</para>

            <para>The easiest way to think of an EPUB Publication is as a packaged set of Web content that provides <olink
                    targetdoc="spec" targetptr="gloss-user" type="epub-spec">Users</olink> with a digital reading experience.
                At the heart of the EPUB Publication is content built on the Open Web Platform. Called <olink
                    type="epub-spec" targetdoc="spec" targetptr="gloss-content-document-epub">EPUB Content Documents</olink>,
                this content comes in two flavours: <olink type="epub-spec" targetdoc="spec"
                    targetptr="gloss-content-document-epub-xhtml">XHTML</olink> and <olink type="epub-spec" targetdoc="spec"
                    targetptr="gloss-content-document-epub-svg">SVG</olink>. These documents typically reference many
                additional resources, such as images, audio and video clips, scripts and style sheets.</para>

            <para>Detailed information about the rules and requirements for the production of EPUB Content Documents is
                provided in <xref linkend="refContentDocs3"/>.</para>

            <para><olink type="epub-spec" targetdoc="spec" targetptr="gloss-media-overlay-document">Media Overlay
                    Documents</olink> complement EPUB Content Documents providing declarative markup for synchronizing the
                text in EPUB Content Documents with audio content. The result is the ability to create a read aloud
                experience where text is highlighted as it is narrated. Media Overlay Documents are defined in <xref
                    linkend="refOverlays3"/>.</para>

            <para>Moving a layer up from the content, the <olink type="epub-spec" targetdoc="spec"
                    targetptr="gloss-package-document"/> is a special file gives order to the EPUB Content Documents. The
                    <olink type="epub-spec" targetdoc="spec" targetptr="gloss-spine"/> lists the sequence to render documents
                in as a User progresses through the publication, making the transition from one document to the next
                seamless. The Package Document also includes all the metadata used by Reading Systems to present the
                publication to the User (e.g., the title and author for display in a bookshelf, as well rendering metadata
                such as whether content has a fixed layout or can be reflowed).</para>

            <para>The Package Document also contains a complete manifest of resources used in the rendering of the content,
                which also identifies key resources such as the <olink targetdoc="spec"
                    targetptr="gloss-content-document-epub-nav" type="epub-spec"/>. The EPUB Navigation Document provides
                critical navigation capabilities that allow Users to quickly and easily navigate the content, such as the
                table of contents.</para>

            <para>The Package Document and EPUB Navigation Document are defined in <olink targetdoc="packages"
                    targetptr="sec-package-doc" type="epub-spec"/>.</para>

            <para>The EPUB Publication's resources are typically bundled for distribution as a ZIP-based archive with the
                file extension <filename>.epub</filename>. As conformant ZIP archives, EPUB Publications can be unzipped by
                many software programs, simplifying both their production and consumption.</para>

            <para>The container format not only provides a means of determining that the zipped content represents an EPUB
                Publication (the <filename>mimetype</filename> file), but also provides a universally-named directory of
                informative resources (<filename>/META-INF</filename>). Key among these is the
                    <filename>container.xml</filename> file, which directs Reading Systems to the Package Document.</para>

            <para>The container format is defined in <xref linkend="refOCF3"/>.</para>

            <para>While conceptually simple, an EPUB Publication is more than just a collection of HTML pages and dependent
                assets in a ZIP package as presented here. Additional information about the primary features and
                functionality that EPUB Publications provide to enhance the reading experience is available from the
                referenced specifications, and a more general introduction to the features of EPUB 3.1 is provided in the
                informative <xref linkend="refEPUB3Overview"/>.</para>
        </section>
    </chapter>

    <chapter xml:id="sec-epub-conf">
        <title>Conformance</title>

        <section xml:id="sec-epub-pub-conf" xreflabel="EPUB Publication Conformance">
            <title>EPUB Publications</title>

            <para>An <olink targetdoc="spec" targetptr="gloss-epub-publication" type="epub-spec"/>
                <literal role="rfc2119">must</literal> meet all of the following criteria:</para>

            <variablelist role="conformance-list">
                <varlistentry xml:id="sec-epub-package-conformance">
                    <term>Packages</term>
                    <listitem>
                        <para xml:id="confreq-renditions">It <literal role="rfc2119">must</literal> include one or more
                                <olink targetdoc="spec" targetptr="gloss-epub-package" type="epub-spec">EPUB
                            Packages</olink>, each of which <literal role="rfc2119">must</literal> conform to the
                            requirements defined in <xref linkend="refPackages3"/>.</para>
                    </listitem>
                </varlistentry>
                <varlistentry xml:id="sec-epub-a11y">
                    <term>Accessibility</term>
                    <listitem>
                        <para xml:id="confreq-a11y">It <literal role="rfc2119">should</literal> conform to the accessibility
                            requirements defined in <xref linkend="refA11Y"/>.</para>
                    </listitem>
                </varlistentry>
                <varlistentry xml:id="sec-epub-pub-conformance-all">
                    <term>Publication Resources</term>
                    <listitem>
                        <para xml:id="confreq-manifest">All <olink targetdoc="spec"
                                targetptr="gloss-publication-resource-cmt-or-foreign" type="epub-spec">Publication
                                Resources</olink>
                            <literal role="rfc2119">must</literal> adhere to the <link linkend="sec-publication-resources"
                                >constraints for Core Media Types and Foreign Resources</link> and be located as per <xref
                                linkend="sec-resource-locations"/>.</para>
                    </listitem>
                </varlistentry>
                <varlistentry xml:id="sec-epub-pub-conformance-container">
                    <term>Container</term>
                    <listitem>
                        <para xml:id="confreq-ocf">It <literal role="rfc2119">must</literal> be packaged in a <olink
                                targetdoc="spec" targetptr="gloss-container" type="epub-spec"/> as defined in <xref
                                linkend="refOCF3"/>. </para>
                    </listitem>
                </varlistentry>
            </variablelist>
        </section>

        <section xml:id="sec-epub-rs-conf" xreflabel="EPUB Reading System Conformance">
            <title>EPUB Reading Systems</title>

            <para>An <olink targetdoc="spec" targetptr="gloss-epub-reading-system" type="epub-spec"/>
                <literal role="rfc2119">must</literal> meet all of the following criteria:</para>

            <variablelist role="conformance-list">
                <varlistentry xml:id="sec-epub-rs-conf-epub3">
                    <term>EPUB 3.1 Processing</term>
                    <listitem>
                        <para xml:id="confreq-rs-epub3-ocf">It <literal role="rfc2119">must</literal> process the <olink
                                targetdoc="spec" targetptr="gloss-container" type="epub-spec"/> as defined in <xref
                                linkend="refOCF3"/>.</para>

                        <para xml:id="confreq-rs-epub3-package">It <literal role="rfc2119">must</literal> process <olink
                                targetdoc="spec" targetptr="gloss-epub-package" type="epub-spec">EPUB Packages</olink> as
                            defined in <xref linkend="refPackages3"/>.</para>

                        <para xml:id="confreq-rs-epub3-cmt">It <literal role="rfc2119">must</literal> support all <olink
                                targetdoc="spec" targetptr="gloss-publication-resource-cmt" type="epub-spec">Core Media Type
                                Resources</olink>.</para>

                        <para xml:id="confreq-rs-foreign">It <literal role="rfc2119">may</literal> support an arbitrary set
                            of <olink targetdoc="spec" targetptr="gloss-publication-resource-foreign" type="epub-spec"/>
                            types, and <literal role="rfc2119">must</literal> process fallbacks for unsupported Foreign
                            Resources as defined in <xref linkend="sec-foreign-restrictions"/> if not.</para>

                        <para xml:id="confreq-rs-epub3-xhtml">It <literal role="rfc2119">must</literal> process <olink
                                targetdoc="spec" targetptr="gloss-content-document-epub-xhtml" type="epub-spec">XHTML Content
                                Document</olink> as defined in <olink targetdoc="contentdocs" targetptr="sec-xhtml-conf-rs"
                                type="epub-spec"/>.</para>

                        <para xml:id="confreq-rs-epub3-svg">It <literal role="rfc2119">must</literal> process <olink
                                targetdoc="spec" targetptr="gloss-content-document-epub-svg" type="epub-spec">SVG Content
                                Documents</olink> as defined in <olink targetdoc="contentdocs" targetptr="sec-svg-rs-conf"
                                type="epub-spec"/>.</para>

                        <para xml:id="confreq-rs-epub3-css"><phrase role="conditional">If it has a <olink targetdoc="spec"
                                    targetptr="gloss-viewport" type="epub-spec"/></phrase>, it <literal role="rfc2119"
                                >must</literal> support visual rendering of <olink targetdoc="spec"
                                targetptr="gloss-content-document-epub-xhtml" type="epub-spec">XHTML Content
                                Documents</olink> as defined in <olink targetdoc="contentdocs" targetptr="sec-css-rs-conf"
                                type="epub-spec"/>.</para>

                        <para xml:id="confreq-rs-epub3-raster"><phrase role="conditional">If it has the capability to render
                                raster images</phrase>, it <literal role="rfc2119">must</literal> support the <link
                                xlink:href="http://www.idpf.org/epub/cmt/v3/#cmt-grp-image">raster image Core Media
                                Types</link>
                            <xref linkend="refCMT"/>.</para>

                        <para xml:id="confreq-rs-epub3-vector"><phrase role="conditional">If it has the capability to render
                                vector images</phrase>, it <literal role="rfc2119">must</literal> support the <link
                                xlink:href="http://www.idpf.org/epub/cmt/v3/#cmt-grp-image">vector image Core Media
                                Types</link>
                            <xref linkend="refCMT"/>.</para>

                        <para xml:id="confreq-rs-epub3-mp3-aac"><phrase role="conditional">If it has the capability to render
                                pre-recorded audio</phrase>, it <literal role="rfc2119">must</literal> support the <link
                                xlink:href="http://www.idpf.org/epub/cmt/v3/#cmt-audio">audio Core Media Types</link>
                            <xref linkend="refCMT"/> and <literal role="rfc2119">should</literal> support Media Overlays
                                <xref linkend="refOverlays3"/>.</para>

                        <para xml:id="confreq-rs-epub3-tts"
                            xreflabel="Reading System Text-to-Speech Conformance Requirements"><phrase role="conditional">If
                                it supports <olink targetdoc="spec" targetptr="gloss-tts" type="epub-spec"/>
                                rendering</phrase>, it <literal role="rfc2119">should</literal> support <olink
                                targetdoc="contentdocs" targetptr="sec-pls" type="epub-spec"/>, <xref linkend="refCSS3Speech"
                            /> and <olink targetdoc="contentdocs" targetptr="sec-xhtml-ssml-attrib" type="epub-spec">SSML
                                attributes</olink> in <olink targetdoc="spec" targetptr="gloss-content-document-epub-xhtml"
                                type="epub-spec">XHTML Content Documents</olink>.</para>

                        <note xml:id="note-video-codecs">
                            <para>It is recommended that Reading Systems support at least one of the <xref linkend="refH264"
                                /> and <xref linkend="refVP8"/> video codecs, but this is not a conformance requirement
                                &#8211; a Reading System might support other video codecs, or none at all. Authors and
                                Reading System developers need to take into consideration factors such as breadth of
                                adoption, video playback quality, and technology usage royalty requirements when making a
                                choice to include or implement video in either format, or both.</para>
                        </note>
                    </listitem>
                </varlistentry>
                <varlistentry xml:id="sec-epub-rs-conf-a11y">
                    <term>Accessibility</term>
                    <listitem>
                        <para xml:id="confreq-rs-a11y">It <literal role="rfc2119">should</literal> meet the accessibility
                            requirements for Reading Systems in <xref linkend="refA11Y"/>. </para>
                    </listitem>
                </varlistentry>
                <varlistentry xml:id="sec-epub-rs-conf-backward">
                    <term>Backward Compatibility</term>
                    <listitem>
                        <para xml:id="confreq-rs-backward-epub2">It <literal role="rfc2119">should</literal> process EPUB
                            version "<code role="value">2.0</code>" Publications as defined in <xref linkend="refOPF2"/>,
                                <xref linkend="refOPS2"/> and <xref linkend="refOCF2"/>.</para>
                        <para xml:id="confreq-rs-backward-epub3">It <literal role="rfc2119">should</literal> process EPUB
                            version "<code role="value">3.0</code>" Publications as defined in <xref
                                linkend="refPublications301"/>, <xref linkend="refContentDocs301"/> and <xref
                                linkend="refOCF301"/>.</para>
                        <para xml:id="confreq-rs-backward-epub">It <literal role="rfc2119">must</literal> attempt to process
                            any given Rendition of an EPUB Publication whose Package Document <markup>version</markup>
                            attribute designates a version lower than "<code role="value">3.1</code>" or which omits the
                                <markup>version</markup> attribute.</para>
                    </listitem>
                </varlistentry>
                <varlistentry xml:id="sec-epub-rs-conf-forward">
                    <term>Forward Compatibility</term>
                    <listitem>
                        <para xml:id="confreq-rs-forward-epubn">It <literal role="rfc2119">should</literal> attempt to
                            process any given Rendition of an EPUB Publication whose Package Document
                                <markup>version</markup> attribute designates a version higher than "<code role="value"
                                >3.1</code>".</para>
                    </listitem>
                </varlistentry>
                <varlistentry xml:id="sec-epub-rs-conf-xml">
                    <term>XML Processing</term>
                    <listitem>
                        <para xml:id="confreq-rs-xml-nval">It <literal role="rfc2119">must</literal> be a <link
                                xlink:href="https://www.w3.org/TR/2008/REC-xml-20081126/#proc-types">conformant
                                non-validating processor</link>
                            <xref linkend="refXML"/>.</para>
                        <para xml:id="confreq-rs-xml-ns"> It <literal role="rfc2119">must</literal> be a <link
                                xlink:href="https://www.w3.org/TR/2009/REC-xml-names-20091208/#ProcessorConformance"
                                >conformant processor</link> as defined in <xref linkend="refXMLNamespaces"/>. </para>
                        <para xml:id="confreq-rs-xml-base">It <literal role="rfc2119">must</literal> be a conformant
                            application as defined by <xref linkend="refXMLBase"/>.</para>
                    </listitem>
                </varlistentry>

            </variablelist>

            <note>
                <para>A conforming Reading System is not necessarily a single dedicated program or device, but might exist as
                    a distributed system.</para>
            </note>

        </section>
    </chapter>

    <chapter xml:id="sec-publication-resources">
        <title>Publication Resources</title>

        <section xml:id="sec-core-media-types">
            <title>Core Media Types</title>

            <section xml:id="sec-cmt-intro">
                <title>Introduction</title>

                <para>Each <olink targetdoc="spec" targetptr="gloss-rendition" type="epub-spec">Rendition</olink> of an
                        <olink targetdoc="spec" targetptr="gloss-epub-publication" type="epub-spec"/> typically consists of
                    many <olink targetdoc="spec" targetptr="gloss-publication-resource-cmt-or-foreign" type="epub-spec"
                        >Publication Resources</olink>. These resources are divided into two categories: those that <olink
                        targetdoc="spec" targetptr="gloss-epub-reading-system" type="epub-spec">EPUB Reading Systems</olink>
                    have to support (<olink targetdoc="spec" targetptr="gloss-publication-resource-cmt" type="epub-spec">Core
                        Media Type Resources</olink>) and those that they do not (<olink targetdoc="spec"
                        targetptr="gloss-publication-resource-foreign" type="epub-spec">Foreign Resources</olink>).</para>

                <para><olink targetdoc="spec" targetptr="gloss-author" type="epub-spec">Authors</olink> are free to use both
                    types of resources to construct their EPUB Publications, but need to be aware that some Reading Systems
                    might not render the Foreign Resources they use.</para>

                <para>As EPUB Publications are designed to be fully consumable on any compliant Reading System, a system of
                    fallbacks is therefore necessary to ensure that the use of Foreign Resources does not impact on the
                    ability of the <link linkend="gloss-user">User</link> to consume the content. This section lays out the
                        <link linkend="sec-cmt-supported">set of Core Media Types</link> that are supported across Reading
                    Systems and identifies <link linkend="sec-foreign-restrictions">fallback mechanisms</link> that can be
                    used to satisfy the consumability requirement.</para>
            </section>

            <section xml:id="sec-cmt-supported">
                <title>Supported Media Types</title>

                <para><olink targetdoc="spec" targetptr="gloss-publication-resource-cmt-or-foreign" type="epub-spec"
                        >Publication Resources</olink> that conform to a Core Media Type specification are <olink
                        targetdoc="spec" targetptr="gloss-publication-resource-cmt" type="epub-spec">Core Media Type
                        Resources</olink> and can be included in an EPUB Publication without fallbacks.</para>

                <para>Refer to <xref linkend="refCMT"/> for the current list of <link linkend="gloss-core-media-type">Core
                        Media Types</link>.</para>

                <para>See also <xref linkend="sec-foreign-restrictions"/>.</para>
            </section>

            <section xml:id="sec-foreign-restrictions">
                <title>Foreign Resources</title>

                <para xml:id="confreq-foreign-no-fallback">Foreign Resources <literal role="rfc2119">may</literal> be
                    included in an EPUB Publication without a fallback provided they are not referenced from <olink
                        targetdoc="packages" targetptr="sec-itemref-elem" type="epub-spec">spine itemref elements</olink> or
                    directly rendered in their native format in EPUB Content Documents (e.g., via <xref linkend="refHTML"/>
                    <link xlink:href="https://www.w3.org/TR/html/dom.html#kinds-of-content-embedded-content">embedded
                        content</link> and <xref linkend="refSVG"/>
                    <markup xlink:href="https://www.w3.org/TR/SVG/struct.html#ImageElement">image</markup> and <markup
                        xlink:href="https://www.w3.org/TR/SVG/extend.html#ForeignObjectElement">foreignObject</markup>
                    elements).</para>

                <para xml:id="confreq-cmt">When a <olink targetdoc="spec" targetptr="gloss-publication-resource-foreign"
                        type="epub-spec">Foreign Resource</olink> is included in the spine or directly rendered in its native
                    format in an EPUB Content Document, a Core Media Type fallback <literal role="rfc2119">must</literal> be
                    included. Fallbacks take one of the two following forms:</para>

                <itemizedlist>
                    <listitem>
                        <para>intrinsic fallback mechanisms provided by the format (e.g., ability to provide more than one
                            media type or to display an alternate embedded message when a media type cannot be rendered).
                            Refer to the <xref linkend="refHTML"/> and <xref linkend="refSVG"/> specifications for the
                            intrinsic fallback capabilities their elements provide.</para>
                    </listitem>
                    <listitem>
                        <para><olink targetdoc="packages" targetptr="sec-foreign-restrictions-manifest" type="epub-spec"
                                >manifest fallbacks</olink> are a feature of the <olink targetdoc="spec"
                                targetptr="gloss-package-document" type="epub-spec"/> that create a fallback chain to a Core
                            Media Type Resources. They are used to create fallbacks for Foreign Resources in the <olink
                                targetdoc="packages" targetptr="sec-spine-elem" type="epub-spec"/> and when intrinsic
                            fallback capabilities are not available (e.g., for the <xref linkend="refHTML"/>
                            <markup xlink:href="https://www.w3.org/TR/html/semantics-embedded-content.html#the-img-element"
                                >img</markup> element).</para>
                    </listitem>
                </itemizedlist>
            </section>
        </section>

        <section xml:id="sec-resource-locations" xreflabel="Publication Resource Locations">
            <title>Resource Locations</title>

            <para>All <olink targetdoc="spec" targetptr="gloss-publication-resource-cmt-or-foreign" type="epub-spec"
                    >Publication Resources</olink>
                <literal role="rfc2119">must</literal> be located in the <olink targetdoc="spec" targetptr="gloss-container"
                    type="epub-spec"/>, with the following exceptions:</para>

            <itemizedlist role="conformance-list">
                <listitem>
                    <para xml:id="sec-resource-locations-audio"><link
                            xlink:href="http://www.idpf.org/epub/cmt/v3/#cmt-grp-audio">Audio resources</link>
                        <xref linkend="refCMT"/>
                        <literal role="rfc2119">may</literal> be located outside the EPUB Container.</para>
                </listitem>
                <listitem>
                    <para xml:id="sec-resource-locations-video">Video resources <literal role="rfc2119">may</literal> be
                        located outside the EPUB Container.</para>
                </listitem>
                <listitem>
                    <para xml:id="sec-resource-locations-script">Resources retrieved by scripts <literal role="rfc2119"
                            >may</literal> be located outside the EPUB Container, but the <xref linkend="refHTML"/> and <xref
                            linkend="refSVG"/>
                        <markup>script</markup> elements <literal role="rfc2119">must not</literal> reference <link
                            linkend="gloss-remote-resource">Remote Resources</link> (i.e., from their <markup>src</markup> or
                            <markup>href</markup> attributes, respectively).</para>
                </listitem>
                <listitem>
                    <para xml:id="sec-resource-locations-fonts"><link
                            xlink:href="http://www.idpf.org/epub/cmt/v3/#cmt-grp-font">Font resources</link>
                        <literal role="rfc2119">may</literal> be located outside the EPUB Container.</para>
                </listitem>
            </itemizedlist>

            <note>
                <para>Authors are encouraged to locate audio, video and script resources inside the EPUB Container whenever
                    feasible to allow Users access to the entire presentation regardless of connectivity status.</para>
            </note>

            <note>
                <para>The above rules for Publication Resource locations apply regardless of whether the given resource is a
                        <olink targetdoc="spec" targetptr="gloss-publication-resource-cmt" type="epub-spec"/> or a <olink
                        targetdoc="spec" targetptr="gloss-publication-resource-foreign" type="epub-spec"/>.</para>
            </note>

            <note>
                <para>The inclusion of <link linkend="gloss-remote-resource">Remote Resources</link> in an <olink
                        targetdoc="spec" targetptr="gloss-epub-publication" type="epub-spec"/> is indicated via the <link
                        xlink:href="http://www.idpf.org/epub/vocab/package/item/#remote-resources"
                            ><property>remote-resources</property> property</link>
                    <xref linkend="refManifestVocab"/> on the <olink targetdoc="spec" targetptr="gloss-manifest"
                        type="epub-spec"/>
                    <markup><olink targetdoc="packages" targetptr="sec-item-elem" type="epub-spec"/></markup> element.</para>
            </note>

        </section>

        <section xml:id="sec-xml-constraints">
            <title>XML Conformance</title>

            <para>Any <olink targetdoc="spec" targetptr="gloss-publication-resource-cmt-or-foreign" type="epub-spec"/> that
                is an XML-Based Media Type <literal role="rfc2119">must</literal> meet the following constraints:</para>

            <itemizedlist role="conformance-list">
                <listitem>
                    <para xml:id="confreq-xml-wellformed"> It <literal role="rfc2119">must</literal> be a conformant XML 1.0
                        Document as defined in <link
                            xlink:href="https://www.w3.org/TR/2009/REC-xml-names-20091208/#Conformance">Conformance of
                            Documents</link>
                        <xref linkend="refXMLNamespaces"/>. </para>
                </listitem>
                <listitem>
                    <para xml:id="confreq-xml-extmarkupdecl">
                        <link xlink:href="https://www.w3.org/TR/2008/REC-xml-20081126/#NT-ExternalID">External
                            identifiers</link>
                        <literal role="rfc2119">must not</literal> appear in the document type declaration <xref
                            linkend="refXML"/>. </para>
                </listitem>
                <listitem>
                    <para xml:id="confreq-xml-xinc"> It <literal role="rfc2119">must not</literal> make use of XInclude <xref
                            linkend="refXInclude"/>.
                        <!-- note: troublesome to say "include elements in the xinclude namespace" in this case, since xinclude happens in a pre stage -->
                    </para>
                </listitem>
                <listitem>
                    <para xml:id="confreq-xml-enc">
                        <phrase>It <literal role="rfc2119">must</literal> be encoded in UTF-8 or UTF-16 <xref
                                linkend="refUnicode5"/>.</phrase>
                    </para>
                </listitem>
            </itemizedlist>

            <para>The above constraints apply regardless of whether the given Publication Resource is a <olink
                    targetdoc="spec" targetptr="gloss-publication-resource-cmt" type="epub-spec"/> or a <olink
                    targetdoc="spec" targetptr="gloss-publication-resource-foreign" type="epub-spec"/>. </para>

        </section>
    </chapter>

    <appendix xml:id="sec-overview-deprecated">
        <title>Obsolete Features</title>

        <para>Features defined in this specification and its siblings are occasionally removed if they are no longer needed
            or have been replaced by another feature. Prior to removal, the features are marked as <link linkend="deprecated"
                >deprecated</link> or <link linkend="superseded-conforming">superseded</link> as an early warning to the EPUB
            community. The meaning of these labels are defined as follows.</para>

        <para xml:id="deprecated">If a feature is marked as <emphasis role="bold">deprecated</emphasis>, the following hold
            true:</para>

        <itemizedlist>
            <listitem>
                <para>The feature will be removed in a future version of the specification. The feature is marked as
                    deprecated in order to give <olink targetdoc="spec" targetptr="gloss-author" type="epub-spec"
                        >Authors</olink> and <olink targetdoc="spec" targetptr="gloss-epub-reading-system" type="epub-spec"/>
                    developers time to prepare for removal.</para>
            </listitem>
            <listitem>
                <para>It is strongly <literal role="rfc2119">recommended</literal> that Authors discontinue use of the
                    feature in their <olink targetdoc="spec" targetptr="gloss-epub-publication" type="spec">EPUB
                        Publications</olink>.</para>
            </listitem>
            <listitem>
                <para>Reading Systems <literal role="rfc2119">must</literal> continue to support the feature as it is defined
                    until it is formally removed.</para>
            </listitem>
            <listitem>
                <para>Validation tools <literal role="rfc2119">must</literal> alert Authors that inclusion of the feature is
                    deprecated when encountered in an EPUB Publication. It is <literal role="rfc2119">recommended</literal>
                    that the alert be lower in severity than an error or warning.</para>
            </listitem>
        </itemizedlist>

        <para xml:id="superseded-conforming">If a feature is marked as <emphasis role="bold">superseded and
                conforming</emphasis>, the following hold true:</para>

        <itemizedlist>
            <listitem>
                <para>The superseded feature <literal role="rfc2119">may</literal> be removed in a future version of the
                    specification, but there is no definite timeline for removal.</para>
            </listitem>
            <listitem>
                <para>Authors <literal role="rfc2119">may</literal> include the superseded feature for compatibility with
                    older versions of the specification, but <literal role="rfc2119">must</literal> use the replacement
                    feature for conformance with the current specification.</para>
            </listitem>
            <listitem>
                <para>Reading Systems <literal role="rfc2119">must not</literal> support the superseded feature in content
                    that conforms to the current version of the specification.</para>
            </listitem>
            <listitem>
                <para>Validation tools <literal role="rfc2119">must not</literal> alert Authors about the presence of the
                    superseded feature in an EPUB Publication, as it is valid for backwards compatibility. Validation tools
                        <literal role="rfc2119">must</literal> alert Authors if the superseded feature is not conformant to
                    its definition or otherwise breaks a usage requirement.</para>
            </listitem>
        </itemizedlist>

        <para xml:id="superseded-non-conforming">A feature that is <emphasis role="bold">superseded and
                non-conforming</emphasis> shares the same characteristics of a <link linkend="superseded-conforming"
                >superseded and conforming</link> feature, but with the following differences:</para>

        <itemizedlist>
            <listitem>
                <para>The non-conforming feature will be removed in a future version of the specification.</para>
            </listitem>
            <listitem>
                <para>Validation tools <literal role="rfc2119">must</literal> alert Authors about the presence of
                    non-conforming features. It is <literal role="rfc2119">recommended</literal> that the alert be given the
                    same severity as <link linkend="deprecated">deprecated</link> features.</para>
            </listitem>
        </itemizedlist>
    </appendix>

    <xi:include href="./share/index.xml"/>

    <xi:include href="./share/contributors.xml"/>

    <xi:include href="./share/references.xml"/>
</book>
